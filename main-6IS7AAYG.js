import{b as cb}from"./chunk-VQIXZYP3.js";import{a as _,b as W,c as zs,e as ab,f as Li,g as I,h as oh,i as ah,j as lb}from"./chunk-J7E7MDAG.js";function ub(n,e){return Object.is(n,e)}var et=null,qa=!1,ch=1,Fi=Symbol("SIGNAL");function ie(n){let e=et;return et=n,e}function uh(){return et}var Ga={version:0,lastCleanEpoch:0,dirty:!1,producerNode:void 0,producerLastReadVersion:void 0,producerIndexOfThis:void 0,nextProducerIndex:0,liveConsumerNode:void 0,liveConsumerIndexOfThis:void 0,consumerAllowSignalWrites:!1,consumerIsAlwaysLive:!1,kind:"unknown",producerMustRecompute:()=>!1,producerRecomputeValue:()=>{},consumerMarkedDirty:()=>{},consumerOnSignalRead:()=>{}};function dh(n){if(qa)throw new Error("");if(et===null)return;et.consumerOnSignalRead(n);let e=et.nextProducerIndex++;if(Ka(et),e<et.producerNode.length&&et.producerNode[e]!==n&&Ws(et)){let t=et.producerNode[e];Ya(t,et.producerIndexOfThis[e])}et.producerNode[e]!==n&&(et.producerNode[e]=n,et.producerIndexOfThis[e]=Ws(et)?gb(n,et,e):0),et.producerLastReadVersion[e]=n.version}function db(){ch++}function hb(n){if(!(Ws(n)&&!n.dirty)&&!(!n.dirty&&n.lastCleanEpoch===ch)){if(!n.producerMustRecompute(n)&&!ph(n)){lh(n);return}n.producerRecomputeValue(n),lh(n)}}function hh(n){if(n.liveConsumerNode===void 0)return;let e=qa;qa=!0;try{for(let t of n.liveConsumerNode)t.dirty||Fx(t)}finally{qa=e}}function fb(){return et?.consumerAllowSignalWrites!==!1}function Fx(n){n.dirty=!0,hh(n),n.consumerMarkedDirty?.(n)}function lh(n){n.dirty=!1,n.lastCleanEpoch=ch}function fh(n){return n&&(n.nextProducerIndex=0),ie(n)}function pb(n,e){if(ie(e),!(!n||n.producerNode===void 0||n.producerIndexOfThis===void 0||n.producerLastReadVersion===void 0)){if(Ws(n))for(let t=n.nextProducerIndex;t<n.producerNode.length;t++)Ya(n.producerNode[t],n.producerIndexOfThis[t]);for(;n.producerNode.length>n.nextProducerIndex;)n.producerNode.pop(),n.producerLastReadVersion.pop(),n.producerIndexOfThis.pop()}}function ph(n){Ka(n);for(let e=0;e<n.producerNode.length;e++){let t=n.producerNode[e],r=n.producerLastReadVersion[e];if(r!==t.version||(hb(t),r!==t.version))return!0}return!1}function gh(n){if(Ka(n),Ws(n))for(let e=0;e<n.producerNode.length;e++)Ya(n.producerNode[e],n.producerIndexOfThis[e]);n.producerNode.length=n.producerLastReadVersion.length=n.producerIndexOfThis.length=0,n.liveConsumerNode&&(n.liveConsumerNode.length=n.liveConsumerIndexOfThis.length=0)}function gb(n,e,t){if(mb(n),n.liveConsumerNode.length===0&&vb(n))for(let r=0;r<n.producerNode.length;r++)n.producerIndexOfThis[r]=gb(n.producerNode[r],n,r);return n.liveConsumerIndexOfThis.push(t),n.liveConsumerNode.push(e)-1}function Ya(n,e){if(mb(n),n.liveConsumerNode.length===1&&vb(n))for(let r=0;r<n.producerNode.length;r++)Ya(n.producerNode[r],n.producerIndexOfThis[r]);let t=n.liveConsumerNode.length-1;if(n.liveConsumerNode[e]=n.liveConsumerNode[t],n.liveConsumerIndexOfThis[e]=n.liveConsumerIndexOfThis[t],n.liveConsumerNode.length--,n.liveConsumerIndexOfThis.length--,e<n.liveConsumerNode.length){let r=n.liveConsumerIndexOfThis[e],i=n.liveConsumerNode[e];Ka(i),i.producerIndexOfThis[r]=e}}function Ws(n){return n.consumerIsAlwaysLive||(n?.liveConsumerNode?.length??0)>0}function Ka(n){n.producerNode??=[],n.producerIndexOfThis??=[],n.producerLastReadVersion??=[]}function mb(n){n.liveConsumerNode??=[],n.liveConsumerIndexOfThis??=[]}function vb(n){return n.producerNode!==void 0}function jx(){throw new Error}var yb=jx;function Bx(n){yb(n)}function mh(n){yb=n}var Vx=null;function vh(n,e){fb()||Bx(n),n.equal(n.value,e)||(n.value=e,Hx(n))}var yh=W(_({},Ga),{equal:ub,value:void 0,kind:"signal"});function Hx(n){n.version++,db(),hh(n),Vx?.()}function bh(n){let e=ie(null);try{return n()}finally{ie(e)}}var wh;function qs(){return wh}function Gn(n){let e=wh;return wh=n,e}var Xa=Symbol("NotFound");function U(n){return typeof n=="function"}function ji(n){let t=n(r=>{Error.call(r),r.stack=new Error().stack});return t.prototype=Object.create(Error.prototype),t.prototype.constructor=t,t}var Qa=ji(n=>function(t){n(this),this.message=t?`${t.length} errors occurred during unsubscription:
${t.map((r,i)=>`${i+1}) ${r.toString()}`).join(`
  `)}`:"",this.name="UnsubscriptionError",this.errors=t});function Gr(n,e){if(n){let t=n.indexOf(e);0<=t&&n.splice(t,1)}}var Be=class n{constructor(e){this.initialTeardown=e,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let e;if(!this.closed){this.closed=!0;let{_parentage:t}=this;if(t)if(this._parentage=null,Array.isArray(t))for(let s of t)s.remove(this);else t.remove(this);let{initialTeardown:r}=this;if(U(r))try{r()}catch(s){e=s instanceof Qa?s.errors:[s]}let{_finalizers:i}=this;if(i){this._finalizers=null;for(let s of i)try{bb(s)}catch(o){e=e??[],o instanceof Qa?e=[...e,...o.errors]:e.push(o)}}if(e)throw new Qa(e)}}add(e){var t;if(e&&e!==this)if(this.closed)bb(e);else{if(e instanceof n){if(e.closed||e._hasParent(this))return;e._addParent(this)}(this._finalizers=(t=this._finalizers)!==null&&t!==void 0?t:[]).push(e)}}_hasParent(e){let{_parentage:t}=this;return t===e||Array.isArray(t)&&t.includes(e)}_addParent(e){let{_parentage:t}=this;this._parentage=Array.isArray(t)?(t.push(e),t):t?[t,e]:e}_removeParent(e){let{_parentage:t}=this;t===e?this._parentage=null:Array.isArray(t)&&Gr(t,e)}remove(e){let{_finalizers:t}=this;t&&Gr(t,e),e instanceof n&&e._removeParent(this)}};Be.EMPTY=(()=>{let n=new Be;return n.closed=!0,n})();var Eh=Be.EMPTY;function Za(n){return n instanceof Be||n&&"closed"in n&&U(n.remove)&&U(n.add)&&U(n.unsubscribe)}function bb(n){U(n)?n():n.unsubscribe()}var nn={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1};var Bi={setTimeout(n,e,...t){let{delegate:r}=Bi;return r?.setTimeout?r.setTimeout(n,e,...t):setTimeout(n,e,...t)},clearTimeout(n){let{delegate:e}=Bi;return(e?.clearTimeout||clearTimeout)(n)},delegate:void 0};function Ja(n){Bi.setTimeout(()=>{let{onUnhandledError:e}=nn;if(e)e(n);else throw n})}function Gs(){}var wb=Ch("C",void 0,void 0);function Eb(n){return Ch("E",void 0,n)}function Cb(n){return Ch("N",n,void 0)}function Ch(n,e,t){return{kind:n,value:e,error:t}}var Yr=null;function Vi(n){if(nn.useDeprecatedSynchronousErrorHandling){let e=!Yr;if(e&&(Yr={errorThrown:!1,error:null}),n(),e){let{errorThrown:t,error:r}=Yr;if(Yr=null,t)throw r}}else n()}function _b(n){nn.useDeprecatedSynchronousErrorHandling&&Yr&&(Yr.errorThrown=!0,Yr.error=n)}var Kr=class extends Be{constructor(e){super(),this.isStopped=!1,e?(this.destination=e,Za(e)&&e.add(this)):this.destination=Xx}static create(e,t,r){return new Yn(e,t,r)}next(e){this.isStopped?Ah(Cb(e),this):this._next(e)}error(e){this.isStopped?Ah(Eb(e),this):(this.isStopped=!0,this._error(e))}complete(){this.isStopped?Ah(wb,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(e){this.destination.next(e)}_error(e){try{this.destination.error(e)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}},Yx=Function.prototype.bind;function _h(n,e){return Yx.call(n,e)}var Sh=class{constructor(e){this.partialObserver=e}next(e){let{partialObserver:t}=this;if(t.next)try{t.next(e)}catch(r){el(r)}}error(e){let{partialObserver:t}=this;if(t.error)try{t.error(e)}catch(r){el(r)}else el(e)}complete(){let{partialObserver:e}=this;if(e.complete)try{e.complete()}catch(t){el(t)}}},Yn=class extends Kr{constructor(e,t,r){super();let i;if(U(e)||!e)i={next:e??void 0,error:t??void 0,complete:r??void 0};else{let s;this&&nn.useDeprecatedNextContext?(s=Object.create(e),s.unsubscribe=()=>this.unsubscribe(),i={next:e.next&&_h(e.next,s),error:e.error&&_h(e.error,s),complete:e.complete&&_h(e.complete,s)}):i=e}this.destination=new Sh(i)}};function el(n){nn.useDeprecatedSynchronousErrorHandling?_b(n):Ja(n)}function Kx(n){throw n}function Ah(n,e){let{onStoppedNotification:t}=nn;t&&Bi.setTimeout(()=>t(n,e))}var Xx={closed:!0,next:Gs,error:Kx,complete:Gs};var Hi=typeof Symbol=="function"&&Symbol.observable||"@@observable";function yt(n){return n}function Ys(...n){return xh(n)}function xh(n){return n.length===0?yt:n.length===1?n[0]:function(t){return n.reduce((r,i)=>i(r),t)}}var ne=(()=>{class n{constructor(t){t&&(this._subscribe=t)}lift(t){let r=new n;return r.source=this,r.operator=t,r}subscribe(t,r,i){let s=Zx(t)?t:new Yn(t,r,i);return Vi(()=>{let{operator:o,source:a}=this;s.add(o?o.call(s,a):a?this._subscribe(s):this._trySubscribe(s))}),s}_trySubscribe(t){try{return this._subscribe(t)}catch(r){t.error(r)}}forEach(t,r){return r=Ab(r),new r((i,s)=>{let o=new Yn({next:a=>{try{t(a)}catch(l){s(l),o.unsubscribe()}},error:s,complete:i});this.subscribe(o)})}_subscribe(t){var r;return(r=this.source)===null||r===void 0?void 0:r.subscribe(t)}[Hi](){return this}pipe(...t){return xh(t)(this)}toPromise(t){return t=Ab(t),new t((r,i)=>{let s;this.subscribe(o=>s=o,o=>i(o),()=>r(s))})}}return n.create=e=>new n(e),n})();function Ab(n){var e;return(e=n??nn.Promise)!==null&&e!==void 0?e:Promise}function Qx(n){return n&&U(n.next)&&U(n.error)&&U(n.complete)}function Zx(n){return n&&n instanceof Kr||Qx(n)&&Za(n)}function Ih(n){return U(n?.lift)}function Q(n){return e=>{if(Ih(e))return e.lift(function(t){try{return n(t,this)}catch(r){this.error(r)}});throw new TypeError("Unable to lift unknown Observable type")}}function ae(n,e,t,r,i){return new Dh(n,e,t,r,i)}var Dh=class extends Kr{constructor(e,t,r,i,s,o){super(e),this.onFinalize=s,this.shouldUnsubscribe=o,this._next=t?function(a){try{t(a)}catch(l){e.error(l)}}:super._next,this._error=i?function(a){try{i(a)}catch(l){e.error(l)}finally{this.unsubscribe()}}:super._error,this._complete=r?function(){try{r()}catch(a){e.error(a)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var e;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){let{closed:t}=this;super.unsubscribe(),!t&&((e=this.onFinalize)===null||e===void 0||e.call(this))}}};function Ui(){return Q((n,e)=>{let t=null;n._refCount++;let r=ae(e,void 0,void 0,void 0,()=>{if(!n||n._refCount<=0||0<--n._refCount){t=null;return}let i=n._connection,s=t;t=null,i&&(!s||i===s)&&i.unsubscribe(),e.unsubscribe()});n.subscribe(r),r.closed||(t=n.connect())})}var $i=class extends ne{constructor(e,t){super(),this.source=e,this.subjectFactory=t,this._subject=null,this._refCount=0,this._connection=null,Ih(e)&&(this.lift=e.lift)}_subscribe(e){return this.getSubject().subscribe(e)}getSubject(){let e=this._subject;return(!e||e.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;let{_connection:e}=this;this._subject=this._connection=null,e?.unsubscribe()}connect(){let e=this._connection;if(!e){e=this._connection=new Be;let t=this.getSubject();e.add(this.source.subscribe(ae(t,void 0,()=>{this._teardown(),t.complete()},r=>{this._teardown(),t.error(r)},()=>this._teardown()))),e.closed&&(this._connection=null,e=Be.EMPTY)}return e}refCount(){return Ui()(this)}};var Sb=ji(n=>function(){n(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var Oe=(()=>{class n extends ne{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(t){let r=new tl(this,this);return r.operator=t,r}_throwIfClosed(){if(this.closed)throw new Sb}next(t){Vi(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(let r of this.currentObservers)r.next(t)}})}error(t){Vi(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=t;let{observers:r}=this;for(;r.length;)r.shift().error(t)}})}complete(){Vi(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;let{observers:t}=this;for(;t.length;)t.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var t;return((t=this.observers)===null||t===void 0?void 0:t.length)>0}_trySubscribe(t){return this._throwIfClosed(),super._trySubscribe(t)}_subscribe(t){return this._throwIfClosed(),this._checkFinalizedStatuses(t),this._innerSubscribe(t)}_innerSubscribe(t){let{hasError:r,isStopped:i,observers:s}=this;return r||i?Eh:(this.currentObservers=null,s.push(t),new Be(()=>{this.currentObservers=null,Gr(s,t)}))}_checkFinalizedStatuses(t){let{hasError:r,thrownError:i,isStopped:s}=this;r?t.error(i):s&&t.complete()}asObservable(){let t=new ne;return t.source=this,t}}return n.create=(e,t)=>new tl(e,t),n})(),tl=class extends Oe{constructor(e,t){super(),this.destination=e,this.source=t}next(e){var t,r;(r=(t=this.destination)===null||t===void 0?void 0:t.next)===null||r===void 0||r.call(t,e)}error(e){var t,r;(r=(t=this.destination)===null||t===void 0?void 0:t.error)===null||r===void 0||r.call(t,e)}complete(){var e,t;(t=(e=this.destination)===null||e===void 0?void 0:e.complete)===null||t===void 0||t.call(e)}_subscribe(e){var t,r;return(r=(t=this.source)===null||t===void 0?void 0:t.subscribe(e))!==null&&r!==void 0?r:Eh}};var Ge=class extends Oe{constructor(e){super(),this._value=e}get value(){return this.getValue()}_subscribe(e){let t=super._subscribe(e);return!t.closed&&e.next(this._value),t}getValue(){let{hasError:e,thrownError:t,_value:r}=this;if(e)throw t;return this._throwIfClosed(),r}next(e){super.next(this._value=e)}};var Ks={now(){return(Ks.delegate||Date).now()},delegate:void 0};var nl=class extends Oe{constructor(e=1/0,t=1/0,r=Ks){super(),this._bufferSize=e,this._windowTime=t,this._timestampProvider=r,this._buffer=[],this._infiniteTimeWindow=!0,this._infiniteTimeWindow=t===1/0,this._bufferSize=Math.max(1,e),this._windowTime=Math.max(1,t)}next(e){let{isStopped:t,_buffer:r,_infiniteTimeWindow:i,_timestampProvider:s,_windowTime:o}=this;t||(r.push(e),!i&&r.push(s.now()+o)),this._trimBuffer(),super.next(e)}_subscribe(e){this._throwIfClosed(),this._trimBuffer();let t=this._innerSubscribe(e),{_infiniteTimeWindow:r,_buffer:i}=this,s=i.slice();for(let o=0;o<s.length&&!e.closed;o+=r?1:2)e.next(s[o]);return this._checkFinalizedStatuses(e),t}_trimBuffer(){let{_bufferSize:e,_timestampProvider:t,_buffer:r,_infiniteTimeWindow:i}=this,s=(i?1:2)*e;if(e<1/0&&s<r.length&&r.splice(0,r.length-s),!i){let o=t.now(),a=0;for(let l=1;l<r.length&&r[l]<=o;l+=2)a=l;a&&r.splice(0,a+1)}}};var rl=class extends Be{constructor(e,t){super()}schedule(e,t=0){return this}};var Xs={setInterval(n,e,...t){let{delegate:r}=Xs;return r?.setInterval?r.setInterval(n,e,...t):setInterval(n,e,...t)},clearInterval(n){let{delegate:e}=Xs;return(e?.clearInterval||clearInterval)(n)},delegate:void 0};var il=class extends rl{constructor(e,t){super(e,t),this.scheduler=e,this.work=t,this.pending=!1}schedule(e,t=0){var r;if(this.closed)return this;this.state=e;let i=this.id,s=this.scheduler;return i!=null&&(this.id=this.recycleAsyncId(s,i,t)),this.pending=!0,this.delay=t,this.id=(r=this.id)!==null&&r!==void 0?r:this.requestAsyncId(s,this.id,t),this}requestAsyncId(e,t,r=0){return Xs.setInterval(e.flush.bind(e,this),r)}recycleAsyncId(e,t,r=0){if(r!=null&&this.delay===r&&this.pending===!1)return t;t!=null&&Xs.clearInterval(t)}execute(e,t){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;let r=this._execute(e,t);if(r)return r;this.pending===!1&&this.id!=null&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(e,t){let r=!1,i;try{this.work(e)}catch(s){r=!0,i=s||new Error("Scheduled action threw falsy error")}if(r)return this.unsubscribe(),i}unsubscribe(){if(!this.closed){let{id:e,scheduler:t}=this,{actions:r}=t;this.work=this.state=this.scheduler=null,this.pending=!1,Gr(r,this),e!=null&&(this.id=this.recycleAsyncId(t,e,null)),this.delay=null,super.unsubscribe()}}};var zi=class n{constructor(e,t=n.now){this.schedulerActionCtor=e,this.now=t}schedule(e,t=0,r){return new this.schedulerActionCtor(this,e).schedule(r,t)}};zi.now=Ks.now;var sl=class extends zi{constructor(e,t=zi.now){super(e,t),this.actions=[],this._active=!1}flush(e){let{actions:t}=this;if(this._active){t.push(e);return}let r;this._active=!0;do if(r=e.execute(e.state,e.delay))break;while(e=t.shift());if(this._active=!1,r){for(;e=t.shift();)e.unsubscribe();throw r}}};var Th=new sl(il),xb=Th;var ot=new ne(n=>n.complete());function ol(n){return n&&U(n.schedule)}function Mh(n){return n[n.length-1]}function al(n){return U(Mh(n))?n.pop():void 0}function En(n){return ol(Mh(n))?n.pop():void 0}function Ib(n,e){return typeof Mh(n)=="number"?n.pop():e}var Rh=function(n,e){return Rh=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,r){t.__proto__=r}||function(t,r){for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(t[i]=r[i])},Rh(n,e)};function bt(n,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");Rh(n,e);function t(){this.constructor=n}n.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}var rn=function(){return rn=Object.assign||function(e){for(var t,r=1,i=arguments.length;r<i;r++){t=arguments[r];for(var s in t)Object.prototype.hasOwnProperty.call(t,s)&&(e[s]=t[s])}return e},rn.apply(this,arguments)};function he(n,e,t,r){function i(s){return s instanceof t?s:new t(function(o){o(s)})}return new(t||(t=Promise))(function(s,o){function a(u){try{c(r.next(u))}catch(d){o(d)}}function l(u){try{c(r.throw(u))}catch(d){o(d)}}function c(u){u.done?s(u.value):i(u.value).then(a,l)}c((r=r.apply(n,e||[])).next())})}function me(n,e){var t={label:0,sent:function(){if(s[0]&1)throw s[1];return s[1]},trys:[],ops:[]},r,i,s,o=Object.create((typeof Iterator=="function"?Iterator:Object).prototype);return o.next=a(0),o.throw=a(1),o.return=a(2),typeof Symbol=="function"&&(o[Symbol.iterator]=function(){return this}),o;function a(c){return function(u){return l([c,u])}}function l(c){if(r)throw new TypeError("Generator is already executing.");for(;o&&(o=0,c[0]&&(t=0)),t;)try{if(r=1,i&&(s=c[0]&2?i.return:c[0]?i.throw||((s=i.return)&&s.call(i),0):i.next)&&!(s=s.call(i,c[1])).done)return s;switch(i=0,s&&(c=[c[0]&2,s.value]),c[0]){case 0:case 1:s=c;break;case 4:return t.label++,{value:c[1],done:!1};case 5:t.label++,i=c[1],c=[0];continue;case 7:c=t.ops.pop(),t.trys.pop();continue;default:if(s=t.trys,!(s=s.length>0&&s[s.length-1])&&(c[0]===6||c[0]===2)){t=0;continue}if(c[0]===3&&(!s||c[1]>s[0]&&c[1]<s[3])){t.label=c[1];break}if(c[0]===6&&t.label<s[1]){t.label=s[1],s=c;break}if(s&&t.label<s[2]){t.label=s[2],t.ops.push(c);break}s[2]&&t.ops.pop(),t.trys.pop();continue}c=e.call(n,t)}catch(u){c=[6,u],i=0}finally{r=s=0}if(c[0]&5)throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}}function Db(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function ll(){for(var n=0,e=0,t=arguments.length;e<t;e++)n+=arguments[e].length;for(var r=Array(n),i=0,e=0;e<t;e++)for(var s=arguments[e],o=0,a=s.length;o<a;o++,i++)r[i]=s[o];return r}function Xr(n){return this instanceof Xr?(this.v=n,this):new Xr(n)}function Tb(n,e,t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r=t.apply(n,e||[]),i,s=[];return i=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),a("next"),a("throw"),a("return",o),i[Symbol.asyncIterator]=function(){return this},i;function o(f){return function(p){return Promise.resolve(p).then(f,d)}}function a(f,p){r[f]&&(i[f]=function(g){return new Promise(function(v,m){s.push([f,g,v,m])>1||l(f,g)})},p&&(i[f]=p(i[f])))}function l(f,p){try{c(r[f](p))}catch(g){h(s[0][3],g)}}function c(f){f.value instanceof Xr?Promise.resolve(f.value.v).then(u,d):h(s[0][2],f)}function u(f){l("next",f)}function d(f){l("throw",f)}function h(f,p){f(p),s.shift(),s.length&&l(s[0][0],s[0][1])}}function Mb(n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=n[Symbol.asyncIterator],t;return e?e.call(n):(n=typeof Db=="function"?Db(n):n[Symbol.iterator](),t={},r("next"),r("throw"),r("return"),t[Symbol.asyncIterator]=function(){return this},t);function r(s){t[s]=n[s]&&function(o){return new Promise(function(a,l){o=n[s](o),i(a,l,o.done,o.value)})}}function i(s,o,a,l){Promise.resolve(l).then(function(c){s({value:c,done:a})},o)}}function Ye(n,e){return Object.defineProperty?Object.defineProperty(n,"raw",{value:e}):n.raw=e,n}var Wi=n=>n&&typeof n.length=="number"&&typeof n!="function";function cl(n){return U(n?.then)}function ul(n){return U(n[Hi])}function dl(n){return Symbol.asyncIterator&&U(n?.[Symbol.asyncIterator])}function hl(n){return new TypeError(`You provided ${n!==null&&typeof n=="object"?"an invalid object":`'${n}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}function Jx(){return typeof Symbol!="function"||!Symbol.iterator?"@@iterator":Symbol.iterator}var fl=Jx();function pl(n){return U(n?.[fl])}function gl(n){return Tb(this,arguments,function*(){let t=n.getReader();try{for(;;){let{value:r,done:i}=yield Xr(t.read());if(i)return yield Xr(void 0);yield yield Xr(r)}}finally{t.releaseLock()}})}function ml(n){return U(n?.getReader)}function Ie(n){if(n instanceof ne)return n;if(n!=null){if(ul(n))return eI(n);if(Wi(n))return tI(n);if(cl(n))return nI(n);if(dl(n))return Rb(n);if(pl(n))return rI(n);if(ml(n))return iI(n)}throw hl(n)}function eI(n){return new ne(e=>{let t=n[Hi]();if(U(t.subscribe))return t.subscribe(e);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}function tI(n){return new ne(e=>{for(let t=0;t<n.length&&!e.closed;t++)e.next(n[t]);e.complete()})}function nI(n){return new ne(e=>{n.then(t=>{e.closed||(e.next(t),e.complete())},t=>e.error(t)).then(null,Ja)})}function rI(n){return new ne(e=>{for(let t of n)if(e.next(t),e.closed)return;e.complete()})}function Rb(n){return new ne(e=>{sI(n,e).catch(t=>e.error(t))})}function iI(n){return Rb(gl(n))}function sI(n,e){var t,r,i,s;return he(this,void 0,void 0,function*(){try{for(t=Mb(n);r=yield t.next(),!r.done;){let o=r.value;if(e.next(o),e.closed)return}}catch(o){i={error:o}}finally{try{r&&!r.done&&(s=t.return)&&(yield s.call(t))}finally{if(i)throw i.error}}e.complete()})}function Ct(n,e,t,r=0,i=!1){let s=e.schedule(function(){t(),i?n.add(this.schedule(null,r)):this.unsubscribe()},r);if(n.add(s),!i)return s}function vl(n,e=0){return Q((t,r)=>{t.subscribe(ae(r,i=>Ct(r,n,()=>r.next(i),e),()=>Ct(r,n,()=>r.complete(),e),i=>Ct(r,n,()=>r.error(i),e)))})}function yl(n,e=0){return Q((t,r)=>{r.add(n.schedule(()=>t.subscribe(r),e))})}function Ob(n,e){return Ie(n).pipe(yl(e),vl(e))}function Pb(n,e){return Ie(n).pipe(yl(e),vl(e))}function Nb(n,e){return new ne(t=>{let r=0;return e.schedule(function(){r===n.length?t.complete():(t.next(n[r++]),t.closed||this.schedule())})})}function kb(n,e){return new ne(t=>{let r;return Ct(t,e,()=>{r=n[fl](),Ct(t,e,()=>{let i,s;try{({value:i,done:s}=r.next())}catch(o){t.error(o);return}s?t.complete():t.next(i)},0,!0)}),()=>U(r?.return)&&r.return()})}function bl(n,e){if(!n)throw new Error("Iterable cannot be null");return new ne(t=>{Ct(t,e,()=>{let r=n[Symbol.asyncIterator]();Ct(t,e,()=>{r.next().then(i=>{i.done?t.complete():t.next(i.value)})},0,!0)})})}function Lb(n,e){return bl(gl(n),e)}function Fb(n,e){if(n!=null){if(ul(n))return Ob(n,e);if(Wi(n))return Nb(n,e);if(cl(n))return Pb(n,e);if(dl(n))return bl(n,e);if(pl(n))return kb(n,e);if(ml(n))return Lb(n,e)}throw hl(n)}function ve(n,e){return e?Fb(n,e):Ie(n)}function H(...n){let e=En(n);return ve(n,e)}function Kn(n,e){let t=U(n)?n:()=>n,r=i=>i.error(t());return new ne(e?i=>e.schedule(r,0,i):r)}function Qs(n){return!!n&&(n instanceof ne||U(n.lift)&&U(n.subscribe))}var sn=ji(n=>function(){n(this),this.name="EmptyError",this.message="no elements in sequence"});function Pe(n,e){let t=typeof e=="object";return new Promise((r,i)=>{let s=!1,o;n.subscribe({next:a=>{o=a,s=!0},error:i,complete:()=>{s?r(o):t?r(e.defaultValue):i(new sn)}})})}function jb(n){return n instanceof Date&&!isNaN(n)}function $(n,e){return Q((t,r)=>{let i=0;t.subscribe(ae(r,s=>{r.next(n.call(e,s,i++))}))})}var{isArray:oI}=Array;function aI(n,e){return oI(e)?n(...e):n(e)}function qi(n){return $(e=>aI(n,e))}var{isArray:lI}=Array,{getPrototypeOf:cI,prototype:uI,keys:dI}=Object;function Bb(n){if(n.length===1){let e=n[0];if(lI(e))return{args:e,keys:null};if(hI(e)){let t=dI(e);return{args:t.map(r=>e[r]),keys:t}}}return{args:n,keys:null}}function hI(n){return n&&typeof n=="object"&&cI(n)===uI}function Vb(n,e){return n.reduce((t,r,i)=>(t[r]=e[i],t),{})}function Zs(...n){let e=En(n),t=al(n),{args:r,keys:i}=Bb(n);if(r.length===0)return ve([],e);let s=new ne(Oh(r,e,i?o=>Vb(i,o):yt));return t?s.pipe(qi(t)):s}function Oh(n,e,t=yt){return r=>{Hb(e,()=>{let{length:i}=n,s=new Array(i),o=i,a=i;for(let l=0;l<i;l++)Hb(e,()=>{let c=ve(n[l],e),u=!1;c.subscribe(ae(r,d=>{s[l]=d,u||(u=!0,a--),a||r.next(t(s.slice()))},()=>{--o||r.complete()}))},r)},r)}}function Hb(n,e,t){n?Ct(t,n,e):e()}function Ub(n,e,t,r,i,s,o,a){let l=[],c=0,u=0,d=!1,h=()=>{d&&!l.length&&!c&&e.complete()},f=g=>c<r?p(g):l.push(g),p=g=>{s&&e.next(g),c++;let v=!1;Ie(t(g,u++)).subscribe(ae(e,m=>{i?.(m),s?f(m):e.next(m)},()=>{v=!0},void 0,()=>{if(v)try{for(c--;l.length&&c<r;){let m=l.shift();o?Ct(e,o,()=>p(m)):p(m)}h()}catch(m){e.error(m)}}))};return n.subscribe(ae(e,f,()=>{d=!0,h()})),()=>{a?.()}}function Ce(n,e,t=1/0){return U(e)?Ce((r,i)=>$((s,o)=>e(r,s,i,o))(Ie(n(r,i))),t):(typeof e=="number"&&(t=e),Q((r,i)=>Ub(r,i,n,t)))}function Er(n=1/0){return Ce(yt,n)}function $b(){return Er(1)}function Xn(...n){return $b()(ve(n,En(n)))}function Qr(n){return new ne(e=>{Ie(n()).subscribe(e)})}var fI=["addListener","removeListener"],pI=["addEventListener","removeEventListener"],gI=["on","off"];function Ne(n,e,t,r){if(U(t)&&(r=t,t=void 0),r)return Ne(n,e,t).pipe(qi(r));let[i,s]=yI(n)?pI.map(o=>a=>n[o](e,a,t)):mI(n)?fI.map(zb(n,e)):vI(n)?gI.map(zb(n,e)):[];if(!i&&Wi(n))return Ce(o=>Ne(o,e,t))(Ie(n));if(!i)throw new TypeError("Invalid event target");return new ne(o=>{let a=(...l)=>o.next(1<l.length?l:l[0]);return i(a),()=>s(a)})}function zb(n,e){return t=>r=>n[t](e,r)}function mI(n){return U(n.addListener)&&U(n.removeListener)}function vI(n){return U(n.on)&&U(n.off)}function yI(n){return U(n.addEventListener)&&U(n.removeEventListener)}function Ph(n=0,e,t=xb){let r=-1;return e!=null&&(ol(e)?t=e:r=e),new ne(i=>{let s=jb(n)?+n-t.now():n;s<0&&(s=0);let o=0;return t.schedule(function(){i.closed||(i.next(o++),0<=r?this.schedule(void 0,r):i.complete())},s)})}function Nh(...n){let e=En(n),t=Ib(n,1/0),r=n;return r.length?r.length===1?Ie(r[0]):Er(t)(ve(r,e)):ot}var{isArray:bI}=Array;function Wb(n){return n.length===1&&bI(n[0])?n[0]:n}function Ve(n,e){return Q((t,r)=>{let i=0;t.subscribe(ae(r,s=>n.call(e,s,i++)&&r.next(s)))})}function Ot(n){return Q((e,t)=>{let r=null,i=!1,s;r=e.subscribe(ae(t,void 0,void 0,o=>{s=Ie(n(o,Ot(n)(e))),r?(r.unsubscribe(),r=null,s.subscribe(t)):i=!0})),i&&(r.unsubscribe(),r=null,s.subscribe(t))})}function qb(n,e,t,r,i){return(s,o)=>{let a=t,l=e,c=0;s.subscribe(ae(o,u=>{let d=c++;l=a?n(l,u,d):(a=!0,u),r&&o.next(l)},i&&(()=>{a&&o.next(l),o.complete()})))}}function kh(...n){let e=al(n);return e?Ys(kh(...n),qi(e)):Q((t,r)=>{Oh([t,...Wb(n)])(r)})}function Lh(...n){return kh(...n)}function Cr(n,e){return U(e)?Ce(n,e,1):Ce(n,1)}function Fh(n,e=Th){return Q((t,r)=>{let i=null,s=null,o=null,a=()=>{if(i){i.unsubscribe(),i=null;let c=s;s=null,r.next(c)}};function l(){let c=o+n,u=e.now();if(u<c){i=this.schedule(void 0,c-u),r.add(i);return}a()}t.subscribe(ae(r,c=>{s=c,o=e.now(),i||(i=e.schedule(l,n),r.add(i))},()=>{a(),r.complete()},void 0,()=>{s=i=null}))})}function _r(n){return Q((e,t)=>{let r=!1;e.subscribe(ae(t,i=>{r=!0,t.next(i)},()=>{r||t.next(n),t.complete()}))})}function Qn(n){return n<=0?()=>ot:Q((e,t)=>{let r=0;e.subscribe(ae(t,i=>{++r<=n&&(t.next(i),n<=r&&t.complete())}))})}function wl(n,e=yt){return n=n??wI,Q((t,r)=>{let i,s=!0;t.subscribe(ae(r,o=>{let a=e(o);(s||!n(i,a))&&(s=!1,i=a,r.next(o))}))})}function wI(n,e){return n===e}function El(n=EI){return Q((e,t)=>{let r=!1;e.subscribe(ae(t,i=>{r=!0,t.next(i)},()=>r?t.complete():t.error(n())))})}function EI(){return new sn}function Cn(n){return Q((e,t)=>{try{e.subscribe(t)}finally{t.add(n)}})}function Zn(n,e){let t=arguments.length>=2;return r=>r.pipe(n?Ve((i,s)=>n(i,s,r)):yt,Qn(1),t?_r(e):El(()=>new sn))}function Gi(n){return n<=0?()=>ot:Q((e,t)=>{let r=[];e.subscribe(ae(t,i=>{r.push(i),n<r.length&&r.shift()},()=>{for(let i of r)t.next(i);t.complete()},void 0,()=>{r=null}))})}function jh(n,e){let t=arguments.length>=2;return r=>r.pipe(n?Ve((i,s)=>n(i,s,r)):yt,Gi(1),t?_r(e):El(()=>new sn))}function Bh(n,e){return Q(qb(n,e,arguments.length>=2,!0))}function Js(n={}){let{connector:e=()=>new Oe,resetOnError:t=!0,resetOnComplete:r=!0,resetOnRefCountZero:i=!0}=n;return s=>{let o,a,l,c=0,u=!1,d=!1,h=()=>{a?.unsubscribe(),a=void 0},f=()=>{h(),o=l=void 0,u=d=!1},p=()=>{let g=o;f(),g?.unsubscribe()};return Q((g,v)=>{c++,!d&&!u&&h();let m=l=l??e();v.add(()=>{c--,c===0&&!d&&!u&&(a=Vh(p,i))}),m.subscribe(v),!o&&c>0&&(o=new Yn({next:y=>m.next(y),error:y=>{d=!0,h(),a=Vh(f,t,y),m.error(y)},complete:()=>{u=!0,h(),a=Vh(f,r),m.complete()}}),Ie(g).subscribe(o))})(s)}}function Vh(n,e,...t){if(e===!0){n();return}if(e===!1)return;let r=new Yn({next:()=>{r.unsubscribe(),n()}});return Ie(e(...t)).subscribe(r)}function Hh(n,e,t){let r,i=!1;return n&&typeof n=="object"?{bufferSize:r=1/0,windowTime:e=1/0,refCount:i=!1,scheduler:t}=n:r=n??1/0,Js({connector:()=>new nl(r,e,t),resetOnError:!0,resetOnComplete:!1,resetOnRefCountZero:i})}function Uh(...n){let e=En(n);return Q((t,r)=>{(e?Xn(n,t,e):Xn(n,t)).subscribe(r)})}function qt(n,e){return Q((t,r)=>{let i=null,s=0,o=!1,a=()=>o&&!i&&r.complete();t.subscribe(ae(r,l=>{i?.unsubscribe();let c=0,u=s++;Ie(n(l,u)).subscribe(i=ae(r,d=>r.next(e?e(l,d,u,c++):d),()=>{i=null,a()}))},()=>{o=!0,a()}))})}function Se(n){return Q((e,t)=>{Ie(n).subscribe(ae(t,()=>t.complete(),Gs)),!t.closed&&e.subscribe(t)})}function Qe(n,e,t){let r=U(n)||e||t?{next:n,error:e,complete:t}:n;return r?Q((i,s)=>{var o;(o=r.subscribe)===null||o===void 0||o.call(r);let a=!0;i.subscribe(ae(s,l=>{var c;(c=r.next)===null||c===void 0||c.call(r,l),s.next(l)},()=>{var l;a=!1,(l=r.complete)===null||l===void 0||l.call(r),s.complete()},l=>{var c;a=!1,(c=r.error)===null||c===void 0||c.call(r,l),s.error(l)},()=>{var l,c;a&&((l=r.unsubscribe)===null||l===void 0||l.call(r)),(c=r.finalize)===null||c===void 0||c.call(r)}))}):yt}var O0="https://angular.dev/best-practices/security#preventing-cross-site-scripting-xss",j=class extends Error{code;constructor(e,t){super(P0(e,t)),this.code=e}};function CI(n){return`NG0${Math.abs(n)}`}function P0(n,e){return`${CI(n)}${e?": "+e:""}`}var N0=Symbol("InputSignalNode#UNSET"),_I=W(_({},yh),{transformFn:void 0,applyValueToInputSignal(n,e){vh(n,e)}});function k0(n,e){let t=Object.create(_I);t.value=n,t.transformFn=e?.transform;function r(){if(dh(t),t.value===N0){let i=null;throw new j(-950,i)}return t.value}return r[Fi]=t,r}function po(n){return{toString:n}.toString()}var Cl="__parameters__";function AI(n){return function(...t){if(n){let r=n(...t);for(let i in r)this[i]=r[i]}}}function L0(n,e,t){return po(()=>{let r=AI(e);function i(...s){if(this instanceof i)return r.apply(this,s),this;let o=new i(...s);return a.annotation=o,a;function a(l,c,u){let d=l.hasOwnProperty(Cl)?l[Cl]:Object.defineProperty(l,Cl,{value:[]})[Cl];for(;d.length<=u;)d.push(null);return(d[u]=d[u]||[]).push(o),l}}return i.prototype.ngMetadataName=n,i.annotationCls=i,i})}function Ae(n){for(let e in n)if(n[e]===Ae)return e;throw Error("Could not find renamed property on target object.")}function Pt(n){if(typeof n=="string")return n;if(Array.isArray(n))return`[${n.map(Pt).join(", ")}]`;if(n==null)return""+n;let e=n.overriddenName||n.name;if(e)return`${e}`;let t=n.toString();if(t==null)return""+t;let r=t.indexOf(`
`);return r>=0?t.slice(0,r):t}function Gb(n,e){return n?e?`${n} ${e}`:n:e||""}var SI=Ae({__forward_ref__:Ae});function F0(n){return n.__forward_ref__=F0,n.toString=function(){return Pt(this())},n}function Gt(n){return j0(n)?n():n}function j0(n){return typeof n=="function"&&n.hasOwnProperty(SI)&&n.__forward_ref__===F0}function k(n){return{token:n.token,providedIn:n.providedIn||null,factory:n.factory,value:void 0}}function Ir(n){return{providers:n.providers||[],imports:n.imports||[]}}function Jl(n){return Yb(n,V0)||Yb(n,H0)}function B0(n){return Jl(n)!==null}function Yb(n,e){return n.hasOwnProperty(e)?n[e]:null}function xI(n){let e=n&&(n[V0]||n[H0]);return e||null}function Kb(n){return n&&(n.hasOwnProperty(Xb)||n.hasOwnProperty(II))?n[Xb]:null}var V0=Ae({\u0275prov:Ae}),Xb=Ae({\u0275inj:Ae}),H0=Ae({ngInjectableDef:Ae}),II=Ae({ngInjectorDef:Ae}),z=class{_desc;ngMetadataName="InjectionToken";\u0275prov;constructor(e,t){this._desc=e,this.\u0275prov=void 0,typeof t=="number"?this.__NG_ELEMENT_ID__=t:t!==void 0&&(this.\u0275prov=k({token:this,providedIn:t.providedIn||"root",factory:t.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}};function U0(n){return n&&!!n.\u0275providers}var DI=Ae({\u0275cmp:Ae}),TI=Ae({\u0275dir:Ae}),MI=Ae({\u0275pipe:Ae}),RI=Ae({\u0275mod:Ae}),Tl=Ae({\u0275fac:Ae}),ro=Ae({__NG_ELEMENT_ID__:Ae}),Qb=Ae({__NG_ENV_ID__:Ae});function ec(n){return typeof n=="string"?n:n==null?"":String(n)}function OI(n){return typeof n=="function"?n.name||n.toString():typeof n=="object"&&n!=null&&typeof n.type=="function"?n.type.name||n.type.toString():ec(n)}function $0(n,e){throw new j(-200,n)}function Yf(n,e){throw new j(-201,!1)}var se=function(n){return n[n.Default=0]="Default",n[n.Host=1]="Host",n[n.Self=2]="Self",n[n.SkipSelf=4]="SkipSelf",n[n.Optional=8]="Optional",n}(se||{}),Qh;function z0(){return Qh}function _t(n){let e=Qh;return Qh=n,e}function W0(n,e,t){let r=Jl(n);if(r&&r.providedIn=="root")return r.value===void 0?r.value=r.factory():r.value;if(t&se.Optional)return null;if(e!==void 0)return e;Yf(n,"Injector")}var PI={},Zr=PI,Zh="__NG_DI_FLAG__",Ml=class{injector;constructor(e){this.injector=e}retrieve(e,t){let r=t;return this.injector.get(e,r.optional?Xa:Zr,r)}},Rl="ngTempTokenPath",NI="ngTokenPath",kI=/\n/gm,LI="\u0275",Zb="__source";function FI(n,e=se.Default){if(qs()===void 0)throw new j(-203,!1);if(qs()===null)return W0(n,void 0,e);{let t=qs(),r;return t instanceof Ml?r=t.injector:r=t,r.get(n,e&se.Optional?null:void 0,e)}}function q(n,e=se.Default){return(z0()||FI)(Gt(n),e)}function R(n,e=se.Default){return q(n,tc(e))}function tc(n){return typeof n>"u"||typeof n=="number"?n:0|(n.optional&&8)|(n.host&&1)|(n.self&&2)|(n.skipSelf&&4)}function Jh(n){let e=[];for(let t=0;t<n.length;t++){let r=Gt(n[t]);if(Array.isArray(r)){if(r.length===0)throw new j(900,!1);let i,s=se.Default;for(let o=0;o<r.length;o++){let a=r[o],l=jI(a);typeof l=="number"?l===-1?i=a.token:s|=l:i=a}e.push(q(i,s))}else e.push(q(r))}return e}function q0(n,e){return n[Zh]=e,n.prototype[Zh]=e,n}function jI(n){return n[Zh]}function BI(n,e,t,r){let i=n[Rl];throw e[Zb]&&i.unshift(e[Zb]),n.message=VI(`
`+n.message,i,t,r),n[NI]=i,n[Rl]=null,n}function VI(n,e,t,r=null){n=n&&n.charAt(0)===`
`&&n.charAt(1)==LI?n.slice(2):n;let i=Pt(e);if(Array.isArray(e))i=e.map(Pt).join(" -> ");else if(typeof e=="object"){let s=[];for(let o in e)if(e.hasOwnProperty(o)){let a=e[o];s.push(o+":"+(typeof a=="string"?JSON.stringify(a):Pt(a)))}i=`{${s.join(", ")}}`}return`${t}${r?"("+r+")":""}[${i}]: ${n.replace(kI,`
  `)}`}var HI=q0(L0("Optional"),8);var UI=q0(L0("SkipSelf"),4);function ei(n,e){let t=n.hasOwnProperty(Tl);return t?n[Tl]:null}function $I(n,e,t){if(n.length!==e.length)return!1;for(let r=0;r<n.length;r++){let i=n[r],s=e[r];if(t&&(i=t(i),s=t(s)),s!==i)return!1}return!0}function zI(n){return n.flat(Number.POSITIVE_INFINITY)}function Kf(n,e){n.forEach(t=>Array.isArray(t)?Kf(t,e):e(t))}function G0(n,e,t){e>=n.length?n.push(t):n.splice(e,0,t)}function Ol(n,e){return e>=n.length-1?n.pop():n.splice(e,1)[0]}var es={},_n=[],io=new z(""),Y0=new z("",-1),K0=new z(""),Pl=class{get(e,t=Zr){if(t===Zr){let r=new Error(`NullInjectorError: No provider for ${Pt(e)}!`);throw r.name="NullInjectorError",r}return t}};function X0(n,e){let t=n[RI]||null;if(!t&&e===!0)throw new Error(`Type ${Pt(n)} does not have '\u0275mod' property.`);return t}function ti(n){return n[DI]||null}function WI(n){return n[TI]||null}function qI(n){return n[MI]||null}function nc(n){return{\u0275providers:n}}function GI(...n){return{\u0275providers:Q0(!0,n),\u0275fromNgModule:!0}}function Q0(n,...e){let t=[],r=new Set,i,s=o=>{t.push(o)};return Kf(e,o=>{let a=o;ef(a,s,[],r)&&(i||=[],i.push(a))}),i!==void 0&&Z0(i,s),t}function Z0(n,e){for(let t=0;t<n.length;t++){let{ngModule:r,providers:i}=n[t];Xf(i,s=>{e(s,r)})}}function ef(n,e,t,r){if(n=Gt(n),!n)return!1;let i=null,s=Kb(n),o=!s&&ti(n);if(!s&&!o){let l=n.ngModule;if(s=Kb(l),s)i=l;else return!1}else{if(o&&!o.standalone)return!1;i=n}let a=r.has(i);if(o){if(a)return!1;if(r.add(i),o.dependencies){let l=typeof o.dependencies=="function"?o.dependencies():o.dependencies;for(let c of l)ef(c,e,t,r)}}else if(s){if(s.imports!=null&&!a){r.add(i);let c;try{Kf(s.imports,u=>{ef(u,e,t,r)&&(c||=[],c.push(u))})}finally{}c!==void 0&&Z0(c,e)}if(!a){let c=ei(i)||(()=>new i);e({provide:i,useFactory:c,deps:_n},i),e({provide:K0,useValue:i,multi:!0},i),e({provide:io,useValue:()=>q(i),multi:!0},i)}let l=s.providers;if(l!=null&&!a){let c=n;Xf(l,u=>{e(u,c)})}}else return!1;return i!==n&&n.providers!==void 0}function Xf(n,e){for(let t of n)U0(t)&&(t=t.\u0275providers),Array.isArray(t)?Xf(t,e):e(t)}var YI=Ae({provide:String,useValue:Ae});function J0(n){return n!==null&&typeof n=="object"&&YI in n}function KI(n){return!!(n&&n.useExisting)}function XI(n){return!!(n&&n.useFactory)}function tf(n){return typeof n=="function"}var rc=new z(""),_l={},Jb={},$h;function Qf(){return $h===void 0&&($h=new Pl),$h}var At=class{},so=class extends At{parent;source;scopes;records=new Map;_ngOnDestroyHooks=new Set;_onDestroyHooks=[];get destroyed(){return this._destroyed}_destroyed=!1;injectorDefTypes;constructor(e,t,r,i){super(),this.parent=t,this.source=r,this.scopes=i,rf(e,o=>this.processProvider(o)),this.records.set(Y0,Yi(void 0,this)),i.has("environment")&&this.records.set(At,Yi(void 0,this));let s=this.records.get(rc);s!=null&&typeof s.value=="string"&&this.scopes.add(s.value),this.injectorDefTypes=new Set(this.get(K0,_n,se.Self))}retrieve(e,t){let r=t;return this.get(e,r.optional?Xa:Zr,r)}destroy(){to(this),this._destroyed=!0;let e=ie(null);try{for(let r of this._ngOnDestroyHooks)r.ngOnDestroy();let t=this._onDestroyHooks;this._onDestroyHooks=[];for(let r of t)r()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear(),ie(e)}}onDestroy(e){return to(this),this._onDestroyHooks.push(e),()=>this.removeOnDestroy(e)}runInContext(e){to(this);let t=Gn(this),r=_t(void 0),i;try{return e()}finally{Gn(t),_t(r)}}get(e,t=Zr,r=se.Default){if(to(this),e.hasOwnProperty(Qb))return e[Qb](this);r=tc(r);let i,s=Gn(this),o=_t(void 0);try{if(!(r&se.SkipSelf)){let l=this.records.get(e);if(l===void 0){let c=nD(e)&&Jl(e);c&&this.injectableDefInScope(c)?l=Yi(nf(e),_l):l=null,this.records.set(e,l)}if(l!=null)return this.hydrate(e,l)}let a=r&se.Self?Qf():this.parent;return t=r&se.Optional&&t===Zr?null:t,a.get(e,t)}catch(a){if(a.name==="NullInjectorError"){if((a[Rl]=a[Rl]||[]).unshift(Pt(e)),s)throw a;return BI(a,e,"R3InjectorError",this.source)}else throw a}finally{_t(o),Gn(s)}}resolveInjectorInitializers(){let e=ie(null),t=Gn(this),r=_t(void 0),i;try{let s=this.get(io,_n,se.Self);for(let o of s)o()}finally{Gn(t),_t(r),ie(e)}}toString(){let e=[],t=this.records;for(let r of t.keys())e.push(Pt(r));return`R3Injector[${e.join(", ")}]`}processProvider(e){e=Gt(e);let t=tf(e)?e:Gt(e&&e.provide),r=ZI(e);if(!tf(e)&&e.multi===!0){let i=this.records.get(t);i||(i=Yi(void 0,_l,!0),i.factory=()=>Jh(i.multi),this.records.set(t,i)),t=e,i.multi.push(e)}this.records.set(t,r)}hydrate(e,t){let r=ie(null);try{return t.value===Jb?$0(Pt(e)):t.value===_l&&(t.value=Jb,t.value=t.factory()),typeof t.value=="object"&&t.value&&tD(t.value)&&this._ngOnDestroyHooks.add(t.value),t.value}finally{ie(r)}}injectableDefInScope(e){if(!e.providedIn)return!1;let t=Gt(e.providedIn);return typeof t=="string"?t==="any"||this.scopes.has(t):this.injectorDefTypes.has(t)}removeOnDestroy(e){let t=this._onDestroyHooks.indexOf(e);t!==-1&&this._onDestroyHooks.splice(t,1)}};function nf(n){let e=Jl(n),t=e!==null?e.factory:ei(n);if(t!==null)return t;if(n instanceof z)throw new j(204,!1);if(n instanceof Function)return QI(n);throw new j(204,!1)}function QI(n){if(n.length>0)throw new j(204,!1);let t=xI(n);return t!==null?()=>t.factory(n):()=>new n}function ZI(n){if(J0(n))return Yi(void 0,n.useValue);{let e=JI(n);return Yi(e,_l)}}function JI(n,e,t){let r;if(tf(n)){let i=Gt(n);return ei(i)||nf(i)}else if(J0(n))r=()=>Gt(n.useValue);else if(XI(n))r=()=>n.useFactory(...Jh(n.deps||[]));else if(KI(n))r=()=>q(Gt(n.useExisting));else{let i=Gt(n&&(n.useClass||n.provide));if(eD(n))r=()=>new i(...Jh(n.deps));else return ei(i)||nf(i)}return r}function to(n){if(n.destroyed)throw new j(205,!1)}function Yi(n,e,t=!1){return{factory:n,value:e,multi:t?[]:void 0}}function eD(n){return!!n.deps}function tD(n){return n!==null&&typeof n=="object"&&typeof n.ngOnDestroy=="function"}function nD(n){return typeof n=="function"||typeof n=="object"&&n instanceof z}function rf(n,e){for(let t of n)Array.isArray(t)?rf(t,e):t&&U0(t)?rf(t.\u0275providers,e):e(t)}function Kt(n,e){let t;n instanceof so?(to(n),t=n):t=new Ml(n);let r,i=Gn(t),s=_t(void 0);try{return e()}finally{Gn(i),_t(s)}}function ew(){return z0()!==void 0||qs()!=null}function rD(n){if(!ew())throw new j(-203,!1)}function iD(n){return typeof n=="function"}var tr=0,Z=1,K=2,ft=3,an=4,un=5,oo=6,Nl=7,tt=8,ts=9,Jn=10,ct=11,ao=12,e0=13,ls=14,ln=15,ni=16,Ki=17,er=18,ic=19,tw=20,Ar=21,zh=22,kl=23,Yt=24,Zi=25,St=26,nw=1;var ri=7,Ll=8,ns=9,ht=10;function Sr(n){return Array.isArray(n)&&typeof n[nw]=="object"}function nr(n){return Array.isArray(n)&&n[nw]===!0}function rw(n){return(n.flags&4)!==0}function cs(n){return n.componentOffset>-1}function Zf(n){return(n.flags&1)===1}function li(n){return!!n.template}function Fl(n){return(n[K]&512)!==0}function go(n){return(n[K]&256)===256}var sf=class{previousValue;currentValue;firstChange;constructor(e,t,r){this.previousValue=e,this.currentValue=t,this.firstChange=r}isFirstChange(){return this.firstChange}};function iw(n,e,t,r){e!==null?e.applyValueToInputSignal(e,r):n[t]=r}var us=(()=>{let n=()=>sw;return n.ngInherit=!0,n})();function sw(n){return n.type.prototype.ngOnChanges&&(n.setInput=oD),sD}function sD(){let n=aw(this),e=n?.current;if(e){let t=n.previous;if(t===es)n.previous=e;else for(let r in e)t[r]=e[r];n.current=null,this.ngOnChanges(e)}}function oD(n,e,t,r,i){let s=this.declaredInputs[r],o=aw(n)||aD(n,{previous:es,current:null}),a=o.current||(o.current={}),l=o.previous,c=l[s];a[s]=new sf(c&&c.currentValue,t,l===es),iw(n,e,i,t)}var ow="__ngSimpleChanges__";function aw(n){return n[ow]||null}function aD(n,e){return n[ow]=e}var t0=null;var _e=function(n,e=null,t){t0?.(n,e,t)},lw="svg",lD="math";function Sn(n){for(;Array.isArray(n);)n=n[tr];return n}function cD(n,e){return Sn(e[n])}function Tn(n,e){return Sn(e[n.index])}function Jf(n,e){return n.data[e]}function uD(n,e){return n[e]}function xn(n,e){let t=e[n];return Sr(t)?t:t[tr]}function dD(n){return(n[K]&4)===4}function ep(n){return(n[K]&128)===128}function hD(n){return nr(n[ft])}function rs(n,e){return e==null?null:n[e]}function cw(n){n[Ki]=0}function uw(n){n[K]&1024||(n[K]|=1024,ep(n)&&mo(n))}function fD(n,e){for(;n>0;)e=e[ls],n--;return e}function sc(n){return!!(n[K]&9216||n[Yt]?.dirty)}function of(n){n[Jn].changeDetectionScheduler?.notify(8),n[K]&64&&(n[K]|=1024),sc(n)&&mo(n)}function mo(n){n[Jn].changeDetectionScheduler?.notify(0);let e=ii(n);for(;e!==null&&!(e[K]&8192||(e[K]|=8192,!ep(e)));)e=ii(e)}function dw(n,e){if(go(n))throw new j(911,!1);n[Ar]===null&&(n[Ar]=[]),n[Ar].push(e)}function pD(n,e){if(n[Ar]===null)return;let t=n[Ar].indexOf(e);t!==-1&&n[Ar].splice(t,1)}function ii(n){let e=n[ft];return nr(e)?e[ft]:e}function tp(n){return n[Nl]??=[]}function np(n){return n.cleanup??=[]}function gD(n,e,t,r){let i=tp(e);i.push(t),n.firstCreatePass&&np(n).push(r,i.length-1)}var le={lFrame:Ew(null),bindingsEnabled:!0,skipHydrationRootTNode:null};var af=!1;function mD(){return le.lFrame.elementDepthCount}function vD(){le.lFrame.elementDepthCount++}function yD(){le.lFrame.elementDepthCount--}function hw(){return le.bindingsEnabled}function bD(){return le.skipHydrationRootTNode!==null}function wD(n){return le.skipHydrationRootTNode===n}function ED(){le.skipHydrationRootTNode=null}function ge(){return le.lFrame.lView}function Nt(){return le.lFrame.tView}function fw(n){return le.lFrame.contextLView=n,n[tt]}function pw(n){return le.lFrame.contextLView=null,n}function dn(){let n=gw();for(;n!==null&&n.type===64;)n=n.parent;return n}function gw(){return le.lFrame.currentTNode}function CD(){let n=le.lFrame,e=n.currentTNode;return n.isParent?e:e.parent}function vo(n,e){let t=le.lFrame;t.currentTNode=n,t.isParent=e}function mw(){return le.lFrame.isParent}function _D(){le.lFrame.isParent=!1}function vw(){return af}function n0(n){let e=af;return af=n,e}function rp(){let n=le.lFrame,e=n.bindingRootIndex;return e===-1&&(e=n.bindingRootIndex=n.tView.bindingStartIndex),e}function AD(n){return le.lFrame.bindingIndex=n}function yo(){return le.lFrame.bindingIndex++}function SD(){return le.lFrame.inI18n}function xD(n,e){let t=le.lFrame;t.bindingIndex=t.bindingRootIndex=n,lf(e)}function ID(){return le.lFrame.currentDirectiveIndex}function lf(n){le.lFrame.currentDirectiveIndex=n}function yw(){return le.lFrame.currentQueryIndex}function ip(n){le.lFrame.currentQueryIndex=n}function DD(n){let e=n[Z];return e.type===2?e.declTNode:e.type===1?n[un]:null}function bw(n,e,t){if(t&se.SkipSelf){let i=e,s=n;for(;i=i.parent,i===null&&!(t&se.Host);)if(i=DD(s),i===null||(s=s[ls],i.type&10))break;if(i===null)return!1;e=i,n=s}let r=le.lFrame=ww();return r.currentTNode=e,r.lView=n,!0}function sp(n){let e=ww(),t=n[Z];le.lFrame=e,e.currentTNode=t.firstChild,e.lView=n,e.tView=t,e.contextLView=n,e.bindingIndex=t.bindingStartIndex,e.inI18n=!1}function ww(){let n=le.lFrame,e=n===null?null:n.child;return e===null?Ew(n):e}function Ew(n){let e={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:n,child:null,inI18n:!1};return n!==null&&(n.child=e),e}function Cw(){let n=le.lFrame;return le.lFrame=n.parent,n.currentTNode=null,n.lView=null,n}var _w=Cw;function op(){let n=Cw();n.isParent=!0,n.tView=null,n.selectedIndex=-1,n.contextLView=null,n.elementDepthCount=0,n.currentDirectiveIndex=-1,n.currentNamespace=null,n.bindingRootIndex=-1,n.bindingIndex=-1,n.currentQueryIndex=0}function TD(n){return(le.lFrame.contextLView=fD(n,le.lFrame.contextLView))[tt]}function oc(){return le.lFrame.selectedIndex}function si(n){le.lFrame.selectedIndex=n}function ap(){let n=le.lFrame;return Jf(n.tView,n.selectedIndex)}function hn(){le.lFrame.currentNamespace=lw}function bo(){MD()}function MD(){le.lFrame.currentNamespace=null}function RD(){return le.lFrame.currentNamespace}var Aw=!0;function lp(){return Aw}function cp(n){Aw=n}function OD(n,e,t){let{ngOnChanges:r,ngOnInit:i,ngDoCheck:s}=e.type.prototype;if(r){let o=sw(e);(t.preOrderHooks??=[]).push(n,o),(t.preOrderCheckHooks??=[]).push(n,o)}i&&(t.preOrderHooks??=[]).push(0-n,i),s&&((t.preOrderHooks??=[]).push(n,s),(t.preOrderCheckHooks??=[]).push(n,s))}function Sw(n,e){for(let t=e.directiveStart,r=e.directiveEnd;t<r;t++){let s=n.data[t].type.prototype,{ngAfterContentInit:o,ngAfterContentChecked:a,ngAfterViewInit:l,ngAfterViewChecked:c,ngOnDestroy:u}=s;o&&(n.contentHooks??=[]).push(-t,o),a&&((n.contentHooks??=[]).push(t,a),(n.contentCheckHooks??=[]).push(t,a)),l&&(n.viewHooks??=[]).push(-t,l),c&&((n.viewHooks??=[]).push(t,c),(n.viewCheckHooks??=[]).push(t,c)),u!=null&&(n.destroyHooks??=[]).push(t,u)}}function Al(n,e,t){xw(n,e,3,t)}function Sl(n,e,t,r){(n[K]&3)===t&&xw(n,e,t,r)}function Wh(n,e){let t=n[K];(t&3)===e&&(t&=16383,t+=1,n[K]=t)}function xw(n,e,t,r){let i=r!==void 0?n[Ki]&65535:0,s=r??-1,o=e.length-1,a=0;for(let l=i;l<o;l++)if(typeof e[l+1]=="number"){if(a=e[l],r!=null&&a>=r)break}else e[l]<0&&(n[Ki]+=65536),(a<s||s==-1)&&(PD(n,t,e,l),n[Ki]=(n[Ki]&4294901760)+l+2),l++}function r0(n,e){_e(4,n,e);let t=ie(null);try{e.call(n)}finally{ie(t),_e(5,n,e)}}function PD(n,e,t,r){let i=t[r]<0,s=t[r+1],o=i?-t[r]:t[r],a=n[o];i?n[K]>>14<n[Ki]>>16&&(n[K]&3)===e&&(n[K]+=16384,r0(a,s)):r0(a,s)}var Ji=-1,lo=class{factory;injectImpl;resolving=!1;canSeeViewProviders;multi;componentProviders;index;providerFactory;constructor(e,t,r){this.factory=e,this.canSeeViewProviders=t,this.injectImpl=r}};function ND(n){return(n.flags&8)!==0}function kD(n){return(n.flags&16)!==0}function LD(n,e,t){let r=0;for(;r<t.length;){let i=t[r];if(typeof i=="number"){if(i!==0)break;r++;let s=t[r++],o=t[r++],a=t[r++];n.setAttribute(e,o,a,s)}else{let s=i,o=t[++r];jD(s)?n.setProperty(e,s,o):n.setAttribute(e,s,o),r++}}return r}function FD(n){return n===3||n===4||n===6}function jD(n){return n.charCodeAt(0)===64}function up(n,e){if(!(e===null||e.length===0))if(n===null||n.length===0)n=e.slice();else{let t=-1;for(let r=0;r<e.length;r++){let i=e[r];typeof i=="number"?t=i:t===0||(t===-1||t===2?i0(n,t,i,null,e[++r]):i0(n,t,i,null,null))}}return n}function i0(n,e,t,r,i){let s=0,o=n.length;if(e===-1)o=-1;else for(;s<n.length;){let a=n[s++];if(typeof a=="number"){if(a===e){o=-1;break}else if(a>e){o=s-1;break}}}for(;s<n.length;){let a=n[s];if(typeof a=="number")break;if(a===t){i!==null&&(n[s+1]=i);return}s++,i!==null&&s++}o!==-1&&(n.splice(o,0,e),s=o+1),n.splice(s++,0,t),i!==null&&n.splice(s++,0,i)}function Iw(n){return n!==Ji}function jl(n){return n&32767}function BD(n){return n>>16}function Bl(n,e){let t=BD(n),r=e;for(;t>0;)r=r[ls],t--;return r}var cf=!0;function Vl(n){let e=cf;return cf=n,e}var VD=256,Dw=VD-1,Tw=5,HD=0,An={};function UD(n,e,t){let r;typeof t=="string"?r=t.charCodeAt(0)||0:t.hasOwnProperty(ro)&&(r=t[ro]),r==null&&(r=t[ro]=HD++);let i=r&Dw,s=1<<i;e.data[n+(i>>Tw)]|=s}function Mw(n,e){let t=Rw(n,e);if(t!==-1)return t;let r=e[Z];r.firstCreatePass&&(n.injectorIndex=e.length,qh(r.data,n),qh(e,null),qh(r.blueprint,null));let i=dp(n,e),s=n.injectorIndex;if(Iw(i)){let o=jl(i),a=Bl(i,e),l=a[Z].data;for(let c=0;c<8;c++)e[s+c]=a[o+c]|l[o+c]}return e[s+8]=i,s}function qh(n,e){n.push(0,0,0,0,0,0,0,0,e)}function Rw(n,e){return n.injectorIndex===-1||n.parent&&n.parent.injectorIndex===n.injectorIndex||e[n.injectorIndex+8]===null?-1:n.injectorIndex}function dp(n,e){if(n.parent&&n.parent.injectorIndex!==-1)return n.parent.injectorIndex;let t=0,r=null,i=e;for(;i!==null;){if(r=Lw(i),r===null)return Ji;if(t++,i=i[ls],r.injectorIndex!==-1)return r.injectorIndex|t<<16}return Ji}function $D(n,e,t){UD(n,e,t)}function Ow(n,e,t){if(t&se.Optional||n!==void 0)return n;Yf(e,"NodeInjector")}function Pw(n,e,t,r){if(t&se.Optional&&r===void 0&&(r=null),(t&(se.Self|se.Host))===0){let i=n[ts],s=_t(void 0);try{return i?i.get(e,r,t&se.Optional):W0(e,r,t&se.Optional)}finally{_t(s)}}return Ow(r,e,t)}function Nw(n,e,t,r=se.Default,i){if(n!==null){if(e[K]&2048&&!(r&se.Self)){let o=GD(n,e,t,r,An);if(o!==An)return o}let s=kw(n,e,t,r,An);if(s!==An)return s}return Pw(e,t,r,i)}function kw(n,e,t,r,i){let s=WD(t);if(typeof s=="function"){if(!bw(e,n,r))return r&se.Host?Ow(i,t,r):Pw(e,t,r,i);try{let o;if(o=s(r),o==null&&!(r&se.Optional))Yf(t);else return o}finally{_w()}}else if(typeof s=="number"){let o=null,a=Rw(n,e),l=Ji,c=r&se.Host?e[ln][un]:null;for((a===-1||r&se.SkipSelf)&&(l=a===-1?dp(n,e):e[a+8],l===Ji||!o0(r,!1)?a=-1:(o=e[Z],a=jl(l),e=Bl(l,e)));a!==-1;){let u=e[Z];if(s0(s,a,u.data)){let d=zD(a,e,t,o,r,c);if(d!==An)return d}l=e[a+8],l!==Ji&&o0(r,e[Z].data[a+8]===c)&&s0(s,a,e)?(o=u,a=jl(l),e=Bl(l,e)):a=-1}}return i}function zD(n,e,t,r,i,s){let o=e[Z],a=o.data[n+8],l=r==null?cs(a)&&cf:r!=o&&(a.type&3)!==0,c=i&se.Host&&s===a,u=xl(a,o,t,l,c);return u!==null?Hl(e,o,u,a):An}function xl(n,e,t,r,i){let s=n.providerIndexes,o=e.data,a=s&1048575,l=n.directiveStart,c=n.directiveEnd,u=s>>20,d=r?a:a+u,h=i?a+u:c;for(let f=d;f<h;f++){let p=o[f];if(f<l&&t===p||f>=l&&p.type===t)return f}if(i){let f=o[l];if(f&&li(f)&&f.type===t)return l}return null}function Hl(n,e,t,r){let i=n[t],s=e.data;if(i instanceof lo){let o=i;o.resolving&&$0(OI(s[t]));let a=Vl(o.canSeeViewProviders);o.resolving=!0;let l,c=o.injectImpl?_t(o.injectImpl):null,u=bw(n,r,se.Default);try{i=n[t]=o.factory(void 0,s,n,r),e.firstCreatePass&&t>=r.directiveStart&&OD(t,s[t],e)}finally{c!==null&&_t(c),Vl(a),o.resolving=!1,_w()}}return i}function WD(n){if(typeof n=="string")return n.charCodeAt(0)||0;let e=n.hasOwnProperty(ro)?n[ro]:void 0;return typeof e=="number"?e>=0?e&Dw:qD:e}function s0(n,e,t){let r=1<<n;return!!(t[e+(n>>Tw)]&r)}function o0(n,e){return!(n&se.Self)&&!(n&se.Host&&e)}var Jr=class{_tNode;_lView;constructor(e,t){this._tNode=e,this._lView=t}get(e,t,r){return Nw(this._tNode,this._lView,e,tc(r),t)}};function qD(){return new Jr(dn(),ge())}function hp(n){return po(()=>{let e=n.prototype.constructor,t=e[Tl]||uf(e),r=Object.prototype,i=Object.getPrototypeOf(n.prototype).constructor;for(;i&&i!==r;){let s=i[Tl]||uf(i);if(s&&s!==t)return s;i=Object.getPrototypeOf(i)}return s=>new s})}function uf(n){return j0(n)?()=>{let e=uf(Gt(n));return e&&e()}:ei(n)}function GD(n,e,t,r,i){let s=n,o=e;for(;s!==null&&o!==null&&o[K]&2048&&!Fl(o);){let a=kw(s,o,t,r|se.Self,An);if(a!==An)return a;let l=s.parent;if(!l){let c=o[tw];if(c){let u=c.get(t,An,r);if(u!==An)return u}l=Lw(o),o=o[ls]}s=l}return i}function Lw(n){let e=n[Z],t=e.type;return t===2?e.declTNode:t===1?n[un]:null}function a0(n,e=null,t=null,r){let i=Fw(n,e,t,r);return i.resolveInjectorInitializers(),i}function Fw(n,e=null,t=null,r,i=new Set){let s=[t||_n,GI(n)];return r=r||(typeof n=="object"?void 0:Pt(n)),new so(s,e||Qf(),r||null,i)}var cn=class n{static THROW_IF_NOT_FOUND=Zr;static NULL=new Pl;static create(e,t){if(Array.isArray(e))return a0({name:""},t,e,"");{let r=e.name??"";return a0({name:r},e.parent,e.providers,r)}}static \u0275prov=k({token:n,providedIn:"any",factory:()=>q(Y0)});static __NG_ELEMENT_ID__=-1};var YD=new z("");YD.__NG_ELEMENT_ID__=n=>{let e=dn();if(e===null)throw new j(204,!1);if(e.type&2)return e.value;if(n&se.Optional)return null;throw new j(204,!1)};var jw=!1,wo=(()=>{class n{static __NG_ELEMENT_ID__=KD;static __NG_ENV_ID__=t=>t}return n})(),df=class extends wo{_lView;constructor(e){super(),this._lView=e}onDestroy(e){return dw(this._lView,e),()=>pD(this._lView,e)}};function KD(){return new df(ge())}var is=class{},fp=new z("",{providedIn:"root",factory:()=>!1});var Bw=new z(""),Vw=new z(""),ds=(()=>{class n{taskId=0;pendingTasks=new Set;get _hasPendingTasks(){return this.hasPendingTasks.value}hasPendingTasks=new Ge(!1);add(){this._hasPendingTasks||this.hasPendingTasks.next(!0);let t=this.taskId++;return this.pendingTasks.add(t),t}has(t){return this.pendingTasks.has(t)}remove(t){this.pendingTasks.delete(t),this.pendingTasks.size===0&&this._hasPendingTasks&&this.hasPendingTasks.next(!1)}ngOnDestroy(){this.pendingTasks.clear(),this._hasPendingTasks&&this.hasPendingTasks.next(!1)}static \u0275prov=k({token:n,providedIn:"root",factory:()=>new n})}return n})();var hf=class extends Oe{__isAsync;destroyRef=void 0;pendingTasks=void 0;constructor(e=!1){super(),this.__isAsync=e,ew()&&(this.destroyRef=R(wo,{optional:!0})??void 0,this.pendingTasks=R(ds,{optional:!0})??void 0)}emit(e){let t=ie(null);try{super.next(e)}finally{ie(t)}}subscribe(e,t,r){let i=e,s=t||(()=>null),o=r;if(e&&typeof e=="object"){let l=e;i=l.next?.bind(l),s=l.error?.bind(l),o=l.complete?.bind(l)}this.__isAsync&&(s=this.wrapInTimeout(s),i&&(i=this.wrapInTimeout(i)),o&&(o=this.wrapInTimeout(o)));let a=super.subscribe({next:i,error:s,complete:o});return e instanceof Be&&e.add(a),a}wrapInTimeout(e){return t=>{let r=this.pendingTasks?.add();setTimeout(()=>{e(t),r!==void 0&&this.pendingTasks?.remove(r)})}}},He=hf;function Ul(...n){}function Hw(n){let e,t;function r(){n=Ul;try{t!==void 0&&typeof cancelAnimationFrame=="function"&&cancelAnimationFrame(t),e!==void 0&&clearTimeout(e)}catch{}}return e=setTimeout(()=>{n(),r()}),typeof requestAnimationFrame=="function"&&(t=requestAnimationFrame(()=>{n(),r()})),()=>r()}function l0(n){return queueMicrotask(()=>n()),()=>{n=Ul}}var pp="isAngularZone",$l=pp+"_ID",XD=0,ke=class n{hasPendingMacrotasks=!1;hasPendingMicrotasks=!1;isStable=!0;onUnstable=new He(!1);onMicrotaskEmpty=new He(!1);onStable=new He(!1);onError=new He(!1);constructor(e){let{enableLongStackTrace:t=!1,shouldCoalesceEventChangeDetection:r=!1,shouldCoalesceRunChangeDetection:i=!1,scheduleInRootZone:s=jw}=e;if(typeof Zone>"u")throw new j(908,!1);Zone.assertZonePatched();let o=this;o._nesting=0,o._outer=o._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(o._inner=o._inner.fork(new Zone.TaskTrackingZoneSpec)),t&&Zone.longStackTraceZoneSpec&&(o._inner=o._inner.fork(Zone.longStackTraceZoneSpec)),o.shouldCoalesceEventChangeDetection=!i&&r,o.shouldCoalesceRunChangeDetection=i,o.callbackScheduled=!1,o.scheduleInRootZone=s,JD(o)}static isInAngularZone(){return typeof Zone<"u"&&Zone.current.get(pp)===!0}static assertInAngularZone(){if(!n.isInAngularZone())throw new j(909,!1)}static assertNotInAngularZone(){if(n.isInAngularZone())throw new j(909,!1)}run(e,t,r){return this._inner.run(e,t,r)}runTask(e,t,r,i){let s=this._inner,o=s.scheduleEventTask("NgZoneEvent: "+i,e,QD,Ul,Ul);try{return s.runTask(o,t,r)}finally{s.cancelTask(o)}}runGuarded(e,t,r){return this._inner.runGuarded(e,t,r)}runOutsideAngular(e){return this._outer.run(e)}},QD={};function gp(n){if(n._nesting==0&&!n.hasPendingMicrotasks&&!n.isStable)try{n._nesting++,n.onMicrotaskEmpty.emit(null)}finally{if(n._nesting--,!n.hasPendingMicrotasks)try{n.runOutsideAngular(()=>n.onStable.emit(null))}finally{n.isStable=!0}}}function ZD(n){if(n.isCheckStableRunning||n.callbackScheduled)return;n.callbackScheduled=!0;function e(){Hw(()=>{n.callbackScheduled=!1,ff(n),n.isCheckStableRunning=!0,gp(n),n.isCheckStableRunning=!1})}n.scheduleInRootZone?Zone.root.run(()=>{e()}):n._outer.run(()=>{e()}),ff(n)}function JD(n){let e=()=>{ZD(n)},t=XD++;n._inner=n._inner.fork({name:"angular",properties:{[pp]:!0,[$l]:t,[$l+t]:!0},onInvokeTask:(r,i,s,o,a,l)=>{if(eT(l))return r.invokeTask(s,o,a,l);try{return c0(n),r.invokeTask(s,o,a,l)}finally{(n.shouldCoalesceEventChangeDetection&&o.type==="eventTask"||n.shouldCoalesceRunChangeDetection)&&e(),u0(n)}},onInvoke:(r,i,s,o,a,l,c)=>{try{return c0(n),r.invoke(s,o,a,l,c)}finally{n.shouldCoalesceRunChangeDetection&&!n.callbackScheduled&&!tT(l)&&e(),u0(n)}},onHasTask:(r,i,s,o)=>{r.hasTask(s,o),i===s&&(o.change=="microTask"?(n._hasPendingMicrotasks=o.microTask,ff(n),gp(n)):o.change=="macroTask"&&(n.hasPendingMacrotasks=o.macroTask))},onHandleError:(r,i,s,o)=>(r.handleError(s,o),n.runOutsideAngular(()=>n.onError.emit(o)),!1)})}function ff(n){n._hasPendingMicrotasks||(n.shouldCoalesceEventChangeDetection||n.shouldCoalesceRunChangeDetection)&&n.callbackScheduled===!0?n.hasPendingMicrotasks=!0:n.hasPendingMicrotasks=!1}function c0(n){n._nesting++,n.isStable&&(n.isStable=!1,n.onUnstable.emit(null))}function u0(n){n._nesting--,gp(n)}var pf=class{hasPendingMicrotasks=!1;hasPendingMacrotasks=!1;isStable=!0;onUnstable=new He;onMicrotaskEmpty=new He;onStable=new He;onError=new He;run(e,t,r){return e.apply(t,r)}runGuarded(e,t,r){return e.apply(t,r)}runOutsideAngular(e){return e()}runTask(e,t,r,i){return e.apply(t,r)}};function eT(n){return Uw(n,"__ignore_ng_zone__")}function tT(n){return Uw(n,"__scheduler_tick__")}function Uw(n,e){return!Array.isArray(n)||n.length!==1?!1:n[0]?.data?.[e]===!0}var In=class{_console=console;handleError(e){this._console.error("ERROR",e)}},nT=new z("",{providedIn:"root",factory:()=>{let n=R(ke),e=R(In);return t=>n.runOutsideAngular(()=>e.handleError(t))}});function d0(n,e){return k0(n,e)}function rT(n){return k0(N0,n)}var $w=(d0.required=rT,d0);function iT(){return hs(dn(),ge())}function hs(n,e){return new Mn(Tn(n,e))}var Mn=(()=>{class n{nativeElement;constructor(t){this.nativeElement=t}static __NG_ELEMENT_ID__=iT}return n})();function sT(n){return n instanceof Mn?n.nativeElement:n}function oT(){return this._results[Symbol.iterator]()}var gf=class{_emitDistinctChangesOnly;dirty=!0;_onDirty=void 0;_results=[];_changesDetected=!1;_changes=void 0;length=0;first=void 0;last=void 0;get changes(){return this._changes??=new Oe}constructor(e=!1){this._emitDistinctChangesOnly=e}get(e){return this._results[e]}map(e){return this._results.map(e)}filter(e){return this._results.filter(e)}find(e){return this._results.find(e)}reduce(e,t){return this._results.reduce(e,t)}forEach(e){this._results.forEach(e)}some(e){return this._results.some(e)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(e,t){this.dirty=!1;let r=zI(e);(this._changesDetected=!$I(this._results,r,t))&&(this._results=r,this.length=r.length,this.last=r[this.length-1],this.first=r[0])}notifyOnChanges(){this._changes!==void 0&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.next(this)}onDirty(e){this._onDirty=e}setDirty(){this.dirty=!0,this._onDirty?.()}destroy(){this._changes!==void 0&&(this._changes.complete(),this._changes.unsubscribe())}[Symbol.iterator]=oT};function zw(n){return(n.flags&128)===128}var Ww=function(n){return n[n.OnPush=0]="OnPush",n[n.Default=1]="Default",n}(Ww||{}),qw=new Map,aT=0;function lT(){return aT++}function cT(n){qw.set(n[ic],n)}function mf(n){qw.delete(n[ic])}var h0="__ngContext__";function Eo(n,e){Sr(e)?(n[h0]=e[ic],cT(e)):n[h0]=e}function Gw(n){return Kw(n[ao])}function Yw(n){return Kw(n[an])}function Kw(n){for(;n!==null&&!nr(n);)n=n[an];return n}var vf;function Xw(n){vf=n}function uT(){if(vf!==void 0)return vf;if(typeof document<"u")return document;throw new j(210,!1)}var mp=new z("",{providedIn:"root",factory:()=>dT}),dT="ng",vp=new z(""),fs=new z("",{providedIn:"platform",factory:()=>"unknown"});var yp=new z("",{providedIn:"root",factory:()=>uT().body?.querySelector("[ngCspNonce]")?.getAttribute("ngCspNonce")||null});var hT="h",fT="b";var Qw=!1,pT=new z("",{providedIn:"root",factory:()=>Qw});var bp=function(n){return n[n.CHANGE_DETECTION=0]="CHANGE_DETECTION",n[n.AFTER_NEXT_RENDER=1]="AFTER_NEXT_RENDER",n}(bp||{}),ps=new z(""),f0=new Set;function Dr(n){f0.has(n)||(f0.add(n),performance?.mark?.("mark_feature_usage",{detail:{feature:n}}))}var Zw=(()=>{class n{view;node;constructor(t,r){this.view=t,this.node=r}static __NG_ELEMENT_ID__=gT}return n})();function gT(){return new Zw(ge(),dn())}var Xi=function(n){return n[n.EarlyRead=0]="EarlyRead",n[n.Write=1]="Write",n[n.MixedReadWrite=2]="MixedReadWrite",n[n.Read=3]="Read",n}(Xi||{}),Jw=(()=>{class n{impl=null;execute(){this.impl?.execute()}static \u0275prov=k({token:n,providedIn:"root",factory:()=>new n})}return n})(),mT=[Xi.EarlyRead,Xi.Write,Xi.MixedReadWrite,Xi.Read],vT=(()=>{class n{ngZone=R(ke);scheduler=R(is);errorHandler=R(In,{optional:!0});sequences=new Set;deferredRegistrations=new Set;executing=!1;constructor(){R(ps,{optional:!0})}execute(){let t=this.sequences.size>0;t&&_e(16),this.executing=!0;for(let r of mT)for(let i of this.sequences)if(!(i.erroredOrDestroyed||!i.hooks[r]))try{i.pipelinedValue=this.ngZone.runOutsideAngular(()=>this.maybeTrace(()=>{let s=i.hooks[r];return s(i.pipelinedValue)},i.snapshot))}catch(s){i.erroredOrDestroyed=!0,this.errorHandler?.handleError(s)}this.executing=!1;for(let r of this.sequences)r.afterRun(),r.once&&(this.sequences.delete(r),r.destroy());for(let r of this.deferredRegistrations)this.sequences.add(r);this.deferredRegistrations.size>0&&this.scheduler.notify(7),this.deferredRegistrations.clear(),t&&_e(17)}register(t){let{view:r}=t;r!==void 0?((r[Zi]??=[]).push(t),mo(r),r[K]|=8192):this.executing?this.deferredRegistrations.add(t):this.addSequence(t)}addSequence(t){this.sequences.add(t),this.scheduler.notify(7)}unregister(t){this.executing&&this.sequences.has(t)?(t.erroredOrDestroyed=!0,t.pipelinedValue=void 0,t.once=!0):(this.sequences.delete(t),this.deferredRegistrations.delete(t))}maybeTrace(t,r){return r?r.run(bp.AFTER_NEXT_RENDER,t):t()}static \u0275prov=k({token:n,providedIn:"root",factory:()=>new n})}return n})(),yf=class{impl;hooks;view;once;snapshot;erroredOrDestroyed=!1;pipelinedValue=void 0;unregisterOnDestroy;constructor(e,t,r,i,s,o=null){this.impl=e,this.hooks=t,this.view=r,this.once=i,this.snapshot=o,this.unregisterOnDestroy=s?.onDestroy(()=>this.destroy())}afterRun(){this.erroredOrDestroyed=!1,this.pipelinedValue=void 0,this.snapshot?.dispose(),this.snapshot=null}destroy(){this.impl.unregister(this),this.unregisterOnDestroy?.();let e=this.view?.[Zi];e&&(this.view[Zi]=e.filter(t=>t!==this))}};function wp(n,e){!e?.injector&&rD(wp);let t=e?.injector??R(cn);return Dr("NgAfterNextRender"),bT(n,t,e,!0)}function yT(n,e){if(n instanceof Function){let t=[void 0,void 0,void 0,void 0];return t[e]=n,t}else return[n.earlyRead,n.write,n.mixedReadWrite,n.read]}function bT(n,e,t,r){let i=e.get(Jw);i.impl??=e.get(vT);let s=e.get(ps,null,{optional:!0}),o=t?.phase??Xi.MixedReadWrite,a=t?.manualCleanup!==!0?e.get(wo):null,l=e.get(Zw,null,{optional:!0}),c=new yf(i.impl,yT(n,o),l?.view,r,a,s?.snapshot(null));return i.impl.register(c),c}var wT=()=>null;function eE(n,e,t=!1){return wT(n,e,t)}function tE(n,e){let t=n.contentQueries;if(t!==null){let r=ie(null);try{for(let i=0;i<t.length;i+=2){let s=t[i],o=t[i+1];if(o!==-1){let a=n.data[o];ip(s),a.contentQueries(2,e[o],o)}}}finally{ie(r)}}}function bf(n,e,t){ip(0);let r=ie(null);try{e(n,t)}finally{ie(r)}}function nE(n,e,t){if(rw(e)){let r=ie(null);try{let i=e.directiveStart,s=e.directiveEnd;for(let o=i;o<s;o++){let a=n.data[o];if(a.contentQueries){let l=t[o];a.contentQueries(1,l,o)}}}finally{ie(r)}}}var Dn=function(n){return n[n.Emulated=0]="Emulated",n[n.None=2]="None",n[n.ShadowDom=3]="ShadowDom",n}(Dn||{});var zl=class{changingThisBreaksApplicationSecurity;constructor(e){this.changingThisBreaksApplicationSecurity=e}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see ${O0})`}};function rE(n){return n instanceof zl?n.changingThisBreaksApplicationSecurity:n}function ET(n,e){let t=CT(n);if(t!=null&&t!==e){if(t==="ResourceURL"&&e==="URL")return!0;throw new Error(`Required a safe ${e}, got a ${t} (see ${O0})`)}return t===e}function CT(n){return n instanceof zl&&n.getTypeName()||null}var _T=/^(?!javascript:)(?:[a-z0-9+.-]+:|[^&:\/?#]*(?:[\/?#]|$))/i;function AT(n){return n=String(n),n.match(_T)?n:"unsafe:"+n}var iE=function(n){return n[n.NONE=0]="NONE",n[n.HTML=1]="HTML",n[n.STYLE=2]="STYLE",n[n.SCRIPT=3]="SCRIPT",n[n.URL=4]="URL",n[n.RESOURCE_URL=5]="RESOURCE_URL",n}(iE||{});function ut(n){let e=ST();return e?e.sanitize(iE.URL,n)||"":ET(n,"URL")?rE(n):AT(ec(n))}function ST(){let n=ge();return n&&n[Jn].sanitizer}function sE(n){return n instanceof Function?n():n}function xT(n,e,t){let r=n.length;for(;;){let i=n.indexOf(e,t);if(i===-1)return i;if(i===0||n.charCodeAt(i-1)<=32){let s=e.length;if(i+s===r||n.charCodeAt(i+s)<=32)return i}t=i+1}}var oE="ng-template";function IT(n,e,t,r){let i=0;if(r){for(;i<e.length&&typeof e[i]=="string";i+=2)if(e[i]==="class"&&xT(e[i+1].toLowerCase(),t,0)!==-1)return!0}else if(Ep(n))return!1;if(i=e.indexOf(1,i),i>-1){let s;for(;++i<e.length&&typeof(s=e[i])=="string";)if(s.toLowerCase()===t)return!0}return!1}function Ep(n){return n.type===4&&n.value!==oE}function DT(n,e,t){let r=n.type===4&&!t?oE:n.value;return e===r}function TT(n,e,t){let r=4,i=n.attrs,s=i!==null?OT(i):0,o=!1;for(let a=0;a<e.length;a++){let l=e[a];if(typeof l=="number"){if(!o&&!on(r)&&!on(l))return!1;if(o&&on(l))continue;o=!1,r=l|r&1;continue}if(!o)if(r&4){if(r=2|r&1,l!==""&&!DT(n,l,t)||l===""&&e.length===1){if(on(r))return!1;o=!0}}else if(r&8){if(i===null||!IT(n,i,l,t)){if(on(r))return!1;o=!0}}else{let c=e[++a],u=MT(l,i,Ep(n),t);if(u===-1){if(on(r))return!1;o=!0;continue}if(c!==""){let d;if(u>s?d="":d=i[u+1].toLowerCase(),r&2&&c!==d){if(on(r))return!1;o=!0}}}}return on(r)||o}function on(n){return(n&1)===0}function MT(n,e,t,r){if(e===null)return-1;let i=0;if(r||!t){let s=!1;for(;i<e.length;){let o=e[i];if(o===n)return i;if(o===3||o===6)s=!0;else if(o===1||o===2){let a=e[++i];for(;typeof a=="string";)a=e[++i];continue}else{if(o===4)break;if(o===0){i+=4;continue}}i+=s?1:2}return-1}else return PT(e,n)}function RT(n,e,t=!1){for(let r=0;r<e.length;r++)if(TT(n,e[r],t))return!0;return!1}function OT(n){for(let e=0;e<n.length;e++){let t=n[e];if(FD(t))return e}return n.length}function PT(n,e){let t=n.indexOf(4);if(t>-1)for(t++;t<n.length;){let r=n[t];if(typeof r=="number")return-1;if(r===e)return t;t++}return-1}function p0(n,e){return n?":not("+e.trim()+")":e}function NT(n){let e=n[0],t=1,r=2,i="",s=!1;for(;t<n.length;){let o=n[t];if(typeof o=="string")if(r&2){let a=n[++t];i+="["+o+(a.length>0?'="'+a+'"':"")+"]"}else r&8?i+="."+o:r&4&&(i+=" "+o);else i!==""&&!on(o)&&(e+=p0(s,i),i=""),r=o,s=s||!on(r);t++}return i!==""&&(e+=p0(s,i)),e}function kT(n){return n.map(NT).join(",")}function LT(n){let e=[],t=[],r=1,i=2;for(;r<n.length;){let s=n[r];if(typeof s=="string")i===2?s!==""&&e.push(s,n[++r]):i===8&&t.push(s);else{if(!on(i))break;i=s}r++}return t.length&&e.push(1,...t),e}var ci={};function FT(n,e){return n.createText(e)}function jT(n,e,t){n.setValue(e,t)}function aE(n,e,t){return n.createElement(e,t)}function Wl(n,e,t,r,i){n.insertBefore(e,t,r,i)}function lE(n,e,t){n.appendChild(e,t)}function g0(n,e,t,r,i){r!==null?Wl(n,e,t,r,i):lE(n,e,t)}function BT(n,e,t){n.removeChild(null,e,t)}function VT(n,e,t){n.setAttribute(e,"style",t)}function HT(n,e,t){t===""?n.removeAttribute(e,"class"):n.setAttribute(e,"class",t)}function cE(n,e,t){let{mergedAttrs:r,classes:i,styles:s}=t;r!==null&&LD(n,e,r),i!==null&&HT(n,e,i),s!==null&&VT(n,e,s)}function Cp(n,e,t,r,i,s,o,a,l,c,u){let d=St+r,h=d+i,f=UT(d,h),p=typeof c=="function"?c():c;return f[Z]={type:n,blueprint:f,template:t,queries:null,viewQuery:a,declTNode:e,data:f.slice().fill(null,d),bindingStartIndex:d,expandoStartIndex:h,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:typeof s=="function"?s():s,pipeRegistry:typeof o=="function"?o():o,firstChild:null,schemas:l,consts:p,incompleteFirstPass:!1,ssrId:u}}function UT(n,e){let t=[];for(let r=0;r<e;r++)t.push(r<n?null:ci);return t}function $T(n){let e=n.tView;return e===null||e.incompleteFirstPass?n.tView=Cp(1,null,n.template,n.decls,n.vars,n.directiveDefs,n.pipeDefs,n.viewQuery,n.schemas,n.consts,n.id):e}function _p(n,e,t,r,i,s,o,a,l,c,u){let d=e.blueprint.slice();return d[tr]=i,d[K]=r|4|128|8|64|1024,(c!==null||n&&n[K]&2048)&&(d[K]|=2048),cw(d),d[ft]=d[ls]=n,d[tt]=t,d[Jn]=o||n&&n[Jn],d[ct]=a||n&&n[ct],d[ts]=l||n&&n[ts]||null,d[un]=s,d[ic]=lT(),d[oo]=u,d[tw]=c,d[ln]=e.type==2?n[ln]:d,d}function zT(n,e,t){let r=Tn(e,n),i=$T(t),s=n[Jn].rendererFactory,o=Ap(n,_p(n,i,null,uE(t),r,e,null,s.createRenderer(r,t),null,null,null));return n[e.index]=o}function uE(n){let e=16;return n.signals?e=4096:n.onPush&&(e=64),e}function dE(n,e,t,r){if(t===0)return-1;let i=e.length;for(let s=0;s<t;s++)e.push(r),n.blueprint.push(r),n.data.push(null);return i}function Ap(n,e){return n[ao]?n[e0][an]=e:n[ao]=e,n[e0]=e,e}function F(n=1){hE(Nt(),ge(),oc()+n,!1)}function hE(n,e,t,r){if(!r)if((e[K]&3)===3){let s=n.preOrderCheckHooks;s!==null&&Al(e,s,t)}else{let s=n.preOrderHooks;s!==null&&Sl(e,s,0,t)}si(t)}var ac=function(n){return n[n.None=0]="None",n[n.SignalBased=1]="SignalBased",n[n.HasDecoratorInputTransform=2]="HasDecoratorInputTransform",n}(ac||{});function wf(n,e,t,r){let i=ie(null);try{let[s,o,a]=n.inputs[t],l=null;(o&ac.SignalBased)!==0&&(l=e[s][Fi]),l!==null&&l.transformFn!==void 0?r=l.transformFn(r):a!==null&&(r=a.call(e,r)),n.setInput!==null?n.setInput(e,l,r,t,s):iw(e,l,s,r)}finally{ie(i)}}function fE(n,e,t,r,i){let s=oc(),o=r&2;try{si(-1),o&&e.length>St&&hE(n,e,St,!1),_e(o?2:0,i),t(r,i)}finally{si(s),_e(o?3:1,i)}}function Sp(n,e,t){XT(n,e,t),(t.flags&64)===64&&QT(n,e,t)}function pE(n,e,t=Tn){let r=e.localNames;if(r!==null){let i=e.index+1;for(let s=0;s<r.length;s+=2){let o=r[s+1],a=o===-1?t(e,n):n[o];n[i++]=a}}}function WT(n,e,t,r){let s=r.get(pT,Qw)||t===Dn.ShadowDom,o=n.selectRootElement(e,s);return qT(o),o}function qT(n){GT(n)}var GT=()=>null;function YT(n){return n==="class"?"className":n==="for"?"htmlFor":n==="formaction"?"formAction":n==="innerHtml"?"innerHTML":n==="readonly"?"readOnly":n==="tabindex"?"tabIndex":n}function gE(n,e,t,r,i,s,o,a){if(!a&&xp(e,n,t,r,i)){cs(e)&&KT(t,e.index);return}if(e.type&3){let l=Tn(e,t);r=YT(r),i=o!=null?o(i,e.value||"",r):i,s.setProperty(l,r,i)}else e.type&12}function KT(n,e){let t=xn(e,n);t[K]&16||(t[K]|=64)}function XT(n,e,t){let r=t.directiveStart,i=t.directiveEnd;cs(t)&&zT(e,t,n.data[r+t.componentOffset]),n.firstCreatePass||Mw(t,e);let s=t.initialInputs;for(let o=r;o<i;o++){let a=n.data[o],l=Hl(e,n,o,t);if(Eo(l,e),s!==null&&tM(e,o-r,l,a,t,s),li(a)){let c=xn(t.index,e);c[tt]=Hl(e,n,o,t)}}}function QT(n,e,t){let r=t.directiveStart,i=t.directiveEnd,s=t.index,o=ID();try{si(s);for(let a=r;a<i;a++){let l=n.data[a],c=e[a];lf(a),(l.hostBindings!==null||l.hostVars!==0||l.hostAttrs!==null)&&ZT(l,c)}}finally{si(-1),lf(o)}}function ZT(n,e){n.hostBindings!==null&&n.hostBindings(1,e)}function mE(n,e){let t=n.directiveRegistry,r=null;if(t)for(let i=0;i<t.length;i++){let s=t[i];RT(e,s.selectors,!1)&&(r??=[],li(s)?r.unshift(s):r.push(s))}return r}function JT(n,e,t,r,i,s){let o=Tn(n,e);eM(e[ct],o,s,n.value,t,r,i)}function eM(n,e,t,r,i,s,o){if(s==null)n.removeAttribute(e,i,t);else{let a=o==null?ec(s):o(s,r||"",i);n.setAttribute(e,i,a,t)}}function tM(n,e,t,r,i,s){let o=s[e];if(o!==null)for(let a=0;a<o.length;a+=2){let l=o[a],c=o[a+1];wf(r,t,l,c)}}function nM(n,e){let t=n[ts],r=t?t.get(In,null):null;r&&r.handleError(e)}function xp(n,e,t,r,i){let s=n.inputs?.[r],o=n.hostDirectiveInputs?.[r],a=!1;if(o)for(let l=0;l<o.length;l+=2){let c=o[l],u=o[l+1],d=e.data[c];wf(d,t[c],u,i),a=!0}if(s)for(let l of s){let c=t[l],u=e.data[l];wf(u,c,r,i),a=!0}return a}function rM(n,e){let t=xn(e,n),r=t[Z];iM(r,t);let i=t[tr];i!==null&&t[oo]===null&&(t[oo]=eE(i,t[ts])),_e(18),Ip(r,t,t[tt]),_e(19,t[tt])}function iM(n,e){for(let t=e.length;t<n.blueprint.length;t++)e.push(n.blueprint[t])}function Ip(n,e,t){sp(e);try{let r=n.viewQuery;r!==null&&bf(1,r,t);let i=n.template;i!==null&&fE(n,e,i,1,t),n.firstCreatePass&&(n.firstCreatePass=!1),e[er]?.finishViewCreation(n),n.staticContentQueries&&tE(n,e),n.staticViewQueries&&bf(2,n.viewQuery,t);let s=n.components;s!==null&&sM(e,s)}catch(r){throw n.firstCreatePass&&(n.incompleteFirstPass=!0,n.firstCreatePass=!1),r}finally{e[K]&=-5,op()}}function sM(n,e){for(let t=0;t<e.length;t++)rM(n,e[t])}function lc(n,e,t,r){let i=ie(null);try{let s=e.tView,a=n[K]&4096?4096:16,l=_p(n,s,t,a,null,e,null,null,r?.injector??null,r?.embeddedViewInjector??null,r?.dehydratedView??null),c=n[e.index];l[ni]=c;let u=n[er];return u!==null&&(l[er]=u.createEmbeddedView(s)),Ip(s,l,t),l}finally{ie(i)}}function co(n,e){return!e||e.firstChild===null||zw(n)}var oM;function Dp(n,e){return oM(n,e)}var ui=function(n){return n[n.Important=1]="Important",n[n.DashCase=2]="DashCase",n}(ui||{});function vE(n){return(n.flags&32)===32}function Qi(n,e,t,r,i){if(r!=null){let s,o=!1;nr(r)?s=r:Sr(r)&&(o=!0,r=r[tr]);let a=Sn(r);n===0&&t!==null?i==null?lE(e,t,a):Wl(e,t,a,i||null,!0):n===1&&t!==null?Wl(e,t,a,i||null,!0):n===2?BT(e,a,o):n===3&&e.destroyNode(a),s!=null&&yM(e,n,s,t,i)}}function aM(n,e){yE(n,e),e[tr]=null,e[un]=null}function lM(n,e,t,r,i,s){r[tr]=i,r[un]=e,uc(n,r,t,1,i,s)}function yE(n,e){e[Jn].changeDetectionScheduler?.notify(9),uc(n,e,e[ct],2,null,null)}function cM(n){let e=n[ao];if(!e)return Gh(n[Z],n);for(;e;){let t=null;if(Sr(e))t=e[ao];else{let r=e[ht];r&&(t=r)}if(!t){for(;e&&!e[an]&&e!==n;)Sr(e)&&Gh(e[Z],e),e=e[ft];e===null&&(e=n),Sr(e)&&Gh(e[Z],e),t=e&&e[an]}e=t}}function Tp(n,e){let t=n[ns],r=t.indexOf(e);t.splice(r,1)}function cc(n,e){if(go(e))return;let t=e[ct];t.destroyNode&&uc(n,e,t,3,null,null),cM(e)}function Gh(n,e){if(go(e))return;let t=ie(null);try{e[K]&=-129,e[K]|=256,e[Yt]&&gh(e[Yt]),dM(n,e),uM(n,e),e[Z].type===1&&e[ct].destroy();let r=e[ni];if(r!==null&&nr(e[ft])){r!==e[ft]&&Tp(r,e);let i=e[er];i!==null&&i.detachView(n)}mf(e)}finally{ie(t)}}function uM(n,e){let t=n.cleanup,r=e[Nl];if(t!==null)for(let o=0;o<t.length-1;o+=2)if(typeof t[o]=="string"){let a=t[o+3];a>=0?r[a]():r[-a].unsubscribe(),o+=2}else{let a=r[t[o+1]];t[o].call(a)}r!==null&&(e[Nl]=null);let i=e[Ar];if(i!==null){e[Ar]=null;for(let o=0;o<i.length;o++){let a=i[o];a()}}let s=e[kl];if(s!==null){e[kl]=null;for(let o of s)o.destroy()}}function dM(n,e){let t;if(n!=null&&(t=n.destroyHooks)!=null)for(let r=0;r<t.length;r+=2){let i=e[t[r]];if(!(i instanceof lo)){let s=t[r+1];if(Array.isArray(s))for(let o=0;o<s.length;o+=2){let a=i[s[o]],l=s[o+1];_e(4,a,l);try{l.call(a)}finally{_e(5,a,l)}}else{_e(4,i,s);try{s.call(i)}finally{_e(5,i,s)}}}}}function hM(n,e,t){return fM(n,e.parent,t)}function fM(n,e,t){let r=e;for(;r!==null&&r.type&168;)e=r,r=e.parent;if(r===null)return t[tr];if(cs(r)){let{encapsulation:i}=n.data[r.directiveStart+r.componentOffset];if(i===Dn.None||i===Dn.Emulated)return null}return Tn(r,t)}function pM(n,e,t){return mM(n,e,t)}function gM(n,e,t){return n.type&40?Tn(n,t):null}var mM=gM,m0;function Mp(n,e,t,r){let i=hM(n,r,e),s=e[ct],o=r.parent||e[un],a=pM(o,r,e);if(i!=null)if(Array.isArray(t))for(let l=0;l<t.length;l++)g0(s,i,t[l],a,!1);else g0(s,i,t,a,!1);m0!==void 0&&m0(s,r,e,t,i)}function no(n,e){if(e!==null){let t=e.type;if(t&3)return Tn(e,n);if(t&4)return Ef(-1,n[e.index]);if(t&8){let r=e.child;if(r!==null)return no(n,r);{let i=n[e.index];return nr(i)?Ef(-1,i):Sn(i)}}else{if(t&128)return no(n,e.next);if(t&32)return Dp(e,n)()||Sn(n[e.index]);{let r=bE(n,e);if(r!==null){if(Array.isArray(r))return r[0];let i=ii(n[ln]);return no(i,r)}else return no(n,e.next)}}}return null}function bE(n,e){if(e!==null){let r=n[ln][un],i=e.projection;return r.projection[i]}return null}function Ef(n,e){let t=ht+n+1;if(t<e.length){let r=e[t],i=r[Z].firstChild;if(i!==null)return no(r,i)}return e[ri]}function Rp(n,e,t,r,i,s,o){for(;t!=null;){if(t.type===128){t=t.next;continue}let a=r[t.index],l=t.type;if(o&&e===0&&(a&&Eo(Sn(a),r),t.flags|=2),!vE(t))if(l&8)Rp(n,e,t.child,r,i,s,!1),Qi(e,n,i,a,s);else if(l&32){let c=Dp(t,r),u;for(;u=c();)Qi(e,n,i,u,s);Qi(e,n,i,a,s)}else l&16?vM(n,e,r,t,i,s):Qi(e,n,i,a,s);t=o?t.projectionNext:t.next}}function uc(n,e,t,r,i,s){Rp(t,r,n.firstChild,e,i,s,!1)}function vM(n,e,t,r,i,s){let o=t[ln],l=o[un].projection[r.projection];if(Array.isArray(l))for(let c=0;c<l.length;c++){let u=l[c];Qi(e,n,i,u,s)}else{let c=l,u=o[ft];zw(r)&&(c.flags|=128),Rp(n,e,c,u,i,s,!0)}}function yM(n,e,t,r,i){let s=t[ri],o=Sn(t);s!==o&&Qi(e,n,r,s,i);for(let a=ht;a<t.length;a++){let l=t[a];uc(l[Z],l,n,e,r,s)}}function ql(n,e,t,r,i=!1){for(;t!==null;){if(t.type===128){t=i?t.projectionNext:t.next;continue}let s=e[t.index];s!==null&&r.push(Sn(s)),nr(s)&&bM(s,r);let o=t.type;if(o&8)ql(n,e,t.child,r);else if(o&32){let a=Dp(t,e),l;for(;l=a();)r.push(l)}else if(o&16){let a=bE(e,t);if(Array.isArray(a))r.push(...a);else{let l=ii(e[ln]);ql(l[Z],l,a,r,!0)}}t=i?t.projectionNext:t.next}return r}function bM(n,e){for(let t=ht;t<n.length;t++){let r=n[t],i=r[Z].firstChild;i!==null&&ql(r[Z],r,i,e)}n[ri]!==n[tr]&&e.push(n[ri])}function wE(n){if(n[Zi]!==null){for(let e of n[Zi])e.impl.addSequence(e);n[Zi].length=0}}var EE=[];function wM(n){return n[Yt]??EM(n)}function EM(n){let e=EE.pop()??Object.create(_M);return e.lView=n,e}function CM(n){n.lView[Yt]!==n&&(n.lView=null,EE.push(n))}var _M=W(_({},Ga),{consumerIsAlwaysLive:!0,kind:"template",consumerMarkedDirty:n=>{mo(n.lView)},consumerOnSignalRead(){this.lView[Yt]=this}});function AM(n){let e=n[Yt]??Object.create(SM);return e.lView=n,e}var SM=W(_({},Ga),{consumerIsAlwaysLive:!0,kind:"template",consumerMarkedDirty:n=>{let e=ii(n.lView);for(;e&&!CE(e[Z]);)e=ii(e);e&&uw(e)},consumerOnSignalRead(){this.lView[Yt]=this}});function CE(n){return n.type!==2}function _E(n){if(n[kl]===null)return;let e=!0;for(;e;){let t=!1;for(let r of n[kl])r.dirty&&(t=!0,r.zone===null||Zone.current===r.zone?r.run():r.zone.run(()=>r.run()));e=t&&!!(n[K]&8192)}}var xM=100;function AE(n,e=!0,t=0){let i=n[Jn].rendererFactory,s=!1;s||i.begin?.();try{IM(n,t)}catch(o){throw e&&nM(n,o),o}finally{s||i.end?.()}}function IM(n,e){let t=vw();try{n0(!0),Cf(n,e);let r=0;for(;sc(n);){if(r===xM)throw new j(103,!1);r++,Cf(n,1)}}finally{n0(t)}}function DM(n,e,t,r){if(go(e))return;let i=e[K],s=!1,o=!1;sp(e);let a=!0,l=null,c=null;s||(CE(n)?(c=wM(e),l=fh(c)):uh()===null?(a=!1,c=AM(e),l=fh(c)):e[Yt]&&(gh(e[Yt]),e[Yt]=null));try{cw(e),AD(n.bindingStartIndex),t!==null&&fE(n,e,t,2,r);let u=(i&3)===3;if(!s)if(u){let f=n.preOrderCheckHooks;f!==null&&Al(e,f,null)}else{let f=n.preOrderHooks;f!==null&&Sl(e,f,0,null),Wh(e,0)}if(o||TM(e),_E(e),SE(e,0),n.contentQueries!==null&&tE(n,e),!s)if(u){let f=n.contentCheckHooks;f!==null&&Al(e,f)}else{let f=n.contentHooks;f!==null&&Sl(e,f,1),Wh(e,1)}RM(n,e);let d=n.components;d!==null&&IE(e,d,0);let h=n.viewQuery;if(h!==null&&bf(2,h,r),!s)if(u){let f=n.viewCheckHooks;f!==null&&Al(e,f)}else{let f=n.viewHooks;f!==null&&Sl(e,f,2),Wh(e,2)}if(n.firstUpdatePass===!0&&(n.firstUpdatePass=!1),e[zh]){for(let f of e[zh])f();e[zh]=null}s||(wE(e),e[K]&=-73)}catch(u){throw s||mo(e),u}finally{c!==null&&(pb(c,l),a&&CM(c)),op()}}function SE(n,e){for(let t=Gw(n);t!==null;t=Yw(t))for(let r=ht;r<t.length;r++){let i=t[r];xE(i,e)}}function TM(n){for(let e=Gw(n);e!==null;e=Yw(e)){if(!(e[K]&2))continue;let t=e[ns];for(let r=0;r<t.length;r++){let i=t[r];uw(i)}}}function MM(n,e,t){_e(18);let r=xn(e,n);xE(r,t),_e(19,r[tt])}function xE(n,e){ep(n)&&Cf(n,e)}function Cf(n,e){let r=n[Z],i=n[K],s=n[Yt],o=!!(e===0&&i&16);if(o||=!!(i&64&&e===0),o||=!!(i&1024),o||=!!(s?.dirty&&ph(s)),o||=!1,s&&(s.dirty=!1),n[K]&=-9217,o)DM(r,n,r.template,n[tt]);else if(i&8192){_E(n),SE(n,1);let a=r.components;a!==null&&IE(n,a,1),wE(n)}}function IE(n,e,t){for(let r=0;r<e.length;r++)MM(n,e[r],t)}function RM(n,e){let t=n.hostBindingOpCodes;if(t!==null)try{for(let r=0;r<t.length;r++){let i=t[r];if(i<0)si(~i);else{let s=i,o=t[++r],a=t[++r];xD(o,s);let l=e[s];_e(24,l),a(2,l),_e(25,l)}}}finally{si(-1)}}function Op(n,e){let t=vw()?64:1088;for(n[Jn].changeDetectionScheduler?.notify(e);n;){n[K]|=t;let r=ii(n);if(Fl(n)&&!r)return n;n=r}return null}function DE(n,e,t,r){return[n,!0,0,e,null,r,null,t,null,null]}function TE(n,e){let t=ht+e;if(t<n.length)return n[t]}function dc(n,e,t,r=!0){let i=e[Z];if(OM(i,e,n,t),r){let o=Ef(t,n),a=e[ct],l=a.parentNode(n[ri]);l!==null&&lM(i,n[un],a,e,l,o)}let s=e[oo];s!==null&&s.firstChild!==null&&(s.firstChild=null)}function ME(n,e){let t=uo(n,e);return t!==void 0&&cc(t[Z],t),t}function uo(n,e){if(n.length<=ht)return;let t=ht+e,r=n[t];if(r){let i=r[ni];i!==null&&i!==n&&Tp(i,r),e>0&&(n[t-1][an]=r[an]);let s=Ol(n,ht+e);aM(r[Z],r);let o=s[er];o!==null&&o.detachView(s[Z]),r[ft]=null,r[an]=null,r[K]&=-129}return r}function OM(n,e,t,r){let i=ht+r,s=t.length;r>0&&(t[i-1][an]=e),r<s-ht?(e[an]=t[i],G0(t,ht+r,e)):(t.push(e),e[an]=null),e[ft]=t;let o=e[ni];o!==null&&t!==o&&RE(o,e);let a=e[er];a!==null&&a.insertView(n),of(e),e[K]|=128}function RE(n,e){let t=n[ns],r=e[ft];if(Sr(r))n[K]|=2;else{let i=r[ft][ln];e[ln]!==i&&(n[K]|=2)}t===null?n[ns]=[e]:t.push(e)}var ho=class{_lView;_cdRefInjectingView;notifyErrorHandler;_appRef=null;_attachedToViewContainer=!1;get rootNodes(){let e=this._lView,t=e[Z];return ql(t,e,t.firstChild,[])}constructor(e,t,r=!0){this._lView=e,this._cdRefInjectingView=t,this.notifyErrorHandler=r}get context(){return this._lView[tt]}set context(e){this._lView[tt]=e}get destroyed(){return go(this._lView)}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){let e=this._lView[ft];if(nr(e)){let t=e[Ll],r=t?t.indexOf(this):-1;r>-1&&(uo(e,r),Ol(t,r))}this._attachedToViewContainer=!1}cc(this._lView[Z],this._lView)}onDestroy(e){dw(this._lView,e)}markForCheck(){Op(this._cdRefInjectingView||this._lView,4)}detach(){this._lView[K]&=-129}reattach(){of(this._lView),this._lView[K]|=128}detectChanges(){this._lView[K]|=1024,AE(this._lView,this.notifyErrorHandler)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new j(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null;let e=Fl(this._lView),t=this._lView[ni];t!==null&&!e&&Tp(t,this._lView),yE(this._lView[Z],this._lView)}attachToAppRef(e){if(this._attachedToViewContainer)throw new j(902,!1);this._appRef=e;let t=Fl(this._lView),r=this._lView[ni];r!==null&&!t&&RE(r,this._lView),of(this._lView)}};var oi=(()=>{class n{static __NG_ELEMENT_ID__=kM}return n})(),PM=oi,NM=class extends PM{_declarationLView;_declarationTContainer;elementRef;constructor(e,t,r){super(),this._declarationLView=e,this._declarationTContainer=t,this.elementRef=r}get ssrId(){return this._declarationTContainer.tView?.ssrId||null}createEmbeddedView(e,t){return this.createEmbeddedViewImpl(e,t)}createEmbeddedViewImpl(e,t,r){let i=lc(this._declarationLView,this._declarationTContainer,e,{embeddedViewInjector:t,dehydratedView:r});return new ho(i)}};function kM(){return Pp(dn(),ge())}function Pp(n,e){return n.type&4?new NM(e,n,hs(n,e)):null}function Np(n,e,t,r,i){let s=n.data[e];if(s===null)s=LM(n,e,t,r,i),SD()&&(s.flags|=32);else if(s.type&64){s.type=t,s.value=r,s.attrs=i;let o=CD();s.injectorIndex=o===null?-1:o.injectorIndex}return vo(s,!0),s}function LM(n,e,t,r,i){let s=gw(),o=mw(),a=o?s:s&&s.parent,l=n.data[e]=jM(n,a,t,e,r,i);return FM(n,l,s,o),l}function FM(n,e,t,r){n.firstChild===null&&(n.firstChild=e),t!==null&&(r?t.child==null&&e.parent!==null&&(t.child=e):t.next===null&&(t.next=e,e.prev=t))}function jM(n,e,t,r,i,s){let o=e?e.injectorIndex:-1,a=0;return bD()&&(a|=128),{type:t,index:r,insertBeforeIndex:null,injectorIndex:o,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,componentOffset:-1,propertyBindings:null,flags:a,providerIndexes:0,value:i,attrs:s,mergedAttrs:null,localNames:null,initialInputs:null,inputs:null,hostDirectiveInputs:null,outputs:null,hostDirectiveOutputs:null,directiveToIndex:null,tView:null,next:null,prev:null,projectionNext:null,child:null,parent:e,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}var Vz=new RegExp(`^(\\d+)*(${fT}|${hT})*(.*)`);var BM=()=>null;function fo(n,e){return BM(n,e)}var VM=class{},OE=class{},_f=class{resolveComponentFactory(e){throw Error(`No component factory found for ${Pt(e)}.`)}},hc=class{static NULL=new _f},ss=class{},fc=(()=>{class n{destroyNode=null;static __NG_ELEMENT_ID__=()=>HM()}return n})();function HM(){let n=ge(),e=dn(),t=xn(e.index,n);return(Sr(t)?t:n)[ct]}var UM=(()=>{class n{static \u0275prov=k({token:n,providedIn:"root",factory:()=>null})}return n})();var Yh={},Af=class{injector;parentInjector;constructor(e,t){this.injector=e,this.parentInjector=t}get(e,t,r){r=tc(r);let i=this.injector.get(e,Yh,r);return i!==Yh||t===Yh?i:this.parentInjector.get(e,t,r)}};function v0(n,e,t){let r=t?n.styles:null,i=t?n.classes:null,s=0;if(e!==null)for(let o=0;o<e.length;o++){let a=e[o];if(typeof a=="number")s=a;else if(s==1)i=Gb(i,a);else if(s==2){let l=a,c=e[++o];r=Gb(r,l+": "+c+";")}}t?n.styles=r:n.stylesWithoutHost=r,t?n.classes=i:n.classesWithoutHost=i}function Ue(n,e=se.Default){let t=ge();if(t===null)return q(n,e);let r=dn();return Nw(r,t,Gt(n),e)}function PE(){let n="invalid";throw new Error(n)}function NE(n,e,t,r,i){let s=r===null?null:{"":-1},o=i(n,t);if(o!==null){let a,l=null,c=null,u=zM(o);u===null?a=o:[a,l,c]=u,GM(n,e,t,a,s,l,c)}s!==null&&r!==null&&$M(t,r,s)}function $M(n,e,t){let r=n.localNames=[];for(let i=0;i<e.length;i+=2){let s=t[e[i+1]];if(s==null)throw new j(-301,!1);r.push(e[i],s)}}function zM(n){let e=null,t=!1;for(let o=0;o<n.length;o++){let a=n[o];if(o===0&&li(a)&&(e=a),a.findHostDirectiveDefs!==null){t=!0;break}}if(!t)return null;let r=null,i=null,s=null;for(let o of n)o.findHostDirectiveDefs!==null&&(r??=[],i??=new Map,s??=new Map,WM(o,r,s,i)),o===e&&(r??=[],r.push(o));return r!==null?(r.push(...e===null?n:n.slice(1)),[r,i,s]):null}function WM(n,e,t,r){let i=e.length;n.findHostDirectiveDefs(n,e,r),t.set(n,[i,e.length-1])}function qM(n,e,t){e.componentOffset=t,(n.components??=[]).push(e.index)}function GM(n,e,t,r,i,s,o){let a=r.length,l=!1;for(let h=0;h<a;h++){let f=r[h];!l&&li(f)&&(l=!0,qM(n,t,h)),$D(Mw(t,e),n,f.type)}JM(t,n.data.length,a);for(let h=0;h<a;h++){let f=r[h];f.providersResolver&&f.providersResolver(f)}let c=!1,u=!1,d=dE(n,e,a,null);a>0&&(t.directiveToIndex=new Map);for(let h=0;h<a;h++){let f=r[h];if(t.mergedAttrs=up(t.mergedAttrs,f.hostAttrs),KM(n,t,e,d,f),ZM(d,f,i),o!==null&&o.has(f)){let[g,v]=o.get(f);t.directiveToIndex.set(f.type,[d,g+t.directiveStart,v+t.directiveStart])}else(s===null||!s.has(f))&&t.directiveToIndex.set(f.type,d);f.contentQueries!==null&&(t.flags|=4),(f.hostBindings!==null||f.hostAttrs!==null||f.hostVars!==0)&&(t.flags|=64);let p=f.type.prototype;!c&&(p.ngOnChanges||p.ngOnInit||p.ngDoCheck)&&((n.preOrderHooks??=[]).push(t.index),c=!0),!u&&(p.ngOnChanges||p.ngDoCheck)&&((n.preOrderCheckHooks??=[]).push(t.index),u=!0),d++}YM(n,t,s)}function YM(n,e,t){for(let r=e.directiveStart;r<e.directiveEnd;r++){let i=n.data[r];if(t===null||!t.has(i))y0(0,e,i,r),y0(1,e,i,r),w0(e,r,!1);else{let s=t.get(i);b0(0,e,s,r),b0(1,e,s,r),w0(e,r,!0)}}}function y0(n,e,t,r){let i=n===0?t.inputs:t.outputs;for(let s in i)if(i.hasOwnProperty(s)){let o;n===0?o=e.inputs??={}:o=e.outputs??={},o[s]??=[],o[s].push(r),kE(e,s)}}function b0(n,e,t,r){let i=n===0?t.inputs:t.outputs;for(let s in i)if(i.hasOwnProperty(s)){let o=i[s],a;n===0?a=e.hostDirectiveInputs??={}:a=e.hostDirectiveOutputs??={},a[o]??=[],a[o].push(r,s),kE(e,o)}}function kE(n,e){e==="class"?n.flags|=8:e==="style"&&(n.flags|=16)}function w0(n,e,t){let{attrs:r,inputs:i,hostDirectiveInputs:s}=n;if(r===null||!t&&i===null||t&&s===null||Ep(n)){n.initialInputs??=[],n.initialInputs.push(null);return}let o=null,a=0;for(;a<r.length;){let l=r[a];if(l===0){a+=4;continue}else if(l===5){a+=2;continue}else if(typeof l=="number")break;if(!t&&i.hasOwnProperty(l)){let c=i[l];for(let u of c)if(u===e){o??=[],o.push(l,r[a+1]);break}}else if(t&&s.hasOwnProperty(l)){let c=s[l];for(let u=0;u<c.length;u+=2)if(c[u]===e){o??=[],o.push(c[u+1],r[a+1]);break}}a+=2}n.initialInputs??=[],n.initialInputs.push(o)}function KM(n,e,t,r,i){n.data[r]=i;let s=i.factory||(i.factory=ei(i.type,!0)),o=new lo(s,li(i),Ue);n.blueprint[r]=o,t[r]=o,XM(n,e,r,dE(n,t,i.hostVars,ci),i)}function XM(n,e,t,r,i){let s=i.hostBindings;if(s){let o=n.hostBindingOpCodes;o===null&&(o=n.hostBindingOpCodes=[]);let a=~e.index;QM(o)!=a&&o.push(a),o.push(t,r,s)}}function QM(n){let e=n.length;for(;e>0;){let t=n[--e];if(typeof t=="number"&&t<0)return t}return 0}function ZM(n,e,t){if(t){if(e.exportAs)for(let r=0;r<e.exportAs.length;r++)t[e.exportAs[r]]=n;li(e)&&(t[""]=n)}}function JM(n,e,t){n.flags|=1,n.directiveStart=e,n.directiveEnd=e+t,n.providerIndexes=e}function LE(n,e,t,r,i,s,o,a){let l=e.consts,c=rs(l,o),u=Np(e,n,2,r,c);return s&&NE(e,t,u,rs(l,a),i),u.mergedAttrs=up(u.mergedAttrs,u.attrs),u.attrs!==null&&v0(u,u.attrs,!1),u.mergedAttrs!==null&&v0(u,u.mergedAttrs,!0),e.queries!==null&&e.queries.elementStart(e,u),u}function FE(n,e){Sw(n,e),rw(e)&&n.queries.elementEnd(e)}var Gl=class extends hc{ngModule;constructor(e){super(),this.ngModule=e}resolveComponentFactory(e){let t=ti(e);return new os(t,this.ngModule)}};function e1(n){return Object.keys(n).map(e=>{let[t,r,i]=n[e],s={propName:t,templateName:e,isSignal:(r&ac.SignalBased)!==0};return i&&(s.transform=i),s})}function t1(n){return Object.keys(n).map(e=>({propName:n[e],templateName:e}))}function n1(n,e,t){let r=e instanceof At?e:e?.injector;return r&&n.getStandaloneInjector!==null&&(r=n.getStandaloneInjector(r)||r),r?new Af(t,r):t}function r1(n){let e=n.get(ss,null);if(e===null)throw new j(407,!1);let t=n.get(UM,null),r=n.get(is,null);return{rendererFactory:e,sanitizer:t,changeDetectionScheduler:r}}function i1(n,e){let t=(n.selectors[0][0]||"div").toLowerCase();return aE(e,t,t==="svg"?lw:t==="math"?lD:null)}var os=class extends OE{componentDef;ngModule;selector;componentType;ngContentSelectors;isBoundToModule;cachedInputs=null;cachedOutputs=null;get inputs(){return this.cachedInputs??=e1(this.componentDef.inputs),this.cachedInputs}get outputs(){return this.cachedOutputs??=t1(this.componentDef.outputs),this.cachedOutputs}constructor(e,t){super(),this.componentDef=e,this.ngModule=t,this.componentType=e.type,this.selector=kT(e.selectors),this.ngContentSelectors=e.ngContentSelectors??[],this.isBoundToModule=!!t}create(e,t,r,i){_e(22);let s=ie(null);try{let o=this.componentDef,a=r?["ng-version","19.2.7"]:LT(this.componentDef.selectors[0]),l=Cp(0,null,null,1,0,null,null,null,null,[a],null),c=n1(o,i||this.ngModule,e),u=r1(c),d=u.rendererFactory.createRenderer(null,o),h=r?WT(d,r,o.encapsulation,c):i1(o,d),f=_p(null,l,null,512|uE(o),null,null,u,d,c,null,eE(h,c,!0));f[St]=h,sp(f);let p=null;try{let g=LE(St,l,f,"#host",()=>[this.componentDef],!0,0);h&&(cE(d,h,g),Eo(h,f)),Sp(l,f,g),nE(l,g,f),FE(l,g),t!==void 0&&s1(g,this.ngContentSelectors,t),p=xn(g.index,f),f[tt]=p[tt],Ip(l,f,null)}catch(g){throw p!==null&&mf(p),mf(f),g}finally{_e(23),op()}return new Sf(this.componentType,f)}finally{ie(s)}}},Sf=class extends VM{_rootLView;instance;hostView;changeDetectorRef;componentType;location;previousInputValues=null;_tNode;constructor(e,t){super(),this._rootLView=t,this._tNode=Jf(t[Z],St),this.location=hs(this._tNode,t),this.instance=xn(this._tNode.index,t)[tt],this.hostView=this.changeDetectorRef=new ho(t,void 0,!1),this.componentType=e}setInput(e,t){let r=this._tNode;if(this.previousInputValues??=new Map,this.previousInputValues.has(e)&&Object.is(this.previousInputValues.get(e),t))return;let i=this._rootLView,s=xp(r,i[Z],i,e,t);this.previousInputValues.set(e,t);let o=xn(r.index,i);Op(o,1)}get injector(){return new Jr(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(e){this.hostView.onDestroy(e)}};function s1(n,e,t){let r=n.projection=[];for(let i=0;i<e.length;i++){let s=t[i];r.push(s!=null&&s.length?Array.from(s):null)}}var Tr=(()=>{class n{static __NG_ELEMENT_ID__=o1}return n})();function o1(){let n=dn();return BE(n,ge())}var a1=Tr,jE=class extends a1{_lContainer;_hostTNode;_hostLView;constructor(e,t,r){super(),this._lContainer=e,this._hostTNode=t,this._hostLView=r}get element(){return hs(this._hostTNode,this._hostLView)}get injector(){return new Jr(this._hostTNode,this._hostLView)}get parentInjector(){let e=dp(this._hostTNode,this._hostLView);if(Iw(e)){let t=Bl(e,this._hostLView),r=jl(e),i=t[Z].data[r+8];return new Jr(i,t)}else return new Jr(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(e){let t=E0(this._lContainer);return t!==null&&t[e]||null}get length(){return this._lContainer.length-ht}createEmbeddedView(e,t,r){let i,s;typeof r=="number"?i=r:r!=null&&(i=r.index,s=r.injector);let o=fo(this._lContainer,e.ssrId),a=e.createEmbeddedViewImpl(t||{},s,o);return this.insertImpl(a,i,co(this._hostTNode,o)),a}createComponent(e,t,r,i,s){let o=e&&!iD(e),a;if(o)a=t;else{let p=t||{};a=p.index,r=p.injector,i=p.projectableNodes,s=p.environmentInjector||p.ngModuleRef}let l=o?e:new os(ti(e)),c=r||this.parentInjector;if(!s&&l.ngModule==null){let g=(o?c:this.parentInjector).get(At,null);g&&(s=g)}let u=ti(l.componentType??{}),d=fo(this._lContainer,u?.id??null),h=d?.firstChild??null,f=l.create(c,i,h,s);return this.insertImpl(f.hostView,a,co(this._hostTNode,d)),f}insert(e,t){return this.insertImpl(e,t,!0)}insertImpl(e,t,r){let i=e._lView;if(hD(i)){let a=this.indexOf(e);if(a!==-1)this.detach(a);else{let l=i[ft],c=new jE(l,l[un],l[ft]);c.detach(c.indexOf(e))}}let s=this._adjustIndex(t),o=this._lContainer;return dc(o,i,s,r),e.attachToViewContainerRef(),G0(Kh(o),s,e),e}move(e,t){return this.insert(e,t)}indexOf(e){let t=E0(this._lContainer);return t!==null?t.indexOf(e):-1}remove(e){let t=this._adjustIndex(e,-1),r=uo(this._lContainer,t);r&&(Ol(Kh(this._lContainer),t),cc(r[Z],r))}detach(e){let t=this._adjustIndex(e,-1),r=uo(this._lContainer,t);return r&&Ol(Kh(this._lContainer),t)!=null?new ho(r):null}_adjustIndex(e,t=0){return e??this.length+t}};function E0(n){return n[Ll]}function Kh(n){return n[Ll]||(n[Ll]=[])}function BE(n,e){let t,r=e[n.index];return nr(r)?t=r:(t=DE(r,e,null,n),e[n.index]=t,Ap(e,t)),c1(t,e,n,r),new jE(t,n,e)}function l1(n,e){let t=n[ct],r=t.createComment(""),i=Tn(e,n),s=t.parentNode(i);return Wl(t,s,r,t.nextSibling(i),!1),r}var c1=h1,u1=()=>!1;function d1(n,e,t){return u1(n,e,t)}function h1(n,e,t,r){if(n[ri])return;let i;t.type&8?i=Sn(r):i=l1(e,t),n[ri]=i}var xf=class n{queryList;matches=null;constructor(e){this.queryList=e}clone(){return new n(this.queryList)}setDirty(){this.queryList.setDirty()}},If=class n{queries;constructor(e=[]){this.queries=e}createEmbeddedView(e){let t=e.queries;if(t!==null){let r=e.contentQueries!==null?e.contentQueries[0]:t.length,i=[];for(let s=0;s<r;s++){let o=t.getByIndex(s),a=this.queries[o.indexInDeclarationView];i.push(a.clone())}return new n(i)}return null}insertView(e){this.dirtyQueriesWithMatches(e)}detachView(e){this.dirtyQueriesWithMatches(e)}finishViewCreation(e){this.dirtyQueriesWithMatches(e)}dirtyQueriesWithMatches(e){for(let t=0;t<this.queries.length;t++)kp(e,t).matches!==null&&this.queries[t].setDirty()}},Df=class{flags;read;predicate;constructor(e,t,r=null){this.flags=t,this.read=r,typeof e=="string"?this.predicate=w1(e):this.predicate=e}},Tf=class n{queries;constructor(e=[]){this.queries=e}elementStart(e,t){for(let r=0;r<this.queries.length;r++)this.queries[r].elementStart(e,t)}elementEnd(e){for(let t=0;t<this.queries.length;t++)this.queries[t].elementEnd(e)}embeddedTView(e){let t=null;for(let r=0;r<this.length;r++){let i=t!==null?t.length:0,s=this.getByIndex(r).embeddedTView(e,i);s&&(s.indexInDeclarationView=r,t!==null?t.push(s):t=[s])}return t!==null?new n(t):null}template(e,t){for(let r=0;r<this.queries.length;r++)this.queries[r].template(e,t)}getByIndex(e){return this.queries[e]}get length(){return this.queries.length}track(e){this.queries.push(e)}},Mf=class n{metadata;matches=null;indexInDeclarationView=-1;crossesNgTemplate=!1;_declarationNodeIndex;_appliesToNextNode=!0;constructor(e,t=-1){this.metadata=e,this._declarationNodeIndex=t}elementStart(e,t){this.isApplyingToNode(t)&&this.matchTNode(e,t)}elementEnd(e){this._declarationNodeIndex===e.index&&(this._appliesToNextNode=!1)}template(e,t){this.elementStart(e,t)}embeddedTView(e,t){return this.isApplyingToNode(e)?(this.crossesNgTemplate=!0,this.addMatch(-e.index,t),new n(this.metadata)):null}isApplyingToNode(e){if(this._appliesToNextNode&&(this.metadata.flags&1)!==1){let t=this._declarationNodeIndex,r=e.parent;for(;r!==null&&r.type&8&&r.index!==t;)r=r.parent;return t===(r!==null?r.index:-1)}return this._appliesToNextNode}matchTNode(e,t){let r=this.metadata.predicate;if(Array.isArray(r))for(let i=0;i<r.length;i++){let s=r[i];this.matchTNodeWithReadOption(e,t,f1(t,s)),this.matchTNodeWithReadOption(e,t,xl(t,e,s,!1,!1))}else r===oi?t.type&4&&this.matchTNodeWithReadOption(e,t,-1):this.matchTNodeWithReadOption(e,t,xl(t,e,r,!1,!1))}matchTNodeWithReadOption(e,t,r){if(r!==null){let i=this.metadata.read;if(i!==null)if(i===Mn||i===Tr||i===oi&&t.type&4)this.addMatch(t.index,-2);else{let s=xl(t,e,i,!1,!1);s!==null&&this.addMatch(t.index,s)}else this.addMatch(t.index,r)}}addMatch(e,t){this.matches===null?this.matches=[e,t]:this.matches.push(e,t)}};function f1(n,e){let t=n.localNames;if(t!==null){for(let r=0;r<t.length;r+=2)if(t[r]===e)return t[r+1]}return null}function p1(n,e){return n.type&11?hs(n,e):n.type&4?Pp(n,e):null}function g1(n,e,t,r){return t===-1?p1(e,n):t===-2?m1(n,e,r):Hl(n,n[Z],t,e)}function m1(n,e,t){if(t===Mn)return hs(e,n);if(t===oi)return Pp(e,n);if(t===Tr)return BE(e,n)}function VE(n,e,t,r){let i=e[er].queries[r];if(i.matches===null){let s=n.data,o=t.matches,a=[];for(let l=0;o!==null&&l<o.length;l+=2){let c=o[l];if(c<0)a.push(null);else{let u=s[c];a.push(g1(e,u,o[l+1],t.metadata.read))}}i.matches=a}return i.matches}function Rf(n,e,t,r){let i=n.queries.getByIndex(t),s=i.matches;if(s!==null){let o=VE(n,e,i,t);for(let a=0;a<s.length;a+=2){let l=s[a];if(l>0)r.push(o[a/2]);else{let c=s[a+1],u=e[-l];for(let d=ht;d<u.length;d++){let h=u[d];h[ni]===h[ft]&&Rf(h[Z],h,c,r)}if(u[ns]!==null){let d=u[ns];for(let h=0;h<d.length;h++){let f=d[h];Rf(f[Z],f,c,r)}}}}}return r}function v1(n,e){return n[er].queries[e].queryList}function y1(n,e,t){let r=new gf((t&4)===4);return gD(n,e,r,r.destroy),(e[er]??=new If).queries.push(new xf(r))-1}function b1(n,e,t){let r=Nt();return r.firstCreatePass&&(E1(r,new Df(n,e,t),-1),(e&2)===2&&(r.staticViewQueries=!0)),y1(r,ge(),e)}function w1(n){return n.split(",").map(e=>e.trim())}function E1(n,e,t){n.queries===null&&(n.queries=new Tf),n.queries.track(new Mf(e,t))}function kp(n,e){return n.queries.getByIndex(e)}function C1(n,e){let t=n[Z],r=kp(t,e);return r.crossesNgTemplate?Rf(t,n,e,[]):VE(t,n,r,e)}var as=class{},Lp=class{};var Of=class extends as{ngModuleType;_parent;_bootstrapComponents=[];_r3Injector;instance;destroyCbs=[];componentFactoryResolver=new Gl(this);constructor(e,t,r,i=!0){super(),this.ngModuleType=e,this._parent=t;let s=X0(e);this._bootstrapComponents=sE(s.bootstrap),this._r3Injector=Fw(e,t,[{provide:as,useValue:this},{provide:hc,useValue:this.componentFactoryResolver},...r],Pt(e),new Set(["environment"])),i&&this.resolveInjectorInitializers()}resolveInjectorInitializers(){this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(this.ngModuleType)}get injector(){return this._r3Injector}destroy(){let e=this._r3Injector;!e.destroyed&&e.destroy(),this.destroyCbs.forEach(t=>t()),this.destroyCbs=null}onDestroy(e){this.destroyCbs.push(e)}},Pf=class extends Lp{moduleType;constructor(e){super(),this.moduleType=e}create(e){return new Of(this.moduleType,e,[])}};var Yl=class extends as{injector;componentFactoryResolver=new Gl(this);instance=null;constructor(e){super();let t=new so([...e.providers,{provide:as,useValue:this},{provide:hc,useValue:this.componentFactoryResolver}],e.parent||Qf(),e.debugName,new Set(["environment"]));this.injector=t,e.runEnvironmentInitializers&&t.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(e){this.injector.onDestroy(e)}};function Co(n,e,t=null){return new Yl({providers:n,parent:e,debugName:t,runEnvironmentInitializers:!0}).injector}var _1=(()=>{class n{_injector;cachedInjectors=new Map;constructor(t){this._injector=t}getOrCreateStandaloneInjector(t){if(!t.standalone)return null;if(!this.cachedInjectors.has(t)){let r=Q0(!1,t.type),i=r.length>0?Co([r],this._injector,`Standalone[${t.type.name}]`):null;this.cachedInjectors.set(t,i)}return this.cachedInjectors.get(t)}ngOnDestroy(){try{for(let t of this.cachedInjectors.values())t!==null&&t.destroy()}finally{this.cachedInjectors.clear()}}static \u0275prov=k({token:n,providedIn:"environment",factory:()=>new n(q(At))})}return n})();function xe(n){return po(()=>{let e=UE(n),t=W(_({},e),{decls:n.decls,vars:n.vars,template:n.template,consts:n.consts||null,ngContentSelectors:n.ngContentSelectors,onPush:n.changeDetection===Ww.OnPush,directiveDefs:null,pipeDefs:null,dependencies:e.standalone&&n.dependencies||null,getStandaloneInjector:e.standalone?i=>i.get(_1).getOrCreateStandaloneInjector(t):null,getExternalStyles:null,signals:n.signals??!1,data:n.data||{},encapsulation:n.encapsulation||Dn.Emulated,styles:n.styles||_n,_:null,schemas:n.schemas||null,tView:null,id:""});e.standalone&&Dr("NgStandalone"),$E(t);let r=n.dependencies;return t.directiveDefs=C0(r,!1),t.pipeDefs=C0(r,!0),t.id=D1(t),t})}function A1(n){return ti(n)||WI(n)}function S1(n){return n!==null}function Mr(n){return po(()=>({type:n.type,bootstrap:n.bootstrap||_n,declarations:n.declarations||_n,imports:n.imports||_n,exports:n.exports||_n,transitiveCompileScopes:null,schemas:n.schemas||null,id:n.id||null}))}function x1(n,e){if(n==null)return es;let t={};for(let r in n)if(n.hasOwnProperty(r)){let i=n[r],s,o,a,l;Array.isArray(i)?(a=i[0],s=i[1],o=i[2]??s,l=i[3]||null):(s=i,o=i,a=ac.None,l=null),t[s]=[r,a,l],e[s]=o}return t}function I1(n){if(n==null)return es;let e={};for(let t in n)n.hasOwnProperty(t)&&(e[n[t]]=t);return e}function di(n){return po(()=>{let e=UE(n);return $E(e),e})}function HE(n){return{type:n.type,name:n.name,factory:null,pure:n.pure!==!1,standalone:n.standalone??!0,onDestroy:n.type.prototype.ngOnDestroy||null}}function UE(n){let e={};return{type:n.type,providersResolver:null,factory:null,hostBindings:n.hostBindings||null,hostVars:n.hostVars||0,hostAttrs:n.hostAttrs||null,contentQueries:n.contentQueries||null,declaredInputs:e,inputConfig:n.inputs||es,exportAs:n.exportAs||null,standalone:n.standalone??!0,signals:n.signals===!0,selectors:n.selectors||_n,viewQuery:n.viewQuery||null,features:n.features||null,setInput:null,findHostDirectiveDefs:null,hostDirectives:null,inputs:x1(n.inputs,e),outputs:I1(n.outputs),debugInfo:null}}function $E(n){n.features?.forEach(e=>e(n))}function C0(n,e){if(!n)return null;let t=e?qI:A1;return()=>(typeof n=="function"?n():n).map(r=>t(r)).filter(S1)}function D1(n){let e=0,t=typeof n.consts=="function"?"":n.consts,r=[n.selectors,n.ngContentSelectors,n.hostVars,n.hostAttrs,t,n.vars,n.decls,n.encapsulation,n.standalone,n.signals,n.exportAs,JSON.stringify(n.inputs),JSON.stringify(n.outputs),Object.getOwnPropertyNames(n.type.prototype),!!n.contentQueries,!!n.viewQuery];for(let s of r.join("|"))e=Math.imul(31,e)+s.charCodeAt(0)<<0;return e+=2147483648,"c"+e}function zE(n){return M1(n)?Array.isArray(n)||!(n instanceof Map)&&Symbol.iterator in n:!1}function T1(n,e){if(Array.isArray(n))for(let t=0;t<n.length;t++)e(n[t]);else{let t=n[Symbol.iterator](),r;for(;!(r=t.next()).done;)e(r.value)}}function M1(n){return n!==null&&(typeof n=="function"||typeof n=="object")}function WE(n,e,t){return n[e]=t}function xr(n,e,t){let r=n[e];return Object.is(r,t)?!1:(n[e]=t,!0)}function R1(n,e,t,r){let i=xr(n,e,t);return xr(n,e+1,r)||i}function O1(n,e,t,r,i,s,o,a,l){let c=e.consts,u=Np(e,n,4,o||null,a||null);hw()&&NE(e,t,u,rs(c,l),mE),u.mergedAttrs=up(u.mergedAttrs,u.attrs),Sw(e,u);let d=u.tView=Cp(2,u,r,i,s,e.directiveRegistry,e.pipeRegistry,null,e.schemas,c,null);return e.queries!==null&&(e.queries.template(e,u),d.queries=e.queries.embeddedTView(u)),u}function Nf(n,e,t,r,i,s,o,a,l,c){let u=t+St,d=e.firstCreatePass?O1(u,e,n,r,i,s,o,a,l):e.data[u];vo(d,!1);let h=P1(e,n,d,t);lp()&&Mp(e,n,h,d),Eo(h,n);let f=DE(h,n,h,d);return n[u]=f,Ap(n,f),d1(f,d,n),Zf(d)&&Sp(e,n,d),l!=null&&pE(n,d,c),d}function kt(n,e,t,r,i,s,o,a){let l=ge(),c=Nt(),u=rs(c.consts,s);return Nf(l,c,n,e,t,r,i,u,o,a),kt}var P1=N1;function N1(n,e,t,r){return cp(!0),e[ct].createComment("")}var qE=(()=>{class n{log(t){console.log(t)}warn(t){console.warn(t)}static \u0275fac=function(r){return new(r||n)};static \u0275prov=k({token:n,factory:n.\u0275fac,providedIn:"platform"})}return n})();var GE=new z("");var k1=(()=>{class n{static \u0275prov=k({token:n,providedIn:"root",factory:()=>new kf})}return n})(),kf=class{queuedEffectCount=0;queues=new Map;schedule(e){this.enqueue(e)}remove(e){let t=e.zone,r=this.queues.get(t);r.has(e)&&(r.delete(e),this.queuedEffectCount--)}enqueue(e){let t=e.zone;this.queues.has(t)||this.queues.set(t,new Set);let r=this.queues.get(t);r.has(e)||(this.queuedEffectCount++,r.add(e))}flush(){for(;this.queuedEffectCount>0;)for(let[e,t]of this.queues)e===null?this.flushQueue(t):e.run(()=>this.flushQueue(t))}flushQueue(e){for(let t of e)e.delete(t),this.queuedEffectCount--,t.run()}};function gs(n){return!!n&&typeof n.then=="function"}function Fp(n){return!!n&&typeof n.subscribe=="function"}var YE=new z("");function jp(n){return nc([{provide:YE,multi:!0,useValue:n}])}var KE=(()=>{class n{resolve;reject;initialized=!1;done=!1;donePromise=new Promise((t,r)=>{this.resolve=t,this.reject=r});appInits=R(YE,{optional:!0})??[];injector=R(cn);constructor(){}runInitializers(){if(this.initialized)return;let t=[];for(let i of this.appInits){let s=Kt(this.injector,i);if(gs(s))t.push(s);else if(Fp(s)){let o=new Promise((a,l)=>{s.subscribe({complete:a,error:l})});t.push(o)}}let r=()=>{this.done=!0,this.resolve()};Promise.all(t).then(()=>{r()}).catch(i=>{this.reject(i)}),t.length===0&&r(),this.initialized=!0}static \u0275fac=function(r){return new(r||n)};static \u0275prov=k({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),pc=new z("");function L1(){mh(()=>{throw new j(600,!1)})}function F1(n){return n.isBoundToModule}var j1=10;var ai=(()=>{class n{_runningTick=!1;_destroyed=!1;_destroyListeners=[];_views=[];internalErrorHandler=R(nT);afterRenderManager=R(Jw);zonelessEnabled=R(fp);rootEffectScheduler=R(k1);dirtyFlags=0;tracingSnapshot=null;externalTestViews=new Set;afterTick=new Oe;get allViews(){return[...this.externalTestViews.keys(),...this._views]}get destroyed(){return this._destroyed}componentTypes=[];components=[];isStable=R(ds).hasPendingTasks.pipe($(t=>!t));constructor(){R(ps,{optional:!0})}whenStable(){let t;return new Promise(r=>{t=this.isStable.subscribe({next:i=>{i&&r()}})}).finally(()=>{t.unsubscribe()})}_injector=R(At);_rendererFactory=null;get injector(){return this._injector}bootstrap(t,r){return this.bootstrapImpl(t,r)}bootstrapImpl(t,r,i=cn.NULL){_e(10);let s=t instanceof OE;if(!this._injector.get(KE).done){let f="";throw new j(405,f)}let a;s?a=t:a=this._injector.get(hc).resolveComponentFactory(t),this.componentTypes.push(a.componentType);let l=F1(a)?void 0:this._injector.get(as),c=r||a.selector,u=a.create(i,[],c,l),d=u.location.nativeElement,h=u.injector.get(GE,null);return h?.registerApplication(d),u.onDestroy(()=>{this.detachView(u.hostView),Il(this.components,u),h?.unregisterApplication(d)}),this._loadComponent(u),_e(11,u),u}tick(){this.zonelessEnabled||(this.dirtyFlags|=1),this._tick()}_tick(){_e(12),this.tracingSnapshot!==null?this.tracingSnapshot.run(bp.CHANGE_DETECTION,this.tickImpl):this.tickImpl()}tickImpl=()=>{if(this._runningTick)throw new j(101,!1);let t=ie(null);try{this._runningTick=!0,this.synchronize()}catch(r){this.internalErrorHandler(r)}finally{this._runningTick=!1,this.tracingSnapshot?.dispose(),this.tracingSnapshot=null,ie(t),this.afterTick.next(),_e(13)}};synchronize(){this._rendererFactory===null&&!this._injector.destroyed&&(this._rendererFactory=this._injector.get(ss,null,{optional:!0}));let t=0;for(;this.dirtyFlags!==0&&t++<j1;)_e(14),this.synchronizeOnce(),_e(15)}synchronizeOnce(){if(this.dirtyFlags&16&&(this.dirtyFlags&=-17,this.rootEffectScheduler.flush()),this.dirtyFlags&7){let t=!!(this.dirtyFlags&1);this.dirtyFlags&=-8,this.dirtyFlags|=8;for(let{_lView:r,notifyErrorHandler:i}of this.allViews)B1(r,i,t,this.zonelessEnabled);if(this.dirtyFlags&=-5,this.syncDirtyFlagsWithViews(),this.dirtyFlags&23)return}else this._rendererFactory?.begin?.(),this._rendererFactory?.end?.();this.dirtyFlags&8&&(this.dirtyFlags&=-9,this.afterRenderManager.execute()),this.syncDirtyFlagsWithViews()}syncDirtyFlagsWithViews(){if(this.allViews.some(({_lView:t})=>sc(t))){this.dirtyFlags|=2;return}else this.dirtyFlags&=-8}attachView(t){let r=t;this._views.push(r),r.attachToAppRef(this)}detachView(t){let r=t;Il(this._views,r),r.detachFromAppRef()}_loadComponent(t){this.attachView(t.hostView),this.tick(),this.components.push(t),this._injector.get(pc,[]).forEach(i=>i(t))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(t=>t()),this._views.slice().forEach(t=>t.destroy())}finally{this._destroyed=!0,this._views=[],this._destroyListeners=[]}}onDestroy(t){return this._destroyListeners.push(t),()=>Il(this._destroyListeners,t)}destroy(){if(this._destroyed)throw new j(406,!1);let t=this._injector;t.destroy&&!t.destroyed&&t.destroy()}get viewCount(){return this._views.length}static \u0275fac=function(r){return new(r||n)};static \u0275prov=k({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function Il(n,e){let t=n.indexOf(e);t>-1&&n.splice(t,1)}function B1(n,e,t,r){if(!t&&!sc(n))return;AE(n,e,t&&!r?0:1)}function rr(n,e,t,r){let i=ge(),s=yo();if(xr(i,s,e)){let o=Nt(),a=ap();JT(a,i,n,e,t,r)}return rr}function XE(n,e,t,r){return xr(n,yo(),t)?e+ec(t)+r:ci}function De(n,e,t){let r=ge(),i=yo();if(xr(r,i,e)){let s=Nt(),o=ap();gE(s,o,r,n,e,r[ct],t,!1)}return De}function _0(n,e,t,r,i){xp(e,n,t,i?"class":"style",r)}var Lf=class{destroy(e){}updateValue(e,t){}swap(e,t){let r=Math.min(e,t),i=Math.max(e,t),s=this.detach(i);if(i-r>1){let o=this.detach(r);this.attach(r,s),this.attach(i,o)}else this.attach(r,s)}move(e,t){this.attach(t,this.detach(e))}};function Xh(n,e,t,r,i){return n===t&&Object.is(e,r)?1:Object.is(i(n,e),i(t,r))?-1:0}function V1(n,e,t){let r,i,s=0,o=n.length-1,a=void 0;if(Array.isArray(e)){let l=e.length-1;for(;s<=o&&s<=l;){let c=n.at(s),u=e[s],d=Xh(s,c,s,u,t);if(d!==0){d<0&&n.updateValue(s,u),s++;continue}let h=n.at(o),f=e[l],p=Xh(o,h,l,f,t);if(p!==0){p<0&&n.updateValue(o,f),o--,l--;continue}let g=t(s,c),v=t(o,h),m=t(s,u);if(Object.is(m,v)){let y=t(l,f);Object.is(y,g)?(n.swap(s,o),n.updateValue(o,f),l--,o--):n.move(o,s),n.updateValue(s,u),s++;continue}if(r??=new Kl,i??=S0(n,s,o,t),Ff(n,r,s,m))n.updateValue(s,u),s++,o++;else if(i.has(m))r.set(g,n.detach(s)),o--;else{let y=n.create(s,e[s]);n.attach(s,y),s++,o++}}for(;s<=l;)A0(n,r,t,s,e[s]),s++}else if(e!=null){let l=e[Symbol.iterator](),c=l.next();for(;!c.done&&s<=o;){let u=n.at(s),d=c.value,h=Xh(s,u,s,d,t);if(h!==0)h<0&&n.updateValue(s,d),s++,c=l.next();else{r??=new Kl,i??=S0(n,s,o,t);let f=t(s,d);if(Ff(n,r,s,f))n.updateValue(s,d),s++,o++,c=l.next();else if(!i.has(f))n.attach(s,n.create(s,d)),s++,o++,c=l.next();else{let p=t(s,u);r.set(p,n.detach(s)),o--}}}for(;!c.done;)A0(n,r,t,n.length,c.value),c=l.next()}for(;s<=o;)n.destroy(n.detach(o--));r?.forEach(l=>{n.destroy(l)})}function Ff(n,e,t,r){return e!==void 0&&e.has(r)?(n.attach(t,e.get(r)),e.delete(r),!0):!1}function A0(n,e,t,r,i){if(Ff(n,e,r,t(r,i)))n.updateValue(r,i);else{let s=n.create(r,i);n.attach(r,s)}}function S0(n,e,t,r){let i=new Set;for(let s=e;s<=t;s++)i.add(r(s,n.at(s)));return i}var Kl=class{kvMap=new Map;_vMap=void 0;has(e){return this.kvMap.has(e)}delete(e){if(!this.has(e))return!1;let t=this.kvMap.get(e);return this._vMap!==void 0&&this._vMap.has(t)?(this.kvMap.set(e,this._vMap.get(t)),this._vMap.delete(t)):this.kvMap.delete(e),!0}get(e){return this.kvMap.get(e)}set(e,t){if(this.kvMap.has(e)){let r=this.kvMap.get(e);this._vMap===void 0&&(this._vMap=new Map);let i=this._vMap;for(;i.has(r);)r=i.get(r);i.set(r,t)}else this.kvMap.set(e,t)}forEach(e){for(let[t,r]of this.kvMap)if(e(r,t),this._vMap!==void 0){let i=this._vMap;for(;i.has(r);)r=i.get(r),e(r,t)}}};function Lt(n,e){Dr("NgControlFlow");let t=ge(),r=yo(),i=t[r]!==ci?t[r]:-1,s=i!==-1?Xl(t,St+i):void 0,o=0;if(xr(t,r,n)){let a=ie(null);try{if(s!==void 0&&ME(s,o),n!==-1){let l=St+n,c=Xl(t,l),u=Hf(t[Z],l),d=fo(c,u.tView.ssrId),h=lc(t,u,e,{dehydratedView:d});dc(c,h,o,co(u,d))}}finally{ie(a)}}else if(s!==void 0){let a=TE(s,o);a!==void 0&&(a[tt]=e)}}var jf=class{lContainer;$implicit;$index;constructor(e,t,r){this.lContainer=e,this.$implicit=t,this.$index=r}get $count(){return this.lContainer.length-ht}};function gc(n,e){return e}var Bf=class{hasEmptyBlock;trackByFn;liveCollection;constructor(e,t,r){this.hasEmptyBlock=e,this.trackByFn=t,this.liveCollection=r}};function xt(n,e,t,r,i,s,o,a,l,c,u,d,h){Dr("NgControlFlow");let f=ge(),p=Nt(),g=l!==void 0,v=ge(),m=a?o.bind(v[ln][tt]):o,y=new Bf(g,m);v[St+n]=y,Nf(f,p,n+1,e,t,r,i,rs(p.consts,s)),g&&Nf(f,p,n+2,l,c,u,d,rs(p.consts,h))}var Vf=class extends Lf{lContainer;hostLView;templateTNode;operationsCounter=void 0;needsIndexUpdate=!1;constructor(e,t,r){super(),this.lContainer=e,this.hostLView=t,this.templateTNode=r}get length(){return this.lContainer.length-ht}at(e){return this.getLView(e)[tt].$implicit}attach(e,t){let r=t[oo];this.needsIndexUpdate||=e!==this.length,dc(this.lContainer,t,e,co(this.templateTNode,r))}detach(e){return this.needsIndexUpdate||=e!==this.length-1,H1(this.lContainer,e)}create(e,t){let r=fo(this.lContainer,this.templateTNode.tView.ssrId),i=lc(this.hostLView,this.templateTNode,new jf(this.lContainer,t,e),{dehydratedView:r});return this.operationsCounter?.recordCreate(),i}destroy(e){cc(e[Z],e),this.operationsCounter?.recordDestroy()}updateValue(e,t){this.getLView(e)[tt].$implicit=t}reset(){this.needsIndexUpdate=!1,this.operationsCounter?.reset()}updateIndexes(){if(this.needsIndexUpdate)for(let e=0;e<this.length;e++)this.getLView(e)[tt].$index=e}getLView(e){return U1(this.lContainer,e)}};function It(n){let e=ie(null),t=oc();try{let r=ge(),i=r[Z],s=r[t],o=t+1,a=Xl(r,o);if(s.liveCollection===void 0){let c=Hf(i,o);s.liveCollection=new Vf(a,r,c)}else s.liveCollection.reset();let l=s.liveCollection;if(V1(l,n,s.trackByFn),l.updateIndexes(),s.hasEmptyBlock){let c=yo(),u=l.length===0;if(xr(r,c,u)){let d=t+2,h=Xl(r,d);if(u){let f=Hf(i,d),p=fo(h,f.tView.ssrId),g=lc(r,f,void 0,{dehydratedView:p});dc(h,g,0,co(f,p))}else ME(h,0)}}}finally{ie(e)}}function Xl(n,e){return n[e]}function H1(n,e){return uo(n,e)}function U1(n,e){return TE(n,e)}function Hf(n,e){return Jf(n,e)}function O(n,e,t,r){let i=ge(),s=Nt(),o=St+n,a=i[ct],l=s.firstCreatePass?LE(o,s,i,e,mE,hw(),t,r):s.data[o],c=$1(s,i,l,a,e,n);i[o]=c;let u=Zf(l);return vo(l,!0),cE(a,c,l),!vE(l)&&lp()&&Mp(s,i,c,l),(mD()===0||u)&&Eo(c,i),vD(),u&&(Sp(s,i,l),nE(s,l,i)),r!==null&&pE(i,l),O}function P(){let n=dn();mw()?_D():(n=n.parent,vo(n,!1));let e=n;wD(e)&&ED(),yD();let t=Nt();return t.firstCreatePass&&FE(t,e),e.classesWithoutHost!=null&&ND(e)&&_0(t,e,ge(),e.classesWithoutHost,!0),e.stylesWithoutHost!=null&&kD(e)&&_0(t,e,ge(),e.stylesWithoutHost,!1),P}function re(n,e,t,r){return O(n,e,t,r),P(),re}var $1=(n,e,t,r,i,s)=>(cp(!0),aE(r,i,RD()));function QE(){return ge()}var Ql="en-US";var z1=Ql;function W1(n){typeof n=="string"&&(z1=n.toLowerCase().replace(/_/g,"-"))}function x0(n,e,t){return function r(i){if(i===Function)return t;let s=cs(n)?xn(n.index,e):e;Op(s,5);let o=e[tt],a=I0(e,o,t,i),l=r.__ngNextListenerFn__;for(;l;)a=I0(e,o,l,i)&&a,l=l.__ngNextListenerFn__;return a}}function I0(n,e,t,r){let i=ie(null);try{return _e(6,e,t),t(r)!==!1}catch(s){return q1(n,s),!1}finally{_e(7,e,t),ie(i)}}function q1(n,e){let t=n[ts],r=t?t.get(In,null):null;r&&r.handleError(e)}function D0(n,e,t,r,i,s){let o=e[t],a=e[Z],c=a.data[t].outputs[r],u=o[c],d=a.firstCreatePass?np(a):null,h=tp(e),f=u.subscribe(s),p=h.length;h.push(s,f),d&&d.push(i,n.index,p,-(p+1))}var G1=(n,e,t)=>{};function _o(n,e,t,r){let i=ge(),s=Nt(),o=dn();return K1(s,i,i[ct],o,n,e,r),_o}function Y1(n,e,t,r){let i=n.cleanup;if(i!=null)for(let s=0;s<i.length-1;s+=2){let o=i[s];if(o===t&&i[s+1]===r){let a=e[Nl],l=i[s+2];return a.length>l?a[l]:null}typeof o=="string"&&(s+=2)}return null}function K1(n,e,t,r,i,s,o){let a=Zf(r),c=n.firstCreatePass?np(n):null,u=tp(e),d=!0;if(r.type&3||o){let h=Tn(r,e),f=o?o(h):h,p=u.length,g=o?m=>o(Sn(m[r.index])):r.index,v=null;if(!o&&a&&(v=Y1(n,e,i,r.index)),v!==null){let m=v.__ngLastListenerFn__||v;m.__ngNextListenerFn__=s,v.__ngLastListenerFn__=s,d=!1}else{s=x0(r,e,s),G1(f,i,s);let m=t.listen(f,i,s);u.push(s,m),c&&c.push(i,g,p,p+1)}}else s=x0(r,e,s);if(d){let h=r.outputs?.[i],f=r.hostDirectiveOutputs?.[i];if(f&&f.length)for(let p=0;p<f.length;p+=2){let g=f[p],v=f[p+1];D0(r,e,g,v,i,s)}if(h&&h.length)for(let p of h)D0(r,e,p,i,i,s)}}function Rn(n=1){return TD(n)}function Ao(n,e,t,r,i){let s=ge(),o=XE(s,e,t,r);if(o!==ci){let a=Nt(),l=ap();gE(a,l,s,n,o,s[ct],i,!1)}return Ao}function ZE(n,e,t){b1(n,e,t)}function Bp(n){let e=ge(),t=Nt(),r=yw();ip(r+1);let i=kp(t,r);if(n.dirty&&dD(e)===((i.metadata.flags&2)===2)){if(i.matches===null)n.reset([]);else{let s=C1(e,r);n.reset(s,sT),n.notifyOnChanges()}return!0}return!1}function Vp(){return v1(ge(),yw())}function X1(n,e,t,r){t>=n.data.length&&(n.data[t]=null,n.blueprint[t]=null),e[t]=r}function B(n,e=""){let t=ge(),r=Nt(),i=n+St,s=r.firstCreatePass?Np(r,i,1,e,null):r.data[i],o=Q1(r,t,s,e,n);t[i]=o,lp()&&Mp(r,t,o,s),vo(s,!1)}var Q1=(n,e,t,r,i)=>(cp(!0),FT(e[ct],r));function Xt(n){return at("",n,""),Xt}function at(n,e,t){let r=ge(),i=XE(r,n,e,t);return i!==ci&&Z1(r,oc(),i),at}function Z1(n,e,t){let r=cD(e,n);jT(n[ct],r,t)}function JE(n,e,t,r){return tC(ge(),rp(),n,e,t,r)}function Hp(n,e,t,r,i){return J1(ge(),rp(),n,e,t,r,i)}function eC(n,e){let t=n[e];return t===ci?void 0:t}function tC(n,e,t,r,i,s){let o=e+t;return xr(n,o,i)?WE(n,o+1,s?r.call(s,i):r(i)):eC(n,o+1)}function J1(n,e,t,r,i,s,o){let a=e+t;return R1(n,a,i,s)?WE(n,a+2,o?r.call(o,i,s):r(i,s)):eC(n,a+2)}function On(n,e){let t=Nt(),r,i=n+St;t.firstCreatePass?(r=eR(e,t.pipeRegistry),t.data[i]=r,r.onDestroy&&(t.destroyHooks??=[]).push(i,r.onDestroy)):r=t.data[i];let s=r.factory||(r.factory=ei(r.type,!0)),o,a=_t(Ue);try{let l=Vl(!1),c=s();return Vl(l),X1(t,ge(),i,c),c}finally{_t(a)}}function eR(n,e){if(e)for(let t=e.length-1;t>=0;t--){let r=e[t];if(n===r.name)return r}}function Pn(n,e,t){let r=n+St,i=ge(),s=uD(i,r);return tR(i,r)?tC(i,rp(),e,s.transform,t,s):s.transform(t)}function tR(n,e){return n[Z].data[e].pure}var Uf=class{ngModuleFactory;componentFactories;constructor(e,t){this.ngModuleFactory=e,this.componentFactories=t}},mc=(()=>{class n{compileModuleSync(t){return new Pf(t)}compileModuleAsync(t){return Promise.resolve(this.compileModuleSync(t))}compileModuleAndAllComponentsSync(t){let r=this.compileModuleSync(t),i=X0(t),s=sE(i.declarations).reduce((o,a)=>{let l=ti(a);return l&&o.push(new os(l)),o},[]);return new Uf(r,s)}compileModuleAndAllComponentsAsync(t){return Promise.resolve(this.compileModuleAndAllComponentsSync(t))}clearCache(){}clearCacheFor(t){}getModuleId(t){}static \u0275fac=function(r){return new(r||n)};static \u0275prov=k({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();var nR=(()=>{class n{zone=R(ke);changeDetectionScheduler=R(is);applicationRef=R(ai);_onMicrotaskEmptySubscription;initialize(){this._onMicrotaskEmptySubscription||(this._onMicrotaskEmptySubscription=this.zone.onMicrotaskEmpty.subscribe({next:()=>{this.changeDetectionScheduler.runningTick||this.zone.run(()=>{this.applicationRef.tick()})}}))}ngOnDestroy(){this._onMicrotaskEmptySubscription?.unsubscribe()}static \u0275fac=function(r){return new(r||n)};static \u0275prov=k({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),rR=new z("",{factory:()=>!1});function nC({ngZoneFactory:n,ignoreChangesOutsideZone:e,scheduleInRootZone:t}){return n??=()=>new ke(W(_({},iC()),{scheduleInRootZone:t})),[{provide:ke,useFactory:n},{provide:io,multi:!0,useFactory:()=>{let r=R(nR,{optional:!0});return()=>r.initialize()}},{provide:io,multi:!0,useFactory:()=>{let r=R(iR);return()=>{r.initialize()}}},e===!0?{provide:Bw,useValue:!0}:[],{provide:Vw,useValue:t??jw}]}function rC(n){let e=n?.ignoreChangesOutsideZone,t=n?.scheduleInRootZone,r=nC({ngZoneFactory:()=>{let i=iC(n);return i.scheduleInRootZone=t,i.shouldCoalesceEventChangeDetection&&Dr("NgZone_CoalesceEvent"),new ke(i)},ignoreChangesOutsideZone:e,scheduleInRootZone:t});return nc([{provide:rR,useValue:!0},{provide:fp,useValue:!1},r])}function iC(n){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:n?.eventCoalescing??!1,shouldCoalesceRunChangeDetection:n?.runCoalescing??!1}}var iR=(()=>{class n{subscription=new Be;initialized=!1;zone=R(ke);pendingTasks=R(ds);initialize(){if(this.initialized)return;this.initialized=!0;let t=null;!this.zone.isStable&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(t=this.pendingTasks.add()),this.zone.runOutsideAngular(()=>{this.subscription.add(this.zone.onStable.subscribe(()=>{ke.assertNotInAngularZone(),queueMicrotask(()=>{t!==null&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(this.pendingTasks.remove(t),t=null)})}))}),this.subscription.add(this.zone.onUnstable.subscribe(()=>{ke.assertInAngularZone(),t??=this.pendingTasks.add()}))}ngOnDestroy(){this.subscription.unsubscribe()}static \u0275fac=function(r){return new(r||n)};static \u0275prov=k({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();var sR=(()=>{class n{appRef=R(ai);taskService=R(ds);ngZone=R(ke);zonelessEnabled=R(fp);tracing=R(ps,{optional:!0});disableScheduling=R(Bw,{optional:!0})??!1;zoneIsDefined=typeof Zone<"u"&&!!Zone.root.run;schedulerTickApplyArgs=[{data:{__scheduler_tick__:!0}}];subscriptions=new Be;angularZoneId=this.zoneIsDefined?this.ngZone._inner?.get($l):null;scheduleInRootZone=!this.zonelessEnabled&&this.zoneIsDefined&&(R(Vw,{optional:!0})??!1);cancelScheduledCallback=null;useMicrotaskScheduler=!1;runningTick=!1;pendingRenderTaskId=null;constructor(){this.subscriptions.add(this.appRef.afterTick.subscribe(()=>{this.runningTick||this.cleanup()})),this.subscriptions.add(this.ngZone.onUnstable.subscribe(()=>{this.runningTick||this.cleanup()})),this.disableScheduling||=!this.zonelessEnabled&&(this.ngZone instanceof pf||!this.zoneIsDefined)}notify(t){if(!this.zonelessEnabled&&t===5)return;let r=!1;switch(t){case 0:{this.appRef.dirtyFlags|=2;break}case 3:case 2:case 4:case 5:case 1:{this.appRef.dirtyFlags|=4;break}case 6:{this.appRef.dirtyFlags|=2,r=!0;break}case 12:{this.appRef.dirtyFlags|=16,r=!0;break}case 13:{this.appRef.dirtyFlags|=2,r=!0;break}case 11:{r=!0;break}case 9:case 8:case 7:case 10:default:this.appRef.dirtyFlags|=8}if(this.appRef.tracingSnapshot=this.tracing?.snapshot(this.appRef.tracingSnapshot)??null,!this.shouldScheduleTick(r))return;let i=this.useMicrotaskScheduler?l0:Hw;this.pendingRenderTaskId=this.taskService.add(),this.scheduleInRootZone?this.cancelScheduledCallback=Zone.root.run(()=>i(()=>this.tick())):this.cancelScheduledCallback=this.ngZone.runOutsideAngular(()=>i(()=>this.tick()))}shouldScheduleTick(t){return!(this.disableScheduling&&!t||this.appRef.destroyed||this.pendingRenderTaskId!==null||this.runningTick||this.appRef._runningTick||!this.zonelessEnabled&&this.zoneIsDefined&&Zone.current.get($l+this.angularZoneId))}tick(){if(this.runningTick||this.appRef.destroyed)return;if(this.appRef.dirtyFlags===0){this.cleanup();return}!this.zonelessEnabled&&this.appRef.dirtyFlags&7&&(this.appRef.dirtyFlags|=1);let t=this.taskService.add();try{this.ngZone.run(()=>{this.runningTick=!0,this.appRef._tick()},void 0,this.schedulerTickApplyArgs)}catch(r){throw this.taskService.remove(t),r}finally{this.cleanup()}this.useMicrotaskScheduler=!0,l0(()=>{this.useMicrotaskScheduler=!1,this.taskService.remove(t)})}ngOnDestroy(){this.subscriptions.unsubscribe(),this.cleanup()}cleanup(){if(this.runningTick=!1,this.cancelScheduledCallback?.(),this.cancelScheduledCallback=null,this.pendingRenderTaskId!==null){let t=this.pendingRenderTaskId;this.pendingRenderTaskId=null,this.taskService.remove(t)}}static \u0275fac=function(r){return new(r||n)};static \u0275prov=k({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function oR(){return typeof $localize<"u"&&$localize.locale||Ql}var Up=new z("",{providedIn:"root",factory:()=>R(Up,se.Optional|se.SkipSelf)||oR()});var $f=new z(""),aR=new z("");function eo(n){return!n.moduleRef}function lR(n){let e=eo(n)?n.r3Injector:n.moduleRef.injector,t=e.get(ke);return t.run(()=>{eo(n)?n.r3Injector.resolveInjectorInitializers():n.moduleRef.resolveInjectorInitializers();let r=e.get(In,null),i;if(t.runOutsideAngular(()=>{i=t.onError.subscribe({next:s=>{r.handleError(s)}})}),eo(n)){let s=()=>e.destroy(),o=n.platformInjector.get($f);o.add(s),e.onDestroy(()=>{i.unsubscribe(),o.delete(s)})}else{let s=()=>n.moduleRef.destroy(),o=n.platformInjector.get($f);o.add(s),n.moduleRef.onDestroy(()=>{Il(n.allPlatformModules,n.moduleRef),i.unsubscribe(),o.delete(s)})}return uR(r,t,()=>{let s=e.get(KE);return s.runInitializers(),s.donePromise.then(()=>{let o=e.get(Up,Ql);if(W1(o||Ql),!e.get(aR,!0))return eo(n)?e.get(ai):(n.allPlatformModules.push(n.moduleRef),n.moduleRef);if(eo(n)){let l=e.get(ai);return n.rootComponent!==void 0&&l.bootstrap(n.rootComponent),l}else return cR(n.moduleRef,n.allPlatformModules),n.moduleRef})})})}function cR(n,e){let t=n.injector.get(ai);if(n._bootstrapComponents.length>0)n._bootstrapComponents.forEach(r=>t.bootstrap(r));else if(n.instance.ngDoBootstrap)n.instance.ngDoBootstrap(t);else throw new j(-403,!1);e.push(n)}function uR(n,e,t){try{let r=t();return gs(r)?r.catch(i=>{throw e.runOutsideAngular(()=>n.handleError(i)),i}):r}catch(r){throw e.runOutsideAngular(()=>n.handleError(r)),r}}var Dl=null;function dR(n=[],e){return cn.create({name:e,providers:[{provide:rc,useValue:"platform"},{provide:$f,useValue:new Set([()=>Dl=null])},...n]})}function hR(n=[]){if(Dl)return Dl;let e=dR(n);return Dl=e,L1(),fR(e),e}function fR(n){let e=n.get(vp,null);Kt(n,()=>{e?.forEach(t=>t())})}function sC(){return!1}var ms=(()=>{class n{static __NG_ELEMENT_ID__=pR}return n})();function pR(n){return gR(dn(),ge(),(n&16)===16)}function gR(n,e,t){if(cs(n)&&!t){let r=xn(n.index,e);return new ho(r,r)}else if(n.type&175){let r=e[ln];return new ho(r,e)}return null}var zf=class{constructor(){}supports(e){return zE(e)}create(e){return new Wf(e)}},mR=(n,e)=>e,Wf=class{length=0;collection;_linkedRecords=null;_unlinkedRecords=null;_previousItHead=null;_itHead=null;_itTail=null;_additionsHead=null;_additionsTail=null;_movesHead=null;_movesTail=null;_removalsHead=null;_removalsTail=null;_identityChangesHead=null;_identityChangesTail=null;_trackByFn;constructor(e){this._trackByFn=e||mR}forEachItem(e){let t;for(t=this._itHead;t!==null;t=t._next)e(t)}forEachOperation(e){let t=this._itHead,r=this._removalsHead,i=0,s=null;for(;t||r;){let o=!r||t&&t.currentIndex<T0(r,i,s)?t:r,a=T0(o,i,s),l=o.currentIndex;if(o===r)i--,r=r._nextRemoved;else if(t=t._next,o.previousIndex==null)i++;else{s||(s=[]);let c=a-i,u=l-i;if(c!=u){for(let h=0;h<c;h++){let f=h<s.length?s[h]:s[h]=0,p=f+h;u<=p&&p<c&&(s[h]=f+1)}let d=o.previousIndex;s[d]=u-c}}a!==l&&e(o,a,l)}}forEachPreviousItem(e){let t;for(t=this._previousItHead;t!==null;t=t._nextPrevious)e(t)}forEachAddedItem(e){let t;for(t=this._additionsHead;t!==null;t=t._nextAdded)e(t)}forEachMovedItem(e){let t;for(t=this._movesHead;t!==null;t=t._nextMoved)e(t)}forEachRemovedItem(e){let t;for(t=this._removalsHead;t!==null;t=t._nextRemoved)e(t)}forEachIdentityChange(e){let t;for(t=this._identityChangesHead;t!==null;t=t._nextIdentityChange)e(t)}diff(e){if(e==null&&(e=[]),!zE(e))throw new j(900,!1);return this.check(e)?this:null}onDestroy(){}check(e){this._reset();let t=this._itHead,r=!1,i,s,o;if(Array.isArray(e)){this.length=e.length;for(let a=0;a<this.length;a++)s=e[a],o=this._trackByFn(a,s),t===null||!Object.is(t.trackById,o)?(t=this._mismatch(t,s,o,a),r=!0):(r&&(t=this._verifyReinsertion(t,s,o,a)),Object.is(t.item,s)||this._addIdentityChange(t,s)),t=t._next}else i=0,T1(e,a=>{o=this._trackByFn(i,a),t===null||!Object.is(t.trackById,o)?(t=this._mismatch(t,a,o,i),r=!0):(r&&(t=this._verifyReinsertion(t,a,o,i)),Object.is(t.item,a)||this._addIdentityChange(t,a)),t=t._next,i++}),this.length=i;return this._truncate(t),this.collection=e,this.isDirty}get isDirty(){return this._additionsHead!==null||this._movesHead!==null||this._removalsHead!==null||this._identityChangesHead!==null}_reset(){if(this.isDirty){let e;for(e=this._previousItHead=this._itHead;e!==null;e=e._next)e._nextPrevious=e._next;for(e=this._additionsHead;e!==null;e=e._nextAdded)e.previousIndex=e.currentIndex;for(this._additionsHead=this._additionsTail=null,e=this._movesHead;e!==null;e=e._nextMoved)e.previousIndex=e.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(e,t,r,i){let s;return e===null?s=this._itTail:(s=e._prev,this._remove(e)),e=this._unlinkedRecords===null?null:this._unlinkedRecords.get(r,null),e!==null?(Object.is(e.item,t)||this._addIdentityChange(e,t),this._reinsertAfter(e,s,i)):(e=this._linkedRecords===null?null:this._linkedRecords.get(r,i),e!==null?(Object.is(e.item,t)||this._addIdentityChange(e,t),this._moveAfter(e,s,i)):e=this._addAfter(new qf(t,r),s,i)),e}_verifyReinsertion(e,t,r,i){let s=this._unlinkedRecords===null?null:this._unlinkedRecords.get(r,null);return s!==null?e=this._reinsertAfter(s,e._prev,i):e.currentIndex!=i&&(e.currentIndex=i,this._addToMoves(e,i)),e}_truncate(e){for(;e!==null;){let t=e._next;this._addToRemovals(this._unlink(e)),e=t}this._unlinkedRecords!==null&&this._unlinkedRecords.clear(),this._additionsTail!==null&&(this._additionsTail._nextAdded=null),this._movesTail!==null&&(this._movesTail._nextMoved=null),this._itTail!==null&&(this._itTail._next=null),this._removalsTail!==null&&(this._removalsTail._nextRemoved=null),this._identityChangesTail!==null&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(e,t,r){this._unlinkedRecords!==null&&this._unlinkedRecords.remove(e);let i=e._prevRemoved,s=e._nextRemoved;return i===null?this._removalsHead=s:i._nextRemoved=s,s===null?this._removalsTail=i:s._prevRemoved=i,this._insertAfter(e,t,r),this._addToMoves(e,r),e}_moveAfter(e,t,r){return this._unlink(e),this._insertAfter(e,t,r),this._addToMoves(e,r),e}_addAfter(e,t,r){return this._insertAfter(e,t,r),this._additionsTail===null?this._additionsTail=this._additionsHead=e:this._additionsTail=this._additionsTail._nextAdded=e,e}_insertAfter(e,t,r){let i=t===null?this._itHead:t._next;return e._next=i,e._prev=t,i===null?this._itTail=e:i._prev=e,t===null?this._itHead=e:t._next=e,this._linkedRecords===null&&(this._linkedRecords=new Zl),this._linkedRecords.put(e),e.currentIndex=r,e}_remove(e){return this._addToRemovals(this._unlink(e))}_unlink(e){this._linkedRecords!==null&&this._linkedRecords.remove(e);let t=e._prev,r=e._next;return t===null?this._itHead=r:t._next=r,r===null?this._itTail=t:r._prev=t,e}_addToMoves(e,t){return e.previousIndex===t||(this._movesTail===null?this._movesTail=this._movesHead=e:this._movesTail=this._movesTail._nextMoved=e),e}_addToRemovals(e){return this._unlinkedRecords===null&&(this._unlinkedRecords=new Zl),this._unlinkedRecords.put(e),e.currentIndex=null,e._nextRemoved=null,this._removalsTail===null?(this._removalsTail=this._removalsHead=e,e._prevRemoved=null):(e._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=e),e}_addIdentityChange(e,t){return e.item=t,this._identityChangesTail===null?this._identityChangesTail=this._identityChangesHead=e:this._identityChangesTail=this._identityChangesTail._nextIdentityChange=e,e}},qf=class{item;trackById;currentIndex=null;previousIndex=null;_nextPrevious=null;_prev=null;_next=null;_prevDup=null;_nextDup=null;_prevRemoved=null;_nextRemoved=null;_nextAdded=null;_nextMoved=null;_nextIdentityChange=null;constructor(e,t){this.item=e,this.trackById=t}},Gf=class{_head=null;_tail=null;add(e){this._head===null?(this._head=this._tail=e,e._nextDup=null,e._prevDup=null):(this._tail._nextDup=e,e._prevDup=this._tail,e._nextDup=null,this._tail=e)}get(e,t){let r;for(r=this._head;r!==null;r=r._nextDup)if((t===null||t<=r.currentIndex)&&Object.is(r.trackById,e))return r;return null}remove(e){let t=e._prevDup,r=e._nextDup;return t===null?this._head=r:t._nextDup=r,r===null?this._tail=t:r._prevDup=t,this._head===null}},Zl=class{map=new Map;put(e){let t=e.trackById,r=this.map.get(t);r||(r=new Gf,this.map.set(t,r)),r.add(e)}get(e,t){let r=e,i=this.map.get(r);return i?i.get(e,t):null}remove(e){let t=e.trackById;return this.map.get(t).remove(e)&&this.map.delete(t),e}get isEmpty(){return this.map.size===0}clear(){this.map.clear()}};function T0(n,e,t){let r=n.previousIndex;if(r===null)return r;let i=0;return t&&r<t.length&&(i=t[r]),r+e+i}function M0(){return new $p([new zf])}var $p=(()=>{class n{factories;static \u0275prov=k({token:n,providedIn:"root",factory:M0});constructor(t){this.factories=t}static create(t,r){if(r!=null){let i=r.factories.slice();t=t.concat(i)}return new n(t)}static extend(t){return{provide:n,useFactory:r=>n.create(t,r||M0()),deps:[[n,new UI,new HI]]}}find(t){let r=this.factories.find(i=>i.supports(t));if(r!=null)return r;throw new j(901,!1)}}return n})();function oC(n){_e(8);try{let{rootComponent:e,appProviders:t,platformProviders:r}=n,i=hR(r),s=[nC({}),{provide:is,useExisting:sR},...t||[]],o=new Yl({providers:s,parent:i,debugName:"",runEnvironmentInitializers:!1});return lR({r3Injector:o.injector,platformInjector:i,rootComponent:e})}catch(e){return Promise.reject(e)}finally{_e(9)}}function zp(n){return bh(n)}var R0=class{[Fi];constructor(e){this[Fi]=e}destroy(){this[Fi].destroy()}};function aC(n){let e=ti(n);if(!e)return null;let t=new os(e);return{get selector(){return t.selector},get type(){return t.componentType},get inputs(){return t.inputs},get outputs(){return t.outputs},get ngContentSelectors(){return t.ngContentSelectors},get isStandalone(){return e.standalone},get isSignal(){return e.signals}}}var lt=new z("");var uC=null;function ir(){return uC}function Wp(n){uC??=n}var So=class{},xo=(()=>{class n{historyGo(t){throw new Error("")}static \u0275fac=function(r){return new(r||n)};static \u0275prov=k({token:n,factory:()=>R(dC),providedIn:"platform"})}return n})(),qp=new z(""),dC=(()=>{class n extends xo{_location;_history;_doc=R(lt);constructor(){super(),this._location=window.location,this._history=window.history}getBaseHrefFromDOM(){return ir().getBaseHref(this._doc)}onPopState(t){let r=ir().getGlobalEventTarget(this._doc,"window");return r.addEventListener("popstate",t,!1),()=>r.removeEventListener("popstate",t)}onHashChange(t){let r=ir().getGlobalEventTarget(this._doc,"window");return r.addEventListener("hashchange",t,!1),()=>r.removeEventListener("hashchange",t)}get href(){return this._location.href}get protocol(){return this._location.protocol}get hostname(){return this._location.hostname}get port(){return this._location.port}get pathname(){return this._location.pathname}get search(){return this._location.search}get hash(){return this._location.hash}set pathname(t){this._location.pathname=t}pushState(t,r,i){this._history.pushState(t,r,i)}replaceState(t,r,i){this._history.replaceState(t,r,i)}forward(){this._history.forward()}back(){this._history.back()}historyGo(t=0){this._history.go(t)}getState(){return this._history.state}static \u0275fac=function(r){return new(r||n)};static \u0275prov=k({token:n,factory:()=>new n,providedIn:"platform"})}return n})();function vc(n,e){return n?e?n.endsWith("/")?e.startsWith("/")?n+e.slice(1):n+e:e.startsWith("/")?n+e:`${n}/${e}`:n:e}function lC(n){let e=n.search(/#|\?|$/);return n[e-1]==="/"?n.slice(0,e-1)+n.slice(e):n}function fn(n){return n&&n[0]!=="?"?`?${n}`:n}var sr=(()=>{class n{historyGo(t){throw new Error("")}static \u0275fac=function(r){return new(r||n)};static \u0275prov=k({token:n,factory:()=>R(bc),providedIn:"root"})}return n})(),yc=new z(""),bc=(()=>{class n extends sr{_platformLocation;_baseHref;_removeListenerFns=[];constructor(t,r){super(),this._platformLocation=t,this._baseHref=r??this._platformLocation.getBaseHrefFromDOM()??R(lt).location?.origin??""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}prepareExternalUrl(t){return vc(this._baseHref,t)}path(t=!1){let r=this._platformLocation.pathname+fn(this._platformLocation.search),i=this._platformLocation.hash;return i&&t?`${r}${i}`:r}pushState(t,r,i,s){let o=this.prepareExternalUrl(i+fn(s));this._platformLocation.pushState(t,r,o)}replaceState(t,r,i,s){let o=this.prepareExternalUrl(i+fn(s));this._platformLocation.replaceState(t,r,o)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(t=0){this._platformLocation.historyGo?.(t)}static \u0275fac=function(r){return new(r||n)(q(xo),q(yc,8))};static \u0275prov=k({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),Rr=(()=>{class n{_subject=new Oe;_basePath;_locationStrategy;_urlChangeListeners=[];_urlChangeSubscription=null;constructor(t){this._locationStrategy=t;let r=this._locationStrategy.getBaseHref();this._basePath=bR(lC(cC(r))),this._locationStrategy.onPopState(i=>{this._subject.next({url:this.path(!0),pop:!0,state:i.state,type:i.type})})}ngOnDestroy(){this._urlChangeSubscription?.unsubscribe(),this._urlChangeListeners=[]}path(t=!1){return this.normalize(this._locationStrategy.path(t))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(t,r=""){return this.path()==this.normalize(t+fn(r))}normalize(t){return n.stripTrailingSlash(yR(this._basePath,cC(t)))}prepareExternalUrl(t){return t&&t[0]!=="/"&&(t="/"+t),this._locationStrategy.prepareExternalUrl(t)}go(t,r="",i=null){this._locationStrategy.pushState(i,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+fn(r)),i)}replaceState(t,r="",i=null){this._locationStrategy.replaceState(i,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+fn(r)),i)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(t=0){this._locationStrategy.historyGo?.(t)}onUrlChange(t){return this._urlChangeListeners.push(t),this._urlChangeSubscription??=this.subscribe(r=>{this._notifyUrlChangeListeners(r.url,r.state)}),()=>{let r=this._urlChangeListeners.indexOf(t);this._urlChangeListeners.splice(r,1),this._urlChangeListeners.length===0&&(this._urlChangeSubscription?.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(t="",r){this._urlChangeListeners.forEach(i=>i(t,r))}subscribe(t,r,i){return this._subject.subscribe({next:t,error:r??void 0,complete:i??void 0})}static normalizeQueryParams=fn;static joinWithSlash=vc;static stripTrailingSlash=lC;static \u0275fac=function(r){return new(r||n)(q(sr))};static \u0275prov=k({token:n,factory:()=>vR(),providedIn:"root"})}return n})();function vR(){return new Rr(q(sr))}function yR(n,e){if(!n||!e.startsWith(n))return e;let t=e.substring(n.length);return t===""||["/",";","?","#"].includes(t[0])?t:e}function cC(n){return n.replace(/\/index.html$/,"")}function bR(n){if(new RegExp("^(https?:)?//").test(n)){let[,t]=n.split(/\/\/[^\/]+/);return t}return n}var Xp=(()=>{class n extends sr{_platformLocation;_baseHref="";_removeListenerFns=[];constructor(t,r){super(),this._platformLocation=t,r!=null&&(this._baseHref=r)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}path(t=!1){let r=this._platformLocation.hash??"#";return r.length>0?r.substring(1):r}prepareExternalUrl(t){let r=vc(this._baseHref,t);return r.length>0?"#"+r:r}pushState(t,r,i,s){let o=this.prepareExternalUrl(i+fn(s))||this._platformLocation.pathname;this._platformLocation.pushState(t,r,o)}replaceState(t,r,i,s){let o=this.prepareExternalUrl(i+fn(s))||this._platformLocation.pathname;this._platformLocation.replaceState(t,r,o)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(t=0){this._platformLocation.historyGo?.(t)}static \u0275fac=function(r){return new(r||n)(q(xo),q(yc,8))};static \u0275prov=k({token:n,factory:n.\u0275fac})}return n})();var Gp=/\s+/,hC=[],hi=(()=>{class n{_ngEl;_renderer;initialClasses=hC;rawClass;stateMap=new Map;constructor(t,r){this._ngEl=t,this._renderer=r}set klass(t){this.initialClasses=t!=null?t.trim().split(Gp):hC}set ngClass(t){this.rawClass=typeof t=="string"?t.trim().split(Gp):t}ngDoCheck(){for(let r of this.initialClasses)this._updateState(r,!0);let t=this.rawClass;if(Array.isArray(t)||t instanceof Set)for(let r of t)this._updateState(r,!0);else if(t!=null)for(let r of Object.keys(t))this._updateState(r,!!t[r]);this._applyStateDiff()}_updateState(t,r){let i=this.stateMap.get(t);i!==void 0?(i.enabled!==r&&(i.changed=!0,i.enabled=r),i.touched=!0):this.stateMap.set(t,{enabled:r,changed:!0,touched:!0})}_applyStateDiff(){for(let t of this.stateMap){let r=t[0],i=t[1];i.changed?(this._toggleClass(r,i.enabled),i.changed=!1):i.touched||(i.enabled&&this._toggleClass(r,!1),this.stateMap.delete(r)),i.touched=!1}}_toggleClass(t,r){t=t.trim(),t.length>0&&t.split(Gp).forEach(i=>{r?this._renderer.addClass(this._ngEl.nativeElement,i):this._renderer.removeClass(this._ngEl.nativeElement,i)})}static \u0275fac=function(r){return new(r||n)(Ue(Mn),Ue(fc))};static \u0275dir=di({type:n,selectors:[["","ngClass",""]],inputs:{klass:[0,"class","klass"],ngClass:"ngClass"}})}return n})();var wc=class{$implicit;ngForOf;index;count;constructor(e,t,r,i){this.$implicit=e,this.ngForOf=t,this.index=r,this.count=i}get first(){return this.index===0}get last(){return this.index===this.count-1}get even(){return this.index%2===0}get odd(){return!this.even}},Cc=(()=>{class n{_viewContainer;_template;_differs;set ngForOf(t){this._ngForOf=t,this._ngForOfDirty=!0}set ngForTrackBy(t){this._trackByFn=t}get ngForTrackBy(){return this._trackByFn}_ngForOf=null;_ngForOfDirty=!0;_differ=null;_trackByFn;constructor(t,r,i){this._viewContainer=t,this._template=r,this._differs=i}set ngForTemplate(t){t&&(this._template=t)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;let t=this._ngForOf;!this._differ&&t&&(this._differ=this._differs.find(t).create(this.ngForTrackBy))}if(this._differ){let t=this._differ.diff(this._ngForOf);t&&this._applyChanges(t)}}_applyChanges(t){let r=this._viewContainer;t.forEachOperation((i,s,o)=>{if(i.previousIndex==null)r.createEmbeddedView(this._template,new wc(i.item,this._ngForOf,-1,-1),o===null?void 0:o);else if(o==null)r.remove(s===null?void 0:s);else if(s!==null){let a=r.get(s);r.move(a,o),fC(a,i)}});for(let i=0,s=r.length;i<s;i++){let a=r.get(i).context;a.index=i,a.count=s,a.ngForOf=this._ngForOf}t.forEachIdentityChange(i=>{let s=r.get(i.currentIndex);fC(s,i)})}static ngTemplateContextGuard(t,r){return!0}static \u0275fac=function(r){return new(r||n)(Ue(Tr),Ue(oi),Ue($p))};static \u0275dir=di({type:n,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"}})}return n})();function fC(n,e){n.context.$implicit=e.item}var Qp=(()=>{class n{_viewContainer;_context=new Ec;_thenTemplateRef=null;_elseTemplateRef=null;_thenViewRef=null;_elseViewRef=null;constructor(t,r){this._viewContainer=t,this._thenTemplateRef=r}set ngIf(t){this._context.$implicit=this._context.ngIf=t,this._updateView()}set ngIfThen(t){pC(t,!1),this._thenTemplateRef=t,this._thenViewRef=null,this._updateView()}set ngIfElse(t){pC(t,!1),this._elseTemplateRef=t,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngIfUseIfTypeGuard;static ngTemplateGuard_ngIf;static ngTemplateContextGuard(t,r){return!0}static \u0275fac=function(r){return new(r||n)(Ue(Tr),Ue(oi))};static \u0275dir=di({type:n,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"}})}return n})(),Ec=class{$implicit=null;ngIf=null};function pC(n,e){if(n&&!n.createEmbeddedView)throw new j(2020,!1)}function ER(n,e){return new j(2100,!1)}var Yp=class{createSubscription(e,t){return zp(()=>e.subscribe({next:t,error:r=>{throw r}}))}dispose(e){zp(()=>e.unsubscribe())}},Kp=class{createSubscription(e,t){return e.then(t,r=>{throw r})}dispose(e){}},CR=new Kp,_R=new Yp,pn=(()=>{class n{_ref;_latestValue=null;markForCheckOnValueUpdate=!0;_subscription=null;_obj=null;_strategy=null;constructor(t){this._ref=t}ngOnDestroy(){this._subscription&&this._dispose(),this._ref=null}transform(t){if(!this._obj){if(t)try{this.markForCheckOnValueUpdate=!1,this._subscribe(t)}finally{this.markForCheckOnValueUpdate=!0}return this._latestValue}return t!==this._obj?(this._dispose(),this.transform(t)):this._latestValue}_subscribe(t){this._obj=t,this._strategy=this._selectStrategy(t),this._subscription=this._strategy.createSubscription(t,r=>this._updateLatestValue(t,r))}_selectStrategy(t){if(gs(t))return CR;if(Fp(t))return _R;throw ER(n,t)}_dispose(){this._strategy.dispose(this._subscription),this._latestValue=null,this._subscription=null,this._obj=null}_updateLatestValue(t,r){t===this._obj&&(this._latestValue=r,this.markForCheckOnValueUpdate&&this._ref?.markForCheck())}static \u0275fac=function(r){return new(r||n)(Ue(ms,16))};static \u0275pipe=HE({name:"async",type:n,pure:!1})}return n})();var ze=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275mod=Mr({type:n});static \u0275inj=Ir({})}return n})();function Zp(n,e){e=encodeURIComponent(e);for(let t of n.split(";")){let r=t.indexOf("="),[i,s]=r==-1?[t,""]:[t.slice(0,r),t.slice(r+1)];if(i.trim()===e)return decodeURIComponent(s)}return null}var Jp="browser",gC="server";function _c(n){return n===gC}var Io=class{};var mC=(()=>{class n{static \u0275prov=k({token:n,providedIn:"root",factory:()=>new eg(R(lt),window)})}return n})(),eg=class{document;window;offset=()=>[0,0];constructor(e,t){this.document=e,this.window=t}setOffset(e){Array.isArray(e)?this.offset=()=>e:this.offset=e}getScrollPosition(){return[this.window.scrollX,this.window.scrollY]}scrollToPosition(e){this.window.scrollTo(e[0],e[1])}scrollToAnchor(e){let t=SR(this.document,e);t&&(this.scrollToElement(t),t.focus())}setHistoryScrollRestoration(e){this.window.history.scrollRestoration=e}scrollToElement(e){let t=e.getBoundingClientRect(),r=t.left+this.window.pageXOffset,i=t.top+this.window.pageYOffset,s=this.offset();this.window.scrollTo(r-s[0],i-s[1])}};function SR(n,e){let t=n.getElementById(e)||n.getElementsByName(e)[0];if(t)return t;if(typeof n.createTreeWalker=="function"&&n.body&&typeof n.body.attachShadow=="function"){let r=n.createTreeWalker(n.body,NodeFilter.SHOW_ELEMENT),i=r.currentNode;for(;i;){let s=i.shadowRoot;if(s){let o=s.getElementById(e)||s.querySelector(`[name="${e}"]`);if(o)return o}i=r.nextNode()}}return null}var xc=new z(""),ig=(()=>{class n{_zone;_plugins;_eventNameToPlugin=new Map;constructor(t,r){this._zone=r,t.forEach(i=>{i.manager=this}),this._plugins=t.slice().reverse()}addEventListener(t,r,i,s){return this._findPluginFor(r).addEventListener(t,r,i,s)}getZone(){return this._zone}_findPluginFor(t){let r=this._eventNameToPlugin.get(t);if(r)return r;if(r=this._plugins.find(s=>s.supports(t)),!r)throw new j(5101,!1);return this._eventNameToPlugin.set(t,r),r}static \u0275fac=function(r){return new(r||n)(q(xc),q(ke))};static \u0275prov=k({token:n,factory:n.\u0275fac})}return n})(),Do=class{_doc;constructor(e){this._doc=e}manager},Ac="ng-app-id";function vC(n){for(let e of n)e.remove()}function yC(n,e){let t=e.createElement("style");return t.textContent=n,t}function xR(n,e,t,r){let i=n.head?.querySelectorAll(`style[${Ac}="${e}"],link[${Ac}="${e}"]`);if(i)for(let s of i)s.removeAttribute(Ac),s instanceof HTMLLinkElement?r.set(s.href.slice(s.href.lastIndexOf("/")+1),{usage:0,elements:[s]}):s.textContent&&t.set(s.textContent,{usage:0,elements:[s]})}function ng(n,e){let t=e.createElement("link");return t.setAttribute("rel","stylesheet"),t.setAttribute("href",n),t}var sg=(()=>{class n{doc;appId;nonce;inline=new Map;external=new Map;hosts=new Set;isServer;constructor(t,r,i,s={}){this.doc=t,this.appId=r,this.nonce=i,this.isServer=_c(s),xR(t,r,this.inline,this.external),this.hosts.add(t.head)}addStyles(t,r){for(let i of t)this.addUsage(i,this.inline,yC);r?.forEach(i=>this.addUsage(i,this.external,ng))}removeStyles(t,r){for(let i of t)this.removeUsage(i,this.inline);r?.forEach(i=>this.removeUsage(i,this.external))}addUsage(t,r,i){let s=r.get(t);s?s.usage++:r.set(t,{usage:1,elements:[...this.hosts].map(o=>this.addElement(o,i(t,this.doc)))})}removeUsage(t,r){let i=r.get(t);i&&(i.usage--,i.usage<=0&&(vC(i.elements),r.delete(t)))}ngOnDestroy(){for(let[,{elements:t}]of[...this.inline,...this.external])vC(t);this.hosts.clear()}addHost(t){this.hosts.add(t);for(let[r,{elements:i}]of this.inline)i.push(this.addElement(t,yC(r,this.doc)));for(let[r,{elements:i}]of this.external)i.push(this.addElement(t,ng(r,this.doc)))}removeHost(t){this.hosts.delete(t)}addElement(t,r){return this.nonce&&r.setAttribute("nonce",this.nonce),this.isServer&&r.setAttribute(Ac,this.appId),t.appendChild(r)}static \u0275fac=function(r){return new(r||n)(q(lt),q(mp),q(yp,8),q(fs))};static \u0275prov=k({token:n,factory:n.\u0275fac})}return n})(),tg={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/Math/MathML"},og=/%COMP%/g;var wC="%COMP%",IR=`_nghost-${wC}`,DR=`_ngcontent-${wC}`,TR=!0,MR=new z("",{providedIn:"root",factory:()=>TR});function RR(n){return DR.replace(og,n)}function OR(n){return IR.replace(og,n)}function EC(n,e){return e.map(t=>t.replace(og,n))}var ag=(()=>{class n{eventManager;sharedStylesHost;appId;removeStylesOnCompDestroy;doc;platformId;ngZone;nonce;tracingService;rendererByCompId=new Map;defaultRenderer;platformIsServer;constructor(t,r,i,s,o,a,l,c=null,u=null){this.eventManager=t,this.sharedStylesHost=r,this.appId=i,this.removeStylesOnCompDestroy=s,this.doc=o,this.platformId=a,this.ngZone=l,this.nonce=c,this.tracingService=u,this.platformIsServer=_c(a),this.defaultRenderer=new To(t,o,l,this.platformIsServer,this.tracingService)}createRenderer(t,r){if(!t||!r)return this.defaultRenderer;this.platformIsServer&&r.encapsulation===Dn.ShadowDom&&(r=W(_({},r),{encapsulation:Dn.Emulated}));let i=this.getOrCreateRenderer(t,r);return i instanceof Sc?i.applyToHost(t):i instanceof Mo&&i.applyStyles(),i}getOrCreateRenderer(t,r){let i=this.rendererByCompId,s=i.get(r.id);if(!s){let o=this.doc,a=this.ngZone,l=this.eventManager,c=this.sharedStylesHost,u=this.removeStylesOnCompDestroy,d=this.platformIsServer,h=this.tracingService;switch(r.encapsulation){case Dn.Emulated:s=new Sc(l,c,r,this.appId,u,o,a,d,h);break;case Dn.ShadowDom:return new rg(l,c,t,r,o,a,this.nonce,d,h);default:s=new Mo(l,c,r,u,o,a,d,h);break}i.set(r.id,s)}return s}ngOnDestroy(){this.rendererByCompId.clear()}componentReplaced(t){this.rendererByCompId.delete(t)}static \u0275fac=function(r){return new(r||n)(q(ig),q(sg),q(mp),q(MR),q(lt),q(fs),q(ke),q(yp),q(ps,8))};static \u0275prov=k({token:n,factory:n.\u0275fac})}return n})(),To=class{eventManager;doc;ngZone;platformIsServer;tracingService;data=Object.create(null);throwOnSyntheticProps=!0;constructor(e,t,r,i,s){this.eventManager=e,this.doc=t,this.ngZone=r,this.platformIsServer=i,this.tracingService=s}destroy(){}destroyNode=null;createElement(e,t){return t?this.doc.createElementNS(tg[t]||t,e):this.doc.createElement(e)}createComment(e){return this.doc.createComment(e)}createText(e){return this.doc.createTextNode(e)}appendChild(e,t){(bC(e)?e.content:e).appendChild(t)}insertBefore(e,t,r){e&&(bC(e)?e.content:e).insertBefore(t,r)}removeChild(e,t){t.remove()}selectRootElement(e,t){let r=typeof e=="string"?this.doc.querySelector(e):e;if(!r)throw new j(-5104,!1);return t||(r.textContent=""),r}parentNode(e){return e.parentNode}nextSibling(e){return e.nextSibling}setAttribute(e,t,r,i){if(i){t=i+":"+t;let s=tg[i];s?e.setAttributeNS(s,t,r):e.setAttribute(t,r)}else e.setAttribute(t,r)}removeAttribute(e,t,r){if(r){let i=tg[r];i?e.removeAttributeNS(i,t):e.removeAttribute(`${r}:${t}`)}else e.removeAttribute(t)}addClass(e,t){e.classList.add(t)}removeClass(e,t){e.classList.remove(t)}setStyle(e,t,r,i){i&(ui.DashCase|ui.Important)?e.style.setProperty(t,r,i&ui.Important?"important":""):e.style[t]=r}removeStyle(e,t,r){r&ui.DashCase?e.style.removeProperty(t):e.style[t]=""}setProperty(e,t,r){e!=null&&(e[t]=r)}setValue(e,t){e.nodeValue=t}listen(e,t,r,i){if(typeof e=="string"&&(e=ir().getGlobalEventTarget(this.doc,e),!e))throw new j(5102,!1);let s=this.decoratePreventDefault(r);return this.tracingService?.wrapEventListener&&(s=this.tracingService.wrapEventListener(e,t,s)),this.eventManager.addEventListener(e,t,s,i)}decoratePreventDefault(e){return t=>{if(t==="__ngUnwrap__")return e;(this.platformIsServer?this.ngZone.runGuarded(()=>e(t)):e(t))===!1&&t.preventDefault()}}};function bC(n){return n.tagName==="TEMPLATE"&&n.content!==void 0}var rg=class extends To{sharedStylesHost;hostEl;shadowRoot;constructor(e,t,r,i,s,o,a,l,c){super(e,s,o,l,c),this.sharedStylesHost=t,this.hostEl=r,this.shadowRoot=r.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);let u=i.styles;u=EC(i.id,u);for(let h of u){let f=document.createElement("style");a&&f.setAttribute("nonce",a),f.textContent=h,this.shadowRoot.appendChild(f)}let d=i.getExternalStyles?.();if(d)for(let h of d){let f=ng(h,s);a&&f.setAttribute("nonce",a),this.shadowRoot.appendChild(f)}}nodeOrShadowRoot(e){return e===this.hostEl?this.shadowRoot:e}appendChild(e,t){return super.appendChild(this.nodeOrShadowRoot(e),t)}insertBefore(e,t,r){return super.insertBefore(this.nodeOrShadowRoot(e),t,r)}removeChild(e,t){return super.removeChild(null,t)}parentNode(e){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(e)))}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}},Mo=class extends To{sharedStylesHost;removeStylesOnCompDestroy;styles;styleUrls;constructor(e,t,r,i,s,o,a,l,c){super(e,s,o,a,l),this.sharedStylesHost=t,this.removeStylesOnCompDestroy=i;let u=r.styles;this.styles=c?EC(c,u):u,this.styleUrls=r.getExternalStyles?.(c)}applyStyles(){this.sharedStylesHost.addStyles(this.styles,this.styleUrls)}destroy(){this.removeStylesOnCompDestroy&&this.sharedStylesHost.removeStyles(this.styles,this.styleUrls)}},Sc=class extends Mo{contentAttr;hostAttr;constructor(e,t,r,i,s,o,a,l,c){let u=i+"-"+r.id;super(e,t,r,s,o,a,l,c,u),this.contentAttr=RR(u),this.hostAttr=OR(u)}applyToHost(e){this.applyStyles(),this.setAttribute(e,this.hostAttr,"")}createElement(e,t){let r=super.createElement(e,t);return super.setAttribute(r,this.contentAttr,""),r}};var Ic=class n extends So{supportsDOMEvents=!0;static makeCurrent(){Wp(new n)}onAndCancel(e,t,r,i){return e.addEventListener(t,r,i),()=>{e.removeEventListener(t,r,i)}}dispatchEvent(e,t){e.dispatchEvent(t)}remove(e){e.remove()}createElement(e,t){return t=t||this.getDefaultDocument(),t.createElement(e)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(e){return e.nodeType===Node.ELEMENT_NODE}isShadowRoot(e){return e instanceof DocumentFragment}getGlobalEventTarget(e,t){return t==="window"?window:t==="document"?e:t==="body"?e.body:null}getBaseHref(e){let t=PR();return t==null?null:NR(t)}resetBaseElement(){Ro=null}getUserAgent(){return window.navigator.userAgent}getCookie(e){return Zp(document.cookie,e)}},Ro=null;function PR(){return Ro=Ro||document.querySelector("base"),Ro?Ro.getAttribute("href"):null}function NR(n){return new URL(n,document.baseURI).pathname}var kR=(()=>{class n{build(){return new XMLHttpRequest}static \u0275fac=function(r){return new(r||n)};static \u0275prov=k({token:n,factory:n.\u0275fac})}return n})(),_C=(()=>{class n extends Do{constructor(t){super(t)}supports(t){return!0}addEventListener(t,r,i,s){return t.addEventListener(r,i,s),()=>this.removeEventListener(t,r,i,s)}removeEventListener(t,r,i,s){return t.removeEventListener(r,i,s)}static \u0275fac=function(r){return new(r||n)(q(lt))};static \u0275prov=k({token:n,factory:n.\u0275fac})}return n})(),CC=["alt","control","meta","shift"],LR={"\b":"Backspace","	":"Tab","\x7F":"Delete","\x1B":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},FR={alt:n=>n.altKey,control:n=>n.ctrlKey,meta:n=>n.metaKey,shift:n=>n.shiftKey},AC=(()=>{class n extends Do{constructor(t){super(t)}supports(t){return n.parseEventName(t)!=null}addEventListener(t,r,i,s){let o=n.parseEventName(r),a=n.eventCallback(o.fullKey,i,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>ir().onAndCancel(t,o.domEventName,a,s))}static parseEventName(t){let r=t.toLowerCase().split("."),i=r.shift();if(r.length===0||!(i==="keydown"||i==="keyup"))return null;let s=n._normalizeKey(r.pop()),o="",a=r.indexOf("code");if(a>-1&&(r.splice(a,1),o="code."),CC.forEach(c=>{let u=r.indexOf(c);u>-1&&(r.splice(u,1),o+=c+".")}),o+=s,r.length!=0||s.length===0)return null;let l={};return l.domEventName=i,l.fullKey=o,l}static matchEventFullKeyCode(t,r){let i=LR[t.key]||t.key,s="";return r.indexOf("code.")>-1&&(i=t.code,s="code."),i==null||!i?!1:(i=i.toLowerCase(),i===" "?i="space":i==="."&&(i="dot"),CC.forEach(o=>{if(o!==i){let a=FR[o];a(t)&&(s+=o+".")}}),s+=i,s===r)}static eventCallback(t,r,i){return s=>{n.matchEventFullKeyCode(s,t)&&i.runGuarded(()=>r(s))}}static _normalizeKey(t){return t==="esc"?"escape":t}static \u0275fac=function(r){return new(r||n)(q(lt))};static \u0275prov=k({token:n,factory:n.\u0275fac})}return n})();function lg(n,e){return oC(_({rootComponent:n},jR(e)))}function jR(n){return{appProviders:[...$R,...n?.providers??[]],platformProviders:UR}}function BR(){Ic.makeCurrent()}function VR(){return new In}function HR(){return Xw(document),document}var UR=[{provide:fs,useValue:Jp},{provide:vp,useValue:BR,multi:!0},{provide:lt,useFactory:HR}];var $R=[{provide:rc,useValue:"root"},{provide:In,useFactory:VR},{provide:xc,useClass:_C,multi:!0,deps:[lt]},{provide:xc,useClass:AC,multi:!0,deps:[lt]},ag,sg,ig,{provide:ss,useExisting:ag},{provide:Io,useClass:kR},[]];var SC=(()=>{class n{_doc;constructor(t){this._doc=t}getTitle(){return this._doc.title}setTitle(t){this._doc.title=t||""}static \u0275fac=function(r){return new(r||n)(q(lt))};static \u0275prov=k({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();var J="primary",zo=Symbol("RouteTitle"),fg=class{params;constructor(e){this.params=e||{}}has(e){return Object.prototype.hasOwnProperty.call(this.params,e)}get(e){if(this.has(e)){let t=this.params[e];return Array.isArray(t)?t[0]:t}return null}getAll(e){if(this.has(e)){let t=this.params[e];return Array.isArray(t)?t:[t]}return[]}get keys(){return Object.keys(this.params)}};function gi(n){return new fg(n)}function PC(n,e,t){let r=t.path.split("/");if(r.length>n.length||t.pathMatch==="full"&&(e.hasChildren()||r.length<n.length))return null;let i={};for(let s=0;s<r.length;s++){let o=r[s],a=n[s];if(o[0]===":")i[o.substring(1)]=a;else if(o!==a.path)return null}return{consumed:n.slice(0,r.length),posParams:i}}function WR(n,e){if(n.length!==e.length)return!1;for(let t=0;t<n.length;++t)if(!Nn(n[t],e[t]))return!1;return!0}function Nn(n,e){let t=n?pg(n):void 0,r=e?pg(e):void 0;if(!t||!r||t.length!=r.length)return!1;let i;for(let s=0;s<t.length;s++)if(i=t[s],!NC(n[i],e[i]))return!1;return!0}function pg(n){return[...Object.keys(n),...Object.getOwnPropertySymbols(n)]}function NC(n,e){if(Array.isArray(n)&&Array.isArray(e)){if(n.length!==e.length)return!1;let t=[...n].sort(),r=[...e].sort();return t.every((i,s)=>r[s]===i)}else return n===e}function kC(n){return n.length>0?n[n.length-1]:null}function Lr(n){return Qs(n)?n:gs(n)?ve(Promise.resolve(n)):H(n)}var qR={exact:FC,subset:jC},LC={exact:GR,subset:YR,ignored:()=>!0};function xC(n,e,t){return qR[t.paths](n.root,e.root,t.matrixParams)&&LC[t.queryParams](n.queryParams,e.queryParams)&&!(t.fragment==="exact"&&n.fragment!==e.fragment)}function GR(n,e){return Nn(n,e)}function FC(n,e,t){if(!fi(n.segments,e.segments)||!Mc(n.segments,e.segments,t)||n.numberOfChildren!==e.numberOfChildren)return!1;for(let r in e.children)if(!n.children[r]||!FC(n.children[r],e.children[r],t))return!1;return!0}function YR(n,e){return Object.keys(e).length<=Object.keys(n).length&&Object.keys(e).every(t=>NC(n[t],e[t]))}function jC(n,e,t){return BC(n,e,e.segments,t)}function BC(n,e,t,r){if(n.segments.length>t.length){let i=n.segments.slice(0,t.length);return!(!fi(i,t)||e.hasChildren()||!Mc(i,t,r))}else if(n.segments.length===t.length){if(!fi(n.segments,t)||!Mc(n.segments,t,r))return!1;for(let i in e.children)if(!n.children[i]||!jC(n.children[i],e.children[i],r))return!1;return!0}else{let i=t.slice(0,n.segments.length),s=t.slice(n.segments.length);return!fi(n.segments,i)||!Mc(n.segments,i,r)||!n.children[J]?!1:BC(n.children[J],e,s,r)}}function Mc(n,e,t){return e.every((r,i)=>LC[t](n[i].parameters,r.parameters))}var Ln=class{root;queryParams;fragment;_queryParamMap;constructor(e=new ye([],{}),t={},r=null){this.root=e,this.queryParams=t,this.fragment=r}get queryParamMap(){return this._queryParamMap??=gi(this.queryParams),this._queryParamMap}toString(){return QR.serialize(this)}},ye=class{segments;children;parent=null;constructor(e,t){this.segments=e,this.children=t,Object.values(t).forEach(r=>r.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return Rc(this)}},Pr=class{path;parameters;_parameterMap;constructor(e,t){this.path=e,this.parameters=t}get parameterMap(){return this._parameterMap??=gi(this.parameters),this._parameterMap}toString(){return HC(this)}};function KR(n,e){return fi(n,e)&&n.every((t,r)=>Nn(t.parameters,e[r].parameters))}function fi(n,e){return n.length!==e.length?!1:n.every((t,r)=>t.path===e[r].path)}function XR(n,e){let t=[];return Object.entries(n.children).forEach(([r,i])=>{r===J&&(t=t.concat(e(i,r)))}),Object.entries(n.children).forEach(([r,i])=>{r!==J&&(t=t.concat(e(i,r)))}),t}var mi=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275prov=k({token:n,factory:()=>new Nr,providedIn:"root"})}return n})(),Nr=class{parse(e){let t=new mg(e);return new Ln(t.parseRootSegment(),t.parseQueryParams(),t.parseFragment())}serialize(e){let t=`/${Oo(e.root,!0)}`,r=eO(e.queryParams),i=typeof e.fragment=="string"?`#${ZR(e.fragment)}`:"";return`${t}${r}${i}`}},QR=new Nr;function Rc(n){return n.segments.map(e=>HC(e)).join("/")}function Oo(n,e){if(!n.hasChildren())return Rc(n);if(e){let t=n.children[J]?Oo(n.children[J],!1):"",r=[];return Object.entries(n.children).forEach(([i,s])=>{i!==J&&r.push(`${i}:${Oo(s,!1)}`)}),r.length>0?`${t}(${r.join("//")})`:t}else{let t=XR(n,(r,i)=>i===J?[Oo(n.children[J],!1)]:[`${i}:${Oo(r,!1)}`]);return Object.keys(n.children).length===1&&n.children[J]!=null?`${Rc(n)}/${t[0]}`:`${Rc(n)}/(${t.join("//")})`}}function VC(n){return encodeURIComponent(n).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function Dc(n){return VC(n).replace(/%3B/gi,";")}function ZR(n){return encodeURI(n)}function gg(n){return VC(n).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function Oc(n){return decodeURIComponent(n)}function IC(n){return Oc(n.replace(/\+/g,"%20"))}function HC(n){return`${gg(n.path)}${JR(n.parameters)}`}function JR(n){return Object.entries(n).map(([e,t])=>`;${gg(e)}=${gg(t)}`).join("")}function eO(n){let e=Object.entries(n).map(([t,r])=>Array.isArray(r)?r.map(i=>`${Dc(t)}=${Dc(i)}`).join("&"):`${Dc(t)}=${Dc(r)}`).filter(t=>t);return e.length?`?${e.join("&")}`:""}var tO=/^[^\/()?;#]+/;function cg(n){let e=n.match(tO);return e?e[0]:""}var nO=/^[^\/()?;=#]+/;function rO(n){let e=n.match(nO);return e?e[0]:""}var iO=/^[^=?&#]+/;function sO(n){let e=n.match(iO);return e?e[0]:""}var oO=/^[^&#]+/;function aO(n){let e=n.match(oO);return e?e[0]:""}var mg=class{url;remaining;constructor(e){this.url=e,this.remaining=e}parseRootSegment(){return this.consumeOptional("/"),this.remaining===""||this.peekStartsWith("?")||this.peekStartsWith("#")?new ye([],{}):new ye([],this.parseChildren())}parseQueryParams(){let e={};if(this.consumeOptional("?"))do this.parseQueryParam(e);while(this.consumeOptional("&"));return e}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(this.remaining==="")return{};this.consumeOptional("/");let e=[];for(this.peekStartsWith("(")||e.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),e.push(this.parseSegment());let t={};this.peekStartsWith("/(")&&(this.capture("/"),t=this.parseParens(!0));let r={};return this.peekStartsWith("(")&&(r=this.parseParens(!1)),(e.length>0||Object.keys(t).length>0)&&(r[J]=new ye(e,t)),r}parseSegment(){let e=cg(this.remaining);if(e===""&&this.peekStartsWith(";"))throw new j(4009,!1);return this.capture(e),new Pr(Oc(e),this.parseMatrixParams())}parseMatrixParams(){let e={};for(;this.consumeOptional(";");)this.parseParam(e);return e}parseParam(e){let t=rO(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){let i=cg(this.remaining);i&&(r=i,this.capture(r))}e[Oc(t)]=Oc(r)}parseQueryParam(e){let t=sO(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){let o=aO(this.remaining);o&&(r=o,this.capture(r))}let i=IC(t),s=IC(r);if(e.hasOwnProperty(i)){let o=e[i];Array.isArray(o)||(o=[o],e[i]=o),o.push(s)}else e[i]=s}parseParens(e){let t={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){let r=cg(this.remaining),i=this.remaining[r.length];if(i!=="/"&&i!==")"&&i!==";")throw new j(4010,!1);let s;r.indexOf(":")>-1?(s=r.slice(0,r.indexOf(":")),this.capture(s),this.capture(":")):e&&(s=J);let o=this.parseChildren();t[s]=Object.keys(o).length===1?o[J]:new ye([],o),this.consumeOptional("//")}return t}peekStartsWith(e){return this.remaining.startsWith(e)}consumeOptional(e){return this.peekStartsWith(e)?(this.remaining=this.remaining.substring(e.length),!0):!1}capture(e){if(!this.consumeOptional(e))throw new j(4011,!1)}};function UC(n){return n.segments.length>0?new ye([],{[J]:n}):n}function $C(n){let e={};for(let[r,i]of Object.entries(n.children)){let s=$C(i);if(r===J&&s.segments.length===0&&s.hasChildren())for(let[o,a]of Object.entries(s.children))e[o]=a;else(s.segments.length>0||s.hasChildren())&&(e[r]=s)}let t=new ye(n.segments,e);return lO(t)}function lO(n){if(n.numberOfChildren===1&&n.children[J]){let e=n.children[J];return new ye(n.segments.concat(e.segments),e.children)}return n}function Es(n){return n instanceof Ln}function zC(n,e,t=null,r=null){let i=WC(n);return qC(i,e,t,r)}function WC(n){let e;function t(s){let o={};for(let l of s.children){let c=t(l);o[l.outlet]=c}let a=new ye(s.url,o);return s===n&&(e=a),a}let r=t(n.root),i=UC(r);return e??i}function qC(n,e,t,r){let i=n;for(;i.parent;)i=i.parent;if(e.length===0)return ug(i,i,i,t,r);let s=cO(e);if(s.toRoot())return ug(i,i,new ye([],{}),t,r);let o=uO(s,i,n),a=o.processChildren?No(o.segmentGroup,o.index,s.commands):YC(o.segmentGroup,o.index,s.commands);return ug(i,o.segmentGroup,a,t,r)}function Nc(n){return typeof n=="object"&&n!=null&&!n.outlets&&!n.segmentPath}function Lo(n){return typeof n=="object"&&n!=null&&n.outlets}function ug(n,e,t,r,i){let s={};r&&Object.entries(r).forEach(([l,c])=>{s[l]=Array.isArray(c)?c.map(u=>`${u}`):`${c}`});let o;n===e?o=t:o=GC(n,e,t);let a=UC($C(o));return new Ln(a,s,i)}function GC(n,e,t){let r={};return Object.entries(n.children).forEach(([i,s])=>{s===e?r[i]=t:r[i]=GC(s,e,t)}),new ye(n.segments,r)}var kc=class{isAbsolute;numberOfDoubleDots;commands;constructor(e,t,r){if(this.isAbsolute=e,this.numberOfDoubleDots=t,this.commands=r,e&&r.length>0&&Nc(r[0]))throw new j(4003,!1);let i=r.find(Lo);if(i&&i!==kC(r))throw new j(4004,!1)}toRoot(){return this.isAbsolute&&this.commands.length===1&&this.commands[0]=="/"}};function cO(n){if(typeof n[0]=="string"&&n.length===1&&n[0]==="/")return new kc(!0,0,n);let e=0,t=!1,r=n.reduce((i,s,o)=>{if(typeof s=="object"&&s!=null){if(s.outlets){let a={};return Object.entries(s.outlets).forEach(([l,c])=>{a[l]=typeof c=="string"?c.split("/"):c}),[...i,{outlets:a}]}if(s.segmentPath)return[...i,s.segmentPath]}return typeof s!="string"?[...i,s]:o===0?(s.split("/").forEach((a,l)=>{l==0&&a==="."||(l==0&&a===""?t=!0:a===".."?e++:a!=""&&i.push(a))}),i):[...i,s]},[]);return new kc(t,e,r)}var bs=class{segmentGroup;processChildren;index;constructor(e,t,r){this.segmentGroup=e,this.processChildren=t,this.index=r}};function uO(n,e,t){if(n.isAbsolute)return new bs(e,!0,0);if(!t)return new bs(e,!1,NaN);if(t.parent===null)return new bs(t,!0,0);let r=Nc(n.commands[0])?0:1,i=t.segments.length-1+r;return dO(t,i,n.numberOfDoubleDots)}function dO(n,e,t){let r=n,i=e,s=t;for(;s>i;){if(s-=i,r=r.parent,!r)throw new j(4005,!1);i=r.segments.length}return new bs(r,!1,i-s)}function hO(n){return Lo(n[0])?n[0].outlets:{[J]:n}}function YC(n,e,t){if(n??=new ye([],{}),n.segments.length===0&&n.hasChildren())return No(n,e,t);let r=fO(n,e,t),i=t.slice(r.commandIndex);if(r.match&&r.pathIndex<n.segments.length){let s=new ye(n.segments.slice(0,r.pathIndex),{});return s.children[J]=new ye(n.segments.slice(r.pathIndex),n.children),No(s,0,i)}else return r.match&&i.length===0?new ye(n.segments,{}):r.match&&!n.hasChildren()?vg(n,e,t):r.match?No(n,0,i):vg(n,e,t)}function No(n,e,t){if(t.length===0)return new ye(n.segments,{});{let r=hO(t),i={};if(Object.keys(r).some(s=>s!==J)&&n.children[J]&&n.numberOfChildren===1&&n.children[J].segments.length===0){let s=No(n.children[J],e,t);return new ye(n.segments,s.children)}return Object.entries(r).forEach(([s,o])=>{typeof o=="string"&&(o=[o]),o!==null&&(i[s]=YC(n.children[s],e,o))}),Object.entries(n.children).forEach(([s,o])=>{r[s]===void 0&&(i[s]=o)}),new ye(n.segments,i)}}function fO(n,e,t){let r=0,i=e,s={match:!1,pathIndex:0,commandIndex:0};for(;i<n.segments.length;){if(r>=t.length)return s;let o=n.segments[i],a=t[r];if(Lo(a))break;let l=`${a}`,c=r<t.length-1?t[r+1]:null;if(i>0&&l===void 0)break;if(l&&c&&typeof c=="object"&&c.outlets===void 0){if(!TC(l,c,o))return s;r+=2}else{if(!TC(l,{},o))return s;r++}i++}return{match:!0,pathIndex:i,commandIndex:r}}function vg(n,e,t){let r=n.segments.slice(0,e),i=0;for(;i<t.length;){let s=t[i];if(Lo(s)){let l=pO(s.outlets);return new ye(r,l)}if(i===0&&Nc(t[0])){let l=n.segments[e];r.push(new Pr(l.path,DC(t[0]))),i++;continue}let o=Lo(s)?s.outlets[J]:`${s}`,a=i<t.length-1?t[i+1]:null;o&&a&&Nc(a)?(r.push(new Pr(o,DC(a))),i+=2):(r.push(new Pr(o,{})),i++)}return new ye(r,{})}function pO(n){let e={};return Object.entries(n).forEach(([t,r])=>{typeof r=="string"&&(r=[r]),r!==null&&(e[t]=vg(new ye([],{}),0,r))}),e}function DC(n){let e={};return Object.entries(n).forEach(([t,r])=>e[t]=`${r}`),e}function TC(n,e,t){return n==t.path&&Nn(e,t.parameters)}var Pc="imperative",nt=function(n){return n[n.NavigationStart=0]="NavigationStart",n[n.NavigationEnd=1]="NavigationEnd",n[n.NavigationCancel=2]="NavigationCancel",n[n.NavigationError=3]="NavigationError",n[n.RoutesRecognized=4]="RoutesRecognized",n[n.ResolveStart=5]="ResolveStart",n[n.ResolveEnd=6]="ResolveEnd",n[n.GuardsCheckStart=7]="GuardsCheckStart",n[n.GuardsCheckEnd=8]="GuardsCheckEnd",n[n.RouteConfigLoadStart=9]="RouteConfigLoadStart",n[n.RouteConfigLoadEnd=10]="RouteConfigLoadEnd",n[n.ChildActivationStart=11]="ChildActivationStart",n[n.ChildActivationEnd=12]="ChildActivationEnd",n[n.ActivationStart=13]="ActivationStart",n[n.ActivationEnd=14]="ActivationEnd",n[n.Scroll=15]="Scroll",n[n.NavigationSkipped=16]="NavigationSkipped",n}(nt||{}),jt=class{id;url;constructor(e,t){this.id=e,this.url=t}},kr=class extends jt{type=nt.NavigationStart;navigationTrigger;restoredState;constructor(e,t,r="imperative",i=null){super(e,t),this.navigationTrigger=r,this.restoredState=i}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}},mn=class extends jt{urlAfterRedirects;type=nt.NavigationEnd;constructor(e,t,r){super(e,t),this.urlAfterRedirects=r}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}},Dt=function(n){return n[n.Redirect=0]="Redirect",n[n.SupersededByNewNavigation=1]="SupersededByNewNavigation",n[n.NoDataFromResolver=2]="NoDataFromResolver",n[n.GuardRejected=3]="GuardRejected",n}(Dt||{}),Cs=function(n){return n[n.IgnoredSameUrlNavigation=0]="IgnoredSameUrlNavigation",n[n.IgnoredByUrlHandlingStrategy=1]="IgnoredByUrlHandlingStrategy",n}(Cs||{}),kn=class extends jt{reason;code;type=nt.NavigationCancel;constructor(e,t,r,i){super(e,t),this.reason=r,this.code=i}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}},Fn=class extends jt{reason;code;type=nt.NavigationSkipped;constructor(e,t,r,i){super(e,t),this.reason=r,this.code=i}},_s=class extends jt{error;target;type=nt.NavigationError;constructor(e,t,r,i){super(e,t),this.error=r,this.target=i}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}},Fo=class extends jt{urlAfterRedirects;state;type=nt.RoutesRecognized;constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},Lc=class extends jt{urlAfterRedirects;state;type=nt.GuardsCheckStart;constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},Fc=class extends jt{urlAfterRedirects;state;shouldActivate;type=nt.GuardsCheckEnd;constructor(e,t,r,i,s){super(e,t),this.urlAfterRedirects=r,this.state=i,this.shouldActivate=s}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}},jc=class extends jt{urlAfterRedirects;state;type=nt.ResolveStart;constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},Bc=class extends jt{urlAfterRedirects;state;type=nt.ResolveEnd;constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},Vc=class{route;type=nt.RouteConfigLoadStart;constructor(e){this.route=e}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}},Hc=class{route;type=nt.RouteConfigLoadEnd;constructor(e){this.route=e}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}},Uc=class{snapshot;type=nt.ChildActivationStart;constructor(e){this.snapshot=e}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},$c=class{snapshot;type=nt.ChildActivationEnd;constructor(e){this.snapshot=e}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},zc=class{snapshot;type=nt.ActivationStart;constructor(e){this.snapshot=e}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},Wc=class{snapshot;type=nt.ActivationEnd;constructor(e){this.snapshot=e}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},As=class{routerEvent;position;anchor;type=nt.Scroll;constructor(e,t,r){this.routerEvent=e,this.position=t,this.anchor=r}toString(){let e=this.position?`${this.position[0]}, ${this.position[1]}`:null;return`Scroll(anchor: '${this.anchor}', position: '${e}')`}},jo=class{},Ss=class{url;navigationBehaviorOptions;constructor(e,t){this.url=e,this.navigationBehaviorOptions=t}};function gO(n,e){return n.providers&&!n._injector&&(n._injector=Co(n.providers,e,`Route: ${n.path}`)),n._injector??e}function gn(n){return n.outlet||J}function mO(n,e){let t=n.filter(r=>gn(r)===e);return t.push(...n.filter(r=>gn(r)!==e)),t}function Wo(n){if(!n)return null;if(n.routeConfig?._injector)return n.routeConfig._injector;for(let e=n.parent;e;e=e.parent){let t=e.routeConfig;if(t?._loadedInjector)return t._loadedInjector;if(t?._injector)return t._injector}return null}var qc=class{rootInjector;outlet=null;route=null;children;attachRef=null;get injector(){return Wo(this.route?.snapshot)??this.rootInjector}constructor(e){this.rootInjector=e,this.children=new vi(this.rootInjector)}},vi=(()=>{class n{rootInjector;contexts=new Map;constructor(t){this.rootInjector=t}onChildOutletCreated(t,r){let i=this.getOrCreateContext(t);i.outlet=r,this.contexts.set(t,i)}onChildOutletDestroyed(t){let r=this.getContext(t);r&&(r.outlet=null,r.attachRef=null)}onOutletDeactivated(){let t=this.contexts;return this.contexts=new Map,t}onOutletReAttached(t){this.contexts=t}getOrCreateContext(t){let r=this.getContext(t);return r||(r=new qc(this.rootInjector),this.contexts.set(t,r)),r}getContext(t){return this.contexts.get(t)||null}static \u0275fac=function(r){return new(r||n)(q(At))};static \u0275prov=k({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),Gc=class{_root;constructor(e){this._root=e}get root(){return this._root.value}parent(e){let t=this.pathFromRoot(e);return t.length>1?t[t.length-2]:null}children(e){let t=yg(e,this._root);return t?t.children.map(r=>r.value):[]}firstChild(e){let t=yg(e,this._root);return t&&t.children.length>0?t.children[0].value:null}siblings(e){let t=bg(e,this._root);return t.length<2?[]:t[t.length-2].children.map(i=>i.value).filter(i=>i!==e)}pathFromRoot(e){return bg(e,this._root).map(t=>t.value)}};function yg(n,e){if(n===e.value)return e;for(let t of e.children){let r=yg(n,t);if(r)return r}return null}function bg(n,e){if(n===e.value)return[e];for(let t of e.children){let r=bg(n,t);if(r.length)return r.unshift(e),r}return[]}var Ft=class{value;children;constructor(e,t){this.value=e,this.children=t}toString(){return`TreeNode(${this.value})`}};function ys(n){let e={};return n&&n.children.forEach(t=>e[t.value.outlet]=t),e}var Bo=class extends Gc{snapshot;constructor(e,t){super(e),this.snapshot=t,Ig(this,e)}toString(){return this.snapshot.toString()}};function KC(n){let e=vO(n),t=new Ge([new Pr("",{})]),r=new Ge({}),i=new Ge({}),s=new Ge({}),o=new Ge(""),a=new or(t,r,s,o,i,J,n,e.root);return a.snapshot=e.root,new Bo(new Ft(a,[]),e)}function vO(n){let e={},t={},r={},i="",s=new pi([],e,r,i,t,J,n,null,{});return new Vo("",new Ft(s,[]))}var or=class{urlSubject;paramsSubject;queryParamsSubject;fragmentSubject;dataSubject;outlet;component;snapshot;_futureSnapshot;_routerState;_paramMap;_queryParamMap;title;url;params;queryParams;fragment;data;constructor(e,t,r,i,s,o,a,l){this.urlSubject=e,this.paramsSubject=t,this.queryParamsSubject=r,this.fragmentSubject=i,this.dataSubject=s,this.outlet=o,this.component=a,this._futureSnapshot=l,this.title=this.dataSubject?.pipe($(c=>c[zo]))??H(void 0),this.url=e,this.params=t,this.queryParams=r,this.fragment=i,this.data=s}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=this.params.pipe($(e=>gi(e))),this._paramMap}get queryParamMap(){return this._queryParamMap??=this.queryParams.pipe($(e=>gi(e))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}};function Yc(n,e,t="emptyOnly"){let r,{routeConfig:i}=n;return e!==null&&(t==="always"||i?.path===""||!e.component&&!e.routeConfig?.loadComponent)?r={params:_(_({},e.params),n.params),data:_(_({},e.data),n.data),resolve:_(_(_(_({},n.data),e.data),i?.data),n._resolvedData)}:r={params:_({},n.params),data:_({},n.data),resolve:_(_({},n.data),n._resolvedData??{})},i&&QC(i)&&(r.resolve[zo]=i.title),r}var pi=class{url;params;queryParams;fragment;data;outlet;component;routeConfig;_resolve;_resolvedData;_routerState;_paramMap;_queryParamMap;get title(){return this.data?.[zo]}constructor(e,t,r,i,s,o,a,l,c){this.url=e,this.params=t,this.queryParams=r,this.fragment=i,this.data=s,this.outlet=o,this.component=a,this.routeConfig=l,this._resolve=c}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=gi(this.params),this._paramMap}get queryParamMap(){return this._queryParamMap??=gi(this.queryParams),this._queryParamMap}toString(){let e=this.url.map(r=>r.toString()).join("/"),t=this.routeConfig?this.routeConfig.path:"";return`Route(url:'${e}', path:'${t}')`}},Vo=class extends Gc{url;constructor(e,t){super(t),this.url=e,Ig(this,t)}toString(){return XC(this._root)}};function Ig(n,e){e.value._routerState=n,e.children.forEach(t=>Ig(n,t))}function XC(n){let e=n.children.length>0?` { ${n.children.map(XC).join(", ")} } `:"";return`${n.value}${e}`}function dg(n){if(n.snapshot){let e=n.snapshot,t=n._futureSnapshot;n.snapshot=t,Nn(e.queryParams,t.queryParams)||n.queryParamsSubject.next(t.queryParams),e.fragment!==t.fragment&&n.fragmentSubject.next(t.fragment),Nn(e.params,t.params)||n.paramsSubject.next(t.params),WR(e.url,t.url)||n.urlSubject.next(t.url),Nn(e.data,t.data)||n.dataSubject.next(t.data)}else n.snapshot=n._futureSnapshot,n.dataSubject.next(n._futureSnapshot.data)}function wg(n,e){let t=Nn(n.params,e.params)&&KR(n.url,e.url),r=!n.parent!=!e.parent;return t&&!r&&(!n.parent||wg(n.parent,e.parent))}function QC(n){return typeof n.title=="string"||n.title===null}var ZC=new z(""),qo=(()=>{class n{activated=null;get activatedComponentRef(){return this.activated}_activatedRoute=null;name=J;activateEvents=new He;deactivateEvents=new He;attachEvents=new He;detachEvents=new He;routerOutletData=$w(void 0);parentContexts=R(vi);location=R(Tr);changeDetector=R(ms);inputBinder=R(Go,{optional:!0});supportsBindingToComponentInputs=!0;ngOnChanges(t){if(t.name){let{firstChange:r,previousValue:i}=t.name;if(r)return;this.isTrackedInParentContexts(i)&&(this.deactivate(),this.parentContexts.onChildOutletDestroyed(i)),this.initializeOutletWithName()}}ngOnDestroy(){this.isTrackedInParentContexts(this.name)&&this.parentContexts.onChildOutletDestroyed(this.name),this.inputBinder?.unsubscribeFromRouteData(this)}isTrackedInParentContexts(t){return this.parentContexts.getContext(t)?.outlet===this}ngOnInit(){this.initializeOutletWithName()}initializeOutletWithName(){if(this.parentContexts.onChildOutletCreated(this.name,this),this.activated)return;let t=this.parentContexts.getContext(this.name);t?.route&&(t.attachRef?this.attach(t.attachRef,t.route):this.activateWith(t.route,t.injector))}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new j(4012,!1);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new j(4012,!1);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new j(4012,!1);this.location.detach();let t=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(t.instance),t}attach(t,r){this.activated=t,this._activatedRoute=r,this.location.insert(t.hostView),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.attachEvents.emit(t.instance)}deactivate(){if(this.activated){let t=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(t)}}activateWith(t,r){if(this.isActivated)throw new j(4013,!1);this._activatedRoute=t;let i=this.location,o=t.snapshot.component,a=this.parentContexts.getOrCreateContext(this.name).children,l=new Eg(t,a,i.injector,this.routerOutletData);this.activated=i.createComponent(o,{index:i.length,injector:l,environmentInjector:r}),this.changeDetector.markForCheck(),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.activateEvents.emit(this.activated.instance)}static \u0275fac=function(r){return new(r||n)};static \u0275dir=di({type:n,selectors:[["router-outlet"]],inputs:{name:"name",routerOutletData:[1,"routerOutletData"]},outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],features:[us]})}return n})(),Eg=class{route;childContexts;parent;outletData;constructor(e,t,r,i){this.route=e,this.childContexts=t,this.parent=r,this.outletData=i}get(e,t){return e===or?this.route:e===vi?this.childContexts:e===ZC?this.outletData:this.parent.get(e,t)}},Go=new z(""),Dg=(()=>{class n{outletDataSubscriptions=new Map;bindActivatedRouteToOutletComponent(t){this.unsubscribeFromRouteData(t),this.subscribeToRouteData(t)}unsubscribeFromRouteData(t){this.outletDataSubscriptions.get(t)?.unsubscribe(),this.outletDataSubscriptions.delete(t)}subscribeToRouteData(t){let{activatedRoute:r}=t,i=Zs([r.queryParams,r.params,r.data]).pipe(qt(([s,o,a],l)=>(a=_(_(_({},s),o),a),l===0?H(a):Promise.resolve(a)))).subscribe(s=>{if(!t.isActivated||!t.activatedComponentRef||t.activatedRoute!==r||r.component===null){this.unsubscribeFromRouteData(t);return}let o=aC(r.component);if(!o){this.unsubscribeFromRouteData(t);return}for(let{templateName:a}of o.inputs)t.activatedComponentRef.setInput(a,s[a])});this.outletDataSubscriptions.set(t,i)}static \u0275fac=function(r){return new(r||n)};static \u0275prov=k({token:n,factory:n.\u0275fac})}return n})();function yO(n,e,t){let r=Ho(n,e._root,t?t._root:void 0);return new Bo(r,e)}function Ho(n,e,t){if(t&&n.shouldReuseRoute(e.value,t.value.snapshot)){let r=t.value;r._futureSnapshot=e.value;let i=bO(n,e,t);return new Ft(r,i)}else{if(n.shouldAttach(e.value)){let s=n.retrieve(e.value);if(s!==null){let o=s.route;return o.value._futureSnapshot=e.value,o.children=e.children.map(a=>Ho(n,a)),o}}let r=wO(e.value),i=e.children.map(s=>Ho(n,s));return new Ft(r,i)}}function bO(n,e,t){return e.children.map(r=>{for(let i of t.children)if(n.shouldReuseRoute(r.value,i.value.snapshot))return Ho(n,r,i);return Ho(n,r)})}function wO(n){return new or(new Ge(n.url),new Ge(n.params),new Ge(n.queryParams),new Ge(n.fragment),new Ge(n.data),n.outlet,n.component,n)}var xs=class{redirectTo;navigationBehaviorOptions;constructor(e,t){this.redirectTo=e,this.navigationBehaviorOptions=t}},JC="ngNavigationCancelingError";function Kc(n,e){let{redirectTo:t,navigationBehaviorOptions:r}=Es(e)?{redirectTo:e,navigationBehaviorOptions:void 0}:e,i=e_(!1,Dt.Redirect);return i.url=t,i.navigationBehaviorOptions=r,i}function e_(n,e){let t=new Error(`NavigationCancelingError: ${n||""}`);return t[JC]=!0,t.cancellationCode=e,t}function EO(n){return t_(n)&&Es(n.url)}function t_(n){return!!n&&n[JC]}var CO=(n,e,t,r)=>$(i=>(new Cg(e,i.targetRouterState,i.currentRouterState,t,r).activate(n),i)),Cg=class{routeReuseStrategy;futureState;currState;forwardEvent;inputBindingEnabled;constructor(e,t,r,i,s){this.routeReuseStrategy=e,this.futureState=t,this.currState=r,this.forwardEvent=i,this.inputBindingEnabled=s}activate(e){let t=this.futureState._root,r=this.currState?this.currState._root:null;this.deactivateChildRoutes(t,r,e),dg(this.futureState.root),this.activateChildRoutes(t,r,e)}deactivateChildRoutes(e,t,r){let i=ys(t);e.children.forEach(s=>{let o=s.value.outlet;this.deactivateRoutes(s,i[o],r),delete i[o]}),Object.values(i).forEach(s=>{this.deactivateRouteAndItsChildren(s,r)})}deactivateRoutes(e,t,r){let i=e.value,s=t?t.value:null;if(i===s)if(i.component){let o=r.getContext(i.outlet);o&&this.deactivateChildRoutes(e,t,o.children)}else this.deactivateChildRoutes(e,t,r);else s&&this.deactivateRouteAndItsChildren(t,r)}deactivateRouteAndItsChildren(e,t){e.value.component&&this.routeReuseStrategy.shouldDetach(e.value.snapshot)?this.detachAndStoreRouteSubtree(e,t):this.deactivateRouteAndOutlet(e,t)}detachAndStoreRouteSubtree(e,t){let r=t.getContext(e.value.outlet),i=r&&e.value.component?r.children:t,s=ys(e);for(let o of Object.values(s))this.deactivateRouteAndItsChildren(o,i);if(r&&r.outlet){let o=r.outlet.detach(),a=r.children.onOutletDeactivated();this.routeReuseStrategy.store(e.value.snapshot,{componentRef:o,route:e,contexts:a})}}deactivateRouteAndOutlet(e,t){let r=t.getContext(e.value.outlet),i=r&&e.value.component?r.children:t,s=ys(e);for(let o of Object.values(s))this.deactivateRouteAndItsChildren(o,i);r&&(r.outlet&&(r.outlet.deactivate(),r.children.onOutletDeactivated()),r.attachRef=null,r.route=null)}activateChildRoutes(e,t,r){let i=ys(t);e.children.forEach(s=>{this.activateRoutes(s,i[s.value.outlet],r),this.forwardEvent(new Wc(s.value.snapshot))}),e.children.length&&this.forwardEvent(new $c(e.value.snapshot))}activateRoutes(e,t,r){let i=e.value,s=t?t.value:null;if(dg(i),i===s)if(i.component){let o=r.getOrCreateContext(i.outlet);this.activateChildRoutes(e,t,o.children)}else this.activateChildRoutes(e,t,r);else if(i.component){let o=r.getOrCreateContext(i.outlet);if(this.routeReuseStrategy.shouldAttach(i.snapshot)){let a=this.routeReuseStrategy.retrieve(i.snapshot);this.routeReuseStrategy.store(i.snapshot,null),o.children.onOutletReAttached(a.contexts),o.attachRef=a.componentRef,o.route=a.route.value,o.outlet&&o.outlet.attach(a.componentRef,a.route.value),dg(a.route.value),this.activateChildRoutes(e,null,o.children)}else o.attachRef=null,o.route=i,o.outlet&&o.outlet.activateWith(i,o.injector),this.activateChildRoutes(e,null,o.children)}else this.activateChildRoutes(e,null,r)}},Xc=class{path;route;constructor(e){this.path=e,this.route=this.path[this.path.length-1]}},ws=class{component;route;constructor(e,t){this.component=e,this.route=t}};function _O(n,e,t){let r=n._root,i=e?e._root:null;return Po(r,i,t,[r.value])}function AO(n){let e=n.routeConfig?n.routeConfig.canActivateChild:null;return!e||e.length===0?null:{node:n,guards:e}}function Ds(n,e){let t=Symbol(),r=e.get(n,t);return r===t?typeof n=="function"&&!B0(n)?n:e.get(n):r}function Po(n,e,t,r,i={canDeactivateChecks:[],canActivateChecks:[]}){let s=ys(e);return n.children.forEach(o=>{SO(o,s[o.value.outlet],t,r.concat([o.value]),i),delete s[o.value.outlet]}),Object.entries(s).forEach(([o,a])=>ko(a,t.getContext(o),i)),i}function SO(n,e,t,r,i={canDeactivateChecks:[],canActivateChecks:[]}){let s=n.value,o=e?e.value:null,a=t?t.getContext(n.value.outlet):null;if(o&&s.routeConfig===o.routeConfig){let l=xO(o,s,s.routeConfig.runGuardsAndResolvers);l?i.canActivateChecks.push(new Xc(r)):(s.data=o.data,s._resolvedData=o._resolvedData),s.component?Po(n,e,a?a.children:null,r,i):Po(n,e,t,r,i),l&&a&&a.outlet&&a.outlet.isActivated&&i.canDeactivateChecks.push(new ws(a.outlet.component,o))}else o&&ko(e,a,i),i.canActivateChecks.push(new Xc(r)),s.component?Po(n,null,a?a.children:null,r,i):Po(n,null,t,r,i);return i}function xO(n,e,t){if(typeof t=="function")return t(n,e);switch(t){case"pathParamsChange":return!fi(n.url,e.url);case"pathParamsOrQueryParamsChange":return!fi(n.url,e.url)||!Nn(n.queryParams,e.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!wg(n,e)||!Nn(n.queryParams,e.queryParams);case"paramsChange":default:return!wg(n,e)}}function ko(n,e,t){let r=ys(n),i=n.value;Object.entries(r).forEach(([s,o])=>{i.component?e?ko(o,e.children.getContext(s),t):ko(o,null,t):ko(o,e,t)}),i.component?e&&e.outlet&&e.outlet.isActivated?t.canDeactivateChecks.push(new ws(e.outlet.component,i)):t.canDeactivateChecks.push(new ws(null,i)):t.canDeactivateChecks.push(new ws(null,i))}function Yo(n){return typeof n=="function"}function IO(n){return typeof n=="boolean"}function DO(n){return n&&Yo(n.canLoad)}function TO(n){return n&&Yo(n.canActivate)}function MO(n){return n&&Yo(n.canActivateChild)}function RO(n){return n&&Yo(n.canDeactivate)}function OO(n){return n&&Yo(n.canMatch)}function n_(n){return n instanceof sn||n?.name==="EmptyError"}var Tc=Symbol("INITIAL_VALUE");function Is(){return qt(n=>Zs(n.map(e=>e.pipe(Qn(1),Uh(Tc)))).pipe($(e=>{for(let t of e)if(t!==!0){if(t===Tc)return Tc;if(t===!1||PO(t))return t}return!0}),Ve(e=>e!==Tc),Qn(1)))}function PO(n){return Es(n)||n instanceof xs}function NO(n,e){return Ce(t=>{let{targetSnapshot:r,currentSnapshot:i,guards:{canActivateChecks:s,canDeactivateChecks:o}}=t;return o.length===0&&s.length===0?H(W(_({},t),{guardsResult:!0})):kO(o,r,i,n).pipe(Ce(a=>a&&IO(a)?LO(r,s,n,e):H(a)),$(a=>W(_({},t),{guardsResult:a})))})}function kO(n,e,t,r){return ve(n).pipe(Ce(i=>HO(i.component,i.route,t,e,r)),Zn(i=>i!==!0,!0))}function LO(n,e,t,r){return ve(e).pipe(Cr(i=>Xn(jO(i.route.parent,r),FO(i.route,r),VO(n,i.path,t),BO(n,i.route,t))),Zn(i=>i!==!0,!0))}function FO(n,e){return n!==null&&e&&e(new zc(n)),H(!0)}function jO(n,e){return n!==null&&e&&e(new Uc(n)),H(!0)}function BO(n,e,t){let r=e.routeConfig?e.routeConfig.canActivate:null;if(!r||r.length===0)return H(!0);let i=r.map(s=>Qr(()=>{let o=Wo(e)??t,a=Ds(s,o),l=TO(a)?a.canActivate(e,n):Kt(o,()=>a(e,n));return Lr(l).pipe(Zn())}));return H(i).pipe(Is())}function VO(n,e,t){let r=e[e.length-1],s=e.slice(0,e.length-1).reverse().map(o=>AO(o)).filter(o=>o!==null).map(o=>Qr(()=>{let a=o.guards.map(l=>{let c=Wo(o.node)??t,u=Ds(l,c),d=MO(u)?u.canActivateChild(r,n):Kt(c,()=>u(r,n));return Lr(d).pipe(Zn())});return H(a).pipe(Is())}));return H(s).pipe(Is())}function HO(n,e,t,r,i){let s=e&&e.routeConfig?e.routeConfig.canDeactivate:null;if(!s||s.length===0)return H(!0);let o=s.map(a=>{let l=Wo(e)??i,c=Ds(a,l),u=RO(c)?c.canDeactivate(n,e,t,r):Kt(l,()=>c(n,e,t,r));return Lr(u).pipe(Zn())});return H(o).pipe(Is())}function UO(n,e,t,r){let i=e.canLoad;if(i===void 0||i.length===0)return H(!0);let s=i.map(o=>{let a=Ds(o,n),l=DO(a)?a.canLoad(e,t):Kt(n,()=>a(e,t));return Lr(l)});return H(s).pipe(Is(),r_(r))}function r_(n){return Ys(Qe(e=>{if(typeof e!="boolean")throw Kc(n,e)}),$(e=>e===!0))}function $O(n,e,t,r){let i=e.canMatch;if(!i||i.length===0)return H(!0);let s=i.map(o=>{let a=Ds(o,n),l=OO(a)?a.canMatch(e,t):Kt(n,()=>a(e,t));return Lr(l)});return H(s).pipe(Is(),r_(r))}var Uo=class{segmentGroup;constructor(e){this.segmentGroup=e||null}},$o=class extends Error{urlTree;constructor(e){super(),this.urlTree=e}};function vs(n){return Kn(new Uo(n))}function zO(n){return Kn(new j(4e3,!1))}function WO(n){return Kn(e_(!1,Dt.GuardRejected))}var _g=class{urlSerializer;urlTree;constructor(e,t){this.urlSerializer=e,this.urlTree=t}lineralizeSegments(e,t){let r=[],i=t.root;for(;;){if(r=r.concat(i.segments),i.numberOfChildren===0)return H(r);if(i.numberOfChildren>1||!i.children[J])return zO(`${e.redirectTo}`);i=i.children[J]}}applyRedirectCommands(e,t,r,i,s){if(typeof t!="string"){let a=t,{queryParams:l,fragment:c,routeConfig:u,url:d,outlet:h,params:f,data:p,title:g}=i,v=Kt(s,()=>a({params:f,data:p,queryParams:l,fragment:c,routeConfig:u,url:d,outlet:h,title:g}));if(v instanceof Ln)throw new $o(v);t=v}let o=this.applyRedirectCreateUrlTree(t,this.urlSerializer.parse(t),e,r);if(t[0]==="/")throw new $o(o);return o}applyRedirectCreateUrlTree(e,t,r,i){let s=this.createSegmentGroup(e,t.root,r,i);return new Ln(s,this.createQueryParams(t.queryParams,this.urlTree.queryParams),t.fragment)}createQueryParams(e,t){let r={};return Object.entries(e).forEach(([i,s])=>{if(typeof s=="string"&&s[0]===":"){let a=s.substring(1);r[i]=t[a]}else r[i]=s}),r}createSegmentGroup(e,t,r,i){let s=this.createSegments(e,t.segments,r,i),o={};return Object.entries(t.children).forEach(([a,l])=>{o[a]=this.createSegmentGroup(e,l,r,i)}),new ye(s,o)}createSegments(e,t,r,i){return t.map(s=>s.path[0]===":"?this.findPosParam(e,s,i):this.findOrReturn(s,r))}findPosParam(e,t,r){let i=r[t.path.substring(1)];if(!i)throw new j(4001,!1);return i}findOrReturn(e,t){let r=0;for(let i of t){if(i.path===e.path)return t.splice(r),i;r++}return e}},Ag={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function qO(n,e,t,r,i){let s=i_(n,e,t);return s.matched?(r=gO(e,r),$O(r,e,t,i).pipe($(o=>o===!0?s:_({},Ag)))):H(s)}function i_(n,e,t){if(e.path==="**")return GO(t);if(e.path==="")return e.pathMatch==="full"&&(n.hasChildren()||t.length>0)?_({},Ag):{matched:!0,consumedSegments:[],remainingSegments:t,parameters:{},positionalParamSegments:{}};let i=(e.matcher||PC)(t,n,e);if(!i)return _({},Ag);let s={};Object.entries(i.posParams??{}).forEach(([a,l])=>{s[a]=l.path});let o=i.consumed.length>0?_(_({},s),i.consumed[i.consumed.length-1].parameters):s;return{matched:!0,consumedSegments:i.consumed,remainingSegments:t.slice(i.consumed.length),parameters:o,positionalParamSegments:i.posParams??{}}}function GO(n){return{matched:!0,parameters:n.length>0?kC(n).parameters:{},consumedSegments:n,remainingSegments:[],positionalParamSegments:{}}}function MC(n,e,t,r){return t.length>0&&XO(n,t,r)?{segmentGroup:new ye(e,KO(r,new ye(t,n.children))),slicedSegments:[]}:t.length===0&&QO(n,t,r)?{segmentGroup:new ye(n.segments,YO(n,t,r,n.children)),slicedSegments:t}:{segmentGroup:new ye(n.segments,n.children),slicedSegments:t}}function YO(n,e,t,r){let i={};for(let s of t)if(Zc(n,e,s)&&!r[gn(s)]){let o=new ye([],{});i[gn(s)]=o}return _(_({},r),i)}function KO(n,e){let t={};t[J]=e;for(let r of n)if(r.path===""&&gn(r)!==J){let i=new ye([],{});t[gn(r)]=i}return t}function XO(n,e,t){return t.some(r=>Zc(n,e,r)&&gn(r)!==J)}function QO(n,e,t){return t.some(r=>Zc(n,e,r))}function Zc(n,e,t){return(n.hasChildren()||e.length>0)&&t.pathMatch==="full"?!1:t.path===""}function ZO(n,e,t){return e.length===0&&!n.children[t]}var Sg=class{};function JO(n,e,t,r,i,s,o="emptyOnly"){return new xg(n,e,t,r,i,o,s).recognize()}var eP=31,xg=class{injector;configLoader;rootComponentType;config;urlTree;paramsInheritanceStrategy;urlSerializer;applyRedirects;absoluteRedirectCount=0;allowRedirects=!0;constructor(e,t,r,i,s,o,a){this.injector=e,this.configLoader=t,this.rootComponentType=r,this.config=i,this.urlTree=s,this.paramsInheritanceStrategy=o,this.urlSerializer=a,this.applyRedirects=new _g(this.urlSerializer,this.urlTree)}noMatchError(e){return new j(4002,`'${e.segmentGroup}'`)}recognize(){let e=MC(this.urlTree.root,[],[],this.config).segmentGroup;return this.match(e).pipe($(({children:t,rootSnapshot:r})=>{let i=new Ft(r,t),s=new Vo("",i),o=zC(r,[],this.urlTree.queryParams,this.urlTree.fragment);return o.queryParams=this.urlTree.queryParams,s.url=this.urlSerializer.serialize(o),{state:s,tree:o}}))}match(e){let t=new pi([],Object.freeze({}),Object.freeze(_({},this.urlTree.queryParams)),this.urlTree.fragment,Object.freeze({}),J,this.rootComponentType,null,{});return this.processSegmentGroup(this.injector,this.config,e,J,t).pipe($(r=>({children:r,rootSnapshot:t})),Ot(r=>{if(r instanceof $o)return this.urlTree=r.urlTree,this.match(r.urlTree.root);throw r instanceof Uo?this.noMatchError(r):r}))}processSegmentGroup(e,t,r,i,s){return r.segments.length===0&&r.hasChildren()?this.processChildren(e,t,r,s):this.processSegment(e,t,r,r.segments,i,!0,s).pipe($(o=>o instanceof Ft?[o]:[]))}processChildren(e,t,r,i){let s=[];for(let o of Object.keys(r.children))o==="primary"?s.unshift(o):s.push(o);return ve(s).pipe(Cr(o=>{let a=r.children[o],l=mO(t,o);return this.processSegmentGroup(e,l,a,o,i)}),Bh((o,a)=>(o.push(...a),o)),_r(null),jh(),Ce(o=>{if(o===null)return vs(r);let a=s_(o);return tP(a),H(a)}))}processSegment(e,t,r,i,s,o,a){return ve(t).pipe(Cr(l=>this.processSegmentAgainstRoute(l._injector??e,t,l,r,i,s,o,a).pipe(Ot(c=>{if(c instanceof Uo)return H(null);throw c}))),Zn(l=>!!l),Ot(l=>{if(n_(l))return ZO(r,i,s)?H(new Sg):vs(r);throw l}))}processSegmentAgainstRoute(e,t,r,i,s,o,a,l){return gn(r)!==o&&(o===J||!Zc(i,s,r))?vs(i):r.redirectTo===void 0?this.matchSegmentAgainstRoute(e,i,r,s,o,l):this.allowRedirects&&a?this.expandSegmentAgainstRouteUsingRedirect(e,i,t,r,s,o,l):vs(i)}expandSegmentAgainstRouteUsingRedirect(e,t,r,i,s,o,a){let{matched:l,parameters:c,consumedSegments:u,positionalParamSegments:d,remainingSegments:h}=i_(t,i,s);if(!l)return vs(t);typeof i.redirectTo=="string"&&i.redirectTo[0]==="/"&&(this.absoluteRedirectCount++,this.absoluteRedirectCount>eP&&(this.allowRedirects=!1));let f=new pi(s,c,Object.freeze(_({},this.urlTree.queryParams)),this.urlTree.fragment,RC(i),gn(i),i.component??i._loadedComponent??null,i,OC(i)),p=Yc(f,a,this.paramsInheritanceStrategy);f.params=Object.freeze(p.params),f.data=Object.freeze(p.data);let g=this.applyRedirects.applyRedirectCommands(u,i.redirectTo,d,f,e);return this.applyRedirects.lineralizeSegments(i,g).pipe(Ce(v=>this.processSegment(e,r,t,v.concat(h),o,!1,a)))}matchSegmentAgainstRoute(e,t,r,i,s,o){let a=qO(t,r,i,e,this.urlSerializer);return r.path==="**"&&(t.children={}),a.pipe(qt(l=>l.matched?(e=r._injector??e,this.getChildConfig(e,r,i).pipe(qt(({routes:c})=>{let u=r._loadedInjector??e,{parameters:d,consumedSegments:h,remainingSegments:f}=l,p=new pi(h,d,Object.freeze(_({},this.urlTree.queryParams)),this.urlTree.fragment,RC(r),gn(r),r.component??r._loadedComponent??null,r,OC(r)),g=Yc(p,o,this.paramsInheritanceStrategy);p.params=Object.freeze(g.params),p.data=Object.freeze(g.data);let{segmentGroup:v,slicedSegments:m}=MC(t,h,f,c);if(m.length===0&&v.hasChildren())return this.processChildren(u,c,v,p).pipe($(w=>new Ft(p,w)));if(c.length===0&&m.length===0)return H(new Ft(p,[]));let y=gn(r)===s;return this.processSegment(u,c,v,m,y?J:s,!0,p).pipe($(w=>new Ft(p,w instanceof Ft?[w]:[])))}))):vs(t)))}getChildConfig(e,t,r){return t.children?H({routes:t.children,injector:e}):t.loadChildren?t._loadedRoutes!==void 0?H({routes:t._loadedRoutes,injector:t._loadedInjector}):UO(e,t,r,this.urlSerializer).pipe(Ce(i=>i?this.configLoader.loadChildren(e,t).pipe(Qe(s=>{t._loadedRoutes=s.routes,t._loadedInjector=s.injector})):WO(t))):H({routes:[],injector:e})}};function tP(n){n.sort((e,t)=>e.value.outlet===J?-1:t.value.outlet===J?1:e.value.outlet.localeCompare(t.value.outlet))}function nP(n){let e=n.value.routeConfig;return e&&e.path===""}function s_(n){let e=[],t=new Set;for(let r of n){if(!nP(r)){e.push(r);continue}let i=e.find(s=>r.value.routeConfig===s.value.routeConfig);i!==void 0?(i.children.push(...r.children),t.add(i)):e.push(r)}for(let r of t){let i=s_(r.children);e.push(new Ft(r.value,i))}return e.filter(r=>!t.has(r))}function RC(n){return n.data||{}}function OC(n){return n.resolve||{}}function rP(n,e,t,r,i,s){return Ce(o=>JO(n,e,t,r,o.extractedUrl,i,s).pipe($(({state:a,tree:l})=>W(_({},o),{targetSnapshot:a,urlAfterRedirects:l}))))}function iP(n,e){return Ce(t=>{let{targetSnapshot:r,guards:{canActivateChecks:i}}=t;if(!i.length)return H(t);let s=new Set(i.map(l=>l.route)),o=new Set;for(let l of s)if(!o.has(l))for(let c of o_(l))o.add(c);let a=0;return ve(o).pipe(Cr(l=>s.has(l)?sP(l,r,n,e):(l.data=Yc(l,l.parent,n).resolve,H(void 0))),Qe(()=>a++),Gi(1),Ce(l=>a===o.size?H(t):ot))})}function o_(n){let e=n.children.map(t=>o_(t)).flat();return[n,...e]}function sP(n,e,t,r){let i=n.routeConfig,s=n._resolve;return i?.title!==void 0&&!QC(i)&&(s[zo]=i.title),oP(s,n,e,r).pipe($(o=>(n._resolvedData=o,n.data=Yc(n,n.parent,t).resolve,null)))}function oP(n,e,t,r){let i=pg(n);if(i.length===0)return H({});let s={};return ve(i).pipe(Ce(o=>aP(n[o],e,t,r).pipe(Zn(),Qe(a=>{if(a instanceof xs)throw Kc(new Nr,a);s[o]=a}))),Gi(1),$(()=>s),Ot(o=>n_(o)?ot:Kn(o)))}function aP(n,e,t,r){let i=Wo(e)??r,s=Ds(n,i),o=s.resolve?s.resolve(e,t):Kt(i,()=>s(e,t));return Lr(o)}function hg(n){return qt(e=>{let t=n(e);return t?ve(t).pipe($(()=>e)):H(e)})}var Tg=(()=>{class n{buildTitle(t){let r,i=t.root;for(;i!==void 0;)r=this.getResolvedTitleForRoute(i)??r,i=i.children.find(s=>s.outlet===J);return r}getResolvedTitleForRoute(t){return t.data[zo]}static \u0275fac=function(r){return new(r||n)};static \u0275prov=k({token:n,factory:()=>R(a_),providedIn:"root"})}return n})(),a_=(()=>{class n extends Tg{title;constructor(t){super(),this.title=t}updateTitle(t){let r=this.buildTitle(t);r!==void 0&&this.title.setTitle(r)}static \u0275fac=function(r){return new(r||n)(q(SC))};static \u0275prov=k({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),yi=new z("",{providedIn:"root",factory:()=>({})}),Mg=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275cmp=xe({type:n,selectors:[["ng-component"]],exportAs:["emptyRouterOutlet"],decls:1,vars:0,template:function(r,i){r&1&&re(0,"router-outlet")},dependencies:[qo],encapsulation:2})}return n})();function Rg(n){let e=n.children&&n.children.map(Rg),t=e?W(_({},n),{children:e}):_({},n);return!t.component&&!t.loadComponent&&(e||t.loadChildren)&&t.outlet&&t.outlet!==J&&(t.component=Mg),t}var bi=new z(""),Jc=(()=>{class n{componentLoaders=new WeakMap;childrenLoaders=new WeakMap;onLoadStartListener;onLoadEndListener;compiler=R(mc);loadComponent(t){if(this.componentLoaders.get(t))return this.componentLoaders.get(t);if(t._loadedComponent)return H(t._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(t);let r=Lr(t.loadComponent()).pipe($(c_),Qe(s=>{this.onLoadEndListener&&this.onLoadEndListener(t),t._loadedComponent=s}),Cn(()=>{this.componentLoaders.delete(t)})),i=new $i(r,()=>new Oe).pipe(Ui());return this.componentLoaders.set(t,i),i}loadChildren(t,r){if(this.childrenLoaders.get(r))return this.childrenLoaders.get(r);if(r._loadedRoutes)return H({routes:r._loadedRoutes,injector:r._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(r);let s=l_(r,this.compiler,t,this.onLoadEndListener).pipe(Cn(()=>{this.childrenLoaders.delete(r)})),o=new $i(s,()=>new Oe).pipe(Ui());return this.childrenLoaders.set(r,o),o}static \u0275fac=function(r){return new(r||n)};static \u0275prov=k({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function l_(n,e,t,r){return Lr(n.loadChildren()).pipe($(c_),Ce(i=>i instanceof Lp||Array.isArray(i)?H(i):ve(e.compileModuleAsync(i))),$(i=>{r&&r(n);let s,o,a=!1;return Array.isArray(i)?(o=i,a=!0):(s=i.create(t).injector,o=s.get(bi,[],{optional:!0,self:!0}).flat()),{routes:o.map(Rg),injector:s}}))}function lP(n){return n&&typeof n=="object"&&"default"in n}function c_(n){return lP(n)?n.default:n}var eu=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275prov=k({token:n,factory:()=>R(cP),providedIn:"root"})}return n})(),cP=(()=>{class n{shouldProcessUrl(t){return!0}extract(t){return t}merge(t,r){return t}static \u0275fac=function(r){return new(r||n)};static \u0275prov=k({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),Og=new z(""),Pg=new z("");function u_(n,e,t){let r=n.get(Pg),i=n.get(lt);return n.get(ke).runOutsideAngular(()=>{if(!i.startViewTransition||r.skipNextTransition)return r.skipNextTransition=!1,new Promise(c=>setTimeout(c));let s,o=new Promise(c=>{s=c}),a=i.startViewTransition(()=>(s(),uP(n))),{onViewTransitionCreated:l}=r;return l&&Kt(n,()=>l({transition:a,from:e,to:t})),o})}function uP(n){return new Promise(e=>{wp({read:()=>setTimeout(e)},{injector:n})})}var Ng=new z(""),tu=(()=>{class n{currentNavigation=null;currentTransition=null;lastSuccessfulNavigation=null;events=new Oe;transitionAbortSubject=new Oe;configLoader=R(Jc);environmentInjector=R(At);destroyRef=R(wo);urlSerializer=R(mi);rootContexts=R(vi);location=R(Rr);inputBindingEnabled=R(Go,{optional:!0})!==null;titleStrategy=R(Tg);options=R(yi,{optional:!0})||{};paramsInheritanceStrategy=this.options.paramsInheritanceStrategy||"emptyOnly";urlHandlingStrategy=R(eu);createViewTransition=R(Og,{optional:!0});navigationErrorHandler=R(Ng,{optional:!0});navigationId=0;get hasRequestedNavigation(){return this.navigationId!==0}transitions;afterPreactivation=()=>H(void 0);rootComponentType=null;destroyed=!1;constructor(){let t=i=>this.events.next(new Vc(i)),r=i=>this.events.next(new Hc(i));this.configLoader.onLoadEndListener=r,this.configLoader.onLoadStartListener=t,this.destroyRef.onDestroy(()=>{this.destroyed=!0})}complete(){this.transitions?.complete()}handleNavigationRequest(t){let r=++this.navigationId;this.transitions?.next(W(_({},t),{extractedUrl:this.urlHandlingStrategy.extract(t.rawUrl),targetSnapshot:null,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null,id:r}))}setupNavigations(t){return this.transitions=new Ge(null),this.transitions.pipe(Ve(r=>r!==null),qt(r=>{let i=!1,s=!1;return H(r).pipe(qt(o=>{if(this.navigationId>r.id)return this.cancelNavigationTransition(r,"",Dt.SupersededByNewNavigation),ot;this.currentTransition=r,this.currentNavigation={id:o.id,initialUrl:o.rawUrl,extractedUrl:o.extractedUrl,targetBrowserUrl:typeof o.extras.browserUrl=="string"?this.urlSerializer.parse(o.extras.browserUrl):o.extras.browserUrl,trigger:o.source,extras:o.extras,previousNavigation:this.lastSuccessfulNavigation?W(_({},this.lastSuccessfulNavigation),{previousNavigation:null}):null};let a=!t.navigated||this.isUpdatingInternalState()||this.isUpdatedBrowserUrl(),l=o.extras.onSameUrlNavigation??t.onSameUrlNavigation;if(!a&&l!=="reload"){let c="";return this.events.next(new Fn(o.id,this.urlSerializer.serialize(o.rawUrl),c,Cs.IgnoredSameUrlNavigation)),o.resolve(!1),ot}if(this.urlHandlingStrategy.shouldProcessUrl(o.rawUrl))return H(o).pipe(qt(c=>(this.events.next(new kr(c.id,this.urlSerializer.serialize(c.extractedUrl),c.source,c.restoredState)),c.id!==this.navigationId?ot:Promise.resolve(c))),rP(this.environmentInjector,this.configLoader,this.rootComponentType,t.config,this.urlSerializer,this.paramsInheritanceStrategy),Qe(c=>{r.targetSnapshot=c.targetSnapshot,r.urlAfterRedirects=c.urlAfterRedirects,this.currentNavigation=W(_({},this.currentNavigation),{finalUrl:c.urlAfterRedirects});let u=new Fo(c.id,this.urlSerializer.serialize(c.extractedUrl),this.urlSerializer.serialize(c.urlAfterRedirects),c.targetSnapshot);this.events.next(u)}));if(a&&this.urlHandlingStrategy.shouldProcessUrl(o.currentRawUrl)){let{id:c,extractedUrl:u,source:d,restoredState:h,extras:f}=o,p=new kr(c,this.urlSerializer.serialize(u),d,h);this.events.next(p);let g=KC(this.rootComponentType).snapshot;return this.currentTransition=r=W(_({},o),{targetSnapshot:g,urlAfterRedirects:u,extras:W(_({},f),{skipLocationChange:!1,replaceUrl:!1})}),this.currentNavigation.finalUrl=u,H(r)}else{let c="";return this.events.next(new Fn(o.id,this.urlSerializer.serialize(o.extractedUrl),c,Cs.IgnoredByUrlHandlingStrategy)),o.resolve(!1),ot}}),Qe(o=>{let a=new Lc(o.id,this.urlSerializer.serialize(o.extractedUrl),this.urlSerializer.serialize(o.urlAfterRedirects),o.targetSnapshot);this.events.next(a)}),$(o=>(this.currentTransition=r=W(_({},o),{guards:_O(o.targetSnapshot,o.currentSnapshot,this.rootContexts)}),r)),NO(this.environmentInjector,o=>this.events.next(o)),Qe(o=>{if(r.guardsResult=o.guardsResult,o.guardsResult&&typeof o.guardsResult!="boolean")throw Kc(this.urlSerializer,o.guardsResult);let a=new Fc(o.id,this.urlSerializer.serialize(o.extractedUrl),this.urlSerializer.serialize(o.urlAfterRedirects),o.targetSnapshot,!!o.guardsResult);this.events.next(a)}),Ve(o=>o.guardsResult?!0:(this.cancelNavigationTransition(o,"",Dt.GuardRejected),!1)),hg(o=>{if(o.guards.canActivateChecks.length!==0)return H(o).pipe(Qe(a=>{let l=new jc(a.id,this.urlSerializer.serialize(a.extractedUrl),this.urlSerializer.serialize(a.urlAfterRedirects),a.targetSnapshot);this.events.next(l)}),qt(a=>{let l=!1;return H(a).pipe(iP(this.paramsInheritanceStrategy,this.environmentInjector),Qe({next:()=>l=!0,complete:()=>{l||this.cancelNavigationTransition(a,"",Dt.NoDataFromResolver)}}))}),Qe(a=>{let l=new Bc(a.id,this.urlSerializer.serialize(a.extractedUrl),this.urlSerializer.serialize(a.urlAfterRedirects),a.targetSnapshot);this.events.next(l)}))}),hg(o=>{let a=l=>{let c=[];l.routeConfig?.loadComponent&&!l.routeConfig._loadedComponent&&c.push(this.configLoader.loadComponent(l.routeConfig).pipe(Qe(u=>{l.component=u}),$(()=>{})));for(let u of l.children)c.push(...a(u));return c};return Zs(a(o.targetSnapshot.root)).pipe(_r(null),Qn(1))}),hg(()=>this.afterPreactivation()),qt(()=>{let{currentSnapshot:o,targetSnapshot:a}=r,l=this.createViewTransition?.(this.environmentInjector,o.root,a.root);return l?ve(l).pipe($(()=>r)):H(r)}),$(o=>{let a=yO(t.routeReuseStrategy,o.targetSnapshot,o.currentRouterState);return this.currentTransition=r=W(_({},o),{targetRouterState:a}),this.currentNavigation.targetRouterState=a,r}),Qe(()=>{this.events.next(new jo)}),CO(this.rootContexts,t.routeReuseStrategy,o=>this.events.next(o),this.inputBindingEnabled),Qn(1),Qe({next:o=>{i=!0,this.lastSuccessfulNavigation=this.currentNavigation,this.events.next(new mn(o.id,this.urlSerializer.serialize(o.extractedUrl),this.urlSerializer.serialize(o.urlAfterRedirects))),this.titleStrategy?.updateTitle(o.targetRouterState.snapshot),o.resolve(!0)},complete:()=>{i=!0}}),Se(this.transitionAbortSubject.pipe(Qe(o=>{throw o}))),Cn(()=>{!i&&!s&&this.cancelNavigationTransition(r,"",Dt.SupersededByNewNavigation),this.currentTransition?.id===r.id&&(this.currentNavigation=null,this.currentTransition=null)}),Ot(o=>{if(this.destroyed)return r.resolve(!1),ot;if(s=!0,t_(o))this.events.next(new kn(r.id,this.urlSerializer.serialize(r.extractedUrl),o.message,o.cancellationCode)),EO(o)?this.events.next(new Ss(o.url,o.navigationBehaviorOptions)):r.resolve(!1);else{let a=new _s(r.id,this.urlSerializer.serialize(r.extractedUrl),o,r.targetSnapshot??void 0);try{let l=Kt(this.environmentInjector,()=>this.navigationErrorHandler?.(a));if(l instanceof xs){let{message:c,cancellationCode:u}=Kc(this.urlSerializer,l);this.events.next(new kn(r.id,this.urlSerializer.serialize(r.extractedUrl),c,u)),this.events.next(new Ss(l.redirectTo,l.navigationBehaviorOptions))}else throw this.events.next(a),o}catch(l){this.options.resolveNavigationPromiseOnError?r.resolve(!1):r.reject(l)}}return ot}))}))}cancelNavigationTransition(t,r,i){let s=new kn(t.id,this.urlSerializer.serialize(t.extractedUrl),r,i);this.events.next(s),t.resolve(!1)}isUpdatingInternalState(){return this.currentTransition?.extractedUrl.toString()!==this.currentTransition?.currentUrlTree.toString()}isUpdatedBrowserUrl(){let t=this.urlHandlingStrategy.extract(this.urlSerializer.parse(this.location.path(!0))),r=this.currentNavigation?.targetBrowserUrl??this.currentNavigation?.extractedUrl;return t.toString()!==r?.toString()&&!this.currentNavigation?.extras.skipLocationChange}static \u0275fac=function(r){return new(r||n)};static \u0275prov=k({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function dP(n){return n!==Pc}var d_=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275prov=k({token:n,factory:()=>R(hP),providedIn:"root"})}return n})(),Qc=class{shouldDetach(e){return!1}store(e,t){}shouldAttach(e){return!1}retrieve(e){return null}shouldReuseRoute(e,t){return e.routeConfig===t.routeConfig}},hP=(()=>{class n extends Qc{static \u0275fac=(()=>{let t;return function(i){return(t||(t=hp(n)))(i||n)}})();static \u0275prov=k({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),h_=(()=>{class n{urlSerializer=R(mi);options=R(yi,{optional:!0})||{};canceledNavigationResolution=this.options.canceledNavigationResolution||"replace";location=R(Rr);urlHandlingStrategy=R(eu);urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred";currentUrlTree=new Ln;getCurrentUrlTree(){return this.currentUrlTree}rawUrlTree=this.currentUrlTree;getRawUrlTree(){return this.rawUrlTree}createBrowserPath({finalUrl:t,initialUrl:r,targetBrowserUrl:i}){let s=t!==void 0?this.urlHandlingStrategy.merge(t,r):r,o=i??s;return o instanceof Ln?this.urlSerializer.serialize(o):o}commitTransition({targetRouterState:t,finalUrl:r,initialUrl:i}){r&&t?(this.currentUrlTree=r,this.rawUrlTree=this.urlHandlingStrategy.merge(r,i),this.routerState=t):this.rawUrlTree=i}routerState=KC(null);getRouterState(){return this.routerState}stateMemento=this.createStateMemento();updateStateMemento(){this.stateMemento=this.createStateMemento()}createStateMemento(){return{rawUrlTree:this.rawUrlTree,currentUrlTree:this.currentUrlTree,routerState:this.routerState}}resetInternalState({finalUrl:t}){this.routerState=this.stateMemento.routerState,this.currentUrlTree=this.stateMemento.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,t??this.rawUrlTree)}static \u0275fac=function(r){return new(r||n)};static \u0275prov=k({token:n,factory:()=>R(fP),providedIn:"root"})}return n})(),fP=(()=>{class n extends h_{currentPageId=0;lastSuccessfulId=-1;restoredState(){return this.location.getState()}get browserPageId(){return this.canceledNavigationResolution!=="computed"?this.currentPageId:this.restoredState()?.\u0275routerPageId??this.currentPageId}registerNonRouterCurrentEntryChangeListener(t){return this.location.subscribe(r=>{r.type==="popstate"&&setTimeout(()=>{t(r.url,r.state,"popstate")})})}handleRouterEvent(t,r){t instanceof kr?this.updateStateMemento():t instanceof Fn?this.commitTransition(r):t instanceof Fo?this.urlUpdateStrategy==="eager"&&(r.extras.skipLocationChange||this.setBrowserUrl(this.createBrowserPath(r),r)):t instanceof jo?(this.commitTransition(r),this.urlUpdateStrategy==="deferred"&&!r.extras.skipLocationChange&&this.setBrowserUrl(this.createBrowserPath(r),r)):t instanceof kn&&(t.code===Dt.GuardRejected||t.code===Dt.NoDataFromResolver)?this.restoreHistory(r):t instanceof _s?this.restoreHistory(r,!0):t instanceof mn&&(this.lastSuccessfulId=t.id,this.currentPageId=this.browserPageId)}setBrowserUrl(t,{extras:r,id:i}){let{replaceUrl:s,state:o}=r;if(this.location.isCurrentPathEqualTo(t)||s){let a=this.browserPageId,l=_(_({},o),this.generateNgRouterState(i,a));this.location.replaceState(t,"",l)}else{let a=_(_({},o),this.generateNgRouterState(i,this.browserPageId+1));this.location.go(t,"",a)}}restoreHistory(t,r=!1){if(this.canceledNavigationResolution==="computed"){let i=this.browserPageId,s=this.currentPageId-i;s!==0?this.location.historyGo(s):this.getCurrentUrlTree()===t.finalUrl&&s===0&&(this.resetInternalState(t),this.resetUrlToCurrentUrlTree())}else this.canceledNavigationResolution==="replace"&&(r&&this.resetInternalState(t),this.resetUrlToCurrentUrlTree())}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.getRawUrlTree()),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}generateNgRouterState(t,r){return this.canceledNavigationResolution==="computed"?{navigationId:t,\u0275routerPageId:r}:{navigationId:t}}static \u0275fac=(()=>{let t;return function(i){return(t||(t=hp(n)))(i||n)}})();static \u0275prov=k({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function nu(n,e){n.events.pipe(Ve(t=>t instanceof mn||t instanceof kn||t instanceof _s||t instanceof Fn),$(t=>t instanceof mn||t instanceof Fn?0:(t instanceof kn?t.code===Dt.Redirect||t.code===Dt.SupersededByNewNavigation:!1)?2:1),Ve(t=>t!==2),Qn(1)).subscribe(()=>{e()})}var pP={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},gP={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"},ar=(()=>{class n{get currentUrlTree(){return this.stateManager.getCurrentUrlTree()}get rawUrlTree(){return this.stateManager.getRawUrlTree()}disposed=!1;nonRouterCurrentEntryChangeSubscription;console=R(qE);stateManager=R(h_);options=R(yi,{optional:!0})||{};pendingTasks=R(ds);urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred";navigationTransitions=R(tu);urlSerializer=R(mi);location=R(Rr);urlHandlingStrategy=R(eu);_events=new Oe;get events(){return this._events}get routerState(){return this.stateManager.getRouterState()}navigated=!1;routeReuseStrategy=R(d_);onSameUrlNavigation=this.options.onSameUrlNavigation||"ignore";config=R(bi,{optional:!0})?.flat()??[];componentInputBindingEnabled=!!R(Go,{optional:!0});constructor(){this.resetConfig(this.config),this.navigationTransitions.setupNavigations(this).subscribe({error:t=>{this.console.warn(t)}}),this.subscribeToNavigationEvents()}eventsSubscription=new Be;subscribeToNavigationEvents(){let t=this.navigationTransitions.events.subscribe(r=>{try{let i=this.navigationTransitions.currentTransition,s=this.navigationTransitions.currentNavigation;if(i!==null&&s!==null){if(this.stateManager.handleRouterEvent(r,s),r instanceof kn&&r.code!==Dt.Redirect&&r.code!==Dt.SupersededByNewNavigation)this.navigated=!0;else if(r instanceof mn)this.navigated=!0;else if(r instanceof Ss){let o=r.navigationBehaviorOptions,a=this.urlHandlingStrategy.merge(r.url,i.currentRawUrl),l=_({browserUrl:i.extras.browserUrl,info:i.extras.info,skipLocationChange:i.extras.skipLocationChange,replaceUrl:i.extras.replaceUrl||this.urlUpdateStrategy==="eager"||dP(i.source)},o);this.scheduleNavigation(a,Pc,null,l,{resolve:i.resolve,reject:i.reject,promise:i.promise})}}vP(r)&&this._events.next(r)}catch(i){this.navigationTransitions.transitionAbortSubject.next(i)}});this.eventsSubscription.add(t)}resetRootComponentType(t){this.routerState.root.component=t,this.navigationTransitions.rootComponentType=t}initialNavigation(){this.setUpLocationChangeListener(),this.navigationTransitions.hasRequestedNavigation||this.navigateToSyncWithBrowser(this.location.path(!0),Pc,this.stateManager.restoredState())}setUpLocationChangeListener(){this.nonRouterCurrentEntryChangeSubscription??=this.stateManager.registerNonRouterCurrentEntryChangeListener((t,r,i)=>{this.navigateToSyncWithBrowser(t,i,r)})}navigateToSyncWithBrowser(t,r,i){let s={replaceUrl:!0},o=i?.navigationId?i:null;if(i){let l=_({},i);delete l.navigationId,delete l.\u0275routerPageId,Object.keys(l).length!==0&&(s.state=l)}let a=this.parseUrl(t);this.scheduleNavigation(a,r,o,s)}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.navigationTransitions.currentNavigation}get lastSuccessfulNavigation(){return this.navigationTransitions.lastSuccessfulNavigation}resetConfig(t){this.config=t.map(Rg),this.navigated=!1}ngOnDestroy(){this.dispose()}dispose(){this._events.unsubscribe(),this.navigationTransitions.complete(),this.nonRouterCurrentEntryChangeSubscription&&(this.nonRouterCurrentEntryChangeSubscription.unsubscribe(),this.nonRouterCurrentEntryChangeSubscription=void 0),this.disposed=!0,this.eventsSubscription.unsubscribe()}createUrlTree(t,r={}){let{relativeTo:i,queryParams:s,fragment:o,queryParamsHandling:a,preserveFragment:l}=r,c=l?this.currentUrlTree.fragment:o,u=null;switch(a??this.options.defaultQueryParamsHandling){case"merge":u=_(_({},this.currentUrlTree.queryParams),s);break;case"preserve":u=this.currentUrlTree.queryParams;break;default:u=s||null}u!==null&&(u=this.removeEmptyProps(u));let d;try{let h=i?i.snapshot:this.routerState.snapshot.root;d=WC(h)}catch{(typeof t[0]!="string"||t[0][0]!=="/")&&(t=[]),d=this.currentUrlTree.root}return qC(d,t,u,c??null)}navigateByUrl(t,r={skipLocationChange:!1}){let i=Es(t)?t:this.parseUrl(t),s=this.urlHandlingStrategy.merge(i,this.rawUrlTree);return this.scheduleNavigation(s,Pc,null,r)}navigate(t,r={skipLocationChange:!1}){return mP(t),this.navigateByUrl(this.createUrlTree(t,r),r)}serializeUrl(t){return this.urlSerializer.serialize(t)}parseUrl(t){try{return this.urlSerializer.parse(t)}catch{return this.urlSerializer.parse("/")}}isActive(t,r){let i;if(r===!0?i=_({},pP):r===!1?i=_({},gP):i=r,Es(t))return xC(this.currentUrlTree,t,i);let s=this.parseUrl(t);return xC(this.currentUrlTree,s,i)}removeEmptyProps(t){return Object.entries(t).reduce((r,[i,s])=>(s!=null&&(r[i]=s),r),{})}scheduleNavigation(t,r,i,s,o){if(this.disposed)return Promise.resolve(!1);let a,l,c;o?(a=o.resolve,l=o.reject,c=o.promise):c=new Promise((d,h)=>{a=d,l=h});let u=this.pendingTasks.add();return nu(this,()=>{queueMicrotask(()=>this.pendingTasks.remove(u))}),this.navigationTransitions.handleNavigationRequest({source:r,restoredState:i,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,rawUrl:t,extras:s,resolve:a,reject:l,promise:c,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),c.catch(d=>Promise.reject(d))}static \u0275fac=function(r){return new(r||n)};static \u0275prov=k({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function mP(n){for(let e=0;e<n.length;e++)if(n[e]==null)throw new j(4008,!1)}function vP(n){return!(n instanceof jo)&&!(n instanceof Ss)}var Ko=class{};var f_=(()=>{class n{router;injector;preloadingStrategy;loader;subscription;constructor(t,r,i,s,o){this.router=t,this.injector=i,this.preloadingStrategy=s,this.loader=o}setUpPreloading(){this.subscription=this.router.events.pipe(Ve(t=>t instanceof mn),Cr(()=>this.preload())).subscribe(()=>{})}preload(){return this.processRoutes(this.injector,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(t,r){let i=[];for(let s of r){s.providers&&!s._injector&&(s._injector=Co(s.providers,t,`Route: ${s.path}`));let o=s._injector??t,a=s._loadedInjector??o;(s.loadChildren&&!s._loadedRoutes&&s.canLoad===void 0||s.loadComponent&&!s._loadedComponent)&&i.push(this.preloadConfig(o,s)),(s.children||s._loadedRoutes)&&i.push(this.processRoutes(a,s.children??s._loadedRoutes))}return ve(i).pipe(Er())}preloadConfig(t,r){return this.preloadingStrategy.preload(r,()=>{let i;r.loadChildren&&r.canLoad===void 0?i=this.loader.loadChildren(t,r):i=H(null);let s=i.pipe(Ce(o=>o===null?H(void 0):(r._loadedRoutes=o.routes,r._loadedInjector=o.injector,this.processRoutes(o.injector??t,o.routes))));if(r.loadComponent&&!r._loadedComponent){let o=this.loader.loadComponent(r);return ve([s,o]).pipe(Er())}else return s})}static \u0275fac=function(r){return new(r||n)(q(ar),q(mc),q(At),q(Ko),q(Jc))};static \u0275prov=k({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),p_=new z(""),yP=(()=>{class n{urlSerializer;transitions;viewportScroller;zone;options;routerEventsSubscription;scrollEventsSubscription;lastId=0;lastSource="imperative";restoredId=0;store={};constructor(t,r,i,s,o={}){this.urlSerializer=t,this.transitions=r,this.viewportScroller=i,this.zone=s,this.options=o,o.scrollPositionRestoration||="disabled",o.anchorScrolling||="disabled"}init(){this.options.scrollPositionRestoration!=="disabled"&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.transitions.events.subscribe(t=>{t instanceof kr?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=t.navigationTrigger,this.restoredId=t.restoredState?t.restoredState.navigationId:0):t instanceof mn?(this.lastId=t.id,this.scheduleScrollEvent(t,this.urlSerializer.parse(t.urlAfterRedirects).fragment)):t instanceof Fn&&t.code===Cs.IgnoredSameUrlNavigation&&(this.lastSource=void 0,this.restoredId=0,this.scheduleScrollEvent(t,this.urlSerializer.parse(t.url).fragment))})}consumeScrollEvents(){return this.transitions.events.subscribe(t=>{t instanceof As&&(t.position?this.options.scrollPositionRestoration==="top"?this.viewportScroller.scrollToPosition([0,0]):this.options.scrollPositionRestoration==="enabled"&&this.viewportScroller.scrollToPosition(t.position):t.anchor&&this.options.anchorScrolling==="enabled"?this.viewportScroller.scrollToAnchor(t.anchor):this.options.scrollPositionRestoration!=="disabled"&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(t,r){this.zone.runOutsideAngular(()=>{setTimeout(()=>{this.zone.run(()=>{this.transitions.events.next(new As(t,this.lastSource==="popstate"?this.store[this.restoredId]:null,r))})},0)})}ngOnDestroy(){this.routerEventsSubscription?.unsubscribe(),this.scrollEventsSubscription?.unsubscribe()}static \u0275fac=function(r){PE()};static \u0275prov=k({token:n,factory:n.\u0275fac})}return n})();function Lg(n,...e){return nc([{provide:bi,multi:!0,useValue:n},[],{provide:or,useFactory:g_,deps:[ar]},{provide:pc,multi:!0,useFactory:m_},e.map(t=>t.\u0275providers)])}function g_(n){return n.routerState.root}function Xo(n,e){return{\u0275kind:n,\u0275providers:e}}function m_(){let n=R(cn);return e=>{let t=n.get(ai);if(e!==t.components[0])return;let r=n.get(ar),i=n.get(v_);n.get(Fg)===1&&r.initialNavigation(),n.get(w_,null,se.Optional)?.setUpPreloading(),n.get(p_,null,se.Optional)?.init(),r.resetRootComponentType(t.componentTypes[0]),i.closed||(i.next(),i.complete(),i.unsubscribe())}}var v_=new z("",{factory:()=>new Oe}),Fg=new z("",{providedIn:"root",factory:()=>1});function y_(){let n=[{provide:Fg,useValue:0},jp(()=>{let e=R(cn);return e.get(qp,Promise.resolve()).then(()=>new Promise(r=>{let i=e.get(ar),s=e.get(v_);nu(i,()=>{r(!0)}),e.get(tu).afterPreactivation=()=>(r(!0),s.closed?H(void 0):s),i.initialNavigation()}))})];return Xo(2,n)}function b_(){let n=[jp(()=>{R(ar).setUpLocationChangeListener()}),{provide:Fg,useValue:2}];return Xo(3,n)}var w_=new z("");function E_(n){return Xo(0,[{provide:w_,useExisting:f_},{provide:Ko,useExisting:n}])}function C_(){return Xo(8,[Dg,{provide:Go,useExisting:Dg}])}function __(n){Dr("NgRouterViewTransitions");let e=[{provide:Og,useValue:u_},{provide:Pg,useValue:_({skipNextTransition:!!n?.skipInitialTransition},n)}];return Xo(9,e)}var A_=[Rr,{provide:mi,useClass:Nr},ar,vi,{provide:or,useFactory:g_,deps:[ar]},Jc,[]],jg=(()=>{class n{constructor(){}static forRoot(t,r){return{ngModule:n,providers:[A_,[],{provide:bi,multi:!0,useValue:t},[],r?.errorHandler?{provide:Ng,useValue:r.errorHandler}:[],{provide:yi,useValue:r||{}},r?.useHash?wP():EP(),bP(),r?.preloadingStrategy?E_(r.preloadingStrategy).\u0275providers:[],r?.initialNavigation?CP(r):[],r?.bindToComponentInputs?C_().\u0275providers:[],r?.enableViewTransitions?__().\u0275providers:[],_P()]}}static forChild(t){return{ngModule:n,providers:[{provide:bi,multi:!0,useValue:t}]}}static \u0275fac=function(r){return new(r||n)};static \u0275mod=Mr({type:n});static \u0275inj=Ir({})}return n})();function bP(){return{provide:p_,useFactory:()=>{let n=R(mC),e=R(ke),t=R(yi),r=R(tu),i=R(mi);return t.scrollOffset&&n.setOffset(t.scrollOffset),new yP(i,r,n,e,t)}}}function wP(){return{provide:sr,useClass:Xp}}function EP(){return{provide:sr,useClass:bc}}function CP(n){return[n.initialNavigation==="disabled"?b_().\u0275providers:[],n.initialNavigation==="enabledBlocking"?y_().\u0275providers:[]]}var kg=new z("");function _P(){return[{provide:kg,useFactory:m_},{provide:pc,multi:!0,useExisting:kg}]}var x_=!(typeof navigator>"u")&&navigator.product==="ReactNative",I_={timeout:x_?6e4:12e4},D_=function(n){let e=_(_({},I_),typeof n=="string"?{url:n}:n);if(e.timeout=T_(e.timeout),e.query){let{url:t,searchParams:r}=function(i){let s=i.indexOf("?");if(s===-1)return{url:i,searchParams:new URLSearchParams};let o=i.slice(0,s),a=i.slice(s+1);if(!x_)return{url:o,searchParams:new URLSearchParams(a)};if(typeof decodeURIComponent!="function")throw new Error("Broken `URLSearchParams` implementation, and `decodeURIComponent` is not defined");let l=new URLSearchParams;for(let c of a.split("&")){let[u,d]=c.split("=");u&&l.append(S_(u),S_(d||""))}return{url:o,searchParams:l}}(e.url);for(let[i,s]of Object.entries(e.query)){if(s!==void 0)if(Array.isArray(s))for(let a of s)r.append(i,a);else r.append(i,s);let o=r.toString();o&&(e.url=`${t}?${o}`)}}return e.method=e.body&&!e.method?"POST":(e.method||"GET").toUpperCase(),e};function S_(n){return decodeURIComponent(n.replace(/\+/g," "))}function T_(n){if(n===!1||n===0)return!1;if(n.connect||n.socket)return n;let e=Number(n);return isNaN(e)?T_(I_.timeout):{connect:e,socket:e}}var SP=/^https?:\/\//i,M_=function(n){if(!SP.test(n.url))throw new Error(`"${n.url}" is not a valid URL`)};function ru(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}var xP=["request","response","progress","error","abort"],R_=["processOptions","validateOptions","interceptRequest","finalizeOptions","onRequest","onResponse","onError","onReturn","onHeaders"];function N_(n,e){let t=[],r=R_.reduce((s,o)=>(s[o]=s[o]||[],s),{processOptions:[D_],validateOptions:[M_]});function i(s){let o=xP.reduce((f,p)=>(f[p]=function(){let g=Object.create(null),v=0;return{publish:function(m){for(let y in g)g[y](m)},subscribe:function(m){let y=v++;return g[y]=m,function(){delete g[y]}}}}(),f),{}),a=(f=>function(p,g,...v){let m=p==="onError",y=g;for(let w=0;w<f[p].length&&(y=(0,f[p][w])(y,...v),!m||y);w++);return y})(r),l=a("processOptions",s);a("validateOptions",l);let c={options:l,channels:o,applyMiddleware:a},u,d=o.request.subscribe(f=>{u=e(f,(p,g)=>((v,m,y)=>{let w=v,b=m;if(!w)try{b=a("onResponse",m,y)}catch(C){b=null,w=C}w=w&&a("onError",w,y),w?o.error.publish(w):b&&o.response.publish(b)})(p,g,f))});o.abort.subscribe(()=>{d(),u&&u.abort()});let h=a("onReturn",o,c);return h===o&&o.request.publish(c),h}return i.use=function(s){if(!s)throw new Error("Tried to add middleware that resolved to falsey value");if(typeof s=="function")throw new Error("Tried to add middleware that was a function. It probably expects you to pass options to it.");if(s.onReturn&&r.onReturn.length>0)throw new Error("Tried to add new middleware with `onReturn` handler, but another handler has already been registered for this event");return R_.forEach(o=>{s[o]&&r[o].push(s[o])}),t.push(s),i},i.clone=()=>N_(t,e),n.forEach(i.use),i}var O_,P_,IP=ru(function(){if(P_)return O_;P_=1;var n=function(e){return e.replace(/^\s+|\s+$/g,"")};return O_=function(e){if(!e)return{};for(var t={},r=n(e).split(`
`),i=0;i<r.length;i++){var s=r[i],o=s.indexOf(":"),a=n(s.slice(0,o)).toLowerCase(),l=n(s.slice(o+1));typeof t[a]>"u"?t[a]=l:(c=t[a],Object.prototype.toString.call(c)==="[object Array]"?t[a].push(l):t[a]=[t[a],l])}var c;return t}}()),Qo=class{onabort;onerror;onreadystatechange;ontimeout;readyState=0;response;responseText="";responseType="";status;statusText;withCredentials;#e;#t;#n;#r={};#i;#s={};#l;open(e,t,r){this.#e=e,this.#t=t,this.#n="",this.readyState=1,this.onreadystatechange?.(),this.#i=void 0}abort(){this.#i&&this.#i.abort()}getAllResponseHeaders(){return this.#n}setRequestHeader(e,t){this.#r[e]=t}setInit(e,t=!0){this.#s=e,this.#l=t}send(e){let t=this.responseType!=="arraybuffer",r=W(_({},this.#s),{method:this.#e,headers:this.#r,body:e});typeof AbortController=="function"&&this.#l&&(this.#i=new AbortController,typeof EventTarget<"u"&&this.#i.signal instanceof EventTarget&&(r.signal=this.#i.signal)),typeof document<"u"&&(r.credentials=this.withCredentials?"include":"omit"),fetch(this.#t,r).then(i=>(i.headers.forEach((s,o)=>{this.#n+=`${o}: ${s}\r
`}),this.status=i.status,this.statusText=i.statusText,this.readyState=3,this.onreadystatechange?.(),t?i.text():i.arrayBuffer())).then(i=>{typeof i=="string"?this.responseText=i:this.response=i,this.readyState=4,this.onreadystatechange?.()}).catch(i=>{i.name!=="AbortError"?this.onerror?.(i):this.onabort?.()})}},Bg=typeof XMLHttpRequest=="function"?"xhr":"fetch",DP=Bg==="xhr"?XMLHttpRequest:Qo,TP=(n,e)=>{let t=n.options,r=n.applyMiddleware("finalizeOptions",t),i={},s=n.applyMiddleware("interceptRequest",void 0,{adapter:Bg,context:n});if(s){let g=setTimeout(e,0,null,s);return{abort:()=>clearTimeout(g)}}let o=new DP;o instanceof Qo&&typeof r.fetch=="object"&&o.setInit(r.fetch,r.useAbortSignal??!0);let a=r.headers,l=r.timeout,c=!1,u=!1,d=!1;if(o.onerror=g=>{p(o instanceof Qo?g instanceof Error?g:new Error(`Request error while attempting to reach is ${r.url}`,{cause:g}):new Error(`Request error while attempting to reach is ${r.url}${g.lengthComputable?`(${g.loaded} of ${g.total} bytes transferred)`:""}`))},o.ontimeout=g=>{p(new Error(`Request timeout while attempting to reach ${r.url}${g.lengthComputable?`(${g.loaded} of ${g.total} bytes transferred)`:""}`))},o.onabort=()=>{f(!0),c=!0},o.onreadystatechange=function(){l&&(f(),i.socket=setTimeout(()=>h("ESOCKETTIMEDOUT"),l.socket)),!c&&o&&o.readyState===4&&o.status!==0&&function(){if(!(c||u||d)){if(o.status===0)return void p(new Error("Unknown XHR error"));f(),u=!0,e(null,{body:o.response||(o.responseType===""||o.responseType==="text"?o.responseText:""),url:r.url,method:r.method,headers:IP(o.getAllResponseHeaders()),statusCode:o.status,statusMessage:o.statusText})}}()},o.open(r.method,r.url,!0),o.withCredentials=!!r.withCredentials,a&&o.setRequestHeader)for(let g in a)a.hasOwnProperty(g)&&o.setRequestHeader(g,a[g]);return r.rawBody&&(o.responseType="arraybuffer"),n.applyMiddleware("onRequest",{options:r,adapter:Bg,request:o,context:n}),o.send(r.body||null),l&&(i.connect=setTimeout(()=>h("ETIMEDOUT"),l.connect)),{abort:function(){c=!0,o&&o.abort()}};function h(g){d=!0,o.abort();let v=new Error(g==="ESOCKETTIMEDOUT"?`Socket timed out on request to ${r.url}`:`Connection timed out on request to ${r.url}`);v.code=g,n.channels.error.publish(v)}function f(g){(g||c||o&&o.readyState>=2&&i.connect)&&clearTimeout(i.connect),i.socket&&clearTimeout(i.socket)}function p(g){if(u)return;f(!0),u=!0,o=null;let v=g||new Error(`Network error while attempting to reach ${r.url}`);v.isNetworkError=!0,v.request=r,e(v)}},k_=(n=[],e=TP)=>N_(n,e);function MP(n){return{}}var L_,F_,j_,B_,V_,Vg={exports:{}},v5=ru((V_||(V_=1,function(n,e){e.formatArgs=function(r){if(r[0]=(this.useColors?"%c":"")+this.namespace+(this.useColors?" %c":" ")+r[0]+(this.useColors?"%c ":" ")+"+"+n.exports.humanize(this.diff),!this.useColors)return;let i="color: "+this.color;r.splice(1,0,i,"color: inherit");let s=0,o=0;r[0].replace(/%[a-zA-Z%]/g,a=>{a!=="%%"&&(s++,a==="%c"&&(o=s))}),r.splice(o,0,i)},e.save=function(r){try{r?e.storage.setItem("debug",r):e.storage.removeItem("debug")}catch{}},e.load=function(){let r;try{r=e.storage.getItem("debug")}catch{}return!r&&typeof process<"u"&&"env"in process&&(r=process.env.DEBUG),r},e.useColors=function(){if(typeof window<"u"&&window.process&&(window.process.type==="renderer"||window.process.__nwjs))return!0;if(typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/))return!1;let r;return typeof document<"u"&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||typeof window<"u"&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||typeof navigator<"u"&&navigator.userAgent&&(r=navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/))&&parseInt(r[1],10)>=31||typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/)},e.storage=function(){try{return localStorage}catch{}}(),e.destroy=(()=>{let r=!1;return()=>{r||(r=!0,console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`."))}})(),e.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"],e.log=console.debug||console.log||(()=>{}),n.exports=(B_?j_:(B_=1,j_=function(r){function i(a){let l,c,u,d=null;function h(...f){if(!h.enabled)return;let p=h,g=Number(new Date),v=g-(l||g);p.diff=v,p.prev=l,p.curr=g,l=g,f[0]=i.coerce(f[0]),typeof f[0]!="string"&&f.unshift("%O");let m=0;f[0]=f[0].replace(/%([a-zA-Z%])/g,(y,w)=>{if(y==="%%")return"%";m++;let b=i.formatters[w];if(typeof b=="function"){let C=f[m];y=b.call(p,C),f.splice(m,1),m--}return y}),i.formatArgs.call(p,f),(p.log||i.log).apply(p,f)}return h.namespace=a,h.useColors=i.useColors(),h.color=i.selectColor(a),h.extend=s,h.destroy=i.destroy,Object.defineProperty(h,"enabled",{enumerable:!0,configurable:!1,get:()=>d!==null?d:(c!==i.namespaces&&(c=i.namespaces,u=i.enabled(a)),u),set:f=>{d=f}}),typeof i.init=="function"&&i.init(h),h}function s(a,l){let c=i(this.namespace+(typeof l>"u"?":":l)+a);return c.log=this.log,c}function o(a,l){let c=0,u=0,d=-1,h=0;for(;c<a.length;)if(u<l.length&&(l[u]===a[c]||l[u]==="*"))l[u]==="*"?(d=u,h=c,u++):(c++,u++);else{if(d===-1)return!1;u=d+1,h++,c=h}for(;u<l.length&&l[u]==="*";)u++;return u===l.length}return i.debug=i,i.default=i,i.coerce=function(a){return a instanceof Error?a.stack||a.message:a},i.disable=function(){let a=[...i.names,...i.skips.map(l=>"-"+l)].join(",");return i.enable(""),a},i.enable=function(a){i.save(a),i.namespaces=a,i.names=[],i.skips=[];let l=(typeof a=="string"?a:"").trim().replace(" ",",").split(",").filter(Boolean);for(let c of l)c[0]==="-"?i.skips.push(c.slice(1)):i.names.push(c)},i.enabled=function(a){for(let l of i.skips)if(o(a,l))return!1;for(let l of i.names)if(o(a,l))return!0;return!1},i.humanize=function(){if(F_)return L_;F_=1;var a=1e3,l=60*a,c=60*l,u=24*c,d=7*u;function h(f,p,g,v){var m=p>=1.5*g;return Math.round(f/g)+" "+v+(m?"s":"")}return L_=function(f,p){p=p||{};var g,v,m=typeof f;if(m==="string"&&f.length>0)return function(y){if(!((y=String(y)).length>100)){var w=/^(-?(?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(y);if(w){var b=parseFloat(w[1]);switch((w[2]||"ms").toLowerCase()){case"years":case"year":case"yrs":case"yr":case"y":return 315576e5*b;case"weeks":case"week":case"w":return b*d;case"days":case"day":case"d":return b*u;case"hours":case"hour":case"hrs":case"hr":case"h":return b*c;case"minutes":case"minute":case"mins":case"min":case"m":return b*l;case"seconds":case"second":case"secs":case"sec":case"s":return b*a;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return b;default:return}}}}(f);if(m==="number"&&isFinite(f))return p.long?(g=f,(v=Math.abs(g))>=u?h(g,v,u,"day"):v>=c?h(g,v,c,"hour"):v>=l?h(g,v,l,"minute"):v>=a?h(g,v,a,"second"):g+" ms"):function(y){var w=Math.abs(y);return w>=u?Math.round(y/u)+"d":w>=c?Math.round(y/c)+"h":w>=l?Math.round(y/l)+"m":w>=a?Math.round(y/a)+"s":y+"ms"}(f);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(f))}}(),i.destroy=function(){console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.")},Object.keys(r).forEach(a=>{i[a]=r[a]}),i.names=[],i.skips=[],i.formatters={},i.selectColor=function(a){let l=0;for(let c=0;c<a.length;c++)l=(l<<5)-l+a.charCodeAt(c),l|=0;return i.colors[Math.abs(l)%i.colors.length]},i.enable(i.load()),i}))(e);let{formatters:t}=n.exports;t.j=function(r){try{return JSON.stringify(r)}catch(i){return"[UnexpectedJSONParseError]: "+i.message}}}(Vg,Vg.exports)),Vg.exports));var RP=typeof Buffer>"u"?()=>!1:n=>Buffer.isBuffer(n);function H_(n){return Object.prototype.toString.call(n)==="[object Object]"}function OP(n){if(H_(n)===!1)return!1;let e=n.constructor;if(e===void 0)return!0;let t=e.prototype;return!(H_(t)===!1||t.hasOwnProperty("isPrototypeOf")===!1)}var PP=["boolean","string","number"];function $_(){return{processOptions:n=>{let e=n.body;return!e||typeof e.pipe=="function"||RP(e)||PP.indexOf(typeof e)===-1&&!Array.isArray(e)&&!OP(e)?n:Object.assign({},n,{body:JSON.stringify(n.body),headers:Object.assign({},n.headers,{"Content-Type":"application/json"})})}}}function z_(n){return{onResponse:t=>{let r=t.headers["content-type"]||"",i=n&&n.force||r.indexOf("application/json")!==-1;return t.body&&r&&i?Object.assign({},t,{body:e(t.body)}):t},processOptions:t=>Object.assign({},t,{headers:Object.assign({Accept:"application/json"},t.headers)})};function e(t){try{return JSON.parse(t)}catch(r){throw r.message=`Failed to parsed response body as JSON: ${r.message}`,r}}}var Zo={};typeof globalThis<"u"?Zo=globalThis:typeof window<"u"?Zo=window:typeof global<"u"?Zo=global:typeof self<"u"&&(Zo=self);var NP=Zo;function W_(n={}){let e=n.implementation||NP.Observable;if(!e)throw new Error("`Observable` is not available in global scope, and no implementation was passed");return{onReturn:(t,r)=>new e(i=>(t.error.subscribe(s=>i.error(s)),t.progress.subscribe(s=>i.next(Object.assign({type:"progress"},s))),t.response.subscribe(s=>{i.next(Object.assign({type:"response"},s)),i.complete()}),t.request.publish(r),()=>t.abort.publish()))}}function q_(){return{onRequest:n=>{if(n.adapter!=="xhr")return;let e=n.request,t=n.context;function r(i){return s=>{let o=s.lengthComputable?s.loaded/s.total*100:-1;t.channels.progress.publish({stage:i,percent:o,total:s.total,loaded:s.loaded,lengthComputable:s.lengthComputable})}}"upload"in e&&"onprogress"in e.upload&&(e.upload.onprogress=r("upload")),"onprogress"in e&&(e.onprogress=r("download"))}}}var Hg=(n={})=>{let e=n.implementation||Promise;if(!e)throw new Error("`Promise` is not available in global scope, and no implementation was passed");return{onReturn:(t,r)=>new e((i,s)=>{let o=r.options.cancelToken;o&&o.promise.then(a=>{t.abort.publish(a),s(a)}),t.error.subscribe(s),t.response.subscribe(a=>{i(n.onlyBody?a.body:a)}),setTimeout(()=>{try{t.request.publish(r)}catch(a){s(a)}},0)})}},iu=class{__CANCEL__=!0;message;constructor(e){this.message=e}toString(){return"Cancel"+(this.message?`: ${this.message}`:"")}},kP=(()=>{class n{promise;reason;constructor(t){if(typeof t!="function")throw new TypeError("executor must be a function.");let r=null;this.promise=new Promise(i=>{r=i}),t(i=>{this.reason||(this.reason=new iu(i),r(this.reason))})}static source=()=>{let t;return{token:new n(r=>{t=r}),cancel:t}}}return n})();Hg.Cancel=iu,Hg.CancelToken=kP,Hg.isCancel=n=>!(!n||!n?.__CANCEL__);var G_=(n,e,t)=>(t.method==="GET"||t.method==="HEAD")&&(n.isNetworkError||!1);function LP(n){return 100*Math.pow(2,n)+100*Math.random()}var su=(n={})=>(e=>{let t=e.maxRetries||5,r=e.retryDelay||LP,i=e.shouldRetry;return{onError:(s,o)=>{let a=o.options,l=a.maxRetries||t,c=a.retryDelay||r,u=a.shouldRetry||i,d=a.attemptNumber||0;if((h=a.body)!==null&&typeof h=="object"&&typeof h.pipe=="function"||!u(s,d,a)||d>=l)return s;var h;let f=Object.assign({},o,{options:Object.assign({},a,{attemptNumber:d+1})});return setTimeout(()=>o.channels.request.publish(f),c(d)),null}}})(_({shouldRetry:G_},n));su.shouldRetry=G_;var Ug=class extends Error{request;code;constructor(e,t){super(e.message),this.request=t,this.code=e.code}},y5=(U_=MP,function(n={}){let{maxRetries:e=3,ms:t=1e3,maxFree:r=256}=n,{finalizeOptions:i}=U_({keepAlive:!0,keepAliveMsecs:t,maxFreeSockets:r});return{finalizeOptions:i,onError:(s,o)=>{if((o.options.method==="GET"||o.options.method==="POST")&&s instanceof Ug&&s.code==="ECONNRESET"&&s.request.reusedSocket){let a=o.options.attemptNumber||0;if(a<e){let l=Object.assign({},o,{options:Object.assign({},o.options,{attemptNumber:a+1})});return setImmediate(()=>o.channels.request.publish(l)),null}}return s}}}),U_;var zg=class extends Error{response;statusCode=400;responseBody;details;constructor(e){let t=J_(e);super(t.message),Object.assign(this,t)}},Wg=class extends Error{response;statusCode=500;responseBody;details;constructor(e){let t=J_(e);super(t.message),Object.assign(this,t)}};function J_(n){let e=n.body,t={response:n,statusCode:n.statusCode,responseBody:VP(e,n),message:"",details:void 0};if(e.error&&e.message)return t.message=`${e.error} - ${e.message}`,t;if(FP(e)||jP(e)){let r=e.error.items||[],i=r.slice(0,5).map(o=>o.error?.description).filter(Boolean),s=i.length?`:
- ${i.join(`
- `)}`:"";return r.length>5&&(s+=`
...and ${r.length-5} more`),t.message=`${e.error.description}${s}`,t.details=e.error,t}return e.error&&e.error.description?(t.message=e.error.description,t.details=e.error,t):(t.message=e.error||e.message||BP(n),t)}function FP(n){return ou(n)&&ou(n.error)&&n.error.type==="mutationError"&&typeof n.error.description=="string"}function jP(n){return ou(n)&&ou(n.error)&&n.error.type==="actionError"&&typeof n.error.description=="string"}function ou(n){return typeof n=="object"&&n!==null&&!Array.isArray(n)}function BP(n){let e=n.statusMessage?` ${n.statusMessage}`:"";return`${n.method}-request to ${n.url} resulted in HTTP ${n.statusCode}${e}`}function VP(n,e){return(e.headers["content-type"]||"").toLowerCase().indexOf("application/json")!==-1?JSON.stringify(n,null,2):n}var qg=class extends Error{projectId;addOriginUrl;constructor({projectId:e}){super("CorsOriginError"),this.name="CorsOriginError",this.projectId=e;let t=new URL(`https://sanity.io/manage/project/${e}/api`);if(typeof location<"u"){let{origin:r}=location;t.searchParams.set("cors","add"),t.searchParams.set("origin",r),this.addOriginUrl=t,this.message=`The current origin is not allowed to connect to the Live Content API. Add it here: ${t}`}else this.message=`The current origin is not allowed to connect to the Live Content API. Change your configuration here: ${t}`}},HP={onResponse:n=>{if(n.statusCode>=500)throw new Wg(n);if(n.statusCode>=400)throw new zg(n);return n}};function UP(){let n={};return{onResponse:e=>{let t=e.headers["x-sanity-warning"],r=Array.isArray(t)?t:[t];for(let i of r)!i||n[i]||(n[i]=!0,console.warn(i));return e}}}function Y_(n){return k_([su({shouldRetry:$P}),...n,UP(),$_(),z_(),q_(),HP,W_({implementation:ne})])}function $P(n,e,t){if(t.maxRetries===0)return!1;let r=t.method==="GET"||t.method==="HEAD",i=(t.uri||t.url).startsWith("/data/query"),s=n.response&&(n.response.statusCode===429||n.response.statusCode===502||n.response.statusCode===503);return(r||i)&&s?!0:su.shouldRetry(n,e,t)}var zP="https://www.sanity.io/help/";function lm(n){return zP+n}var K_=["image","file"],X_=["before","after","replace"],eA=n=>{if(!/^(~[a-z0-9]{1}[-\w]{0,63}|[a-z0-9]{1}[-\w]{0,63})$/.test(n))throw new Error("Datasets can only contain lowercase characters, numbers, underscores and dashes, and start with tilde, and be maximum 64 characters")},WP=n=>{if(!/^[-a-z0-9]+$/i.test(n))throw new Error("`projectId` can only contain only a-z, 0-9 and dashes")},qP=n=>{if(K_.indexOf(n)===-1)throw new Error(`Invalid asset type: ${n}. Must be one of ${K_.join(", ")}`)},Jo=(n,e)=>{if(e===null||typeof e!="object"||Array.isArray(e))throw new Error(`${n}() takes an object of properties`)},tA=(n,e)=>{if(typeof e!="string"||!/^[a-z0-9_][a-z0-9_.-]{0,127}$/i.test(e)||e.includes(".."))throw new Error(`${n}(): "${e}" is not a valid document ID`)},au=(n,e)=>{if(!e._id)throw new Error(`${n}() requires that the document contains an ID ("_id" property)`);tA(n,e._id)},GP=(n,e,t)=>{let r="insert(at, selector, items)";if(X_.indexOf(n)===-1){let i=X_.map(s=>`"${s}"`).join(", ");throw new Error(`${r} takes an "at"-argument which is one of: ${i}`)}if(typeof e!="string")throw new Error(`${r} takes a "selector"-argument which must be a string`);if(!Array.isArray(t))throw new Error(`${r} takes an "items"-argument which must be an array`)},ta=n=>{if(!n.dataset)throw new Error("`dataset` must be provided to perform queries");return n.dataset||""},nA=n=>{if(typeof n!="string"||!/^[a-z0-9._-]{1,75}$/i.test(n))throw new Error("Tag can only contain alphanumeric characters, underscores, dashes and dots, and be between one and 75 characters long.");return n},rA=n=>{if(!n["~experimental_resource"])throw new Error("`resource` must be provided to perform resource queries");let{type:e,id:t}=n["~experimental_resource"];switch(e){case"dataset":{if(t.split(".").length!==2)throw new Error('Dataset resource ID must be in the format "project.dataset"');return}case"dashboard":case"media-library":case"canvas":return;default:throw new Error(`Unsupported resource type: ${e.toString()}`)}},jn=(n,e)=>{if(e["~experimental_resource"])throw new Error(`\`${n}\` does not support resource-based operations`)};function YP(n){let e=!1,t;return(...r)=>(e||(t=n(...r),e=!0),t)}var jr=n=>YP((...e)=>console.warn(n.join(" "),...e)),KP=jr(["Because you set `withCredentials` to true, we will override your `useCdn`","setting to be false since (cookie-based) credentials are never set on the CDN"]),XP=jr(["Since you haven't set a value for `useCdn`, we will deliver content using our","global, edge-cached API-CDN. If you wish to have content delivered faster, set","`useCdn: false` to use the Live API. Note: You may incur higher costs using the live API."]),QP=jr(["The Sanity client is configured with the `perspective` set to `drafts` or `previewDrafts`, which doesn't support the API-CDN.","The Live API will be used instead. Set `useCdn: false` in your configuration to hide this warning."]),ZP=jr(["The `previewDrafts` perspective has been renamed to  `drafts` and will be removed in a future API version"]),JP=jr(["You have configured Sanity client to use a token in the browser. This may cause unintentional security issues.",`See ${lm("js-client-browser-token")} for more information and how to hide this warning.`]),eN=jr(["You have configured Sanity client to use a token, but also provided `withCredentials: true`.","This is no longer supported - only token will be used - remove `withCredentials: true`."]),tN=jr(["Using the Sanity client without specifying an API version is deprecated.",`See ${lm("js-client-api-version")}`]),nN=jr(["The default export of @sanity/client has been deprecated. Use the named export `createClient` instead."]),rN="apicdn.sanity.io",ea={apiHost:"https://api.sanity.io",apiVersion:"1",useProjectHostname:!0,stega:{enabled:!1}},iN=["localhost","127.0.0.1","0.0.0.0"],sN=n=>iN.indexOf(n)!==-1;function oN(n){if(n==="1"||n==="X")return;let e=new Date(n);if(!(/^\d{4}-\d{2}-\d{2}$/.test(n)&&e instanceof Date&&e.getTime()>0))throw new Error("Invalid API version string, expected `1` or date in format `YYYY-MM-DD`")}function iA(n){if(Array.isArray(n)&&n.length>1&&n.includes("raw"))throw new TypeError('Invalid API perspective value: "raw". The raw-perspective can not be combined with other perspectives')}var sA=(n,e)=>{let t=W(_(_({},e),n),{stega:_(_({},typeof e.stega=="boolean"?{enabled:e.stega}:e.stega||ea.stega),typeof n.stega=="boolean"?{enabled:n.stega}:n.stega||{})});t.apiVersion||tN();let r=_(_({},ea),t),i=r.useProjectHostname&&!r["~experimental_resource"];if(typeof Promise>"u"){let h=lm("js-client-promise-polyfill");throw new Error(`No native Promise-implementation found, polyfill needed - see ${h}`)}if(i&&!r.projectId)throw new Error("Configuration must contain `projectId`");if(r["~experimental_resource"]&&rA(r),typeof r.perspective<"u"&&iA(r.perspective),"encodeSourceMap"in r)throw new Error("It looks like you're using options meant for '@sanity/preview-kit/client'. 'encodeSourceMap' is not supported in '@sanity/client'. Did you mean 'stega.enabled'?");if("encodeSourceMapAtPath"in r)throw new Error("It looks like you're using options meant for '@sanity/preview-kit/client'. 'encodeSourceMapAtPath' is not supported in '@sanity/client'. Did you mean 'stega.filter'?");if(typeof r.stega.enabled!="boolean")throw new Error(`stega.enabled must be a boolean, received ${r.stega.enabled}`);if(r.stega.enabled&&r.stega.studioUrl===void 0)throw new Error("stega.studioUrl must be defined when stega.enabled is true");if(r.stega.enabled&&typeof r.stega.studioUrl!="string"&&typeof r.stega.studioUrl!="function")throw new Error(`stega.studioUrl must be a string or a function, received ${r.stega.studioUrl}`);let s=typeof window<"u"&&window.location&&window.location.hostname,o=s&&sN(window.location.hostname),a=!!r.token;r.withCredentials&&a&&(eN(),r.withCredentials=!1),s&&o&&a&&r.ignoreBrowserTokenWarning!==!0?JP():typeof r.useCdn>"u"&&XP(),i&&WP(r.projectId),r.dataset&&eA(r.dataset),"requestTagPrefix"in r&&(r.requestTagPrefix=r.requestTagPrefix?nA(r.requestTagPrefix).replace(/\.+$/,""):void 0),r.apiVersion=`${r.apiVersion}`.replace(/^v/,""),r.isDefaultApi=r.apiHost===ea.apiHost,r.useCdn===!0&&r.withCredentials&&KP(),r.useCdn=r.useCdn!==!1&&!r.withCredentials,oN(r.apiVersion);let l=r.apiHost.split("://",2),c=l[0],u=l[1],d=r.isDefaultApi?rN:u;return i?(r.url=`${c}://${r.projectId}.${u}/v${r.apiVersion}`,r.cdnUrl=`${c}://${r.projectId}.${d}/v${r.apiVersion}`):(r.url=`${r.apiHost}/v${r.apiVersion}`,r.cdnUrl=r.url),r},lu=class extends Error{name="ConnectionFailedError"},Gg=class extends Error{name="DisconnectError";reason;constructor(e,t,r={}){super(e,r),this.reason=t}},Yg=class extends Error{name="ChannelError";data;constructor(e,t){super(e),this.data=t}},Kg=class extends Error{name="MessageError";data;constructor(e,t,r={}){super(e,r),this.data=t}},cu=class extends Error{name="MessageParseError"},aN=["channelError","disconnect"];function oA(n,e){return Qr(()=>{let t=n();return Qs(t)?t:H(t)}).pipe(Ce(t=>lN(t,e)))}function lN(n,e){return new ne(t=>{let r=e.includes("open"),i=e.includes("reconnect");function s(c){if("data"in c){let[u,d]=Q_(c);t.error(u?new cu("Unable to parse EventSource error message",{cause:d}):new Kg((d?.data).message,d));return}n.readyState===n.CLOSED?t.error(new lu("EventSource connection failed")):i&&t.next({type:"reconnect"})}function o(){t.next({type:"open"})}function a(c){let[u,d]=Q_(c);if(u){t.error(new cu("Unable to parse EventSource message",{cause:u}));return}if(c.type==="channelError"){t.error(new Yg(cN(d?.data),d.data));return}if(c.type==="disconnect"){t.error(new Gg(`Server disconnected client: ${d.data?.reason||"unknown error"}`));return}t.next(_({type:c.type,id:c.lastEventId},d.data?{data:d.data}:{}))}n.addEventListener("error",s),r&&n.addEventListener("open",o);let l=[...new Set([...aN,...e])].filter(c=>c!=="error"&&c!=="open"&&c!=="reconnect");return l.forEach(c=>n.addEventListener(c,a)),()=>{n.removeEventListener("error",s),r&&n.removeEventListener("open",o),l.forEach(c=>n.removeEventListener(c,a)),n.close()}})}function Q_(n){try{let e=typeof n.data=="string"&&JSON.parse(n.data);return[null,_({type:n.type,id:n.lastEventId},uN(e)?{}:{data:e})]}catch(e){return[e,null]}}function cN(n){return n.error?n.error.description?n.error.description:typeof n.error=="string"?n.error:JSON.stringify(n.error,null,2):n.message||"Unknown listener error"}function uN(n){for(let e in n)return!1;return!0}function aA(n){if(typeof n=="string")return{id:n};if(Array.isArray(n))return{query:"*[_id in $ids]",params:{ids:n}};if(typeof n=="object"&&n!==null&&"query"in n&&typeof n.query=="string")return"params"in n&&typeof n.params=="object"&&n.params!==null?{query:n.query,params:n.params}:{query:n.query};let e=["* Document ID (<docId>)","* Array of document IDs","* Object containing `query`"].join(`
`);throw new Error(`Unknown selection - must be one of:

${e}`)}var uu=class{selection;operations;constructor(e,t={}){this.selection=e,this.operations=t}set(e){return this._assign("set",e)}setIfMissing(e){return this._assign("setIfMissing",e)}diffMatchPatch(e){return Jo("diffMatchPatch",e),this._assign("diffMatchPatch",e)}unset(e){if(!Array.isArray(e))throw new Error("unset(attrs) takes an array of attributes to unset, non-array given");return this.operations=Object.assign({},this.operations,{unset:e}),this}inc(e){return this._assign("inc",e)}dec(e){return this._assign("dec",e)}insert(e,t,r){return GP(e,t,r),this._assign("insert",{[e]:t,items:r})}append(e,t){return this.insert("after",`${e}[-1]`,t)}prepend(e,t){return this.insert("before",`${e}[0]`,t)}splice(e,t,r,i){let s=typeof r>"u"||r===-1,o=t<0?t-1:t,a=s?-1:Math.max(0,t+r),l=o<0&&a>=0?"":a,c=`${e}[${o}:${l}]`;return this.insert("replace",c,i||[])}ifRevisionId(e){return this.operations.ifRevisionID=e,this}serialize(){return _(_({},aA(this.selection)),this.operations)}toJSON(){return this.serialize()}reset(){return this.operations={},this}_assign(e,t,r=!0){return Jo(e,t),this.operations=Object.assign({},this.operations,{[e]:Object.assign({},r&&this.operations[e]||{},t)}),this}_set(e,t){return this._assign(e,t,!1)}},wi=class n extends uu{#e;constructor(e,t,r){super(e,t),this.#e=r}clone(){return new n(this.selection,_({},this.operations),this.#e)}commit(e){if(!this.#e)throw new Error("No `client` passed to patch, either provide one or pass the patch to a clients `mutate()` method");let t=typeof this.selection=="string",r=Object.assign({returnFirst:t,returnDocuments:!0},e);return this.#e.mutate({patch:this.serialize()},r)}},Fr=class n extends uu{#e;constructor(e,t,r){super(e,t),this.#e=r}clone(){return new n(this.selection,_({},this.operations),this.#e)}commit(e){if(!this.#e)throw new Error("No `client` passed to patch, either provide one or pass the patch to a clients `mutate()` method");let t=typeof this.selection=="string",r=Object.assign({returnFirst:t,returnDocuments:!0},e);return this.#e.mutate({patch:this.serialize()},r)}},lA={returnDocuments:!1},du=class{operations;trxId;constructor(e=[],t){this.operations=e,this.trxId=t}create(e){return Jo("create",e),this._add({create:e})}createIfNotExists(e){let t="createIfNotExists";return Jo(t,e),au(t,e),this._add({[t]:e})}createOrReplace(e){let t="createOrReplace";return Jo(t,e),au(t,e),this._add({[t]:e})}delete(e){return tA("delete",e),this._add({delete:{id:e}})}transactionId(e){return e?(this.trxId=e,this):this.trxId}serialize(){return[...this.operations]}toJSON(){return this.serialize()}reset(){return this.operations=[],this}_add(e){return this.operations.push(e),this}},hu=class n extends du{#e;constructor(e,t,r){super(e,r),this.#e=t}clone(){return new n([...this.operations],this.#e,this.trxId)}commit(e){if(!this.#e)throw new Error("No `client` passed to transaction, either provide one or pass the transaction to a clients `mutate()` method");return this.#e.mutate(this.serialize(),Object.assign({transactionId:this.trxId},lA,e||{}))}patch(e,t){let r=typeof t=="function",i=typeof e!="string"&&e instanceof Fr,s=typeof e=="object"&&("query"in e||"id"in e);if(i)return this._add({patch:e.serialize()});if(r){let o=t(new Fr(e,{},this.#e));if(!(o instanceof Fr))throw new Error("function passed to `patch()` must return the patch");return this._add({patch:o.serialize()})}if(s){let o=new Fr(e,t||{},this.#e);return this._add({patch:o.serialize()})}return this._add({patch:_({id:e},t)})}},fu=class n extends du{#e;constructor(e,t,r){super(e,r),this.#e=t}clone(){return new n([...this.operations],this.#e,this.trxId)}commit(e){if(!this.#e)throw new Error("No `client` passed to transaction, either provide one or pass the transaction to a clients `mutate()` method");return this.#e.mutate(this.serialize(),Object.assign({transactionId:this.trxId},lA,e||{}))}patch(e,t){let r=typeof t=="function";if(typeof e!="string"&&e instanceof wi)return this._add({patch:e.serialize()});if(r){let i=t(new wi(e,{},this.#e));if(!(i instanceof wi))throw new Error("function passed to `patch()` must return the patch");return this._add({patch:i.serialize()})}return this._add({patch:_({id:e},t)})}},dN="X-Sanity-Project-ID";function hN(n,e={}){let t={},r=e.token||n.token;r&&(t.Authorization=`Bearer ${r}`),!e.useGlobalApi&&!n.useProjectHostname&&n.projectId&&(t[dN]=n.projectId);let i=!!(typeof e.withCredentials>"u"?n.withCredentials:e.withCredentials),s=typeof e.timeout>"u"?n.timeout:e.timeout;return Object.assign({},e,{headers:Object.assign({},t,e.headers||{}),timeout:typeof s>"u"?5*60*1e3:s,proxy:e.proxy||n.proxy,json:!0,withCredentials:i,fetch:typeof e.fetch=="object"&&typeof n.fetch=="object"?_(_({},n.fetch),e.fetch):e.fetch||n.fetch})}var cA=({query:n,params:e={},options:t={}})=>{let r=new URLSearchParams,l=t,{tag:i,includeMutations:s,returnQuery:o}=l,a=zs(l,["tag","includeMutations","returnQuery"]);i&&r.append("tag",i),r.append("query",n);for(let[c,u]of Object.entries(e))r.append(`$${c}`,JSON.stringify(u));for(let[c,u]of Object.entries(a))u&&r.append(c,`${u}`);return o===!1&&r.append("returnQuery","false"),s===!1&&r.append("includeMutations","false"),`?${r}`},fN=(n,e)=>n===!1?void 0:typeof n>"u"?e:n,pN=(n={})=>({dryRun:n.dryRun,returnIds:!0,returnDocuments:fN(n.returnDocuments,!0),visibility:n.visibility||"sync",autoGenerateArrayKeys:n.autoGenerateArrayKeys,skipCrossDatasetReferenceValidation:n.skipCrossDatasetReferenceValidation}),cm=n=>n.type==="response",gN=n=>n.body,mN=(n,e)=>n.reduce((t,r)=>(t[e(r)]=r,t),Object.create(null)),vN=11264;function uA(n,e,t,r,i={},s={}){let o="stega"in s?_(_({},t||{}),typeof s.stega=="boolean"?{enabled:s.stega}:s.stega||{}):t,a=o.enabled?cb(i):i,l=s.filterResponse===!1?g=>g:g=>g.result,p=W(_({useAbortSignal:typeof s.signal<"u",resultSourceMap:o.enabled?"withKeyArraySelector":s.resultSourceMap},s),{returnQuery:s.filterResponse===!1&&s.returnQuery!==!1}),{cache:c,next:u}=p,d=zs(p,["cache","next"]),h=typeof c<"u"||typeof u<"u"?W(_({},d),{fetch:{cache:c,next:u}}):d,f=Ms(n,e,"query",{query:r,params:a},h);return o.enabled?f.pipe(Lh(ve(import("./chunk-TQOMJDDK.js").then(function(g){return g.stegaEncodeSourceMap$1}).then(({stegaEncodeSourceMap:g})=>g))),$(([g,v])=>{let m=v(g.result,g.resultSourceMap,o);return l(W(_({},g),{result:m}))})):f.pipe($(l))}function dA(n,e,t,r={}){let i={uri:Qt(n,"doc",t),json:!0,tag:r.tag,signal:r.signal};return ra(n,e,i).pipe(Ve(cm),$(s=>s.body.documents&&s.body.documents[0]))}function hA(n,e,t,r={}){let i={uri:Qt(n,"doc",t.join(",")),json:!0,tag:r.tag,signal:r.signal};return ra(n,e,i).pipe(Ve(cm),$(s=>{let o=mN(s.body.documents||[],a=>a._id);return t.map(a=>o[a]||null)}))}function fA(n,e,t,r){return au("createIfNotExists",t),gu(n,e,t,"createIfNotExists",r)}function pA(n,e,t,r){return au("createOrReplace",t),gu(n,e,t,"createOrReplace",r)}function gA(n,e,t,r){return Ms(n,e,"mutate",{mutations:[{delete:aA(t)}]},r)}function mA(n,e,t,r){let i;t instanceof Fr||t instanceof wi?i={patch:t.serialize()}:t instanceof hu||t instanceof fu?i=t.serialize():i=t;let s=Array.isArray(i)?i:[i],o=r&&r.transactionId||void 0;return Ms(n,e,"mutate",{mutations:s,transactionId:o},r)}function vA(n,e,t,r){let i=Array.isArray(t)?t:[t],s=r&&r.transactionId||void 0,o=r&&r.skipCrossDatasetReferenceValidation||void 0,a=r&&r.dryRun||void 0;return Ms(n,e,"actions",{actions:i,transactionId:s,skipCrossDatasetReferenceValidation:o,dryRun:a},r)}function Ms(n,e,t,r,i={}){let s=t==="mutate",o=t==="actions",a=t==="query",l=s||o?"":cA(r),c=!s&&!o&&l.length<vN,u=c?l:"",d=i.returnFirst,{timeout:h,token:f,tag:p,headers:g,returnQuery:v,lastLiveEventId:m,cacheMode:y}=i,w=Qt(n,t,u),b={method:c?"GET":"POST",uri:w,json:!0,body:c?void 0:r,query:s&&pN(i),timeout:h,headers:g,token:f,tag:p,returnQuery:v,perspective:i.perspective,resultSourceMap:i.resultSourceMap,lastLiveEventId:Array.isArray(m)?m[0]:m,cacheMode:y,canUseCdn:a,signal:i.signal,fetch:i.fetch,useAbortSignal:i.useAbortSignal,useCdn:i.useCdn};return ra(n,e,b).pipe(Ve(cm),$(gN),$(C=>{if(!s)return C;let S=C.results||[];if(i.returnDocuments)return d?S[0]&&S[0].document:S.map(E=>E.document);let T=d?"documentId":"documentIds",M=d?S[0]&&S[0].id:S.map(E=>E.id);return{transactionId:C.transactionId,results:S,[T]:M}}))}function gu(n,e,t,r,i={}){let s={[r]:t},o=Object.assign({returnFirst:!0,returnDocuments:!0},i);return Ms(n,e,"mutate",{mutations:[s]},o)}var na=n=>n.config().dataset!==void 0&&n.config().projectId!==void 0||n.config()["~experimental_resource"]!==void 0,yA=(n,e)=>na(n)&&e.startsWith(Qt(n,"query")),yN=(n,e)=>na(n)&&e.startsWith(Qt(n,"mutate")),bN=(n,e)=>na(n)&&e.startsWith(Qt(n,"doc","")),wN=(n,e)=>na(n)&&e.startsWith(Qt(n,"listen")),EN=(n,e)=>na(n)&&e.startsWith(Qt(n,"history","")),CN=(n,e)=>e.startsWith("/data/")||yA(n,e)||yN(n,e)||bN(n,e)||wN(n,e)||EN(n,e);function ra(n,e,t){let r=t.url||t.uri,i=n.config(),s=typeof t.canUseCdn>"u"?["GET","HEAD"].indexOf(t.method||"GET")>=0&&CN(n,r):t.canUseCdn,o=(t.useCdn??i.useCdn)&&s,a=t.tag&&i.requestTagPrefix?[i.requestTagPrefix,t.tag].join("."):t.tag||i.requestTagPrefix;if(a&&t.tag!==null&&(t.query=_({tag:nA(a)},t.query)),["GET","HEAD","POST"].indexOf(t.method||"GET")>=0&&yA(n,r)){let u=t.resultSourceMap??i.resultSourceMap;u!==void 0&&u!==!1&&(t.query=_({resultSourceMap:u},t.query));let d=t.perspective||i.perspective;typeof d<"u"&&(d==="previewDrafts"&&ZP(),iA(d),t.query=_({perspective:Array.isArray(d)?d.join(","):d},t.query),(Array.isArray(d)&&d.length>0||d==="previewDrafts"||d==="drafts")&&o&&(o=!1,QP())),t.lastLiveEventId&&(t.query=W(_({},t.query),{lastLiveEventId:t.lastLiveEventId})),t.returnQuery===!1&&(t.query=_({returnQuery:"false"},t.query)),o&&t.cacheMode=="noStale"&&(t.query=_({cacheMode:"noStale"},t.query))}let l=hN(i,Object.assign({},t,{url:um(n,r,o)})),c=new ne(u=>e(l,i.requester).subscribe(u));return t.signal?c.pipe(_N(t.signal)):c}function Tt(n,e,t){return ra(n,e,t).pipe(Ve(r=>r.type==="response"),$(r=>r.body))}function Qt(n,e,t){let r=n.config();if(r["~experimental_resource"]){rA(r);let o=xN(r),a=t!==void 0?`${e}/${t}`:e;return`${o}/${a}`.replace(/\/($|\?)/,"$1")}let i=ta(r),s=`/${e}/${i}`;return`/data${t!==void 0?`${s}/${t}`:s}`.replace(/\/($|\?)/,"$1")}function um(n,e,t=!1){let{url:r,cdnUrl:i}=n.config();return`${t?i:r}/${e.replace(/^\//,"")}`}function _N(n){return e=>new ne(t=>{let r=()=>t.error(SN(n));if(n&&n.aborted){r();return}let i=e.subscribe(t);return n.addEventListener("abort",r),()=>{n.removeEventListener("abort",r),i.unsubscribe()}})}var AN=!!globalThis.DOMException;function SN(n){if(AN)return new DOMException(n?.reason??"The operation was aborted.","AbortError");let e=new Error(n?.reason??"The operation was aborted.");return e.name="AbortError",e}var xN=n=>{if(!n["~experimental_resource"])throw new Error("`resource` must be provided to perform resource queries");let{type:e,id:t}=n["~experimental_resource"];switch(e){case"dataset":{let r=t.split(".");if(r.length!==2)throw new Error('Dataset ID must be in the format "project.dataset"');return`/projects/${r[0]}/datasets/${r[1]}`}case"canvas":return`/canvases/${t}`;case"media-library":return`/media-libraries/${t}`;case"dashboard":return`/dashboards/${t}`;default:throw new Error(`Unsupported resource type: ${e.toString()}`)}};function bA(n,e,t){let r=ta(n.config());return Tt(n,e,{method:"POST",uri:`/agent/action/generate/${r}`,body:t})}function wA(n,e,t){let r=ta(n.config());return Tt(n,e,{method:"POST",uri:`/agent/action/transform/${r}`,body:t})}function EA(n,e,t){let r=ta(n.config());return Tt(n,e,{method:"POST",uri:`/agent/action/translate/${r}`,body:t})}var Xg=class{#e;#t;constructor(e,t){this.#e=e,this.#t=t}generate(e){return bA(this.#e,this.#t,e)}transform(e){return wA(this.#e,this.#t,e)}translate(e){return EA(this.#e,this.#t,e)}},Qg=class{#e;#t;constructor(e,t){this.#e=e,this.#t=t}generate(e){return Pe(bA(this.#e,this.#t,e))}transform(e){return Pe(wA(this.#e,this.#t,e))}translate(e){return Pe(EA(this.#e,this.#t,e))}},Zg=class{#e;#t;constructor(e,t){this.#e=e,this.#t=t}upload(e,t,r){return CA(this.#e,this.#t,e,t,r)}},Jg=class{#e;#t;constructor(e,t){this.#e=e,this.#t=t}upload(e,t,r){let i=CA(this.#e,this.#t,e,t,r);return Pe(i.pipe(Ve(s=>s.type==="response"),$(s=>s.body.document)))}};function CA(n,e,t,r,i={}){qP(t);let s=i.extract||void 0;s&&!s.length&&(s=["none"]);let o=n.config(),a=DN(i,r),{tag:l,label:c,title:u,description:d,creditLine:h,filename:f,source:p}=a,g={label:c,title:u,description:d,filename:f,meta:s,creditLine:h};return p&&(g.sourceId=p.id,g.sourceName=p.name,g.sourceUrl=p.url),ra(n,e,{tag:l,method:"POST",timeout:a.timeout||0,uri:IN(o,t),headers:a.contentType?{"Content-Type":a.contentType}:{},query:g,body:r})}function IN(n,e){let t=e==="image"?"images":"files";if(n["~experimental_resource"]){let{type:i,id:s}=n["~experimental_resource"];switch(i){case"dataset":throw new Error("Assets are not supported for dataset resources, yet. Configure the client with `{projectId: <projectId>, dataset: <datasetId>}` instead.");case"canvas":return`/canvases/${s}/assets/${t}`;case"media-library":return`/media-libraries/${s}/upload`;case"dashboard":return`/dashboards/${s}/assets/${t}`;default:throw new Error(`Unsupported resource type: ${i.toString()}`)}}let r=ta(n);return`assets/${t}/${r}`}function DN(n,e){return typeof File>"u"||!(e instanceof File)?n:Object.assign({filename:n.preserveFilename===!1?void 0:e.name,contentType:e.type},n)}var TN=(n,e)=>Object.keys(e).concat(Object.keys(n)).reduce((t,r)=>(t[r]=typeof n[r]>"u"?e[r]:n[r],t),{}),MN=(n,e)=>e.reduce((t,r)=>(typeof n[r]>"u"||(t[r]=n[r]),t),{}),_A=Qr(()=>import("./chunk-HVQEXF4F.js")).pipe($(({default:n})=>n),Hh(1));function AA(){return function(n){return n.pipe(Ot((e,t)=>e instanceof lu?Xn(H({type:"reconnect"}),Ph(1e3).pipe(Ce(()=>t))):Kn(()=>e)))}}var RN=14800,ON=["includePreviousRevision","includeResult","includeMutations","includeAllVersions","visibility","effectFormat","tag"],PN={includeResult:!0};function SA(n,e,t={}){let{url:r,token:i,withCredentials:s,requestTagPrefix:o}=this.config(),a=t.tag&&o?[o,t.tag].join("."):t.tag,l=W(_({},TN(t,PN)),{tag:a}),c=MN(l,ON),u=cA({query:n,params:e,options:_({tag:a},c)}),d=`${r}${Qt(this,"listen",u)}`;if(d.length>RN)return Kn(()=>new Error("Query too large for listener"));let h=l.events?l.events:["mutation"],f={};return s&&(f.withCredentials=!0),i&&(f.headers={Authorization:`Bearer ${i}`}),oA(()=>(typeof EventSource>"u"||f.headers?_A:H(EventSource)).pipe($(p=>new p(d,f))),h).pipe(AA(),Ve(p=>h.includes(p.type)),$(p=>_({type:p.type},"data"in p?p.data:{})))}function NN(n,e){return kN(typeof n=="function"?_({predicate:n},e):n)}function kN(n){return e=>{let t,r=!1,l=n,{predicate:i}=l,s=zs(l,["predicate"]),o=e.pipe(Qe(c=>{n.predicate(c)&&(r=!0,t=c)}),Cn(()=>{r=!1,t=void 0}),Js(s)),a=new ne(c=>{r&&c.next(t),c.complete()});return Nh(o,a)}}var Z_="2021-03-25",pu=class{#e;constructor(e){this.#e=e}events({includeDrafts:e=!1,tag:t}={}){jn("live",this.#e.config());let{projectId:r,apiVersion:i,token:s,withCredentials:o,requestTagPrefix:a}=this.#e.config(),l=i.replace(/^v/,"");if(l!=="X"&&l<Z_)throw new Error(`The live events API requires API version ${Z_} or later. The current API version is ${l}. Please update your API version to use this feature.`);if(e&&!s&&!o)throw new Error("The live events API requires a token or withCredentials when 'includeDrafts: true'. Please update your client configuration. The token should have the lowest possible access role.");let c=Qt(this.#e,"live/events"),u=new URL(this.#e.getUrl(c,!1)),d=t&&a?[a,t].join("."):t;d&&u.searchParams.set("tag",d),e&&u.searchParams.set("includeDrafts","true");let h={};e&&s&&(h.headers={Authorization:`Bearer ${s}`}),e&&o&&(h.withCredentials=!0);let f=`${u.href}::${JSON.stringify(h)}`,p=$g.get(f);if(p)return p;let g=oA(()=>(typeof EventSource>"u"||h.headers?_A:H(EventSource)).pipe($(y=>new y(u.href,h))),["message","restart","welcome","reconnect","goaway"]).pipe(AA(),$(y=>{if(y.type==="message"){let w=y,{data:b}=w,C=zs(w,["data"]);return W(_({},C),{tags:b.tags})}return y})),v=LN(u,{method:"OPTIONS",mode:"cors",credentials:h.withCredentials?"include":"omit",headers:h.headers}).pipe(Ce(()=>ot),Ot(()=>{throw new qg({projectId:r})})),m=Xn(v,g).pipe(Cn(()=>$g.delete(f)),NN({predicate:y=>y.type==="welcome"}));return $g.set(f,m),m}};function LN(n,e){return new ne(t=>{let r=new AbortController,i=r.signal;return fetch(n,W(_({},e),{signal:r.signal})).then(s=>{t.next(s),t.complete()},s=>{i.aborted||t.error(s)}),()=>r.abort()})}var $g=new Map,em=class{#e;#t;constructor(e,t){this.#e=e,this.#t=t}create(e,t){return Ts(this.#e,this.#t,"PUT",e,t)}edit(e,t){return Ts(this.#e,this.#t,"PATCH",e,t)}delete(e){return Ts(this.#e,this.#t,"DELETE",e)}list(){return Tt(this.#e,this.#t,{uri:"/datasets",tag:null})}},tm=class{#e;#t;constructor(e,t){this.#e=e,this.#t=t}create(e,t){return jn("dataset",this.#e.config()),Pe(Ts(this.#e,this.#t,"PUT",e,t))}edit(e,t){return jn("dataset",this.#e.config()),Pe(Ts(this.#e,this.#t,"PATCH",e,t))}delete(e){return jn("dataset",this.#e.config()),Pe(Ts(this.#e,this.#t,"DELETE",e))}list(){return jn("dataset",this.#e.config()),Pe(Tt(this.#e,this.#t,{uri:"/datasets",tag:null}))}};function Ts(n,e,t,r,i){return jn("dataset",n.config()),eA(r),Tt(n,e,{method:t,uri:`/datasets/${r}`,body:i,tag:null})}var nm=class{#e;#t;constructor(e,t){this.#e=e,this.#t=t}list(e){jn("projects",this.#e.config());let t=e?.includeMembers===!1?"/projects?includeMembers=false":"/projects";return Tt(this.#e,this.#t,{uri:t})}getById(e){return jn("projects",this.#e.config()),Tt(this.#e,this.#t,{uri:`/projects/${e}`})}},rm=class{#e;#t;constructor(e,t){this.#e=e,this.#t=t}list(e){jn("projects",this.#e.config());let t=e?.includeMembers===!1?"/projects?includeMembers=false":"/projects";return Pe(Tt(this.#e,this.#t,{uri:t}))}getById(e){return jn("projects",this.#e.config()),Pe(Tt(this.#e,this.#t,{uri:`/projects/${e}`}))}},im=class{#e;#t;constructor(e,t){this.#e=e,this.#t=t}getById(e){return Tt(this.#e,this.#t,{uri:`/users/${e}`})}},sm=class{#e;#t;constructor(e,t){this.#e=e,this.#t=t}getById(e){return Pe(Tt(this.#e,this.#t,{uri:`/users/${e}`}))}},om=class n{assets;datasets;live;projects;users;agent;#e;#t;listen=SA;constructor(e,t=ea){this.config(t),this.#t=e,this.assets=new Zg(this,this.#t),this.datasets=new em(this,this.#t),this.live=new pu(this),this.projects=new nm(this,this.#t),this.users=new im(this,this.#t),this.agent={action:new Xg(this,this.#t)}}clone(){return new n(this.#t,this.config())}config(e){if(e===void 0)return _({},this.#e);if(this.#e&&this.#e.allowReconfigure===!1)throw new Error("Existing client instance cannot be reconfigured - use `withConfig(newConfig)` to return a new client");return this.#e=sA(e,this.#e||{}),this}withConfig(e){let t=this.config();return new n(this.#t,W(_(_({},t),e),{stega:_(_({},t.stega||{}),typeof e?.stega=="boolean"?{enabled:e.stega}:e?.stega||{})}))}fetch(e,t,r){return uA(this,this.#t,this.#e.stega,e,t,r)}getDocument(e,t){return dA(this,this.#t,e,t)}getDocuments(e,t){return hA(this,this.#t,e,t)}create(e,t){return gu(this,this.#t,e,"create",t)}createIfNotExists(e,t){return fA(this,this.#t,e,t)}createOrReplace(e,t){return pA(this,this.#t,e,t)}delete(e,t){return gA(this,this.#t,e,t)}mutate(e,t){return mA(this,this.#t,e,t)}patch(e,t){return new wi(e,t,this)}transaction(e){return new fu(e,this)}action(e,t){return vA(this,this.#t,e,t)}request(e){return Tt(this,this.#t,e)}getUrl(e,t){return um(this,e,t)}getDataUrl(e,t){return Qt(this,e,t)}},am=class n{assets;datasets;live;projects;users;agent;observable;#e;#t;listen=SA;constructor(e,t=ea){this.config(t),this.#t=e,this.assets=new Jg(this,this.#t),this.datasets=new tm(this,this.#t),this.live=new pu(this),this.projects=new rm(this,this.#t),this.users=new sm(this,this.#t),this.agent={action:new Qg(this,this.#t)},this.observable=new om(e,t)}clone(){return new n(this.#t,this.config())}config(e){if(e===void 0)return _({},this.#e);if(this.#e&&this.#e.allowReconfigure===!1)throw new Error("Existing client instance cannot be reconfigured - use `withConfig(newConfig)` to return a new client");return this.observable&&this.observable.config(e),this.#e=sA(e,this.#e||{}),this}withConfig(e){let t=this.config();return new n(this.#t,W(_(_({},t),e),{stega:_(_({},t.stega||{}),typeof e?.stega=="boolean"?{enabled:e.stega}:e?.stega||{})}))}fetch(e,t,r){return Pe(uA(this,this.#t,this.#e.stega,e,t,r))}getDocument(e,t){return Pe(dA(this,this.#t,e,t))}getDocuments(e,t){return Pe(hA(this,this.#t,e,t))}create(e,t){return Pe(gu(this,this.#t,e,"create",t))}createIfNotExists(e,t){return Pe(fA(this,this.#t,e,t))}createOrReplace(e,t){return Pe(pA(this,this.#t,e,t))}delete(e,t){return Pe(gA(this,this.#t,e,t))}mutate(e,t){return Pe(mA(this,this.#t,e,t))}patch(e,t){return new Fr(e,t,this)}transaction(e){return new hu(e,this)}action(e,t){return Pe(vA(this,this.#t,e,t))}request(e){return Pe(Tt(this,this.#t,e))}dataRequest(e,t,r){return Pe(Ms(this,this.#t,e,t,r))}getUrl(e,t){return um(this,e,t)}getDataUrl(e,t){return Qt(this,e,t)}};function FN(n,e){return{requester:Y_(n),createClient:t=>{let r=Y_(n);return new e((i,s)=>(s||r)(_({maxRedirects:0,maxRetries:t.maxRetries,retryDelay:t.retryDelay},i)),t)}}}function jN(n){return function(e){return nN(),n(e)}}var BN=[],xA=FN(BN,am),x5=xA.requester,dm=xA.createClient,I5=jN(dm);var IA=dm({projectId:"o9vp89lc",dataset:"production",useCdn:!0,apiVersion:"2025-05-08",token:"skqVxXEueIY0qq5HwOXBhNaJyMwn5cP77URb4claTBTRpbZZYct7lLfrAMN5d9KRcGROTPR31BA9Ve7Jpky2tbsGMEx1r3rEhN0Twqvp4R1OVQxkVQpJ90ZYiU1mhdRapolO1ego438n5zzGJdhWn0cfv2hgsi5NN9dUXG7yt2zs26MyKoRW"});var Zt=class n{getContent(e){return ve(IA.fetch(`*[_type == "${e}"] | order(id asc)`))}static \u0275fac=function(t){return new(t||n)};static \u0275prov=k({token:n,factory:n.\u0275fac,providedIn:"root"})};var ks={};ab(ks,{AbortException:()=>Fk,AnnotationEditorLayer:()=>jk,AnnotationEditorParamsType:()=>Bk,AnnotationEditorType:()=>Uv,AnnotationEditorUIManager:()=>Vk,AnnotationLayer:()=>Hk,AnnotationMode:()=>Uk,ColorPicker:()=>$k,DOMSVGFactory:()=>zk,DrawLayer:()=>Wk,FeatureTest:()=>qk,GlobalWorkerOptions:()=>$v,ImageKind:()=>Gk,InvalidPDFException:()=>Yk,MissingPDFException:()=>Kk,OPS:()=>Xk,OutputScale:()=>Qk,PDFDataRangeTransport:()=>Zk,PDFDateString:()=>Jk,PDFWorker:()=>eL,PasswordResponses:()=>tL,PermissionFlag:()=>nL,PixelsPerInch:()=>rL,RenderingCancelledException:()=>iL,TextLayer:()=>sL,UnexpectedResponseException:()=>oL,Util:()=>aL,VerbosityLevel:()=>zv,XfaLayer:()=>lL,build:()=>cL,createValidAbsoluteUrl:()=>uL,fetchData:()=>dL,getDocument:()=>Wv,getFilenameFromUrl:()=>hL,getPdfFilenameFromUrl:()=>fL,getXfaPageViewport:()=>pL,isDataScheme:()=>gL,isPdfFile:()=>mL,noContextMenu:()=>vL,normalizeUnicode:()=>yL,setLayerDimensions:()=>bL,shadow:()=>wL,version:()=>Aa});var la={};la.d=(n,e)=>{for(var t in e)la.o(e,t)&&!la.o(n,t)&&Object.defineProperty(n,t,{enumerable:!0,get:e[t]})};la.o=(n,e)=>Object.prototype.hasOwnProperty.call(n,e);var X=globalThis.pdfjsLib={};la.d(X,{AbortException:()=>fr,AnnotationEditorLayer:()=>Lk,AnnotationEditorParamsType:()=>Y,AnnotationEditorType:()=>ee,AnnotationEditorUIManager:()=>pa,AnnotationLayer:()=>Dv,AnnotationMode:()=>Br,ColorPicker:()=>td,DOMSVGFactory:()=>ba,DrawLayer:()=>Nv,FeatureTest:()=>dt,GlobalWorkerOptions:()=>Ci,ImageKind:()=>Cu,InvalidPDFException:()=>Su,MissingPDFException:()=>hr,OPS:()=>vn,OutputScale:()=>fa,PDFDataRangeTransport:()=>Hu,PDFDateString:()=>Iu,PDFWorker:()=>Ps,PasswordResponses:()=>zN,PermissionFlag:()=>$N,PixelsPerInch:()=>Vr,RenderingCancelledException:()=>ha,TextLayer:()=>va,UnexpectedResponseException:()=>Ns,Util:()=>L,VerbosityLevel:()=>rd,XfaLayer:()=>zu,build:()=>Nk,createValidAbsoluteUrl:()=>YN,fetchData:()=>ad,getDocument:()=>Mk,getFilenameFromUrl:()=>nk,getPdfFilenameFromUrl:()=>rk,getXfaPageViewport:()=>ik,isDataScheme:()=>ld,isPdfFile:()=>Fv,noContextMenu:()=>en,normalizeUnicode:()=>JN,setLayerDimensions:()=>_i,shadow:()=>ue,version:()=>Pk});var gt=typeof process=="object"&&process+""=="[object process]"&&!process.versions.nw&&!(process.versions.electron&&process.type&&process.type!=="browser"),$A=[1,0,0,1,0,0],vm=[.001,0,0,.001,0,0],VN=1e7,Eu=1.35,HN=.35,F5=HN/Eu,Vt={ANY:1,DISPLAY:2,PRINT:4,SAVE:8,ANNOTATIONS_FORMS:16,ANNOTATIONS_STORAGE:32,ANNOTATIONS_DISABLE:64,IS_EDITING:128,OPLIST:256},Br={DISABLE:0,ENABLE:1,ENABLE_FORMS:2,ENABLE_STORAGE:3},UN="pdfjs_internal_editor_",ee={DISABLE:-1,NONE:0,FREETEXT:3,HIGHLIGHT:9,STAMP:13,INK:15},Y={RESIZE:1,CREATE:2,FREETEXT_SIZE:11,FREETEXT_COLOR:12,FREETEXT_OPACITY:13,INK_COLOR:21,INK_THICKNESS:22,INK_OPACITY:23,HIGHLIGHT_COLOR:31,HIGHLIGHT_DEFAULT_COLOR:32,HIGHLIGHT_THICKNESS:33,HIGHLIGHT_FREE:34,HIGHLIGHT_SHOW_ALL:35},$N={PRINT:4,MODIFY_CONTENTS:8,COPY:16,MODIFY_ANNOTATIONS:32,FILL_INTERACTIVE_FORMS:256,COPY_FOR_ACCESSIBILITY:512,ASSEMBLE:1024,PRINT_HIGH_QUALITY:2048},pt={FILL:0,STROKE:1,FILL_STROKE:2,INVISIBLE:3,FILL_ADD_TO_PATH:4,STROKE_ADD_TO_PATH:5,FILL_STROKE_ADD_TO_PATH:6,ADD_TO_PATH:7,FILL_STROKE_MASK:3,ADD_TO_PATH_FLAG:4},Cu={GRAYSCALE_1BPP:1,RGB_24BPP:2,RGBA_32BPP:3},rt={TEXT:1,LINK:2,FREETEXT:3,LINE:4,SQUARE:5,CIRCLE:6,POLYGON:7,POLYLINE:8,HIGHLIGHT:9,UNDERLINE:10,SQUIGGLY:11,STRIKEOUT:12,STAMP:13,CARET:14,INK:15,POPUP:16,FILEATTACHMENT:17,SOUND:18,MOVIE:19,WIDGET:20,SCREEN:21,PRINTERMARK:22,TRAPNET:23,WATERMARK:24,THREED:25,REDACT:26};var ia={SOLID:1,DASHED:2,BEVELED:3,INSET:4,UNDERLINE:5};var rd={ERRORS:0,WARNINGS:1,INFOS:5},vn={dependency:1,setLineWidth:2,setLineCap:3,setLineJoin:4,setMiterLimit:5,setDash:6,setRenderingIntent:7,setFlatness:8,setGState:9,save:10,restore:11,transform:12,moveTo:13,lineTo:14,curveTo:15,curveTo2:16,curveTo3:17,closePath:18,rectangle:19,stroke:20,closeStroke:21,fill:22,eoFill:23,fillStroke:24,eoFillStroke:25,closeFillStroke:26,closeEOFillStroke:27,endPath:28,clip:29,eoClip:30,beginText:31,endText:32,setCharSpacing:33,setWordSpacing:34,setHScale:35,setLeading:36,setFont:37,setTextRenderingMode:38,setTextRise:39,moveText:40,setLeadingMoveText:41,setTextMatrix:42,nextLine:43,showText:44,showSpacedText:45,nextLineShowText:46,nextLineSetSpacingShowText:47,setCharWidth:48,setCharWidthAndBounds:49,setStrokeColorSpace:50,setFillColorSpace:51,setStrokeColor:52,setStrokeColorN:53,setFillColor:54,setFillColorN:55,setStrokeGray:56,setFillGray:57,setStrokeRGBColor:58,setFillRGBColor:59,setStrokeCMYKColor:60,setFillCMYKColor:61,shadingFill:62,beginInlineImage:63,beginImageData:64,endInlineImage:65,paintXObject:66,markPoint:67,markPointProps:68,beginMarkedContent:69,beginMarkedContentProps:70,endMarkedContent:71,beginCompat:72,endCompat:73,paintFormXObjectBegin:74,paintFormXObjectEnd:75,beginGroup:76,endGroup:77,beginAnnotation:80,endAnnotation:81,paintImageMaskXObject:83,paintImageMaskXObjectGroup:84,paintImageXObject:85,paintInlineImageXObject:86,paintInlineImageXObjectGroup:87,paintImageXObjectRepeat:88,paintImageMaskXObjectRepeat:89,paintSolidColorImageMask:90,constructPath:91,setStrokeTransparent:92,setFillTransparent:93},zN={NEED_PASSWORD:1,INCORRECT_PASSWORD:2},id=rd.WARNINGS;function WN(n){Number.isInteger(n)&&(id=n)}function qN(){return id}function sd(n){id>=rd.INFOS&&console.log(`Info: ${n}`)}function oe(n){id>=rd.WARNINGS&&console.log(`Warning: ${n}`)}function Te(n){throw new Error(n)}function it(n,e){n||Te(e)}function GN(n){switch(n?.protocol){case"http:":case"https:":case"ftp:":case"mailto:":case"tel:":return!0;default:return!1}}function YN(n,e=null,t=null){if(!n)return null;try{if(t&&typeof n=="string"&&(t.addDefaultProtocol&&n.startsWith("www.")&&n.match(/\./g)?.length>=2&&(n=`http://${n}`),t.tryConvertEncoding))try{n=ZN(n)}catch{}let r=e?new URL(n,e):new URL(n);if(GN(r))return r}catch{}return null}function ue(n,e,t,r=!1){return Object.defineProperty(n,e,{value:t,enumerable:!r,configurable:!0,writable:!1}),t}var Hr=function(){function e(t,r){this.message=t,this.name=r}return e.prototype=new Error,e.constructor=e,e}(),ca=class extends Hr{constructor(e,t){super(e,"PasswordException"),this.code=t}},ua=class extends Hr{constructor(e,t){super(e,"UnknownErrorException"),this.details=t}},Su=class extends Hr{constructor(e){super(e,"InvalidPDFException")}},hr=class extends Hr{constructor(e){super(e,"MissingPDFException")}},Ns=class extends Hr{constructor(e,t){super(e,"UnexpectedResponseException"),this.status=t}},ym=class extends Hr{constructor(e){super(e,"FormatError")}},fr=class extends Hr{constructor(e){super(e,"AbortException")}};function zA(n){(typeof n!="object"||n?.length===void 0)&&Te("Invalid argument for bytesToString");let e=n.length,t=8192;if(e<t)return String.fromCharCode.apply(null,n);let r=[];for(let i=0;i<e;i+=t){let s=Math.min(i+t,e),o=n.subarray(i,s);r.push(String.fromCharCode.apply(null,o))}return r.join("")}function od(n){typeof n!="string"&&Te("Invalid argument for stringToBytes");let e=n.length,t=new Uint8Array(e);for(let r=0;r<e;++r)t[r]=n.charCodeAt(r)&255;return t}function KN(n){return String.fromCharCode(n>>24&255,n>>16&255,n>>8&255,n&255)}function kv(n){let e=Object.create(null);for(let[t,r]of n)e[t]=r;return e}function XN(){let n=new Uint8Array(4);return n[0]=1,new Uint32Array(n.buffer,0,1)[0]===1}function QN(){try{return new Function(""),!0}catch{return!1}}var dt=class{static get isLittleEndian(){return ue(this,"isLittleEndian",XN())}static get isEvalSupported(){return ue(this,"isEvalSupported",QN())}static get isOffscreenCanvasSupported(){return ue(this,"isOffscreenCanvasSupported",typeof OffscreenCanvas<"u")}static get platform(){return typeof navigator<"u"&&typeof navigator?.platform=="string"?ue(this,"platform",{isMac:navigator.platform.includes("Mac"),isWindows:navigator.platform.includes("Win"),isFirefox:typeof navigator?.userAgent=="string"&&navigator.userAgent.includes("Firefox")}):ue(this,"platform",{isMac:!1,isWindows:!1,isFirefox:!1})}static get isCSSRoundSupported(){return ue(this,"isCSSRoundSupported",globalThis.CSS?.supports?.("width: round(1.5px, 1px)"))}},hm=Array.from(Array(256).keys(),n=>n.toString(16).padStart(2,"0")),L=class{static makeHexColor(e,t,r){return`#${hm[e]}${hm[t]}${hm[r]}`}static scaleMinMax(e,t){let r;e[0]?(e[0]<0&&(r=t[0],t[0]=t[2],t[2]=r),t[0]*=e[0],t[2]*=e[0],e[3]<0&&(r=t[1],t[1]=t[3],t[3]=r),t[1]*=e[3],t[3]*=e[3]):(r=t[0],t[0]=t[1],t[1]=r,r=t[2],t[2]=t[3],t[3]=r,e[1]<0&&(r=t[1],t[1]=t[3],t[3]=r),t[1]*=e[1],t[3]*=e[1],e[2]<0&&(r=t[0],t[0]=t[2],t[2]=r),t[0]*=e[2],t[2]*=e[2]),t[0]+=e[4],t[1]+=e[5],t[2]+=e[4],t[3]+=e[5]}static transform(e,t){return[e[0]*t[0]+e[2]*t[1],e[1]*t[0]+e[3]*t[1],e[0]*t[2]+e[2]*t[3],e[1]*t[2]+e[3]*t[3],e[0]*t[4]+e[2]*t[5]+e[4],e[1]*t[4]+e[3]*t[5]+e[5]]}static applyTransform(e,t){let r=e[0]*t[0]+e[1]*t[2]+t[4],i=e[0]*t[1]+e[1]*t[3]+t[5];return[r,i]}static applyInverseTransform(e,t){let r=t[0]*t[3]-t[1]*t[2],i=(e[0]*t[3]-e[1]*t[2]+t[2]*t[5]-t[4]*t[3])/r,s=(-e[0]*t[1]+e[1]*t[0]+t[4]*t[1]-t[5]*t[0])/r;return[i,s]}static getAxialAlignedBoundingBox(e,t){let r=this.applyTransform(e,t),i=this.applyTransform(e.slice(2,4),t),s=this.applyTransform([e[0],e[3]],t),o=this.applyTransform([e[2],e[1]],t);return[Math.min(r[0],i[0],s[0],o[0]),Math.min(r[1],i[1],s[1],o[1]),Math.max(r[0],i[0],s[0],o[0]),Math.max(r[1],i[1],s[1],o[1])]}static inverseTransform(e){let t=e[0]*e[3]-e[1]*e[2];return[e[3]/t,-e[1]/t,-e[2]/t,e[0]/t,(e[2]*e[5]-e[4]*e[3])/t,(e[4]*e[1]-e[5]*e[0])/t]}static singularValueDecompose2dScale(e){let t=[e[0],e[2],e[1],e[3]],r=e[0]*t[0]+e[1]*t[2],i=e[0]*t[1]+e[1]*t[3],s=e[2]*t[0]+e[3]*t[2],o=e[2]*t[1]+e[3]*t[3],a=(r+o)/2,l=Math.sqrt((r+o)**2-4*(r*o-s*i))/2,c=a+l||1,u=a-l||1;return[Math.sqrt(c),Math.sqrt(u)]}static normalizeRect(e){let t=e.slice(0);return e[0]>e[2]&&(t[0]=e[2],t[2]=e[0]),e[1]>e[3]&&(t[1]=e[3],t[3]=e[1]),t}static intersect(e,t){let r=Math.max(Math.min(e[0],e[2]),Math.min(t[0],t[2])),i=Math.min(Math.max(e[0],e[2]),Math.max(t[0],t[2]));if(r>i)return null;let s=Math.max(Math.min(e[1],e[3]),Math.min(t[1],t[3])),o=Math.min(Math.max(e[1],e[3]),Math.max(t[1],t[3]));return s>o?null:[r,s,i,o]}static#e(e,t,r,i,s,o,a,l,c,u){if(c<=0||c>=1)return;let d=1-c,h=c*c,f=h*c,p=d*(d*(d*e+3*c*t)+3*h*r)+f*i,g=d*(d*(d*s+3*c*o)+3*h*a)+f*l;u[0]=Math.min(u[0],p),u[1]=Math.min(u[1],g),u[2]=Math.max(u[2],p),u[3]=Math.max(u[3],g)}static#t(e,t,r,i,s,o,a,l,c,u,d,h){if(Math.abs(c)<1e-12){Math.abs(u)>=1e-12&&this.#e(e,t,r,i,s,o,a,l,-d/u,h);return}let f=u**2-4*d*c;if(f<0)return;let p=Math.sqrt(f),g=2*c;this.#e(e,t,r,i,s,o,a,l,(-u+p)/g,h),this.#e(e,t,r,i,s,o,a,l,(-u-p)/g,h)}static bezierBoundingBox(e,t,r,i,s,o,a,l,c){return c?(c[0]=Math.min(c[0],e,a),c[1]=Math.min(c[1],t,l),c[2]=Math.max(c[2],e,a),c[3]=Math.max(c[3],t,l)):c=[Math.min(e,a),Math.min(t,l),Math.max(e,a),Math.max(t,l)],this.#t(e,r,s,a,t,i,o,l,3*(-e+3*(r-s)+a),6*(e-2*r+s),3*(r-e),c),this.#t(e,r,s,a,t,i,o,l,3*(-t+3*(i-o)+l),6*(t-2*i+o),3*(i-t),c),c}};function ZN(n){return decodeURIComponent(escape(n))}var fm=null,DA=null;function JN(n){return fm||(fm=/([\u00a0\u00b5\u037e\u0eb3\u2000-\u200a\u202f\u2126\ufb00-\ufb04\ufb06\ufb20-\ufb36\ufb38-\ufb3c\ufb3e\ufb40-\ufb41\ufb43-\ufb44\ufb46-\ufba1\ufba4-\ufba9\ufbae-\ufbb1\ufbd3-\ufbdc\ufbde-\ufbe7\ufbea-\ufbf8\ufbfc-\ufbfd\ufc00-\ufc5d\ufc64-\ufcf1\ufcf5-\ufd3d\ufd88\ufdf4\ufdfa-\ufdfb\ufe71\ufe77\ufe79\ufe7b\ufe7d]+)|(\ufb05+)/gu,DA=new Map([["\uFB05","\u017Ft"]])),n.replaceAll(fm,(e,t,r)=>t?t.normalize("NFKC"):DA.get(r))}function ek(){if(typeof crypto<"u"&&typeof crypto?.randomUUID=="function")return crypto.randomUUID();let n=new Uint8Array(32);if(typeof crypto<"u"&&typeof crypto?.getRandomValues=="function")crypto.getRandomValues(n);else for(let e=0;e<32;e++)n[e]=Math.floor(Math.random()*255);return zA(n)}var Lv="pdfjs_internal_id_",lr={BEZIER_CURVE_TO:0,MOVE_TO:1,LINE_TO:2,QUADRATIC_CURVE_TO:3,RESTORE:4,SAVE:5,SCALE:6,TRANSFORM:7,TRANSLATE:8};function tk(n){return Uint8Array.prototype.toBase64?n.toBase64():btoa(zA(n))}var ur="http://www.w3.org/2000/svg",Vr=class{static CSS=96;static PDF=72;static PDF_TO_CSS_UNITS=this.CSS/this.PDF};function ad(n,e="text"){return I(this,null,function*(){if(aa(n,document.baseURI)){let t=yield fetch(n);if(!t.ok)throw new Error(t.statusText);switch(e){case"arraybuffer":return t.arrayBuffer();case"blob":return t.blob();case"json":return t.json()}return t.text()}return new Promise((t,r)=>{let i=new XMLHttpRequest;i.open("GET",n,!0),i.responseType=e,i.onreadystatechange=()=>{if(i.readyState===XMLHttpRequest.DONE){if(i.status===200||i.status===0){switch(e){case"arraybuffer":case"blob":case"json":t(i.response);return}t(i.responseText);return}r(new Error(i.statusText))}},i.send(null)})})}var da=class n{constructor({viewBox:e,scale:t,rotation:r,offsetX:i=0,offsetY:s=0,dontFlip:o=!1}){this.viewBox=e,this.scale=t,this.rotation=r,this.offsetX=i,this.offsetY=s;let a=(e[2]+e[0])/2,l=(e[3]+e[1])/2,c,u,d,h;switch(r%=360,r<0&&(r+=360),r){case 180:c=-1,u=0,d=0,h=1;break;case 90:c=0,u=1,d=1,h=0;break;case 270:c=0,u=-1,d=-1,h=0;break;case 0:c=1,u=0,d=0,h=-1;break;default:throw new Error("PageViewport: Invalid rotation, must be a multiple of 90 degrees.")}o&&(d=-d,h=-h);let f,p,g,v;c===0?(f=Math.abs(l-e[1])*t+i,p=Math.abs(a-e[0])*t+s,g=(e[3]-e[1])*t,v=(e[2]-e[0])*t):(f=Math.abs(a-e[0])*t+i,p=Math.abs(l-e[1])*t+s,g=(e[2]-e[0])*t,v=(e[3]-e[1])*t),this.transform=[c*t,u*t,d*t,h*t,f-c*t*a-d*t*l,p-u*t*a-h*t*l],this.width=g,this.height=v}get rawDims(){let{viewBox:e}=this;return ue(this,"rawDims",{pageWidth:e[2]-e[0],pageHeight:e[3]-e[1],pageX:e[0],pageY:e[1]})}clone({scale:e=this.scale,rotation:t=this.rotation,offsetX:r=this.offsetX,offsetY:i=this.offsetY,dontFlip:s=!1}={}){return new n({viewBox:this.viewBox.slice(),scale:e,rotation:t,offsetX:r,offsetY:i,dontFlip:s})}convertToViewportPoint(e,t){return L.applyTransform([e,t],this.transform)}convertToViewportRectangle(e){let t=L.applyTransform([e[0],e[1]],this.transform),r=L.applyTransform([e[2],e[3]],this.transform);return[t[0],t[1],r[0],r[1]]}convertToPdfPoint(e,t){return L.applyInverseTransform([e,t],this.transform)}},ha=class extends Hr{constructor(e,t=0){super(e,"RenderingCancelledException"),this.extraDelay=t}};function ld(n){let e=n.length,t=0;for(;t<e&&n[t].trim()==="";)t++;return n.substring(t,t+5).toLowerCase()==="data:"}function Fv(n){return typeof n=="string"&&/\.pdf$/i.test(n)}function nk(n){return[n]=n.split(/[#?]/,1),n.substring(n.lastIndexOf("/")+1)}function rk(n,e="document.pdf"){if(typeof n!="string")return e;if(ld(n))return oe('getPdfFilenameFromUrl: ignore "data:"-URL for performance reasons.'),e;let t=/^(?:(?:[^:]+:)?\/\/[^/]+)?([^?#]*)(\?[^#]*)?(#.*)?$/,r=/[^/?#=]+\.pdf\b(?!.*\.pdf\b)/i,i=t.exec(n),s=r.exec(i[1])||r.exec(i[2])||r.exec(i[3]);if(s&&(s=s[0],s.includes("%")))try{s=r.exec(decodeURIComponent(s))[0]}catch{}return s||e}var xu=class{started=Object.create(null);times=[];time(e){e in this.started&&oe(`Timer is already running for ${e}`),this.started[e]=Date.now()}timeEnd(e){e in this.started||oe(`Timer has not been started for ${e}`),this.times.push({name:e,start:this.started[e],end:Date.now()}),delete this.started[e]}toString(){let e=[],t=0;for(let{name:r}of this.times)t=Math.max(r.length,t);for(let{name:r,start:i,end:s}of this.times)e.push(`${r.padEnd(t)} ${s-i}ms
`);return e.join("")}};function aa(n,e){try{let{protocol:t}=e?new URL(n,e):new URL(n);return t==="http:"||t==="https:"}catch{return!1}}function en(n){n.preventDefault()}function TA(n){console.log("Deprecated API usage: "+n)}var Iu=class{static#e;static toDateObject(e){if(!e||typeof e!="string")return null;this.#e||=new RegExp("^D:(\\d{4})(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?([Z|+|-])?(\\d{2})?'?(\\d{2})?'?");let t=this.#e.exec(e);if(!t)return null;let r=parseInt(t[1],10),i=parseInt(t[2],10);i=i>=1&&i<=12?i-1:0;let s=parseInt(t[3],10);s=s>=1&&s<=31?s:1;let o=parseInt(t[4],10);o=o>=0&&o<=23?o:0;let a=parseInt(t[5],10);a=a>=0&&a<=59?a:0;let l=parseInt(t[6],10);l=l>=0&&l<=59?l:0;let c=t[7]||"Z",u=parseInt(t[8],10);u=u>=0&&u<=23?u:0;let d=parseInt(t[9],10)||0;return d=d>=0&&d<=59?d:0,c==="-"?(o+=u,a+=d):c==="+"&&(o-=u,a-=d),new Date(Date.UTC(r,i,s,o,a,l))}};function ik(n,{scale:e=1,rotation:t=0}){let{width:r,height:i}=n.attributes.style,s=[0,0,parseInt(r),parseInt(i)];return new da({viewBox:s,scale:e,rotation:t})}function jv(n){if(n.startsWith("#")){let e=parseInt(n.slice(1),16);return[(e&16711680)>>16,(e&65280)>>8,e&255]}return n.startsWith("rgb(")?n.slice(4,-1).split(",").map(e=>parseInt(e)):n.startsWith("rgba(")?n.slice(5,-1).split(",").map(e=>parseInt(e)).slice(0,3):(oe(`Not a valid color format: "${n}"`),[0,0,0])}function sk(n){let e=document.createElement("span");e.style.visibility="hidden",document.body.append(e);for(let t of n.keys()){e.style.color=t;let r=window.getComputedStyle(e).color;n.set(t,jv(r))}e.remove()}function Le(n){let{a:e,b:t,c:r,d:i,e:s,f:o}=n.getTransform();return[e,t,r,i,s,o]}function cr(n){let{a:e,b:t,c:r,d:i,e:s,f:o}=n.getTransform().invertSelf();return[e,t,r,i,s,o]}function _i(n,e,t=!1,r=!0){if(e instanceof da){let{pageWidth:i,pageHeight:s}=e.rawDims,{style:o}=n,a=dt.isCSSRoundSupported,l=`var(--scale-factor) * ${i}px`,c=`var(--scale-factor) * ${s}px`,u=a?`round(down, ${l}, var(--scale-round-x, 1px))`:`calc(${l})`,d=a?`round(down, ${c}, var(--scale-round-y, 1px))`:`calc(${c})`;!t||e.rotation%180===0?(o.width=u,o.height=d):(o.width=d,o.height=u)}r&&n.setAttribute("data-main-rotation",e.rotation)}var fa=class{constructor(){let e=window.devicePixelRatio||1;this.sx=e,this.sy=e}get scaled(){return this.sx!==1||this.sy!==1}get symmetric(){return this.sx===this.sy}},bm=class n{#e=null;#t=null;#n;#r=null;#i=null;static#s=null;constructor(e){this.#n=e,n.#s||=Object.freeze({freetext:"pdfjs-editor-remove-freetext-button",highlight:"pdfjs-editor-remove-highlight-button",ink:"pdfjs-editor-remove-ink-button",stamp:"pdfjs-editor-remove-stamp-button"})}render(){let e=this.#e=document.createElement("div");e.classList.add("editToolbar","hidden"),e.setAttribute("role","toolbar");let t=this.#n._uiManager._signal;e.addEventListener("contextmenu",en,{signal:t}),e.addEventListener("pointerdown",n.#l,{signal:t});let r=this.#r=document.createElement("div");r.className="buttons",e.append(r);let i=this.#n.toolbarPosition;if(i){let{style:s}=e,o=this.#n._uiManager.direction==="ltr"?1-i[0]:i[0];s.insetInlineEnd=`${100*o}%`,s.top=`calc(${100*i[1]}% + var(--editor-toolbar-vert-offset))`}return this.#d(),e}get div(){return this.#e}static#l(e){e.stopPropagation()}#c(e){this.#n._focusEventsAllowed=!1,e.preventDefault(),e.stopPropagation()}#u(e){this.#n._focusEventsAllowed=!0,e.preventDefault(),e.stopPropagation()}#a(e){let t=this.#n._uiManager._signal;e.addEventListener("focusin",this.#c.bind(this),{capture:!0,signal:t}),e.addEventListener("focusout",this.#u.bind(this),{capture:!0,signal:t}),e.addEventListener("contextmenu",en,{signal:t})}hide(){this.#e.classList.add("hidden"),this.#t?.hideDropdown()}show(){this.#e.classList.remove("hidden"),this.#i?.shown()}#d(){let{editorType:e,_uiManager:t}=this.#n,r=document.createElement("button");r.className="delete",r.tabIndex=0,r.setAttribute("data-l10n-id",n.#s[e]),this.#a(r),r.addEventListener("click",i=>{t.delete()},{signal:t._signal}),this.#r.append(r)}get#o(){let e=document.createElement("div");return e.className="divider",e}addAltText(e){return I(this,null,function*(){let t=yield e.render();this.#a(t),this.#r.prepend(t,this.#o),this.#i=e})}addColorPicker(e){this.#t=e;let t=e.renderButton();this.#a(t),this.#r.prepend(t,this.#o)}remove(){this.#e.remove(),this.#t?.destroy(),this.#t=null}},wm=class{#e=null;#t=null;#n;constructor(e){this.#n=e}#r(){let e=this.#t=document.createElement("div");e.className="editToolbar",e.setAttribute("role","toolbar"),e.addEventListener("contextmenu",en,{signal:this.#n._signal});let t=this.#e=document.createElement("div");return t.className="buttons",e.append(t),this.#s(),e}#i(e,t){let r=0,i=0;for(let s of e){let o=s.y+s.height;if(o<r)continue;let a=s.x+(t?s.width:0);if(o>r){i=a,r=o;continue}t?a>i&&(i=a):a<i&&(i=a)}return[t?1-i:i,r]}show(e,t,r){let[i,s]=this.#i(t,r),{style:o}=this.#t||=this.#r();e.append(this.#t),o.insetInlineEnd=`${100*i}%`,o.top=`calc(${100*s}% + var(--editor-toolbar-vert-offset))`}hide(){this.#t.remove()}#s(){let e=document.createElement("button");e.className="highlightButton",e.tabIndex=0,e.setAttribute("data-l10n-id","pdfjs-highlight-floating-button1");let t=document.createElement("span");e.append(t),t.className="visuallyHidden",t.setAttribute("data-l10n-id","pdfjs-highlight-floating-button-label");let r=this.#n._signal;e.addEventListener("contextmenu",en,{signal:r}),e.addEventListener("click",()=>{this.#n.highlightSelection("floating_button")},{signal:r}),this.#e.append(e)}};function Du(n,e,t){for(let r of t)e.addEventListener(r,n[r].bind(n))}function ok(n){return Math.round(Math.min(255,Math.max(1,255*n))).toString(16).padStart(2,"0")}var Em=class{#e=0;get id(){return`${UN}${this.#e++}`}},Cm=class n{#e=ek();#t=0;#n=null;static get _isSVGFittingCanvas(){let e='data:image/svg+xml;charset=UTF-8,<svg viewBox="0 0 1 1" width="1" height="1" xmlns="http://www.w3.org/2000/svg"><rect width="1" height="1" style="fill:red;"/></svg>',r=new OffscreenCanvas(1,3).getContext("2d",{willReadFrequently:!0}),i=new Image;i.src=e;let s=i.decode().then(()=>(r.drawImage(i,0,0,1,1,0,0,1,3),new Uint32Array(r.getImageData(0,0,1,1).data.buffer)[0]===0));return ue(this,"_isSVGFittingCanvas",s)}#r(e,t){return I(this,null,function*(){this.#n||=new Map;let r=this.#n.get(e);if(r===null)return null;if(r?.bitmap)return r.refCounter+=1,r;try{r||={bitmap:null,id:`image_${this.#e}_${this.#t++}`,refCounter:0,isSvg:!1};let i;if(typeof t=="string"?(r.url=t,i=yield ad(t,"blob")):t instanceof File?i=r.file=t:t instanceof Blob&&(i=t),i.type==="image/svg+xml"){let s=n._isSVGFittingCanvas,o=new FileReader,a=new Image,l=new Promise((c,u)=>{a.onload=()=>{r.bitmap=a,r.isSvg=!0,c()},o.onload=()=>I(this,null,function*(){let d=r.svgUrl=o.result;a.src=(yield s)?`${d}#svgView(preserveAspectRatio(none))`:d}),a.onerror=o.onerror=u});o.readAsDataURL(i),yield l}else r.bitmap=yield createImageBitmap(i);r.refCounter=1}catch(i){console.error(i),r=null}return this.#n.set(e,r),r&&this.#n.set(r.id,r),r})}getFromFile(e){return I(this,null,function*(){let{lastModified:t,name:r,size:i,type:s}=e;return this.#r(`${t}_${r}_${i}_${s}`,e)})}getFromUrl(e){return I(this,null,function*(){return this.#r(e,e)})}getFromBlob(e,t){return I(this,null,function*(){let r=yield t;return this.#r(e,r)})}getFromId(e){return I(this,null,function*(){this.#n||=new Map;let t=this.#n.get(e);if(!t)return null;if(t.bitmap)return t.refCounter+=1,t;if(t.file)return this.getFromFile(t.file);if(t.blobPromise){let{blobPromise:r}=t;return delete t.blobPromise,this.getFromBlob(t.id,r)}return this.getFromUrl(t.url)})}getFromCanvas(e,t){this.#n||=new Map;let r=this.#n.get(e);if(r?.bitmap)return r.refCounter+=1,r;let i=new OffscreenCanvas(t.width,t.height);return i.getContext("2d").drawImage(t,0,0),r={bitmap:i.transferToImageBitmap(),id:`image_${this.#e}_${this.#t++}`,refCounter:1,isSvg:!1},this.#n.set(e,r),this.#n.set(r.id,r),r}getSvgUrl(e){let t=this.#n.get(e);return t?.isSvg?t.svgUrl:null}deleteId(e){this.#n||=new Map;let t=this.#n.get(e);if(!t||(t.refCounter-=1,t.refCounter!==0))return;let{bitmap:r}=t;if(!t.url&&!t.file){let i=new OffscreenCanvas(r.width,r.height);i.getContext("bitmaprenderer").transferFromImageBitmap(r),t.blobPromise=i.convertToBlob()}r.close?.(),t.bitmap=null}isValidId(e){return e.startsWith(`image_${this.#e}_`)}},_m=class{#e=[];#t=!1;#n;#r=-1;constructor(e=128){this.#n=e}add({cmd:e,undo:t,post:r,mustExec:i,type:s=NaN,overwriteIfSameType:o=!1,keepUndo:a=!1}){if(i&&e(),this.#t)return;let l={cmd:e,undo:t,post:r,type:s};if(this.#r===-1){this.#e.length>0&&(this.#e.length=0),this.#r=0,this.#e.push(l);return}if(o&&this.#e[this.#r].type===s){a&&(l.undo=this.#e[this.#r].undo),this.#e[this.#r]=l;return}let c=this.#r+1;c===this.#n?this.#e.splice(0,1):(this.#r=c,c<this.#e.length&&this.#e.splice(c)),this.#e.push(l)}undo(){if(this.#r===-1)return;this.#t=!0;let{undo:e,post:t}=this.#e[this.#r];e(),t?.(),this.#t=!1,this.#r-=1}redo(){if(this.#r<this.#e.length-1){this.#r+=1,this.#t=!0;let{cmd:e,post:t}=this.#e[this.#r];e(),t?.(),this.#t=!1}}hasSomethingToUndo(){return this.#r!==-1}hasSomethingToRedo(){return this.#r<this.#e.length-1}destroy(){this.#e=null}},Ai=class{constructor(e){this.buffer=[],this.callbacks=new Map,this.allKeys=new Set;let{isMac:t}=dt.platform;for(let[r,i,s={}]of e)for(let o of r){let a=o.startsWith("mac+");t&&a?(this.callbacks.set(o.slice(4),{callback:i,options:s}),this.allKeys.add(o.split("+").at(-1))):!t&&!a&&(this.callbacks.set(o,{callback:i,options:s}),this.allKeys.add(o.split("+").at(-1)))}}#e(e){e.altKey&&this.buffer.push("alt"),e.ctrlKey&&this.buffer.push("ctrl"),e.metaKey&&this.buffer.push("meta"),e.shiftKey&&this.buffer.push("shift"),this.buffer.push(e.key);let t=this.buffer.join("+");return this.buffer.length=0,t}exec(e,t){if(!this.allKeys.has(t.key))return;let r=this.callbacks.get(this.#e(t));if(!r)return;let{callback:i,options:{bubbles:s=!1,args:o=[],checker:a=null}}=r;a&&!a(e,t)||(i.bind(e,...o,t)(),s||(t.stopPropagation(),t.preventDefault()))}},Am=class n{static _colorsMapping=new Map([["CanvasText",[0,0,0]],["Canvas",[255,255,255]]]);get _colors(){let e=new Map([["CanvasText",null],["Canvas",null]]);return sk(e),ue(this,"_colors",e)}convert(e){let t=jv(e);if(!window.matchMedia("(forced-colors: active)").matches)return t;for(let[r,i]of this._colors)if(i.every((s,o)=>s===t[o]))return n._colorsMapping.get(r);return t}getHexCode(e){let t=this._colors.get(e);return t?L.makeHexColor(...t):e}},pa=(()=>{class n{#e=new AbortController;#t=null;#n=new Map;#r=new Map;#i=null;#s=null;#l=null;#c=new _m;#u=null;#a=0;#d=new Set;#o=null;#h=null;#p=new Set;#f=!1;#g=!1;#v=!1;#m=null;#y=null;#w=null;#_=null;#E=!1;#C=null;#M=new Em;#I=!1;#A=!1;#D=null;#x=null;#R=null;#P=null;#S=ee.NONE;#b=new Set;#T=null;#O=null;#F=null;#H={isEditing:!1,isEmpty:!0,hasSomethingToUndo:!1,hasSomethingToRedo:!1,hasSelectedEditor:!1,hasSelectedText:!1};#V=[0,0];#L=null;#j=null;#B=null;#N=null;static TRANSLATE_SMALL=1;static TRANSLATE_BIG=10;static get _keyboardManager(){let t=n.prototype,r=a=>a.#j.contains(document.activeElement)&&document.activeElement.tagName!=="BUTTON"&&a.hasSomethingToControl(),i=(a,{target:l})=>{if(l instanceof HTMLInputElement){let{type:c}=l;return c!=="text"&&c!=="number"}return!0},s=this.TRANSLATE_SMALL,o=this.TRANSLATE_BIG;return ue(this,"_keyboardManager",new Ai([[["ctrl+a","mac+meta+a"],t.selectAll,{checker:i}],[["ctrl+z","mac+meta+z"],t.undo,{checker:i}],[["ctrl+y","ctrl+shift+z","mac+meta+shift+z","ctrl+shift+Z","mac+meta+shift+Z"],t.redo,{checker:i}],[["Backspace","alt+Backspace","ctrl+Backspace","shift+Backspace","mac+Backspace","mac+alt+Backspace","mac+ctrl+Backspace","Delete","ctrl+Delete","shift+Delete","mac+Delete"],t.delete,{checker:i}],[["Enter","mac+Enter"],t.addNewEditorFromKeyboard,{checker:(a,{target:l})=>!(l instanceof HTMLButtonElement)&&a.#j.contains(l)&&!a.isEnterHandled}],[[" ","mac+ "],t.addNewEditorFromKeyboard,{checker:(a,{target:l})=>!(l instanceof HTMLButtonElement)&&a.#j.contains(document.activeElement)}],[["Escape","mac+Escape"],t.unselectAll],[["ArrowLeft","mac+ArrowLeft"],t.translateSelectedEditors,{args:[-s,0],checker:r}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],t.translateSelectedEditors,{args:[-o,0],checker:r}],[["ArrowRight","mac+ArrowRight"],t.translateSelectedEditors,{args:[s,0],checker:r}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],t.translateSelectedEditors,{args:[o,0],checker:r}],[["ArrowUp","mac+ArrowUp"],t.translateSelectedEditors,{args:[0,-s],checker:r}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],t.translateSelectedEditors,{args:[0,-o],checker:r}],[["ArrowDown","mac+ArrowDown"],t.translateSelectedEditors,{args:[0,s],checker:r}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],t.translateSelectedEditors,{args:[0,o],checker:r}]]))}constructor(t,r,i,s,o,a,l,c,u,d,h){let f=this._signal=this.#e.signal;this.#j=t,this.#B=r,this.#i=i,this._eventBus=s,s._on("editingaction",this.onEditingAction.bind(this),{signal:f}),s._on("pagechanging",this.onPageChanging.bind(this),{signal:f}),s._on("scalechanging",this.onScaleChanging.bind(this),{signal:f}),s._on("rotationchanging",this.onRotationChanging.bind(this),{signal:f}),s._on("setpreference",this.onSetPreference.bind(this),{signal:f}),s._on("switchannotationeditorparams",p=>this.updateParams(p.type,p.value),{signal:f}),this.#ee(),this.#ie(),this.#G(),this.#s=o.annotationStorage,this.#m=o.filterFactory,this.#O=a,this.#_=l||null,this.#f=c,this.#g=u,this.#v=d,this.#P=h||null,this.viewParameters={realScale:Vr.PDF_TO_CSS_UNITS,rotation:0},this.isShiftKeyDown=!1}destroy(){this.#N?.resolve(),this.#N=null,this.#e?.abort(),this.#e=null,this._signal=null;for(let t of this.#r.values())t.destroy();this.#r.clear(),this.#n.clear(),this.#p.clear(),this.#t=null,this.#b.clear(),this.#c.destroy(),this.#i?.destroy(),this.#C?.hide(),this.#C=null,this.#y&&(clearTimeout(this.#y),this.#y=null),this.#L&&(clearTimeout(this.#L),this.#L=null)}combinedSignal(t){return AbortSignal.any([this._signal,t.signal])}get mlManager(){return this.#P}get useNewAltTextFlow(){return this.#g}get useNewAltTextWhenAddingImage(){return this.#v}get hcmFilter(){return ue(this,"hcmFilter",this.#O?this.#m.addHCMFilter(this.#O.foreground,this.#O.background):"none")}get direction(){return ue(this,"direction",getComputedStyle(this.#j).direction)}get highlightColors(){return ue(this,"highlightColors",this.#_?new Map(this.#_.split(",").map(t=>t.split("=").map(r=>r.trim()))):null)}get highlightColorNames(){return ue(this,"highlightColorNames",this.highlightColors?new Map(Array.from(this.highlightColors,t=>t.reverse())):null)}setMainHighlightColorPicker(t){this.#R=t}editAltText(t,r=!1){this.#i?.editAltText(this,t,r)}switchToMode(t,r){this._eventBus.on("annotationeditormodechanged",r,{once:!0,signal:this._signal}),this._eventBus.dispatch("showannotationeditorui",{source:this,mode:t})}setPreference(t,r){this._eventBus.dispatch("setpreference",{source:this,name:t,value:r})}onSetPreference({name:t,value:r}){switch(t){case"enableNewAltTextWhenAddingImage":this.#v=r;break}}onPageChanging({pageNumber:t}){this.#a=t-1}focusMainContainer(){this.#j.focus()}findParent(t,r){for(let i of this.#r.values()){let{x:s,y:o,width:a,height:l}=i.div.getBoundingClientRect();if(t>=s&&t<=s+a&&r>=o&&r<=o+l)return i}return null}disableUserSelect(t=!1){this.#B.classList.toggle("noUserSelect",t)}addShouldRescale(t){this.#p.add(t)}removeShouldRescale(t){this.#p.delete(t)}onScaleChanging({scale:t}){this.commitOrRemove(),this.viewParameters.realScale=t*Vr.PDF_TO_CSS_UNITS;for(let r of this.#p)r.onScaleChanging()}onRotationChanging({pagesRotation:t}){this.commitOrRemove(),this.viewParameters.rotation=t}#z({anchorNode:t}){return t.nodeType===Node.TEXT_NODE?t.parentElement:t}#q(t){let{currentLayer:r}=this;if(r.hasTextLayer(t))return r;for(let i of this.#r.values())if(i.hasTextLayer(t))return i;return null}highlightSelection(t=""){let r=document.getSelection();if(!r||r.isCollapsed)return;let{anchorNode:i,anchorOffset:s,focusNode:o,focusOffset:a}=r,l=r.toString(),u=this.#z(r).closest(".textLayer"),d=this.getSelectionBoxes(u);if(!d)return;r.empty();let h=this.#q(u),f=this.#S===ee.NONE,p=()=>{h?.createAndAddNewEditor({x:0,y:0},!1,{methodOfCreation:t,boxes:d,anchorNode:i,anchorOffset:s,focusNode:o,focusOffset:a,text:l}),f&&this.showAllEditors("highlight",!0,!0)};if(f){this.switchToMode(ee.HIGHLIGHT,p);return}p()}#Z(){let t=document.getSelection();if(!t||t.isCollapsed)return;let i=this.#z(t).closest(".textLayer"),s=this.getSelectionBoxes(i);s&&(this.#C||=new wm(this),this.#C.show(i,s,this.direction==="ltr"))}addToAnnotationStorage(t){!t.isEmpty()&&this.#s&&!this.#s.has(t.id)&&this.#s.setValue(t.id,t)}#J(){let t=document.getSelection();if(!t||t.isCollapsed){this.#T&&(this.#C?.hide(),this.#T=null,this.#k({hasSelectedText:!1}));return}let{anchorNode:r}=t;if(r===this.#T)return;let s=this.#z(t).closest(".textLayer");if(!s){this.#T&&(this.#C?.hide(),this.#T=null,this.#k({hasSelectedText:!1}));return}if(this.#C?.hide(),this.#T=r,this.#k({hasSelectedText:!0}),!(this.#S!==ee.HIGHLIGHT&&this.#S!==ee.NONE)&&(this.#S===ee.HIGHLIGHT&&this.showAllEditors("highlight",!0,!0),this.#E=this.isShiftKeyDown,!this.isShiftKeyDown)){let o=this.#S===ee.HIGHLIGHT?this.#q(s):null;o?.toggleDrawing();let a=new AbortController,l=this.combinedSignal(a),c=u=>{u.type==="pointerup"&&u.button!==0||(a.abort(),o?.toggleDrawing(!0),u.type==="pointerup"&&this.#W("main_toolbar"))};window.addEventListener("pointerup",c,{signal:l}),window.addEventListener("blur",c,{signal:l})}}#W(t=""){this.#S===ee.HIGHLIGHT?this.highlightSelection(t):this.#f&&this.#Z()}#ee(){document.addEventListener("selectionchange",this.#J.bind(this),{signal:this._signal})}#te(){if(this.#w)return;this.#w=new AbortController;let t=this.combinedSignal(this.#w);window.addEventListener("focus",this.focus.bind(this),{signal:t}),window.addEventListener("blur",this.blur.bind(this),{signal:t})}#ne(){this.#w?.abort(),this.#w=null}blur(){if(this.isShiftKeyDown=!1,this.#E&&(this.#E=!1,this.#W("main_toolbar")),!this.hasSelection)return;let{activeElement:t}=document;for(let r of this.#b)if(r.div.contains(t)){this.#x=[r,t],r._focusEventsAllowed=!1;break}}focus(){if(!this.#x)return;let[t,r]=this.#x;this.#x=null,r.addEventListener("focusin",()=>{t._focusEventsAllowed=!0},{once:!0,signal:this._signal}),r.focus()}#G(){if(this.#D)return;this.#D=new AbortController;let t=this.combinedSignal(this.#D);window.addEventListener("keydown",this.keydown.bind(this),{signal:t}),window.addEventListener("keyup",this.keyup.bind(this),{signal:t})}#re(){this.#D?.abort(),this.#D=null}#Y(){if(this.#u)return;this.#u=new AbortController;let t=this.combinedSignal(this.#u);document.addEventListener("copy",this.copy.bind(this),{signal:t}),document.addEventListener("cut",this.cut.bind(this),{signal:t}),document.addEventListener("paste",this.paste.bind(this),{signal:t})}#K(){this.#u?.abort(),this.#u=null}#ie(){let t=this._signal;document.addEventListener("dragover",this.dragOver.bind(this),{signal:t}),document.addEventListener("drop",this.drop.bind(this),{signal:t})}addEditListeners(){this.#G(),this.#Y()}removeEditListeners(){this.#re(),this.#K()}dragOver(t){for(let{type:r}of t.dataTransfer.items)for(let i of this.#h)if(i.isHandlingMimeForPasting(r)){t.dataTransfer.dropEffect="copy",t.preventDefault();return}}drop(t){for(let r of t.dataTransfer.items)for(let i of this.#h)if(i.isHandlingMimeForPasting(r.type)){i.paste(r,this.currentLayer),t.preventDefault();return}}copy(t){if(t.preventDefault(),this.#t?.commitOrRemove(),!this.hasSelection)return;let r=[];for(let i of this.#b){let s=i.serialize(!0);s&&r.push(s)}r.length!==0&&t.clipboardData.setData("application/pdfjs",JSON.stringify(r))}cut(t){this.copy(t),this.delete()}paste(t){return I(this,null,function*(){t.preventDefault();let{clipboardData:r}=t;for(let o of r.items)for(let a of this.#h)if(a.isHandlingMimeForPasting(o.type)){a.paste(o,this.currentLayer);return}let i=r.getData("application/pdfjs");if(!i)return;try{i=JSON.parse(i)}catch(o){oe(`paste: "${o.message}".`);return}if(!Array.isArray(i))return;this.unselectAll();let s=this.currentLayer;try{let o=[];for(let c of i){let u=yield s.deserialize(c);if(!u)return;o.push(u)}let a=()=>{for(let c of o)this.#X(c);this.#Q(o)},l=()=>{for(let c of o)c.remove()};this.addCommands({cmd:a,undo:l,mustExec:!0})}catch(o){oe(`paste: "${o.message}".`)}})}keydown(t){!this.isShiftKeyDown&&t.key==="Shift"&&(this.isShiftKeyDown=!0),this.#S!==ee.NONE&&!this.isEditorHandlingKeyboard&&n._keyboardManager.exec(this,t)}keyup(t){this.isShiftKeyDown&&t.key==="Shift"&&(this.isShiftKeyDown=!1,this.#E&&(this.#E=!1,this.#W("main_toolbar")))}onEditingAction({name:t}){switch(t){case"undo":case"redo":case"delete":case"selectAll":this[t]();break;case"highlightSelection":this.highlightSelection("context_menu");break}}#k(t){Object.entries(t).some(([i,s])=>this.#H[i]!==s)&&(this._eventBus.dispatch("annotationeditorstateschanged",{source:this,details:Object.assign(this.#H,t)}),this.#S===ee.HIGHLIGHT&&t.hasSelectedEditor===!1&&this.#U([[Y.HIGHLIGHT_FREE,!0]]))}#U(t){this._eventBus.dispatch("annotationeditorparamschanged",{source:this,details:t})}setEditingState(t){t?(this.#te(),this.#Y(),this.#k({isEditing:this.#S!==ee.NONE,isEmpty:this.#$(),hasSomethingToUndo:this.#c.hasSomethingToUndo(),hasSomethingToRedo:this.#c.hasSomethingToRedo(),hasSelectedEditor:!1})):(this.#ne(),this.#K(),this.#k({isEditing:!1}),this.disableUserSelect(!1))}registerEditorTypes(t){if(!this.#h){this.#h=t;for(let r of this.#h)this.#U(r.defaultPropertiesToUpdate)}}getId(){return this.#M.id}get currentLayer(){return this.#r.get(this.#a)}getLayer(t){return this.#r.get(t)}get currentPageIndex(){return this.#a}addLayer(t){this.#r.set(t.pageIndex,t),this.#I?t.enable():t.disable()}removeLayer(t){this.#r.delete(t.pageIndex)}updateMode(t,r=null,i=!1){return I(this,null,function*(){if(this.#S!==t&&!(this.#N&&(yield this.#N.promise,!this.#N))){if(this.#N=Promise.withResolvers(),this.#S=t,t===ee.NONE){this.setEditingState(!1),this.#oe(),this.#N.resolve();return}this.setEditingState(!0),yield this.#se(),this.unselectAll();for(let s of this.#r.values())s.updateMode(t);if(!r){i&&this.addNewEditorFromKeyboard(),this.#N.resolve();return}for(let s of this.#n.values())s.annotationElementId===r?(this.setSelected(s),s.enterInEditMode()):s.unselect();this.#N.resolve()}})}addNewEditorFromKeyboard(){this.currentLayer.canCreateNewEmptyEditor()&&this.currentLayer.addNewEditor()}updateToolbar(t){t!==this.#S&&this._eventBus.dispatch("switchannotationeditormode",{source:this,mode:t})}updateParams(t,r){if(this.#h){switch(t){case Y.CREATE:this.currentLayer.addNewEditor();return;case Y.HIGHLIGHT_DEFAULT_COLOR:this.#R?.updateColor(r);break;case Y.HIGHLIGHT_SHOW_ALL:this._eventBus.dispatch("reporttelemetry",{source:this,details:{type:"editing",data:{type:"highlight",action:"toggle_visibility"}}}),(this.#F||=new Map).set(t,r),this.showAllEditors("highlight",r);break}for(let i of this.#b)i.updateParams(t,r);for(let i of this.#h)i.updateDefaultParams(t,r)}}showAllEditors(t,r,i=!1){for(let o of this.#n.values())o.editorType===t&&o.show(r);(this.#F?.get(Y.HIGHLIGHT_SHOW_ALL)??!0)!==r&&this.#U([[Y.HIGHLIGHT_SHOW_ALL,r]])}enableWaiting(t=!1){if(this.#A!==t){this.#A=t;for(let r of this.#r.values())t?r.disableClick():r.enableClick(),r.div.classList.toggle("waiting",t)}}#se(){return I(this,null,function*(){if(!this.#I){this.#I=!0;let t=[];for(let r of this.#r.values())t.push(r.enable());yield Promise.all(t);for(let r of this.#n.values())r.enable()}})}#oe(){if(this.unselectAll(),this.#I){this.#I=!1;for(let t of this.#r.values())t.disable();for(let t of this.#n.values())t.disable()}}getEditors(t){let r=[];for(let i of this.#n.values())i.pageIndex===t&&r.push(i);return r}getEditor(t){return this.#n.get(t)}addEditor(t){this.#n.set(t.id,t)}removeEditor(t){t.div.contains(document.activeElement)&&(this.#y&&clearTimeout(this.#y),this.#y=setTimeout(()=>{this.focusMainContainer(),this.#y=null},0)),this.#n.delete(t.id),this.unselect(t),(!t.annotationElementId||!this.#d.has(t.annotationElementId))&&this.#s?.remove(t.id)}addDeletedAnnotationElement(t){this.#d.add(t.annotationElementId),this.addChangedExistingAnnotation(t),t.deleted=!0}isDeletedAnnotationElement(t){return this.#d.has(t)}removeDeletedAnnotationElement(t){this.#d.delete(t.annotationElementId),this.removeChangedExistingAnnotation(t),t.deleted=!1}#X(t){let r=this.#r.get(t.pageIndex);r?r.addOrRebuild(t):(this.addEditor(t),this.addToAnnotationStorage(t))}setActiveEditor(t){this.#t!==t&&(this.#t=t,t&&this.#U(t.propertiesToUpdate))}get#ae(){let t=null;for(t of this.#b);return t}updateUI(t){this.#ae===t&&this.#U(t.propertiesToUpdate)}toggleSelected(t){if(this.#b.has(t)){this.#b.delete(t),t.unselect(),this.#k({hasSelectedEditor:this.hasSelection});return}this.#b.add(t),t.select(),this.#U(t.propertiesToUpdate),this.#k({hasSelectedEditor:!0})}setSelected(t){for(let r of this.#b)r!==t&&r.unselect();this.#b.clear(),this.#b.add(t),t.select(),this.#U(t.propertiesToUpdate),this.#k({hasSelectedEditor:!0})}isSelected(t){return this.#b.has(t)}get firstSelectedEditor(){return this.#b.values().next().value}unselect(t){t.unselect(),this.#b.delete(t),this.#k({hasSelectedEditor:this.hasSelection})}get hasSelection(){return this.#b.size!==0}get isEnterHandled(){return this.#b.size===1&&this.firstSelectedEditor.isEnterHandled}undo(){this.#c.undo(),this.#k({hasSomethingToUndo:this.#c.hasSomethingToUndo(),hasSomethingToRedo:!0,isEmpty:this.#$()})}redo(){this.#c.redo(),this.#k({hasSomethingToUndo:!0,hasSomethingToRedo:this.#c.hasSomethingToRedo(),isEmpty:this.#$()})}addCommands(t){this.#c.add(t),this.#k({hasSomethingToUndo:!0,hasSomethingToRedo:!1,isEmpty:this.#$()})}#$(){if(this.#n.size===0)return!0;if(this.#n.size===1)for(let t of this.#n.values())return t.isEmpty();return!1}delete(){if(this.commitOrRemove(),!this.hasSelection)return;let t=[...this.#b],r=()=>{for(let s of t)s.remove()},i=()=>{for(let s of t)this.#X(s)};this.addCommands({cmd:r,undo:i,mustExec:!0})}commitOrRemove(){this.#t?.commitOrRemove()}hasSomethingToControl(){return this.#t||this.hasSelection}#Q(t){for(let r of this.#b)r.unselect();this.#b.clear();for(let r of t)r.isEmpty()||(this.#b.add(r),r.select());this.#k({hasSelectedEditor:this.hasSelection})}selectAll(){for(let t of this.#b)t.commit();this.#Q(this.#n.values())}unselectAll(){if(!(this.#t&&(this.#t.commitOrRemove(),this.#S!==ee.NONE))&&this.hasSelection){for(let t of this.#b)t.unselect();this.#b.clear(),this.#k({hasSelectedEditor:!1})}}translateSelectedEditors(t,r,i=!1){if(i||this.commitOrRemove(),!this.hasSelection)return;this.#V[0]+=t,this.#V[1]+=r;let[s,o]=this.#V,a=[...this.#b],l=1e3;this.#L&&clearTimeout(this.#L),this.#L=setTimeout(()=>{this.#L=null,this.#V[0]=this.#V[1]=0,this.addCommands({cmd:()=>{for(let c of a)this.#n.has(c.id)&&c.translateInPage(s,o)},undo:()=>{for(let c of a)this.#n.has(c.id)&&c.translateInPage(-s,-o)},mustExec:!1})},l);for(let c of a)c.translateInPage(t,r)}setUpDragSession(){if(this.hasSelection){this.disableUserSelect(!0),this.#o=new Map;for(let t of this.#b)this.#o.set(t,{savedX:t.x,savedY:t.y,savedPageIndex:t.pageIndex,newX:0,newY:0,newPageIndex:-1})}}endDragSession(){if(!this.#o)return!1;this.disableUserSelect(!1);let t=this.#o;this.#o=null;let r=!1;for(let[{x:s,y:o,pageIndex:a},l]of t)l.newX=s,l.newY=o,l.newPageIndex=a,r||=s!==l.savedX||o!==l.savedY||a!==l.savedPageIndex;if(!r)return!1;let i=(s,o,a,l)=>{if(this.#n.has(s.id)){let c=this.#r.get(l);c?s._setParentAndPosition(c,o,a):(s.pageIndex=l,s.x=o,s.y=a)}};return this.addCommands({cmd:()=>{for(let[s,{newX:o,newY:a,newPageIndex:l}]of t)i(s,o,a,l)},undo:()=>{for(let[s,{savedX:o,savedY:a,savedPageIndex:l}]of t)i(s,o,a,l)},mustExec:!0}),!0}dragSelectedEditors(t,r){if(this.#o)for(let i of this.#o.keys())i.drag(t,r)}rebuild(t){if(t.parent===null){let r=this.getLayer(t.pageIndex);r?(r.changeParent(t),r.addOrRebuild(t)):(this.addEditor(t),this.addToAnnotationStorage(t),t.rebuild())}else t.parent.addOrRebuild(t)}get isEditorHandlingKeyboard(){return this.getActive()?.shouldGetKeyboardEvents()||this.#b.size===1&&this.firstSelectedEditor.shouldGetKeyboardEvents()}isActive(t){return this.#t===t}getActive(){return this.#t}getMode(){return this.#S}get imageManager(){return ue(this,"imageManager",new Cm)}getSelectionBoxes(t){if(!t)return null;let r=document.getSelection();for(let u=0,d=r.rangeCount;u<d;u++)if(!t.contains(r.getRangeAt(u).commonAncestorContainer))return null;let{x:i,y:s,width:o,height:a}=t.getBoundingClientRect(),l;switch(t.getAttribute("data-main-rotation")){case"90":l=(u,d,h,f)=>({x:(d-s)/a,y:1-(u+h-i)/o,width:f/a,height:h/o});break;case"180":l=(u,d,h,f)=>({x:1-(u+h-i)/o,y:1-(d+f-s)/a,width:h/o,height:f/a});break;case"270":l=(u,d,h,f)=>({x:1-(d+f-s)/a,y:(u-i)/o,width:f/a,height:h/o});break;default:l=(u,d,h,f)=>({x:(u-i)/o,y:(d-s)/a,width:h/o,height:f/a});break}let c=[];for(let u=0,d=r.rangeCount;u<d;u++){let h=r.getRangeAt(u);if(!h.collapsed)for(let{x:f,y:p,width:g,height:v}of h.getClientRects())g===0||v===0||c.push(l(f,p,g,v))}return c.length===0?null:c}addChangedExistingAnnotation({annotationElementId:t,id:r}){(this.#l||=new Map).set(t,r)}removeChangedExistingAnnotation({annotationElementId:t}){this.#l?.delete(t)}renderAnnotationElement(t){let r=this.#l?.get(t.data.id);if(!r)return;let i=this.#s.getRawValue(r);i&&(this.#S===ee.NONE&&!i.hasBeenModified||i.renderAnnotationElement(t))}}return n})(),MA=(()=>{class n{#e=null;#t=!1;#n=null;#r=null;#i=null;#s=null;#l=!1;#c=null;#u=null;#a=null;#d=null;#o=!1;static#h=null;static _l10n=null;constructor(t){this.#u=t,this.#o=t._uiManager.useNewAltTextFlow,n.#h||=Object.freeze({added:"pdfjs-editor-new-alt-text-added-button","added-label":"pdfjs-editor-new-alt-text-added-button-label",missing:"pdfjs-editor-new-alt-text-missing-button","missing-label":"pdfjs-editor-new-alt-text-missing-button-label",review:"pdfjs-editor-new-alt-text-to-review-button","review-label":"pdfjs-editor-new-alt-text-to-review-button-label"})}static initialize(t){n._l10n??=t}render(){return I(this,null,function*(){let t=this.#n=document.createElement("button");t.className="altText",t.tabIndex="0";let r=this.#r=document.createElement("span");t.append(r),this.#o?(t.classList.add("new"),t.setAttribute("data-l10n-id",n.#h.missing),r.setAttribute("data-l10n-id",n.#h["missing-label"])):(t.setAttribute("data-l10n-id","pdfjs-editor-alt-text-button"),r.setAttribute("data-l10n-id","pdfjs-editor-alt-text-button-label"));let i=this.#u._uiManager._signal;t.addEventListener("contextmenu",en,{signal:i}),t.addEventListener("pointerdown",o=>o.stopPropagation(),{signal:i});let s=o=>{o.preventDefault(),this.#u._uiManager.editAltText(this.#u),this.#o&&this.#u._reportTelemetry({action:"pdfjs.image.alt_text.image_status_label_clicked",data:{label:this.#p}})};return t.addEventListener("click",s,{capture:!0,signal:i}),t.addEventListener("keydown",o=>{o.target===t&&o.key==="Enter"&&(this.#l=!0,s(o))},{signal:i}),yield this.#f(),t})}get#p(){return this.#e&&"added"||this.#e===null&&this.guessedText&&"review"||"missing"}finish(){this.#n&&(this.#n.focus({focusVisible:this.#l}),this.#l=!1)}isEmpty(){return this.#o?this.#e===null:!this.#e&&!this.#t}hasData(){return this.#o?this.#e!==null||!!this.#a:this.isEmpty()}get guessedText(){return this.#a}setGuessedText(t){return I(this,null,function*(){this.#e===null&&(this.#a=t,this.#d=yield n._l10n.get("pdfjs-editor-new-alt-text-generated-alt-text-with-disclaimer",{generatedAltText:t}),this.#f())})}toggleAltTextBadge(t=!1){if(!this.#o||this.#e){this.#c?.remove(),this.#c=null;return}if(!this.#c){let r=this.#c=document.createElement("div");r.className="noAltTextBadge",this.#u.div.append(r)}this.#c.classList.toggle("hidden",!t)}serialize(t){let r=this.#e;return!t&&this.#a===r&&(r=this.#d),{altText:r,decorative:this.#t,guessedText:this.#a,textWithDisclaimer:this.#d}}get data(){return{altText:this.#e,decorative:this.#t}}set data({altText:t,decorative:r,guessedText:i,textWithDisclaimer:s,cancel:o=!1}){i&&(this.#a=i,this.#d=s),!(this.#e===t&&this.#t===r)&&(o||(this.#e=t,this.#t=r),this.#f())}toggle(t=!1){this.#n&&(!t&&this.#s&&(clearTimeout(this.#s),this.#s=null),this.#n.disabled=!t)}shown(){this.#u._reportTelemetry({action:"pdfjs.image.alt_text.image_status_label_displayed",data:{label:this.#p}})}destroy(){this.#n?.remove(),this.#n=null,this.#r=null,this.#i=null,this.#c?.remove(),this.#c=null}#f(){return I(this,null,function*(){let t=this.#n;if(!t)return;if(this.#o){if(t.classList.toggle("done",!!this.#e),t.setAttribute("data-l10n-id",n.#h[this.#p]),this.#r?.setAttribute("data-l10n-id",n.#h[`${this.#p}-label`]),!this.#e){this.#i?.remove();return}}else{if(!this.#e&&!this.#t){t.classList.remove("done"),this.#i?.remove();return}t.classList.add("done"),t.setAttribute("data-l10n-id","pdfjs-editor-alt-text-edit-button")}let r=this.#i;if(!r){this.#i=r=document.createElement("span"),r.className="tooltip",r.setAttribute("role","tooltip"),r.id=`alt-text-tooltip-${this.#u.id}`;let s=100,o=this.#u._uiManager._signal;o.addEventListener("abort",()=>{clearTimeout(this.#s),this.#s=null},{once:!0}),t.addEventListener("mouseenter",()=>{this.#s=setTimeout(()=>{this.#s=null,this.#i.classList.add("show"),this.#u._reportTelemetry({action:"alt_text_tooltip"})},s)},{signal:o}),t.addEventListener("mouseleave",()=>{this.#s&&(clearTimeout(this.#s),this.#s=null),this.#i?.classList.remove("show")},{signal:o})}this.#t?r.setAttribute("data-l10n-id","pdfjs-editor-alt-text-decorative-tooltip"):(r.removeAttribute("data-l10n-id"),r.textContent=this.#e),r.parentNode||t.append(r),this.#u.getImageForAltText()?.setAttribute("aria-describedby",r.id)})}}return n})(),be=class n{#e=null;#t=null;#n=null;#r=!1;#i=!1;#s=null;#l=null;#c=null;#u="";#a=!1;#d=null;#o=!1;#h=!1;#p=!1;#f=null;#g=0;#v=0;#m=null;_editToolbar=null;_initialOptions=Object.create(null);_initialData=null;_isVisible=!0;_uiManager=null;_focusEventsAllowed=!0;static _l10n=null;static _l10nResizer=null;#y=!1;#w=n._zIndex++;static _borderLineWidth=-1;static _colorManager=new Am;static _zIndex=1;static _telemetryTimeout=1e3;static get _resizerKeyboardManager(){let e=n.prototype._resizeWithKeyboard,t=pa.TRANSLATE_SMALL,r=pa.TRANSLATE_BIG;return ue(this,"_resizerKeyboardManager",new Ai([[["ArrowLeft","mac+ArrowLeft"],e,{args:[-t,0]}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],e,{args:[-r,0]}],[["ArrowRight","mac+ArrowRight"],e,{args:[t,0]}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],e,{args:[r,0]}],[["ArrowUp","mac+ArrowUp"],e,{args:[0,-t]}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],e,{args:[0,-r]}],[["ArrowDown","mac+ArrowDown"],e,{args:[0,t]}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],e,{args:[0,r]}],[["Escape","mac+Escape"],n.prototype._stopResizingWithKeyboard]]))}constructor(e){this.parent=e.parent,this.id=e.id,this.width=this.height=null,this.pageIndex=e.parent.pageIndex,this.name=e.name,this.div=null,this._uiManager=e.uiManager,this.annotationElementId=null,this._willKeepAspectRatio=!1,this._initialOptions.isCentered=e.isCentered,this._structTreeParentId=null;let{rotation:t,rawDims:{pageWidth:r,pageHeight:i,pageX:s,pageY:o}}=this.parent.viewport;this.rotation=t,this.pageRotation=(360+t-this._uiManager.viewParameters.rotation)%360,this.pageDimensions=[r,i],this.pageTranslation=[s,o];let[a,l]=this.parentDimensions;this.x=e.x/a,this.y=e.y/l,this.isAttachedToDOM=!1,this.deleted=!1}get editorType(){return Object.getPrototypeOf(this).constructor._type}static get _defaultLineColor(){return ue(this,"_defaultLineColor",this._colorManager.getHexCode("CanvasText"))}static deleteAnnotationElement(e){let t=new Sm({id:e.parent.getNextId(),parent:e.parent,uiManager:e._uiManager});t.annotationElementId=e.annotationElementId,t.deleted=!0,t._uiManager.addToAnnotationStorage(t)}static initialize(e,t){if(n._l10n??=e,n._l10nResizer||=Object.freeze({topLeft:"pdfjs-editor-resizer-top-left",topMiddle:"pdfjs-editor-resizer-top-middle",topRight:"pdfjs-editor-resizer-top-right",middleRight:"pdfjs-editor-resizer-middle-right",bottomRight:"pdfjs-editor-resizer-bottom-right",bottomMiddle:"pdfjs-editor-resizer-bottom-middle",bottomLeft:"pdfjs-editor-resizer-bottom-left",middleLeft:"pdfjs-editor-resizer-middle-left"}),n._borderLineWidth!==-1)return;let r=getComputedStyle(document.documentElement);n._borderLineWidth=parseFloat(r.getPropertyValue("--outline-width"))||0}static updateDefaultParams(e,t){}static get defaultPropertiesToUpdate(){return[]}static isHandlingMimeForPasting(e){return!1}static paste(e,t){Te("Not implemented")}get propertiesToUpdate(){return[]}get _isDraggable(){return this.#y}set _isDraggable(e){this.#y=e,this.div?.classList.toggle("draggable",e)}get isEnterHandled(){return!0}center(){let[e,t]=this.pageDimensions;switch(this.parentRotation){case 90:this.x-=this.height*t/(e*2),this.y+=this.width*e/(t*2);break;case 180:this.x+=this.width/2,this.y+=this.height/2;break;case 270:this.x+=this.height*t/(e*2),this.y-=this.width*e/(t*2);break;default:this.x-=this.width/2,this.y-=this.height/2;break}this.fixAndSetPosition()}addCommands(e){this._uiManager.addCommands(e)}get currentLayer(){return this._uiManager.currentLayer}setInBackground(){this.div.style.zIndex=0}setInForeground(){this.div.style.zIndex=this.#w}setParent(e){e!==null?(this.pageIndex=e.pageIndex,this.pageDimensions=e.pageDimensions):this.#F(),this.parent=e}focusin(e){this._focusEventsAllowed&&(this.#a?this.#a=!1:this.parent.setSelected(this))}focusout(e){!this._focusEventsAllowed||!this.isAttachedToDOM||e.relatedTarget?.closest(`#${this.id}`)||(e.preventDefault(),this.parent?.isMultipleSelection||this.commitOrRemove())}commitOrRemove(){this.isEmpty()?this.remove():this.commit()}commit(){this.addToAnnotationStorage()}addToAnnotationStorage(){this._uiManager.addToAnnotationStorage(this)}setAt(e,t,r,i){let[s,o]=this.parentDimensions;[r,i]=this.screenToPageTranslation(r,i),this.x=(e+r)/s,this.y=(t+i)/o,this.fixAndSetPosition()}#_([e,t],r,i){[r,i]=this.screenToPageTranslation(r,i),this.x+=r/e,this.y+=i/t,this.fixAndSetPosition()}translate(e,t){this.#_(this.parentDimensions,e,t)}translateInPage(e,t){this.#d||=[this.x,this.y],this.#_(this.pageDimensions,e,t),this.div.scrollIntoView({block:"nearest"})}drag(e,t){this.#d||=[this.x,this.y];let[r,i]=this.parentDimensions;if(this.x+=e/r,this.y+=t/i,this.parent&&(this.x<0||this.x>1||this.y<0||this.y>1)){let{x:c,y:u}=this.div.getBoundingClientRect();this.parent.findNewParent(this,c,u)&&(this.x-=Math.floor(this.x),this.y-=Math.floor(this.y))}let{x:s,y:o}=this,[a,l]=this.getBaseTranslation();s+=a,o+=l,this.div.style.left=`${(100*s).toFixed(2)}%`,this.div.style.top=`${(100*o).toFixed(2)}%`,this.div.scrollIntoView({block:"nearest"})}get _hasBeenMoved(){return!!this.#d&&(this.#d[0]!==this.x||this.#d[1]!==this.y)}getBaseTranslation(){let[e,t]=this.parentDimensions,{_borderLineWidth:r}=n,i=r/e,s=r/t;switch(this.rotation){case 90:return[-i,s];case 180:return[i,s];case 270:return[i,-s];default:return[-i,-s]}}get _mustFixPosition(){return!0}fixAndSetPosition(e=this.rotation){let[t,r]=this.pageDimensions,{x:i,y:s,width:o,height:a}=this;if(o*=t,a*=r,i*=t,s*=r,this._mustFixPosition)switch(e){case 0:i=Math.max(0,Math.min(t-o,i)),s=Math.max(0,Math.min(r-a,s));break;case 90:i=Math.max(0,Math.min(t-a,i)),s=Math.min(r,Math.max(o,s));break;case 180:i=Math.min(t,Math.max(o,i)),s=Math.min(r,Math.max(a,s));break;case 270:i=Math.min(t,Math.max(a,i)),s=Math.max(0,Math.min(r-o,s));break}this.x=i/=t,this.y=s/=r;let[l,c]=this.getBaseTranslation();i+=l,s+=c;let{style:u}=this.div;u.left=`${(100*i).toFixed(2)}%`,u.top=`${(100*s).toFixed(2)}%`,this.moveInDOM()}static#E(e,t,r){switch(r){case 90:return[t,-e];case 180:return[-e,-t];case 270:return[-t,e];default:return[e,t]}}screenToPageTranslation(e,t){return n.#E(e,t,this.parentRotation)}pageTranslationToScreen(e,t){return n.#E(e,t,360-this.parentRotation)}#C(e){switch(e){case 90:{let[t,r]=this.pageDimensions;return[0,-t/r,r/t,0]}case 180:return[-1,0,0,-1];case 270:{let[t,r]=this.pageDimensions;return[0,t/r,-r/t,0]}default:return[1,0,0,1]}}get parentScale(){return this._uiManager.viewParameters.realScale}get parentRotation(){return(this._uiManager.viewParameters.rotation+this.pageRotation)%360}get parentDimensions(){let{parentScale:e,pageDimensions:[t,r]}=this;return[t*e,r*e]}setDims(e,t){let[r,i]=this.parentDimensions;this.div.style.width=`${(100*e/r).toFixed(2)}%`,this.#i||(this.div.style.height=`${(100*t/i).toFixed(2)}%`)}fixDims(){let{style:e}=this.div,{height:t,width:r}=e,i=r.endsWith("%"),s=!this.#i&&t.endsWith("%");if(i&&s)return;let[o,a]=this.parentDimensions;i||(e.width=`${(100*parseFloat(r)/o).toFixed(2)}%`),!this.#i&&!s&&(e.height=`${(100*parseFloat(t)/a).toFixed(2)}%`)}getInitialTranslation(){return[0,0]}#M(){if(this.#s)return;this.#s=document.createElement("div"),this.#s.classList.add("resizers");let e=this._willKeepAspectRatio?["topLeft","topRight","bottomRight","bottomLeft"]:["topLeft","topMiddle","topRight","middleRight","bottomRight","bottomMiddle","bottomLeft","middleLeft"],t=this._uiManager._signal;for(let r of e){let i=document.createElement("div");this.#s.append(i),i.classList.add("resizer",r),i.setAttribute("data-resizer-name",r),i.addEventListener("pointerdown",this.#I.bind(this,r),{signal:t}),i.addEventListener("contextmenu",en,{signal:t}),i.tabIndex=-1}this.div.prepend(this.#s)}#I(e,t){t.preventDefault();let{isMac:r}=dt.platform;if(t.button!==0||t.ctrlKey&&r)return;this.#n?.toggle(!1);let i=this._isDraggable;this._isDraggable=!1;let s=new AbortController,o=this._uiManager.combinedSignal(s);this.parent.togglePointerEvents(!1),window.addEventListener("pointermove",this.#D.bind(this,e),{passive:!0,capture:!0,signal:o}),window.addEventListener("contextmenu",en,{signal:o});let a=this.x,l=this.y,c=this.width,u=this.height,d=this.parent.div.style.cursor,h=this.div.style.cursor;this.div.style.cursor=this.parent.div.style.cursor=window.getComputedStyle(t.target).cursor;let f=()=>{s.abort(),this.parent.togglePointerEvents(!0),this.#n?.toggle(!0),this._isDraggable=i,this.parent.div.style.cursor=d,this.div.style.cursor=h,this.#A(a,l,c,u)};window.addEventListener("pointerup",f,{signal:o}),window.addEventListener("blur",f,{signal:o})}#A(e,t,r,i){let s=this.x,o=this.y,a=this.width,l=this.height;s===e&&o===t&&a===r&&l===i||this.addCommands({cmd:()=>{this.width=a,this.height=l,this.x=s,this.y=o;let[c,u]=this.parentDimensions;this.setDims(c*a,u*l),this.fixAndSetPosition()},undo:()=>{this.width=r,this.height=i,this.x=e,this.y=t;let[c,u]=this.parentDimensions;this.setDims(c*r,u*i),this.fixAndSetPosition()},mustExec:!0})}#D(e,t){let[r,i]=this.parentDimensions,s=this.x,o=this.y,a=this.width,l=this.height,c=n.MIN_SIZE/r,u=n.MIN_SIZE/i,d=V=>Math.round(V*1e4)/1e4,h=this.#C(this.rotation),f=(V,te)=>[h[0]*V+h[2]*te,h[1]*V+h[3]*te],p=this.#C(360-this.rotation),g=(V,te)=>[p[0]*V+p[2]*te,p[1]*V+p[3]*te],v,m,y=!1,w=!1;switch(e){case"topLeft":y=!0,v=(V,te)=>[0,0],m=(V,te)=>[V,te];break;case"topMiddle":v=(V,te)=>[V/2,0],m=(V,te)=>[V/2,te];break;case"topRight":y=!0,v=(V,te)=>[V,0],m=(V,te)=>[0,te];break;case"middleRight":w=!0,v=(V,te)=>[V,te/2],m=(V,te)=>[0,te/2];break;case"bottomRight":y=!0,v=(V,te)=>[V,te],m=(V,te)=>[0,0];break;case"bottomMiddle":v=(V,te)=>[V/2,te],m=(V,te)=>[V/2,0];break;case"bottomLeft":y=!0,v=(V,te)=>[0,te],m=(V,te)=>[V,0];break;case"middleLeft":w=!0,v=(V,te)=>[0,te/2],m=(V,te)=>[V,te/2];break}let b=v(a,l),C=m(a,l),S=f(...C),T=d(s+S[0]),M=d(o+S[1]),E=1,x=1,[N,pe]=this.screenToPageTranslation(t.movementX,t.movementY);if([N,pe]=g(N/r,pe/i),y){let V=Math.hypot(a,l);E=x=Math.max(Math.min(Math.hypot(C[0]-b[0]-N,C[1]-b[1]-pe)/V,1/a,1/l),c/a,u/l)}else w?E=Math.max(c,Math.min(1,Math.abs(C[0]-b[0]-N)))/a:x=Math.max(u,Math.min(1,Math.abs(C[1]-b[1]-pe)))/l;let de=d(a*E),ce=d(l*x);S=f(...m(de,ce));let Ee=T-S[0],je=M-S[1];this.width=de,this.height=ce,this.x=Ee,this.y=je,this.setDims(r*de,i*ce),this.fixAndSetPosition()}altTextFinish(){this.#n?.finish()}addEditToolbar(){return I(this,null,function*(){return this._editToolbar||this.#h?this._editToolbar:(this._editToolbar=new bm(this),this.div.append(this._editToolbar.render()),this.#n&&(yield this._editToolbar.addAltText(this.#n)),this._editToolbar)})}removeEditToolbar(){this._editToolbar&&(this._editToolbar.remove(),this._editToolbar=null,this.#n?.destroy())}addContainer(e){let t=this._editToolbar?.div;t?t.before(e):this.div.append(e)}getClientDimensions(){return this.div.getBoundingClientRect()}addAltTextButton(){return I(this,null,function*(){this.#n||(MA.initialize(n._l10n),this.#n=new MA(this),this.#e&&(this.#n.data=this.#e,this.#e=null),yield this.addEditToolbar())})}get altTextData(){return this.#n?.data}set altTextData(e){this.#n&&(this.#n.data=e)}get guessedAltText(){return this.#n?.guessedText}setGuessedAltText(e){return I(this,null,function*(){yield this.#n?.setGuessedText(e)})}serializeAltText(e){return this.#n?.serialize(e)}hasAltText(){return!!this.#n&&!this.#n.isEmpty()}hasAltTextData(){return this.#n?.hasData()??!1}render(){this.div=document.createElement("div"),this.div.setAttribute("data-editor-rotation",(360-this.rotation)%360),this.div.className=this.name,this.div.setAttribute("id",this.id),this.div.tabIndex=this.#r?-1:0,this._isVisible||this.div.classList.add("hidden"),this.setInForeground(),this.#P();let[e,t]=this.parentDimensions;this.parentRotation%180!==0&&(this.div.style.maxWidth=`${(100*t/e).toFixed(2)}%`,this.div.style.maxHeight=`${(100*e/t).toFixed(2)}%`);let[r,i]=this.getInitialTranslation();return this.translate(r,i),Du(this,this.div,["pointerdown"]),this.div}pointerdown(e){let{isMac:t}=dt.platform;if(e.button!==0||e.ctrlKey&&t){e.preventDefault();return}if(this.#a=!0,this._isDraggable){this.#R(e);return}this.#x(e)}get isSelected(){return this._uiManager.isSelected(this)}#x(e){let{isMac:t}=dt.platform;e.ctrlKey&&!t||e.shiftKey||e.metaKey&&t?this.parent.toggleSelected(this):this.parent.setSelected(this)}#R(e){let{isSelected:t}=this;this._uiManager.setUpDragSession();let r=new AbortController,i=this._uiManager.combinedSignal(r);if(t){this.div.classList.add("moving"),this.#g=e.clientX,this.#v=e.clientY;let o=a=>{let{clientX:l,clientY:c}=a,[u,d]=this.screenToPageTranslation(l-this.#g,c-this.#v);this.#g=l,this.#v=c,this._uiManager.dragSelectedEditors(u,d)};window.addEventListener("pointermove",o,{passive:!0,capture:!0,signal:i})}let s=()=>{r.abort(),t&&this.div.classList.remove("moving"),this.#a=!1,this._uiManager.endDragSession()||this.#x(e)};window.addEventListener("pointerup",s,{signal:i}),window.addEventListener("blur",s,{signal:i})}moveInDOM(){this.#f&&clearTimeout(this.#f),this.#f=setTimeout(()=>{this.#f=null,this.parent?.moveEditorInDOM(this)},0)}_setParentAndPosition(e,t,r){e.changeParent(this),this.x=t,this.y=r,this.fixAndSetPosition()}getRect(e,t,r=this.rotation){let i=this.parentScale,[s,o]=this.pageDimensions,[a,l]=this.pageTranslation,c=e/i,u=t/i,d=this.x*s,h=this.y*o,f=this.width*s,p=this.height*o;switch(r){case 0:return[d+c+a,o-h-u-p+l,d+c+f+a,o-h-u+l];case 90:return[d+u+a,o-h+c+l,d+u+p+a,o-h+c+f+l];case 180:return[d-c-f+a,o-h+u+l,d-c+a,o-h+u+p+l];case 270:return[d-u-p+a,o-h-c-f+l,d-u+a,o-h-c+l];default:throw new Error("Invalid rotation")}}getRectInCurrentCoords(e,t){let[r,i,s,o]=e,a=s-r,l=o-i;switch(this.rotation){case 0:return[r,t-o,a,l];case 90:return[r,t-i,l,a];case 180:return[s,t-i,a,l];case 270:return[s,t-o,l,a];default:throw new Error("Invalid rotation")}}onceAdded(){}isEmpty(){return!1}enableEditMode(){this.#h=!0}disableEditMode(){this.#h=!1}isInEditMode(){return this.#h}shouldGetKeyboardEvents(){return this.#p}needsToBeRebuilt(){return this.div&&!this.isAttachedToDOM}#P(){if(this.#c||!this.div)return;this.#c=new AbortController;let e=this._uiManager.combinedSignal(this.#c);this.div.addEventListener("focusin",this.focusin.bind(this),{signal:e}),this.div.addEventListener("focusout",this.focusout.bind(this),{signal:e})}rebuild(){this.#P()}rotate(e){}serializeDeleted(){return{id:this.annotationElementId,deleted:!0,pageIndex:this.pageIndex,popupRef:this._initialData?.popupRef||""}}serialize(e=!1,t=null){Te("An editor must be serializable")}static deserialize(e,t,r){return I(this,null,function*(){let i=new this.prototype.constructor({parent:t,id:t.getNextId(),uiManager:r});i.rotation=e.rotation,i.#e=e.accessibilityData;let[s,o]=i.pageDimensions,[a,l,c,u]=i.getRectInCurrentCoords(e.rect,o);return i.x=a/s,i.y=l/o,i.width=c/s,i.height=u/o,i})}get hasBeenModified(){return!!this.annotationElementId&&(this.deleted||this.serialize()!==null)}remove(){if(this.#c?.abort(),this.#c=null,this.isEmpty()||this.commit(),this.parent?this.parent.remove(this):this._uiManager.removeEditor(this),this.#f&&(clearTimeout(this.#f),this.#f=null),this.#F(),this.removeEditToolbar(),this.#m){for(let e of this.#m.values())clearTimeout(e);this.#m=null}this.parent=null}get isResizable(){return!1}makeResizable(){this.isResizable&&(this.#M(),this.#s.classList.remove("hidden"),Du(this,this.div,["keydown"]))}get toolbarPosition(){return null}keydown(e){if(!this.isResizable||e.target!==this.div||e.key!=="Enter")return;this._uiManager.setSelected(this),this.#l={savedX:this.x,savedY:this.y,savedWidth:this.width,savedHeight:this.height};let t=this.#s.children;if(!this.#t){this.#t=Array.from(t);let o=this.#S.bind(this),a=this.#b.bind(this),l=this._uiManager._signal;for(let c of this.#t){let u=c.getAttribute("data-resizer-name");c.setAttribute("role","spinbutton"),c.addEventListener("keydown",o,{signal:l}),c.addEventListener("blur",a,{signal:l}),c.addEventListener("focus",this.#T.bind(this,u),{signal:l}),c.setAttribute("data-l10n-id",n._l10nResizer[u])}}let r=this.#t[0],i=0;for(let o of t){if(o===r)break;i++}let s=(360-this.rotation+this.parentRotation)%360/90*(this.#t.length/4);if(s!==i){if(s<i)for(let a=0;a<i-s;a++)this.#s.append(this.#s.firstChild);else if(s>i)for(let a=0;a<s-i;a++)this.#s.firstChild.before(this.#s.lastChild);let o=0;for(let a of t){let c=this.#t[o++].getAttribute("data-resizer-name");a.setAttribute("data-l10n-id",n._l10nResizer[c])}}this.#O(0),this.#p=!0,this.#s.firstChild.focus({focusVisible:!0}),e.preventDefault(),e.stopImmediatePropagation()}#S(e){n._resizerKeyboardManager.exec(this,e)}#b(e){this.#p&&e.relatedTarget?.parentNode!==this.#s&&this.#F()}#T(e){this.#u=this.#p?e:""}#O(e){if(this.#t)for(let t of this.#t)t.tabIndex=e}_resizeWithKeyboard(e,t){this.#p&&this.#D(this.#u,{movementX:e,movementY:t})}#F(){if(this.#p=!1,this.#O(-1),this.#l){let{savedX:e,savedY:t,savedWidth:r,savedHeight:i}=this.#l;this.#A(e,t,r,i),this.#l=null}}_stopResizingWithKeyboard(){this.#F(),this.div.focus()}select(){if(this.makeResizable(),this.div?.classList.add("selectedEditor"),!this._editToolbar){this.addEditToolbar().then(()=>{this.div?.classList.contains("selectedEditor")&&this._editToolbar?.show()});return}this._editToolbar?.show(),this.#n?.toggleAltTextBadge(!1)}unselect(){this.#s?.classList.add("hidden"),this.div?.classList.remove("selectedEditor"),this.div?.contains(document.activeElement)&&this._uiManager.currentLayer.div.focus({preventScroll:!0}),this._editToolbar?.hide(),this.#n?.toggleAltTextBadge(!0)}updateParams(e,t){}disableEditing(){}enableEditing(){}enterInEditMode(){}getImageForAltText(){return null}get contentDiv(){return this.div}get isEditing(){return this.#o}set isEditing(e){this.#o=e,this.parent&&(e?(this.parent.setSelected(this),this.parent.setActiveEditor(this)):this.parent.setActiveEditor(null))}setAspectRatio(e,t){this.#i=!0;let r=e/t,{style:i}=this.div;i.aspectRatio=r,i.height="auto"}static get MIN_SIZE(){return 16}static canCreateNewEmptyEditor(){return!0}get telemetryInitialData(){return{action:"added"}}get telemetryFinalData(){return null}_reportTelemetry(e,t=!1){if(t){this.#m||=new Map;let{action:r}=e,i=this.#m.get(r);i&&clearTimeout(i),i=setTimeout(()=>{this._reportTelemetry(e),this.#m.delete(r),this.#m.size===0&&(this.#m=null)},n._telemetryTimeout),this.#m.set(r,i);return}e.type||=this.editorType,this._uiManager._eventBus.dispatch("reporttelemetry",{source:this,details:{type:"editing",data:e}})}show(e=this._isVisible){this.div.classList.toggle("hidden",!e),this._isVisible=e}enable(){this.div&&(this.div.tabIndex=0),this.#r=!1}disable(){this.div&&(this.div.tabIndex=-1),this.#r=!0}renderAnnotationElement(e){let t=e.container.querySelector(".annotationContent");if(!t)t=document.createElement("div"),t.classList.add("annotationContent",this.editorType),e.container.prepend(t);else if(t.nodeName==="CANVAS"){let r=t;t=document.createElement("div"),t.classList.add("annotationContent",this.editorType),r.before(t)}return t}resetAnnotationElement(e){let{firstChild:t}=e.container;t?.nodeName==="DIV"&&t.classList.contains("annotationContent")&&t.remove()}},Sm=class extends be{constructor(e){super(e),this.annotationElementId=e.annotationElementId,this.deleted=!0}serialize(){return this.serializeDeleted()}},RA=3285377520,Jt=4294901760,Bn=65535,Tu=class{constructor(e){this.h1=e?e&4294967295:RA,this.h2=e?e&4294967295:RA}update(e){let t,r;if(typeof e=="string"){t=new Uint8Array(e.length*2),r=0;for(let g=0,v=e.length;g<v;g++){let m=e.charCodeAt(g);m<=255?t[r++]=m:(t[r++]=m>>>8,t[r++]=m&255)}}else if(ArrayBuffer.isView(e))t=e.slice(),r=t.byteLength;else throw new Error("Invalid data format, must be a string or TypedArray.");let i=r>>2,s=r-i*4,o=new Uint32Array(t.buffer,0,i),a=0,l=0,c=this.h1,u=this.h2,d=3432918353,h=461845907,f=d&Bn,p=h&Bn;for(let g=0;g<i;g++)g&1?(a=o[g],a=a*d&Jt|a*f&Bn,a=a<<15|a>>>17,a=a*h&Jt|a*p&Bn,c^=a,c=c<<13|c>>>19,c=c*5+3864292196):(l=o[g],l=l*d&Jt|l*f&Bn,l=l<<15|l>>>17,l=l*h&Jt|l*p&Bn,u^=l,u=u<<13|u>>>19,u=u*5+3864292196);switch(a=0,s){case 3:a^=t[i*4+2]<<16;case 2:a^=t[i*4+1]<<8;case 1:a^=t[i*4],a=a*d&Jt|a*f&Bn,a=a<<15|a>>>17,a=a*h&Jt|a*p&Bn,i&1?c^=a:u^=a}this.h1=c,this.h2=u}hexdigest(){let e=this.h1,t=this.h2;return e^=t>>>1,e=e*3981806797&Jt|e*36045&Bn,t=t*4283543511&Jt|((t<<16|e>>>16)*2950163797&Jt)>>>16,e^=t>>>1,e=e*444984403&Jt|e*60499&Bn,t=t*3301882366&Jt|((t<<16|e>>>16)*3120437893&Jt)>>>16,e^=t>>>1,(e>>>0).toString(16).padStart(8,"0")+(t>>>0).toString(16).padStart(8,"0")}},xm=Object.freeze({map:null,hash:"",transfer:void 0}),ga=class{#e=!1;#t=null;#n=new Map;constructor(){this.onSetModified=null,this.onResetModified=null,this.onAnnotationEditor=null}getValue(e,t){let r=this.#n.get(e);return r===void 0?t:Object.assign(t,r)}getRawValue(e){return this.#n.get(e)}remove(e){if(this.#n.delete(e),this.#n.size===0&&this.resetModified(),typeof this.onAnnotationEditor=="function"){for(let t of this.#n.values())if(t instanceof be)return;this.onAnnotationEditor(null)}}setValue(e,t){let r=this.#n.get(e),i=!1;if(r!==void 0)for(let[s,o]of Object.entries(t))r[s]!==o&&(i=!0,r[s]=o);else i=!0,this.#n.set(e,t);i&&this.#r(),t instanceof be&&typeof this.onAnnotationEditor=="function"&&this.onAnnotationEditor(t.constructor._type)}has(e){return this.#n.has(e)}getAll(){return this.#n.size>0?kv(this.#n):null}setAll(e){for(let[t,r]of Object.entries(e))this.setValue(t,r)}get size(){return this.#n.size}#r(){this.#e||(this.#e=!0,typeof this.onSetModified=="function"&&this.onSetModified())}resetModified(){this.#e&&(this.#e=!1,typeof this.onResetModified=="function"&&this.onResetModified())}get print(){return new Mu(this)}get serializable(){if(this.#n.size===0)return xm;let e=new Map,t=new Tu,r=[],i=Object.create(null),s=!1;for(let[o,a]of this.#n){let l=a instanceof be?a.serialize(!1,i):a;l&&(e.set(o,l),t.update(`${o}:${JSON.stringify(l)}`),s||=!!l.bitmap)}if(s)for(let o of e.values())o.bitmap&&r.push(o.bitmap);return e.size>0?{map:e,hash:t.hexdigest(),transfer:r}:xm}get editorStats(){let e=null,t=new Map;for(let r of this.#n.values()){if(!(r instanceof be))continue;let i=r.telemetryFinalData;if(!i)continue;let{type:s}=i;t.has(s)||t.set(s,Object.getPrototypeOf(r).constructor),e||=Object.create(null);let o=e[s]||=new Map;for(let[a,l]of Object.entries(i)){if(a==="type")continue;let c=o.get(a);c||(c=new Map,o.set(a,c));let u=c.get(l)??0;c.set(l,u+1)}}for(let[r,i]of t)e[r]=i.computeTelemetryFinalData(e[r]);return e}resetModifiedIds(){this.#t=null}get modifiedIds(){if(this.#t)return this.#t;let e=[];for(let t of this.#n.values())!(t instanceof be)||!t.annotationElementId||!t.serialize()||e.push(t.annotationElementId);return this.#t={ids:new Set(e),hash:e.join(",")}}},Mu=class extends ga{#e;constructor(e){super();let{map:t,hash:r,transfer:i}=e.serializable,s=structuredClone(t,i?{transfer:i}:null);this.#e={map:s,hash:r,transfer:i}}get print(){Te("Should not call PrintAnnotationStorage.print")}get serializable(){return this.#e}get modifiedIds(){return ue(this,"modifiedIds",{ids:new Set,hash:""})}},Im=class{#e=new Set;constructor({ownerDocument:e=globalThis.document,styleElement:t=null}){this._document=e,this.nativeFontFaces=new Set,this.styleElement=null,this.loadingRequests=[],this.loadTestFontId=0}addNativeFontFace(e){this.nativeFontFaces.add(e),this._document.fonts.add(e)}removeNativeFontFace(e){this.nativeFontFaces.delete(e),this._document.fonts.delete(e)}insertRule(e){this.styleElement||(this.styleElement=this._document.createElement("style"),this._document.documentElement.getElementsByTagName("head")[0].append(this.styleElement));let t=this.styleElement.sheet;t.insertRule(e,t.cssRules.length)}clear(){for(let e of this.nativeFontFaces)this._document.fonts.delete(e);this.nativeFontFaces.clear(),this.#e.clear(),this.styleElement&&(this.styleElement.remove(),this.styleElement=null)}loadSystemFont(r){return I(this,arguments,function*({systemFontInfo:e,_inspectFont:t}){if(!(!e||this.#e.has(e.loadedName))){if(it(!this.disableFontFace,"loadSystemFont shouldn't be called when `disableFontFace` is set."),this.isFontLoadingAPISupported){let{loadedName:i,src:s,style:o}=e,a=new FontFace(i,s,o);this.addNativeFontFace(a);try{yield a.load(),this.#e.add(i),t?.(e)}catch{oe(`Cannot load system font: ${e.baseFontName}, installing it could help to improve PDF rendering.`),this.removeNativeFontFace(a)}return}Te("Not implemented: loadSystemFont without the Font Loading API.")}})}bind(e){return I(this,null,function*(){if(e.attached||e.missingFile&&!e.systemFontInfo)return;if(e.attached=!0,e.systemFontInfo){yield this.loadSystemFont(e);return}if(this.isFontLoadingAPISupported){let r=e.createNativeFontFace();if(r){this.addNativeFontFace(r);try{yield r.loaded}catch(i){throw oe(`Failed to load font '${r.family}': '${i}'.`),e.disableFontFace=!0,i}}return}let t=e.createFontFaceRule();if(t){if(this.insertRule(t),this.isSyncFontLoadingSupported)return;yield new Promise(r=>{let i=this._queueLoadingCallback(r);this._prepareFontLoadEvent(e,i)})}})}get isFontLoadingAPISupported(){let e=!!this._document?.fonts;return ue(this,"isFontLoadingAPISupported",e)}get isSyncFontLoadingSupported(){let e=!1;return(gt||typeof navigator<"u"&&typeof navigator?.userAgent=="string"&&/Mozilla\/5.0.*?rv:\d+.*? Gecko/.test(navigator.userAgent))&&(e=!0),ue(this,"isSyncFontLoadingSupported",e)}_queueLoadingCallback(e){function t(){for(it(!i.done,"completeRequest() cannot be called twice."),i.done=!0;r.length>0&&r[0].done;){let s=r.shift();setTimeout(s.callback,0)}}let{loadingRequests:r}=this,i={done:!1,complete:t,callback:e};return r.push(i),i}get _loadTestFont(){let e=atob("T1RUTwALAIAAAwAwQ0ZGIDHtZg4AAAOYAAAAgUZGVE1lkzZwAAAEHAAAABxHREVGABQAFQAABDgAAAAeT1MvMlYNYwkAAAEgAAAAYGNtYXABDQLUAAACNAAAAUJoZWFk/xVFDQAAALwAAAA2aGhlYQdkA+oAAAD0AAAAJGhtdHgD6AAAAAAEWAAAAAZtYXhwAAJQAAAAARgAAAAGbmFtZVjmdH4AAAGAAAAAsXBvc3T/hgAzAAADeAAAACAAAQAAAAEAALZRFsRfDzz1AAsD6AAAAADOBOTLAAAAAM4KHDwAAAAAA+gDIQAAAAgAAgAAAAAAAAABAAADIQAAAFoD6AAAAAAD6AABAAAAAAAAAAAAAAAAAAAAAQAAUAAAAgAAAAQD6AH0AAUAAAKKArwAAACMAooCvAAAAeAAMQECAAACAAYJAAAAAAAAAAAAAQAAAAAAAAAAAAAAAFBmRWQAwAAuAC4DIP84AFoDIQAAAAAAAQAAAAAAAAAAACAAIAABAAAADgCuAAEAAAAAAAAAAQAAAAEAAAAAAAEAAQAAAAEAAAAAAAIAAQAAAAEAAAAAAAMAAQAAAAEAAAAAAAQAAQAAAAEAAAAAAAUAAQAAAAEAAAAAAAYAAQAAAAMAAQQJAAAAAgABAAMAAQQJAAEAAgABAAMAAQQJAAIAAgABAAMAAQQJAAMAAgABAAMAAQQJAAQAAgABAAMAAQQJAAUAAgABAAMAAQQJAAYAAgABWABYAAAAAAAAAwAAAAMAAAAcAAEAAAAAADwAAwABAAAAHAAEACAAAAAEAAQAAQAAAC7//wAAAC7////TAAEAAAAAAAABBgAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAMAAAAAAAD/gwAyAAAAAQAAAAAAAAAAAAAAAAAAAAABAAQEAAEBAQJYAAEBASH4DwD4GwHEAvgcA/gXBIwMAYuL+nz5tQXkD5j3CBLnEQACAQEBIVhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYAAABAQAADwACAQEEE/t3Dov6fAH6fAT+fPp8+nwHDosMCvm1Cvm1DAz6fBQAAAAAAAABAAAAAMmJbzEAAAAAzgTjFQAAAADOBOQpAAEAAAAAAAAADAAUAAQAAAABAAAAAgABAAAAAAAAAAAD6AAAAAAAAA==");return ue(this,"_loadTestFont",e)}_prepareFontLoadEvent(e,t){function r(b,C){return b.charCodeAt(C)<<24|b.charCodeAt(C+1)<<16|b.charCodeAt(C+2)<<8|b.charCodeAt(C+3)&255}function i(b,C,S,T){let M=b.substring(0,C),E=b.substring(C+S);return M+T+E}let s,o,a=this._document.createElement("canvas");a.width=1,a.height=1;let l=a.getContext("2d"),c=0;function u(b,C){if(++c>30){oe("Load test font never loaded."),C();return}if(l.font="30px "+b,l.fillText(".",0,20),l.getImageData(0,0,1,1).data[3]>0){C();return}setTimeout(u.bind(null,b,C))}let d=`lt${Date.now()}${this.loadTestFontId++}`,h=this._loadTestFont;h=i(h,976,d.length,d);let p=16,g=1482184792,v=r(h,p);for(s=0,o=d.length-3;s<o;s+=4)v=v-g+r(d,s)|0;s<d.length&&(v=v-g+r(d+"XXX",s)|0),h=i(h,p,4,KN(v));let m=`url(data:font/opentype;base64,${btoa(h)});`,y=`@font-face {font-family:"${d}";src:${m}}`;this.insertRule(y);let w=this._document.createElement("div");w.style.visibility="hidden",w.style.width=w.style.height="10px",w.style.position="absolute",w.style.top=w.style.left="0px";for(let b of[e.loadedName,d]){let C=this._document.createElement("span");C.textContent="Hi",C.style.fontFamily=b,w.append(C)}this._document.body.append(w),u(d,()=>{w.remove(),t.complete()})}},Dm=class{constructor(e,{disableFontFace:t=!1,inspectFont:r=null}){this.compiledGlyphs=Object.create(null);for(let i in e)this[i]=e[i];this.disableFontFace=t===!0,this._inspectFont=r}createNativeFontFace(){if(!this.data||this.disableFontFace)return null;let e;if(!this.cssFontInfo)e=new FontFace(this.loadedName,this.data,{});else{let t={weight:this.cssFontInfo.fontWeight};this.cssFontInfo.italicAngle&&(t.style=`oblique ${this.cssFontInfo.italicAngle}deg`),e=new FontFace(this.cssFontInfo.fontFamily,this.data,t)}return this._inspectFont?.(this),e}createFontFaceRule(){if(!this.data||this.disableFontFace)return null;let e=`url(data:${this.mimetype};base64,${tk(this.data)});`,t;if(!this.cssFontInfo)t=`@font-face {font-family:"${this.loadedName}";src:${e}}`;else{let r=`font-weight: ${this.cssFontInfo.fontWeight};`;this.cssFontInfo.italicAngle&&(r+=`font-style: oblique ${this.cssFontInfo.italicAngle}deg;`),t=`@font-face {font-family:"${this.cssFontInfo.fontFamily}";${r}src:${e}}`}return this._inspectFont?.(this,e),t}getPathGenerator(e,t){if(this.compiledGlyphs[t]!==void 0)return this.compiledGlyphs[t];let r;try{r=e.get(this.loadedName+"_path_"+t)}catch(s){oe(`getPathGenerator - ignoring character: "${s}".`)}if(!Array.isArray(r)||r.length===0)return this.compiledGlyphs[t]=function(s,o){};let i=[];for(let s=0,o=r.length;s<o;)switch(r[s++]){case lr.BEZIER_CURVE_TO:{let[a,l,c,u,d,h]=r.slice(s,s+6);i.push(f=>f.bezierCurveTo(a,l,c,u,d,h)),s+=6}break;case lr.MOVE_TO:{let[a,l]=r.slice(s,s+2);i.push(c=>c.moveTo(a,l)),s+=2}break;case lr.LINE_TO:{let[a,l]=r.slice(s,s+2);i.push(c=>c.lineTo(a,l)),s+=2}break;case lr.QUADRATIC_CURVE_TO:{let[a,l,c,u]=r.slice(s,s+4);i.push(d=>d.quadraticCurveTo(a,l,c,u)),s+=4}break;case lr.RESTORE:i.push(a=>a.restore());break;case lr.SAVE:i.push(a=>a.save());break;case lr.SCALE:it(i.length===2,"Scale command is only valid at the third position.");break;case lr.TRANSFORM:{let[a,l,c,u,d,h]=r.slice(s,s+6);i.push(f=>f.transform(a,l,c,u,d,h)),s+=6}break;case lr.TRANSLATE:{let[a,l]=r.slice(s,s+2);i.push(c=>c.translate(a,l)),s+=2}break}return this.compiledGlyphs[t]=function(o,a){i[0](o),i[1](o),o.scale(a,-a);for(let l=2,c=i.length;l<c;l++)i[l](o)}}},Ru=class{#e=!1;constructor({enableHWA:e=!1}){this.#e=e}create(e,t){if(e<=0||t<=0)throw new Error("Invalid canvas size");let r=this._createCanvas(e,t);return{canvas:r,context:r.getContext("2d",{willReadFrequently:!this.#e})}}reset(e,t,r){if(!e.canvas)throw new Error("Canvas is not specified");if(t<=0||r<=0)throw new Error("Invalid canvas size");e.canvas.width=t,e.canvas.height=r}destroy(e){if(!e.canvas)throw new Error("Canvas is not specified");e.canvas.width=0,e.canvas.height=0,e.canvas=null,e.context=null}_createCanvas(e,t){Te("Abstract method `_createCanvas` called.")}},Tm=class extends Ru{constructor({ownerDocument:e=globalThis.document,enableHWA:t=!1}){super({enableHWA:t}),this._document=e}_createCanvas(e,t){let r=this._document.createElement("canvas");return r.width=e,r.height=t,r}},Ou=class{constructor({baseUrl:e=null,isCompressed:t=!0}){this.baseUrl=e,this.isCompressed=t}fetch(t){return I(this,arguments,function*({name:e}){if(!this.baseUrl)throw new Error("Ensure that the `cMapUrl` and `cMapPacked` API parameters are provided.");if(!e)throw new Error("CMap name must be specified.");let r=this.baseUrl+e+(this.isCompressed?".bcmap":"");return this._fetch(r).then(i=>({cMapData:i,isCompressed:this.isCompressed})).catch(i=>{throw new Error(`Unable to load ${this.isCompressed?"binary ":""}CMap at: ${r}`)})})}_fetch(e){return I(this,null,function*(){Te("Abstract method `_fetch` called.")})}},Pu=class extends Ou{_fetch(e){return I(this,null,function*(){let t=yield ad(e,this.isCompressed?"arraybuffer":"text");return t instanceof ArrayBuffer?new Uint8Array(t):od(t)})}},Nu=class{addFilter(e){return"none"}addHCMFilter(e,t){return"none"}addAlphaFilter(e){return"none"}addLuminosityFilter(e){return"none"}addHighlightHCMFilter(e,t,r,i,s){return"none"}destroy(e=!1){}},Mm=class extends Nu{#e;#t;#n;#r;#i;#s;#l=0;constructor({docId:e,ownerDocument:t=globalThis.document}){super(),this.#r=e,this.#i=t}get#c(){return this.#t||=new Map}get#u(){return this.#s||=new Map}get#a(){if(!this.#n){let e=this.#i.createElement("div"),{style:t}=e;t.visibility="hidden",t.contain="strict",t.width=t.height=0,t.position="absolute",t.top=t.left=0,t.zIndex=-1;let r=this.#i.createElementNS(ur,"svg");r.setAttribute("width",0),r.setAttribute("height",0),this.#n=this.#i.createElementNS(ur,"defs"),e.append(r),r.append(this.#n),this.#i.body.append(e)}return this.#n}#d(e){if(e.length===1){let l=e[0],c=new Array(256);for(let d=0;d<256;d++)c[d]=l[d]/255;let u=c.join(",");return[u,u,u]}let[t,r,i]=e,s=new Array(256),o=new Array(256),a=new Array(256);for(let l=0;l<256;l++)s[l]=t[l]/255,o[l]=r[l]/255,a[l]=i[l]/255;return[s.join(","),o.join(","),a.join(",")]}#o(e){if(this.#e===void 0){this.#e="";let t=this.#i.URL;t!==this.#i.baseURI&&(ld(t)?oe('#createUrl: ignore "data:"-URL for performance reasons.'):this.#e=t.split("#",1)[0])}return`url(${this.#e}#${e})`}addFilter(e){if(!e)return"none";let t=this.#c.get(e);if(t)return t;let[r,i,s]=this.#d(e),o=e.length===1?r:`${r}${i}${s}`;if(t=this.#c.get(o),t)return this.#c.set(e,t),t;let a=`g_${this.#r}_transfer_map_${this.#l++}`,l=this.#o(a);this.#c.set(e,l),this.#c.set(o,l);let c=this.#f(a);return this.#v(r,i,s,c),l}addHCMFilter(e,t){let r=`${e}-${t}`,i="base",s=this.#u.get(i);if(s?.key===r||(s?(s.filter?.remove(),s.key=r,s.url="none",s.filter=null):(s={key:r,url:"none",filter:null},this.#u.set(i,s)),!e||!t))return s.url;let o=this.#y(e);e=L.makeHexColor(...o);let a=this.#y(t);if(t=L.makeHexColor(...a),this.#a.style.color="",e==="#000000"&&t==="#ffffff"||e===t)return s.url;let l=new Array(256);for(let f=0;f<=255;f++){let p=f/255;l[f]=p<=.03928?p/12.92:((p+.055)/1.055)**2.4}let c=l.join(","),u=`g_${this.#r}_hcm_filter`,d=s.filter=this.#f(u);this.#v(c,c,c,d),this.#p(d);let h=(f,p)=>{let g=o[f]/255,v=a[f]/255,m=new Array(p+1);for(let y=0;y<=p;y++)m[y]=g+y/p*(v-g);return m.join(",")};return this.#v(h(0,5),h(1,5),h(2,5),d),s.url=this.#o(u),s.url}addAlphaFilter(e){let t=this.#c.get(e);if(t)return t;let[r]=this.#d([e]),i=`alpha_${r}`;if(t=this.#c.get(i),t)return this.#c.set(e,t),t;let s=`g_${this.#r}_alpha_map_${this.#l++}`,o=this.#o(s);this.#c.set(e,o),this.#c.set(i,o);let a=this.#f(s);return this.#m(r,a),o}addLuminosityFilter(e){let t=this.#c.get(e||"luminosity");if(t)return t;let r,i;if(e?([r]=this.#d([e]),i=`luminosity_${r}`):i="luminosity",t=this.#c.get(i),t)return this.#c.set(e,t),t;let s=`g_${this.#r}_luminosity_map_${this.#l++}`,o=this.#o(s);this.#c.set(e,o),this.#c.set(i,o);let a=this.#f(s);return this.#h(a),e&&this.#m(r,a),o}addHighlightHCMFilter(e,t,r,i,s){let o=`${t}-${r}-${i}-${s}`,a=this.#u.get(e);if(a?.key===o||(a?(a.filter?.remove(),a.key=o,a.url="none",a.filter=null):(a={key:o,url:"none",filter:null},this.#u.set(e,a)),!t||!r))return a.url;let[l,c]=[t,r].map(this.#y.bind(this)),u=Math.round(.2126*l[0]+.7152*l[1]+.0722*l[2]),d=Math.round(.2126*c[0]+.7152*c[1]+.0722*c[2]),[h,f]=[i,s].map(this.#y.bind(this));d<u&&([u,d,h,f]=[d,u,f,h]),this.#a.style.color="";let p=(m,y,w)=>{let b=new Array(256),C=(d-u)/w,S=m/255,T=(y-m)/(255*w),M=0;for(let E=0;E<=w;E++){let x=Math.round(u+E*C),N=S+E*T;for(let pe=M;pe<=x;pe++)b[pe]=N;M=x+1}for(let E=M;E<256;E++)b[E]=b[M-1];return b.join(",")},g=`g_${this.#r}_hcm_${e}_filter`,v=a.filter=this.#f(g);return this.#p(v),this.#v(p(h[0],f[0],5),p(h[1],f[1],5),p(h[2],f[2],5),v),a.url=this.#o(g),a.url}destroy(e=!1){e&&this.#u.size!==0||(this.#n&&(this.#n.parentNode.parentNode.remove(),this.#n=null),this.#t&&(this.#t.clear(),this.#t=null),this.#l=0)}#h(e){let t=this.#i.createElementNS(ur,"feColorMatrix");t.setAttribute("type","matrix"),t.setAttribute("values","0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.3 0.59 0.11 0 0"),e.append(t)}#p(e){let t=this.#i.createElementNS(ur,"feColorMatrix");t.setAttribute("type","matrix"),t.setAttribute("values","0.2126 0.7152 0.0722 0 0 0.2126 0.7152 0.0722 0 0 0.2126 0.7152 0.0722 0 0 0 0 0 1 0"),e.append(t)}#f(e){let t=this.#i.createElementNS(ur,"filter");return t.setAttribute("color-interpolation-filters","sRGB"),t.setAttribute("id",e),this.#a.append(t),t}#g(e,t,r){let i=this.#i.createElementNS(ur,t);i.setAttribute("type","discrete"),i.setAttribute("tableValues",r),e.append(i)}#v(e,t,r,i){let s=this.#i.createElementNS(ur,"feComponentTransfer");i.append(s),this.#g(s,"feFuncR",e),this.#g(s,"feFuncG",t),this.#g(s,"feFuncB",r)}#m(e,t){let r=this.#i.createElementNS(ur,"feComponentTransfer");t.append(r),this.#g(r,"feFuncA",e)}#y(e){return this.#a.style.color=e,jv(getComputedStyle(this.#a).getPropertyValue("color"))}},ku=class{constructor({baseUrl:e=null}){this.baseUrl=e}fetch(t){return I(this,arguments,function*({filename:e}){if(!this.baseUrl)throw new Error("Ensure that the `standardFontDataUrl` API parameter is provided.");if(!e)throw new Error("Font filename must be specified.");let r=`${this.baseUrl}${e}`;return this._fetch(r).catch(i=>{throw new Error(`Unable to load font data at: ${r}`)})})}_fetch(e){return I(this,null,function*(){Te("Abstract method `_fetch` called.")})}},Lu=class extends ku{_fetch(e){return I(this,null,function*(){let t=yield ad(e,"arraybuffer");return new Uint8Array(t)})}};gt&&(_u=Promise.withResolvers(),Au=null,I(void 0,null,function*(){let e=yield import("./chunk-L2HEV66R.js"),t=yield import("./chunk-BMBYILCS.js"),r=yield import("./chunk-ALIQTIYY.js"),i=yield import("./chunk-NYZOWURK.js"),s,o;return new Map(Object.entries({fs:e,http:t,https:r,url:i,canvas:s,path2d:o}))}).then(e=>{Au=e,_u.resolve()},e=>{oe(`loadPackages: ${e}`),Au=new Map,_u.resolve()}));var _u,Au,Vn=class{static get promise(){return _u.promise}static get(e){return Au?.get(e)}};function WA(n){return I(this,null,function*(){let t=yield Vn.get("fs").promises.readFile(n);return new Uint8Array(t)})}var Rm=class extends Nu{},Om=class extends Ru{_createCanvas(e,t){return Vn.get("canvas").createCanvas(e,t)}},Pm=class extends Ou{_fetch(e){return I(this,null,function*(){return WA(e)})}},Nm=class extends ku{_fetch(e){return I(this,null,function*(){return WA(e)})}},wt={FILL:"Fill",STROKE:"Stroke",SHADING:"Shading"};function km(n,e){if(!e)return;let t=e[2]-e[0],r=e[3]-e[1],i=new Path2D;i.rect(e[0],e[1],t,r),n.clip(i)}var ma=class{getPattern(){Te("Abstract method `getPattern` called.")}},Lm=class extends ma{constructor(e){super(),this._type=e[1],this._bbox=e[2],this._colorStops=e[3],this._p0=e[4],this._p1=e[5],this._r0=e[6],this._r1=e[7],this.matrix=null}_createGradient(e){let t;this._type==="axial"?t=e.createLinearGradient(this._p0[0],this._p0[1],this._p1[0],this._p1[1]):this._type==="radial"&&(t=e.createRadialGradient(this._p0[0],this._p0[1],this._r0,this._p1[0],this._p1[1],this._r1));for(let r of this._colorStops)t.addColorStop(r[0],r[1]);return t}getPattern(e,t,r,i){let s;if(i===wt.STROKE||i===wt.FILL){let o=t.current.getClippedPathBoundingBox(i,Le(e))||[0,0,0,0],a=Math.ceil(o[2]-o[0])||1,l=Math.ceil(o[3]-o[1])||1,c=t.cachedCanvases.getCanvas("pattern",a,l),u=c.context;u.clearRect(0,0,u.canvas.width,u.canvas.height),u.beginPath(),u.rect(0,0,u.canvas.width,u.canvas.height),u.translate(-o[0],-o[1]),r=L.transform(r,[1,0,0,1,o[0],o[1]]),u.transform(...t.baseTransform),this.matrix&&u.transform(...this.matrix),km(u,this._bbox),u.fillStyle=this._createGradient(u),u.fill(),s=e.createPattern(c.canvas,"no-repeat");let d=new DOMMatrix(r);s.setTransform(d)}else km(e,this._bbox),s=this._createGradient(e);return s}};function pm(n,e,t,r,i,s,o,a){let l=e.coords,c=e.colors,u=n.data,d=n.width*4,h;l[t+1]>l[r+1]&&(h=t,t=r,r=h,h=s,s=o,o=h),l[r+1]>l[i+1]&&(h=r,r=i,i=h,h=o,o=a,a=h),l[t+1]>l[r+1]&&(h=t,t=r,r=h,h=s,s=o,o=h);let f=(l[t]+e.offsetX)*e.scaleX,p=(l[t+1]+e.offsetY)*e.scaleY,g=(l[r]+e.offsetX)*e.scaleX,v=(l[r+1]+e.offsetY)*e.scaleY,m=(l[i]+e.offsetX)*e.scaleX,y=(l[i+1]+e.offsetY)*e.scaleY;if(p>=y)return;let w=c[s],b=c[s+1],C=c[s+2],S=c[o],T=c[o+1],M=c[o+2],E=c[a],x=c[a+1],N=c[a+2],pe=Math.round(p),de=Math.round(y),ce,Ee,je,V,te,wr,qr,zt;for(let st=pe;st<=de;st++){if(st<v){let Re=st<p?0:(p-st)/(p-v);ce=f-(f-g)*Re,Ee=w-(w-S)*Re,je=b-(b-T)*Re,V=C-(C-M)*Re}else{let Re;st>y?Re=1:v===y?Re=0:Re=(v-st)/(v-y),ce=g-(g-m)*Re,Ee=S-(S-E)*Re,je=T-(T-x)*Re,V=M-(M-N)*Re}let Xe;st<p?Xe=0:st>y?Xe=1:Xe=(p-st)/(p-y),te=f-(f-m)*Xe,wr=w-(w-E)*Xe,qr=b-(b-x)*Xe,zt=C-(C-N)*Xe;let ki=Math.round(Math.min(ce,te)),$s=Math.round(Math.max(ce,te)),Wt=d*st+ki*4;for(let Re=ki;Re<=$s;Re++)Xe=(ce-Re)/(ce-te),Xe<0?Xe=0:Xe>1&&(Xe=1),u[Wt++]=Ee-(Ee-wr)*Xe|0,u[Wt++]=je-(je-qr)*Xe|0,u[Wt++]=V-(V-zt)*Xe|0,u[Wt++]=255}}function ak(n,e,t){let r=e.coords,i=e.colors,s,o;switch(e.type){case"lattice":let a=e.verticesPerRow,l=Math.floor(r.length/a)-1,c=a-1;for(s=0;s<l;s++){let u=s*a;for(let d=0;d<c;d++,u++)pm(n,t,r[u],r[u+1],r[u+a],i[u],i[u+1],i[u+a]),pm(n,t,r[u+a+1],r[u+1],r[u+a],i[u+a+1],i[u+1],i[u+a])}break;case"triangles":for(s=0,o=r.length;s<o;s+=3)pm(n,t,r[s],r[s+1],r[s+2],i[s],i[s+1],i[s+2]);break;default:throw new Error("illegal figure")}}var Fm=class extends ma{constructor(e){super(),this._coords=e[2],this._colors=e[3],this._figures=e[4],this._bounds=e[5],this._bbox=e[7],this._background=e[8],this.matrix=null}_createMeshCanvas(e,t,r){let a=Math.floor(this._bounds[0]),l=Math.floor(this._bounds[1]),c=Math.ceil(this._bounds[2])-a,u=Math.ceil(this._bounds[3])-l,d=Math.min(Math.ceil(Math.abs(c*e[0]*1.1)),3e3),h=Math.min(Math.ceil(Math.abs(u*e[1]*1.1)),3e3),f=c/d,p=u/h,g={coords:this._coords,colors:this._colors,offsetX:-a,offsetY:-l,scaleX:1/f,scaleY:1/p},v=d+2*2,m=h+2*2,y=r.getCanvas("mesh",v,m),w=y.context,b=w.createImageData(d,h);if(t){let S=b.data;for(let T=0,M=S.length;T<M;T+=4)S[T]=t[0],S[T+1]=t[1],S[T+2]=t[2],S[T+3]=255}for(let S of this._figures)ak(b,S,g);return w.putImageData(b,2,2),{canvas:y.canvas,offsetX:a-2*f,offsetY:l-2*p,scaleX:f,scaleY:p}}getPattern(e,t,r,i){km(e,this._bbox);let s;if(i===wt.SHADING)s=L.singularValueDecompose2dScale(Le(e));else if(s=L.singularValueDecompose2dScale(t.baseTransform),this.matrix){let a=L.singularValueDecompose2dScale(this.matrix);s=[s[0]*a[0],s[1]*a[1]]}let o=this._createMeshCanvas(s,i===wt.SHADING?null:this._background,t.cachedCanvases);return i!==wt.SHADING&&(e.setTransform(...t.baseTransform),this.matrix&&e.transform(...this.matrix)),e.translate(o.offsetX,o.offsetY),e.scale(o.scaleX,o.scaleY),e.createPattern(o.canvas,"no-repeat")}},jm=class extends ma{getPattern(){return"hotpink"}};function lk(n){switch(n[0]){case"RadialAxial":return new Lm(n);case"Mesh":return new Fm(n);case"Dummy":return new jm}throw new Error(`Unknown IR type: ${n[0]}`)}var OA={COLORED:1,UNCOLORED:2},ck=(()=>{class n{static MAX_PATTERN_SIZE=3e3;constructor(t,r,i,s,o){this.operatorList=t[2],this.matrix=t[3],this.bbox=t[4],this.xstep=t[5],this.ystep=t[6],this.paintType=t[7],this.tilingType=t[8],this.color=r,this.ctx=i,this.canvasGraphicsFactory=s,this.baseTransform=o}createPatternCanvas(t){let{bbox:r,operatorList:i,paintType:s,tilingType:o,color:a,canvasGraphicsFactory:l}=this,{xstep:c,ystep:u}=this;c=Math.abs(c),u=Math.abs(u),sd("TilingType: "+o);let d=r[0],h=r[1],f=r[2],p=r[3],g=f-d,v=p-h,m=L.singularValueDecompose2dScale(this.matrix),y=L.singularValueDecompose2dScale(this.baseTransform),w=m[0]*y[0],b=m[1]*y[1],C=g,S=v,T=!1,M=!1,E=Math.ceil(c*w),x=Math.ceil(u*b),N=Math.ceil(g*w),pe=Math.ceil(v*b);E>=N?C=c:T=!0,x>=pe?S=u:M=!0;let de=this.getSizeAndScale(C,this.ctx.canvas.width,w),ce=this.getSizeAndScale(S,this.ctx.canvas.height,b),Ee=t.cachedCanvases.getCanvas("pattern",de.size,ce.size),je=Ee.context,V=l.createCanvasGraphics(je);if(V.groupLevel=t.groupLevel,this.setFillAndStrokeStyleToContext(V,s,a),je.translate(-de.scale*d,-ce.scale*h),V.transform(de.scale,0,0,ce.scale,0,0),je.save(),this.clipBbox(V,d,h,f,p),V.baseTransform=Le(V.ctx),V.executeOperatorList(i),V.endDrawing(),je.restore(),T||M){let te=Ee.canvas;T&&(C=c),M&&(S=u);let wr=this.getSizeAndScale(C,this.ctx.canvas.width,w),qr=this.getSizeAndScale(S,this.ctx.canvas.height,b),zt=wr.size,st=qr.size,Xe=t.cachedCanvases.getCanvas("pattern-workaround",zt,st),ki=Xe.context,$s=T?Math.floor(g/c):0,Wt=M?Math.floor(v/u):0;for(let Re=0;Re<=$s;Re++)for(let qn=0;qn<=Wt;qn++)ki.drawImage(te,zt*Re,st*qn,zt,st,0,0,zt,st);return{canvas:Xe.canvas,scaleX:wr.scale,scaleY:qr.scale,offsetX:d,offsetY:h}}return{canvas:Ee.canvas,scaleX:de.scale,scaleY:ce.scale,offsetX:d,offsetY:h}}getSizeAndScale(t,r,i){let s=Math.max(n.MAX_PATTERN_SIZE,r),o=Math.ceil(t*i);return o>=s?o=s:i=o/t,{scale:i,size:o}}clipBbox(t,r,i,s,o){let a=s-r,l=o-i;t.ctx.rect(r,i,a,l),t.current.updateRectMinMax(Le(t.ctx),[r,i,s,o]),t.clip(),t.endPath()}setFillAndStrokeStyleToContext(t,r,i){let s=t.ctx,o=t.current;switch(r){case OA.COLORED:let a=this.ctx;s.fillStyle=a.fillStyle,s.strokeStyle=a.strokeStyle,o.fillColor=a.fillStyle,o.strokeColor=a.strokeStyle;break;case OA.UNCOLORED:let l=L.makeHexColor(i[0],i[1],i[2]);s.fillStyle=l,s.strokeStyle=l,o.fillColor=l,o.strokeColor=l;break;default:throw new ym(`Unsupported paint type: ${r}`)}}getPattern(t,r,i,s){let o=i;s!==wt.SHADING&&(o=L.transform(o,r.baseTransform),this.matrix&&(o=L.transform(o,this.matrix)));let a=this.createPatternCanvas(r),l=new DOMMatrix(o);l=l.translate(a.offsetX,a.offsetY),l=l.scale(1/a.scaleX,1/a.scaleY);let c=t.createPattern(a.canvas,"repeat");return c.setTransform(l),c}}return n})();function uk({src:n,srcPos:e=0,dest:t,width:r,height:i,nonBlackColor:s=4294967295,inverseDecode:o=!1}){let a=dt.isLittleEndian?4278190080:255,[l,c]=o?[s,a]:[a,s],u=r>>3,d=r&7,h=n.length;t=new Uint32Array(t.buffer);let f=0;for(let p=0;p<i;p++){for(let v=e+u;e<v;e++){let m=e<h?n[e]:255;t[f++]=m&128?c:l,t[f++]=m&64?c:l,t[f++]=m&32?c:l,t[f++]=m&16?c:l,t[f++]=m&8?c:l,t[f++]=m&4?c:l,t[f++]=m&2?c:l,t[f++]=m&1?c:l}if(d===0)continue;let g=e<h?n[e++]:255;for(let v=0;v<d;v++)t[f++]=g&1<<7-v?c:l}return{srcPos:e,destPos:f}}var PA=16,NA=100,dk=15,kA=10,LA=1e3,Rt=16;function hk(n,e){if(n._removeMirroring)throw new Error("Context is already forwarding operations.");n.__originalSave=n.save,n.__originalRestore=n.restore,n.__originalRotate=n.rotate,n.__originalScale=n.scale,n.__originalTranslate=n.translate,n.__originalTransform=n.transform,n.__originalSetTransform=n.setTransform,n.__originalResetTransform=n.resetTransform,n.__originalClip=n.clip,n.__originalMoveTo=n.moveTo,n.__originalLineTo=n.lineTo,n.__originalBezierCurveTo=n.bezierCurveTo,n.__originalRect=n.rect,n.__originalClosePath=n.closePath,n.__originalBeginPath=n.beginPath,n._removeMirroring=()=>{n.save=n.__originalSave,n.restore=n.__originalRestore,n.rotate=n.__originalRotate,n.scale=n.__originalScale,n.translate=n.__originalTranslate,n.transform=n.__originalTransform,n.setTransform=n.__originalSetTransform,n.resetTransform=n.__originalResetTransform,n.clip=n.__originalClip,n.moveTo=n.__originalMoveTo,n.lineTo=n.__originalLineTo,n.bezierCurveTo=n.__originalBezierCurveTo,n.rect=n.__originalRect,n.closePath=n.__originalClosePath,n.beginPath=n.__originalBeginPath,delete n._removeMirroring},n.save=function(){e.save(),this.__originalSave()},n.restore=function(){e.restore(),this.__originalRestore()},n.translate=function(r,i){e.translate(r,i),this.__originalTranslate(r,i)},n.scale=function(r,i){e.scale(r,i),this.__originalScale(r,i)},n.transform=function(r,i,s,o,a,l){e.transform(r,i,s,o,a,l),this.__originalTransform(r,i,s,o,a,l)},n.setTransform=function(r,i,s,o,a,l){e.setTransform(r,i,s,o,a,l),this.__originalSetTransform(r,i,s,o,a,l)},n.resetTransform=function(){e.resetTransform(),this.__originalResetTransform()},n.rotate=function(r){e.rotate(r),this.__originalRotate(r)},n.clip=function(r){e.clip(r),this.__originalClip(r)},n.moveTo=function(t,r){e.moveTo(t,r),this.__originalMoveTo(t,r)},n.lineTo=function(t,r){e.lineTo(t,r),this.__originalLineTo(t,r)},n.bezierCurveTo=function(t,r,i,s,o,a){e.bezierCurveTo(t,r,i,s,o,a),this.__originalBezierCurveTo(t,r,i,s,o,a)},n.rect=function(t,r,i,s){e.rect(t,r,i,s),this.__originalRect(t,r,i,s)},n.closePath=function(){e.closePath(),this.__originalClosePath()},n.beginPath=function(){e.beginPath(),this.__originalBeginPath()}}var Bm=class{constructor(e){this.canvasFactory=e,this.cache=Object.create(null)}getCanvas(e,t,r){let i;return this.cache[e]!==void 0?(i=this.cache[e],this.canvasFactory.reset(i,t,r)):(i=this.canvasFactory.create(t,r),this.cache[e]=i),i}delete(e){delete this.cache[e]}clear(){for(let e in this.cache){let t=this.cache[e];this.canvasFactory.destroy(t),delete this.cache[e]}}};function mu(n,e,t,r,i,s,o,a,l,c){let[u,d,h,f,p,g]=Le(n);if(d===0&&h===0){let y=o*u+p,w=Math.round(y),b=a*f+g,C=Math.round(b),S=(o+l)*u+p,T=Math.abs(Math.round(S)-w)||1,M=(a+c)*f+g,E=Math.abs(Math.round(M)-C)||1;return n.setTransform(Math.sign(u),0,0,Math.sign(f),w,C),n.drawImage(e,t,r,i,s,0,0,T,E),n.setTransform(u,d,h,f,p,g),[T,E]}if(u===0&&f===0){let y=a*h+p,w=Math.round(y),b=o*d+g,C=Math.round(b),S=(a+c)*h+p,T=Math.abs(Math.round(S)-w)||1,M=(o+l)*d+g,E=Math.abs(Math.round(M)-C)||1;return n.setTransform(0,Math.sign(d),Math.sign(h),0,w,C),n.drawImage(e,t,r,i,s,0,0,E,T),n.setTransform(u,d,h,f,p,g),[E,T]}n.drawImage(e,t,r,i,s,o,a,l,c);let v=Math.hypot(u,d),m=Math.hypot(h,f);return[v*l,m*c]}function fk(n){let{width:e,height:t}=n;if(e>LA||t>LA)return null;let r=1e3,i=new Uint8Array([0,2,4,0,1,0,5,4,8,10,0,8,0,2,1,0]),s=e+1,o=new Uint8Array(s*(t+1)),a,l,c,u=e+7&-8,d=new Uint8Array(u*t),h=0;for(let m of n.data){let y=128;for(;y>0;)d[h++]=m&y?0:255,y>>=1}let f=0;for(h=0,d[h]!==0&&(o[0]=1,++f),l=1;l<e;l++)d[h]!==d[h+1]&&(o[l]=d[h]?2:1,++f),h++;for(d[h]!==0&&(o[l]=2,++f),a=1;a<t;a++){h=a*u,c=a*s,d[h-u]!==d[h]&&(o[c]=d[h]?1:8,++f);let m=(d[h]?4:0)+(d[h-u]?8:0);for(l=1;l<e;l++)m=(m>>2)+(d[h+1]?4:0)+(d[h-u+1]?8:0),i[m]&&(o[c+l]=i[m],++f),h++;if(d[h-u]!==d[h]&&(o[c+l]=d[h]?2:4,++f),f>r)return null}for(h=u*(t-1),c=a*s,d[h]!==0&&(o[c]=8,++f),l=1;l<e;l++)d[h]!==d[h+1]&&(o[c+l]=d[h]?4:8,++f),h++;if(d[h]!==0&&(o[c+l]=4,++f),f>r)return null;let p=new Int32Array([0,s,-1,0,-s,0,0,0,1]),g=new Path2D;for(a=0;f&&a<=t;a++){let m=a*s,y=m+e;for(;m<y&&!o[m];)m++;if(m===y)continue;g.moveTo(m%s,a);let w=m,b=o[m];do{let C=p[b];do m+=C;while(!o[m]);let S=o[m];S!==5&&S!==10?(b=S,o[m]=0):(b=S&51*b>>4,o[m]&=b>>2|b<<2),g.lineTo(m%s,m/s|0),o[m]||--f}while(w!==m);--a}return d=null,o=null,function(m){m.save(),m.scale(1/e,-1/t),m.translate(0,-t),m.fill(g),m.beginPath(),m.restore()}}var Fu=class{constructor(e,t){this.alphaIsShape=!1,this.fontSize=0,this.fontSizeScale=1,this.textMatrix=$A,this.textMatrixScale=1,this.fontMatrix=vm,this.leading=0,this.x=0,this.y=0,this.lineX=0,this.lineY=0,this.charSpacing=0,this.wordSpacing=0,this.textHScale=1,this.textRenderingMode=pt.FILL,this.textRise=0,this.fillColor="#000000",this.strokeColor="#000000",this.patternFill=!1,this.fillAlpha=1,this.strokeAlpha=1,this.lineWidth=1,this.activeSMask=null,this.transferMaps="none",this.startNewPathAndClipBox([0,0,e,t])}clone(){let e=Object.create(this);return e.clipBox=this.clipBox.slice(),e}setCurrentPoint(e,t){this.x=e,this.y=t}updatePathMinMax(e,t,r){[t,r]=L.applyTransform([t,r],e),this.minX=Math.min(this.minX,t),this.minY=Math.min(this.minY,r),this.maxX=Math.max(this.maxX,t),this.maxY=Math.max(this.maxY,r)}updateRectMinMax(e,t){let r=L.applyTransform(t,e),i=L.applyTransform(t.slice(2),e),s=L.applyTransform([t[0],t[3]],e),o=L.applyTransform([t[2],t[1]],e);this.minX=Math.min(this.minX,r[0],i[0],s[0],o[0]),this.minY=Math.min(this.minY,r[1],i[1],s[1],o[1]),this.maxX=Math.max(this.maxX,r[0],i[0],s[0],o[0]),this.maxY=Math.max(this.maxY,r[1],i[1],s[1],o[1])}updateScalingPathMinMax(e,t){L.scaleMinMax(e,t),this.minX=Math.min(this.minX,t[0]),this.minY=Math.min(this.minY,t[1]),this.maxX=Math.max(this.maxX,t[2]),this.maxY=Math.max(this.maxY,t[3])}updateCurvePathMinMax(e,t,r,i,s,o,a,l,c,u){let d=L.bezierBoundingBox(t,r,i,s,o,a,l,c,u);u||this.updateRectMinMax(e,d)}getPathBoundingBox(e=wt.FILL,t=null){let r=[this.minX,this.minY,this.maxX,this.maxY];if(e===wt.STROKE){t||Te("Stroke bounding box must include transform.");let i=L.singularValueDecompose2dScale(t),s=i[0]*this.lineWidth/2,o=i[1]*this.lineWidth/2;r[0]-=s,r[1]-=o,r[2]+=s,r[3]+=o}return r}updateClipFromPath(){let e=L.intersect(this.clipBox,this.getPathBoundingBox());this.startNewPathAndClipBox(e||[0,0,0,0])}isEmptyClip(){return this.minX===1/0}startNewPathAndClipBox(e){this.clipBox=e,this.minX=1/0,this.minY=1/0,this.maxX=0,this.maxY=0}getClippedPathBoundingBox(e=wt.FILL,t=null){return L.intersect(this.clipBox,this.getPathBoundingBox(e,t))}};function FA(n,e){if(typeof ImageData<"u"&&e instanceof ImageData){n.putImageData(e,0,0);return}let t=e.height,r=e.width,i=t%Rt,s=(t-i)/Rt,o=i===0?s:s+1,a=n.createImageData(r,Rt),l=0,c,u=e.data,d=a.data,h,f,p,g;if(e.kind===Cu.GRAYSCALE_1BPP){let v=u.byteLength,m=new Uint32Array(d.buffer,0,d.byteLength>>2),y=m.length,w=r+7>>3,b=4294967295,C=dt.isLittleEndian?4278190080:255;for(h=0;h<o;h++){for(p=h<s?Rt:i,c=0,f=0;f<p;f++){let S=v-l,T=0,M=S>w?r:S*8-7,E=M&-8,x=0,N=0;for(;T<E;T+=8)N=u[l++],m[c++]=N&128?b:C,m[c++]=N&64?b:C,m[c++]=N&32?b:C,m[c++]=N&16?b:C,m[c++]=N&8?b:C,m[c++]=N&4?b:C,m[c++]=N&2?b:C,m[c++]=N&1?b:C;for(;T<M;T++)x===0&&(N=u[l++],x=128),m[c++]=N&x?b:C,x>>=1}for(;c<y;)m[c++]=0;n.putImageData(a,0,h*Rt)}}else if(e.kind===Cu.RGBA_32BPP){for(f=0,g=r*Rt*4,h=0;h<s;h++)d.set(u.subarray(l,l+g)),l+=g,n.putImageData(a,0,f),f+=Rt;h<o&&(g=r*i*4,d.set(u.subarray(l,l+g)),n.putImageData(a,0,f))}else if(e.kind===Cu.RGB_24BPP)for(p=Rt,g=r*p,h=0;h<o;h++){for(h>=s&&(p=i,g=r*p),c=0,f=g;f--;)d[c++]=u[l++],d[c++]=u[l++],d[c++]=u[l++],d[c++]=255;n.putImageData(a,0,h*Rt)}else throw new Error(`bad image kind: ${e.kind}`)}function jA(n,e){if(e.bitmap){n.drawImage(e.bitmap,0,0);return}let t=e.height,r=e.width,i=t%Rt,s=(t-i)/Rt,o=i===0?s:s+1,a=n.createImageData(r,Rt),l=0,c=e.data,u=a.data;for(let d=0;d<o;d++){let h=d<s?Rt:i;({srcPos:l}=uk({src:c,srcPos:l,dest:u,width:r,height:h,nonBlackColor:0})),n.putImageData(a,0,d*Rt)}}function sa(n,e){let t=["strokeStyle","fillStyle","fillRule","globalAlpha","lineWidth","lineCap","lineJoin","miterLimit","globalCompositeOperation","font","filter"];for(let r of t)n[r]!==void 0&&(e[r]=n[r]);n.setLineDash!==void 0&&(e.setLineDash(n.getLineDash()),e.lineDashOffset=n.lineDashOffset)}function vu(n){if(n.strokeStyle=n.fillStyle="#000000",n.fillRule="nonzero",n.globalAlpha=1,n.lineWidth=1,n.lineCap="butt",n.lineJoin="miter",n.miterLimit=10,n.globalCompositeOperation="source-over",n.font="10px sans-serif",n.setLineDash!==void 0&&(n.setLineDash([]),n.lineDashOffset=0),!gt){let{filter:e}=n;e!=="none"&&e!==""&&(n.filter="none")}}function BA(n,e){if(e)return!0;let t=L.singularValueDecompose2dScale(n);t[0]=Math.fround(t[0]),t[1]=Math.fround(t[1]);let r=Math.fround((globalThis.devicePixelRatio||1)*Vr.PDF_TO_CSS_UNITS);return t[0]<=r&&t[1]<=r}var pk=["butt","round","square"],gk=["miter","round","bevel"],mk={},VA={},Os=class n{constructor(e,t,r,i,s,{optionalContentConfig:o,markedContentStack:a=null},l,c){this.ctx=e,this.current=new Fu(this.ctx.canvas.width,this.ctx.canvas.height),this.stateStack=[],this.pendingClip=null,this.pendingEOFill=!1,this.res=null,this.xobjs=null,this.commonObjs=t,this.objs=r,this.canvasFactory=i,this.filterFactory=s,this.groupStack=[],this.processingType3=null,this.baseTransform=null,this.baseTransformStack=[],this.groupLevel=0,this.smaskStack=[],this.smaskCounter=0,this.tempSMask=null,this.suspendedCtx=null,this.contentVisible=!0,this.markedContentStack=a||[],this.optionalContentConfig=o,this.cachedCanvases=new Bm(this.canvasFactory),this.cachedPatterns=new Map,this.annotationCanvasMap=l,this.viewportScale=1,this.outputScaleX=1,this.outputScaleY=1,this.pageColors=c,this._cachedScaleForStroking=[-1,0],this._cachedGetSinglePixelWidth=null,this._cachedBitmapsMap=new Map}getObject(e,t=null){return typeof e=="string"?e.startsWith("g_")?this.commonObjs.get(e):this.objs.get(e):t}beginDrawing({transform:e,viewport:t,transparency:r=!1,background:i=null}){let s=this.ctx.canvas.width,o=this.ctx.canvas.height,a=this.ctx.fillStyle;if(this.ctx.fillStyle=i||"#ffffff",this.ctx.fillRect(0,0,s,o),this.ctx.fillStyle=a,r){let l=this.cachedCanvases.getCanvas("transparent",s,o);this.compositeCtx=this.ctx,this.transparentCanvas=l.canvas,this.ctx=l.context,this.ctx.save(),this.ctx.transform(...Le(this.compositeCtx))}this.ctx.save(),vu(this.ctx),e&&(this.ctx.transform(...e),this.outputScaleX=e[0],this.outputScaleY=e[0]),this.ctx.transform(...t.transform),this.viewportScale=t.scale,this.baseTransform=Le(this.ctx)}executeOperatorList(e,t,r,i){let s=e.argsArray,o=e.fnArray,a=t||0,l=s.length;if(l===a)return a;let c=l-a>kA&&typeof r=="function",u=c?Date.now()+dk:0,d=0,h=this.commonObjs,f=this.objs,p;for(;;){if(i!==void 0&&a===i.nextBreakPoint)return i.breakIt(a,r),a;if(p=o[a],p!==vn.dependency)this[p].apply(this,s[a]);else for(let g of s[a]){let v=g.startsWith("g_")?h:f;if(!v.has(g))return v.get(g,r),a}if(a++,a===l)return a;if(c&&++d>kA){if(Date.now()>u)return r(),a;d=0}}}#e(){for(;this.stateStack.length||this.inSMaskMode;)this.restore();this.current.activeSMask=null,this.ctx.restore(),this.transparentCanvas&&(this.ctx=this.compositeCtx,this.ctx.save(),this.ctx.setTransform(1,0,0,1,0,0),this.ctx.drawImage(this.transparentCanvas,0,0),this.ctx.restore(),this.transparentCanvas=null)}endDrawing(){this.#e(),this.cachedCanvases.clear(),this.cachedPatterns.clear();for(let e of this._cachedBitmapsMap.values()){for(let t of e.values())typeof HTMLCanvasElement<"u"&&t instanceof HTMLCanvasElement&&(t.width=t.height=0);e.clear()}this._cachedBitmapsMap.clear(),this.#t()}#t(){if(this.pageColors){let e=this.filterFactory.addHCMFilter(this.pageColors.foreground,this.pageColors.background);if(e!=="none"){let t=this.ctx.filter;this.ctx.filter=e,this.ctx.drawImage(this.ctx.canvas,0,0),this.ctx.filter=t}}}_scaleImage(e,t){let r=e.width??e.displayWidth,i=e.height??e.displayHeight,s=Math.max(Math.hypot(t[0],t[1]),1),o=Math.max(Math.hypot(t[2],t[3]),1),a=r,l=i,c="prescale1",u,d;for(;s>2&&a>1||o>2&&l>1;){let h=a,f=l;s>2&&a>1&&(h=a>=16384?Math.floor(a/2)-1||1:Math.ceil(a/2),s/=a/h),o>2&&l>1&&(f=l>=16384?Math.floor(l/2)-1||1:Math.ceil(l)/2,o/=l/f),u=this.cachedCanvases.getCanvas(c,h,f),d=u.context,d.clearRect(0,0,h,f),d.drawImage(e,0,0,a,l,0,0,h,f),e=u.canvas,a=h,l=f,c=c==="prescale1"?"prescale2":"prescale1"}return{img:e,paintWidth:a,paintHeight:l}}_createMaskCanvas(e){let t=this.ctx,{width:r,height:i}=e,s=this.current.fillColor,o=this.current.patternFill,a=Le(t),l,c,u,d;if((e.bitmap||e.data)&&e.count>1){let M=e.bitmap||e.data.buffer;c=JSON.stringify(o?a:[a.slice(0,4),s]),l=this._cachedBitmapsMap.get(M),l||(l=new Map,this._cachedBitmapsMap.set(M,l));let E=l.get(c);if(E&&!o){let x=Math.round(Math.min(a[0],a[2])+a[4]),N=Math.round(Math.min(a[1],a[3])+a[5]);return{canvas:E,offsetX:x,offsetY:N}}u=E}u||(d=this.cachedCanvases.getCanvas("maskCanvas",r,i),jA(d.context,e));let h=L.transform(a,[1/r,0,0,-1/i,0,0]);h=L.transform(h,[1,0,0,1,0,-i]);let[f,p,g,v]=L.getAxialAlignedBoundingBox([0,0,r,i],h),m=Math.round(g-f)||1,y=Math.round(v-p)||1,w=this.cachedCanvases.getCanvas("fillCanvas",m,y),b=w.context,C=f,S=p;b.translate(-C,-S),b.transform(...h),u||(u=this._scaleImage(d.canvas,cr(b)),u=u.img,l&&o&&l.set(c,u)),b.imageSmoothingEnabled=BA(Le(b),e.interpolate),mu(b,u,0,0,u.width,u.height,0,0,r,i),b.globalCompositeOperation="source-in";let T=L.transform(cr(b),[1,0,0,1,-C,-S]);return b.fillStyle=o?s.getPattern(t,this,T,wt.FILL):s,b.fillRect(0,0,r,i),l&&!o&&(this.cachedCanvases.delete("fillCanvas"),l.set(c,w.canvas)),{canvas:w.canvas,offsetX:Math.round(C),offsetY:Math.round(S)}}setLineWidth(e){e!==this.current.lineWidth&&(this._cachedScaleForStroking[0]=-1),this.current.lineWidth=e,this.ctx.lineWidth=e}setLineCap(e){this.ctx.lineCap=pk[e]}setLineJoin(e){this.ctx.lineJoin=gk[e]}setMiterLimit(e){this.ctx.miterLimit=e}setDash(e,t){let r=this.ctx;r.setLineDash!==void 0&&(r.setLineDash(e),r.lineDashOffset=t)}setRenderingIntent(e){}setFlatness(e){}setGState(e){for(let[t,r]of e)switch(t){case"LW":this.setLineWidth(r);break;case"LC":this.setLineCap(r);break;case"LJ":this.setLineJoin(r);break;case"ML":this.setMiterLimit(r);break;case"D":this.setDash(r[0],r[1]);break;case"RI":this.setRenderingIntent(r);break;case"FL":this.setFlatness(r);break;case"Font":this.setFont(r[0],r[1]);break;case"CA":this.current.strokeAlpha=r;break;case"ca":this.current.fillAlpha=r,this.ctx.globalAlpha=r;break;case"BM":this.ctx.globalCompositeOperation=r;break;case"SMask":this.current.activeSMask=r?this.tempSMask:null,this.tempSMask=null,this.checkSMaskState();break;case"TR":this.ctx.filter=this.current.transferMaps=this.filterFactory.addFilter(r);break}}get inSMaskMode(){return!!this.suspendedCtx}checkSMaskState(){let e=this.inSMaskMode;this.current.activeSMask&&!e?this.beginSMaskMode():!this.current.activeSMask&&e&&this.endSMaskMode()}beginSMaskMode(){if(this.inSMaskMode)throw new Error("beginSMaskMode called while already in smask mode");let e=this.ctx.canvas.width,t=this.ctx.canvas.height,r="smaskGroupAt"+this.groupLevel,i=this.cachedCanvases.getCanvas(r,e,t);this.suspendedCtx=this.ctx,this.ctx=i.context;let s=this.ctx;s.setTransform(...Le(this.suspendedCtx)),sa(this.suspendedCtx,s),hk(s,this.suspendedCtx),this.setGState([["BM","source-over"],["ca",1],["CA",1]])}endSMaskMode(){if(!this.inSMaskMode)throw new Error("endSMaskMode called while not in smask mode");this.ctx._removeMirroring(),sa(this.ctx,this.suspendedCtx),this.ctx=this.suspendedCtx,this.suspendedCtx=null}compose(e){if(!this.current.activeSMask)return;e?(e[0]=Math.floor(e[0]),e[1]=Math.floor(e[1]),e[2]=Math.ceil(e[2]),e[3]=Math.ceil(e[3])):e=[0,0,this.ctx.canvas.width,this.ctx.canvas.height];let t=this.current.activeSMask,r=this.suspendedCtx;this.composeSMask(r,t,this.ctx,e),this.ctx.save(),this.ctx.setTransform(1,0,0,1,0,0),this.ctx.clearRect(0,0,this.ctx.canvas.width,this.ctx.canvas.height),this.ctx.restore()}composeSMask(e,t,r,i){let s=i[0],o=i[1],a=i[2]-s,l=i[3]-o;a===0||l===0||(this.genericComposeSMask(t.context,r,a,l,t.subtype,t.backdrop,t.transferMap,s,o,t.offsetX,t.offsetY),e.save(),e.globalAlpha=1,e.globalCompositeOperation="source-over",e.setTransform(1,0,0,1,0,0),e.drawImage(r.canvas,0,0),e.restore())}genericComposeSMask(e,t,r,i,s,o,a,l,c,u,d){let h=e.canvas,f=l-u,p=c-d;if(o){let v=L.makeHexColor(...o);if(f<0||p<0||f+r>h.width||p+i>h.height){let m=this.cachedCanvases.getCanvas("maskExtension",r,i),y=m.context;y.drawImage(h,-f,-p),y.globalCompositeOperation="destination-atop",y.fillStyle=v,y.fillRect(0,0,r,i),y.globalCompositeOperation="source-over",h=m.canvas,f=p=0}else{e.save(),e.globalAlpha=1,e.setTransform(1,0,0,1,0,0);let m=new Path2D;m.rect(f,p,r,i),e.clip(m),e.globalCompositeOperation="destination-atop",e.fillStyle=v,e.fillRect(f,p,r,i),e.restore()}}t.save(),t.globalAlpha=1,t.setTransform(1,0,0,1,0,0),s==="Alpha"&&a?t.filter=this.filterFactory.addAlphaFilter(a):s==="Luminosity"&&(t.filter=this.filterFactory.addLuminosityFilter(a));let g=new Path2D;g.rect(l,c,r,i),t.clip(g),t.globalCompositeOperation="destination-in",t.drawImage(h,f,p,r,i,l,c,r,i),t.restore()}save(){this.inSMaskMode?(sa(this.ctx,this.suspendedCtx),this.suspendedCtx.save()):this.ctx.save();let e=this.current;this.stateStack.push(e),this.current=e.clone()}restore(){this.stateStack.length===0&&this.inSMaskMode&&this.endSMaskMode(),this.stateStack.length!==0&&(this.current=this.stateStack.pop(),this.inSMaskMode?(this.suspendedCtx.restore(),sa(this.suspendedCtx,this.ctx)):this.ctx.restore(),this.checkSMaskState(),this.pendingClip=null,this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null)}transform(e,t,r,i,s,o){this.ctx.transform(e,t,r,i,s,o),this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null}constructPath(e,t,r){let i=this.ctx,s=this.current,o=s.x,a=s.y,l,c,u=Le(i),d=u[0]===0&&u[3]===0||u[1]===0&&u[2]===0,h=d?r.slice(0):null;for(let f=0,p=0,g=e.length;f<g;f++)switch(e[f]|0){case vn.rectangle:o=t[p++],a=t[p++];let v=t[p++],m=t[p++],y=o+v,w=a+m;i.moveTo(o,a),v===0||m===0?i.lineTo(y,w):(i.lineTo(y,a),i.lineTo(y,w),i.lineTo(o,w)),d||s.updateRectMinMax(u,[o,a,y,w]),i.closePath();break;case vn.moveTo:o=t[p++],a=t[p++],i.moveTo(o,a),d||s.updatePathMinMax(u,o,a);break;case vn.lineTo:o=t[p++],a=t[p++],i.lineTo(o,a),d||s.updatePathMinMax(u,o,a);break;case vn.curveTo:l=o,c=a,o=t[p+4],a=t[p+5],i.bezierCurveTo(t[p],t[p+1],t[p+2],t[p+3],o,a),s.updateCurvePathMinMax(u,l,c,t[p],t[p+1],t[p+2],t[p+3],o,a,h),p+=6;break;case vn.curveTo2:l=o,c=a,i.bezierCurveTo(o,a,t[p],t[p+1],t[p+2],t[p+3]),s.updateCurvePathMinMax(u,l,c,o,a,t[p],t[p+1],t[p+2],t[p+3],h),o=t[p+2],a=t[p+3],p+=4;break;case vn.curveTo3:l=o,c=a,o=t[p+2],a=t[p+3],i.bezierCurveTo(t[p],t[p+1],o,a,o,a),s.updateCurvePathMinMax(u,l,c,t[p],t[p+1],o,a,o,a,h),p+=4;break;case vn.closePath:i.closePath();break}d&&s.updateScalingPathMinMax(u,h),s.setCurrentPoint(o,a)}closePath(){this.ctx.closePath()}stroke(e=!0){let t=this.ctx,r=this.current.strokeColor;t.globalAlpha=this.current.strokeAlpha,this.contentVisible&&(typeof r=="object"&&r?.getPattern?(t.save(),t.strokeStyle=r.getPattern(t,this,cr(t),wt.STROKE),this.rescaleAndStroke(!1),t.restore()):this.rescaleAndStroke(!0)),e&&this.consumePath(this.current.getClippedPathBoundingBox()),t.globalAlpha=this.current.fillAlpha}closeStroke(){this.closePath(),this.stroke()}fill(e=!0){let t=this.ctx,r=this.current.fillColor,i=this.current.patternFill,s=!1;i&&(t.save(),t.fillStyle=r.getPattern(t,this,cr(t),wt.FILL),s=!0);let o=this.current.getClippedPathBoundingBox();this.contentVisible&&o!==null&&(this.pendingEOFill?(t.fill("evenodd"),this.pendingEOFill=!1):t.fill()),s&&t.restore(),e&&this.consumePath(o)}eoFill(){this.pendingEOFill=!0,this.fill()}fillStroke(){this.fill(!1),this.stroke(!1),this.consumePath()}eoFillStroke(){this.pendingEOFill=!0,this.fillStroke()}closeFillStroke(){this.closePath(),this.fillStroke()}closeEOFillStroke(){this.pendingEOFill=!0,this.closePath(),this.fillStroke()}endPath(){this.consumePath()}clip(){this.pendingClip=mk}eoClip(){this.pendingClip=VA}beginText(){this.current.textMatrix=$A,this.current.textMatrixScale=1,this.current.x=this.current.lineX=0,this.current.y=this.current.lineY=0}endText(){let e=this.pendingTextPaths,t=this.ctx;if(e===void 0){t.beginPath();return}t.save(),t.beginPath();for(let r of e)t.setTransform(...r.transform),t.translate(r.x,r.y),r.addToPath(t,r.fontSize);t.restore(),t.clip(),t.beginPath(),delete this.pendingTextPaths}setCharSpacing(e){this.current.charSpacing=e}setWordSpacing(e){this.current.wordSpacing=e}setHScale(e){this.current.textHScale=e/100}setLeading(e){this.current.leading=-e}setFont(e,t){let r=this.commonObjs.get(e),i=this.current;if(!r)throw new Error(`Can't find font for ${e}`);if(i.fontMatrix=r.fontMatrix||vm,(i.fontMatrix[0]===0||i.fontMatrix[3]===0)&&oe("Invalid font matrix for font "+e),t<0?(t=-t,i.fontDirection=-1):i.fontDirection=1,this.current.font=r,this.current.fontSize=t,r.isType3Font)return;let s=r.loadedName||"sans-serif",o=r.systemFontInfo?.css||`"${s}", ${r.fallbackName}`,a="normal";r.black?a="900":r.bold&&(a="bold");let l=r.italic?"italic":"normal",c=t;t<PA?c=PA:t>NA&&(c=NA),this.current.fontSizeScale=t/c,this.ctx.font=`${l} ${a} ${c}px ${o}`}setTextRenderingMode(e){this.current.textRenderingMode=e}setTextRise(e){this.current.textRise=e}moveText(e,t){this.current.x=this.current.lineX+=e,this.current.y=this.current.lineY+=t}setLeadingMoveText(e,t){this.setLeading(-t),this.moveText(e,t)}setTextMatrix(e,t,r,i,s,o){this.current.textMatrix=[e,t,r,i,s,o],this.current.textMatrixScale=Math.hypot(e,t),this.current.x=this.current.lineX=0,this.current.y=this.current.lineY=0}nextLine(){this.moveText(0,this.current.leading)}paintChar(e,t,r,i){let s=this.ctx,o=this.current,a=o.font,l=o.textRenderingMode,c=o.fontSize/o.fontSizeScale,u=l&pt.FILL_STROKE_MASK,d=!!(l&pt.ADD_TO_PATH_FLAG),h=o.patternFill&&!a.missingFile,f;(a.disableFontFace||d||h)&&(f=a.getPathGenerator(this.commonObjs,e)),a.disableFontFace||h?(s.save(),s.translate(t,r),s.beginPath(),f(s,c),i&&s.setTransform(...i),(u===pt.FILL||u===pt.FILL_STROKE)&&s.fill(),(u===pt.STROKE||u===pt.FILL_STROKE)&&s.stroke(),s.restore()):((u===pt.FILL||u===pt.FILL_STROKE)&&s.fillText(e,t,r),(u===pt.STROKE||u===pt.FILL_STROKE)&&s.strokeText(e,t,r)),d&&(this.pendingTextPaths||=[]).push({transform:Le(s),x:t,y:r,fontSize:c,addToPath:f})}get isFontSubpixelAAEnabled(){let{context:e}=this.cachedCanvases.getCanvas("isFontSubpixelAAEnabled",10,10);e.scale(1.5,1),e.fillText("I",0,10);let t=e.getImageData(0,0,10,10).data,r=!1;for(let i=3;i<t.length;i+=4)if(t[i]>0&&t[i]<255){r=!0;break}return ue(this,"isFontSubpixelAAEnabled",r)}showText(e){let t=this.current,r=t.font;if(r.isType3Font)return this.showType3Text(e);let i=t.fontSize;if(i===0)return;let s=this.ctx,o=t.fontSizeScale,a=t.charSpacing,l=t.wordSpacing,c=t.fontDirection,u=t.textHScale*c,d=e.length,h=r.vertical,f=h?1:-1,p=r.defaultVMetrics,g=i*t.fontMatrix[0],v=t.textRenderingMode===pt.FILL&&!r.disableFontFace&&!t.patternFill;s.save(),s.transform(...t.textMatrix),s.translate(t.x,t.y+t.textRise),c>0?s.scale(u,-1):s.scale(u,1);let m;if(t.patternFill){s.save();let S=t.fillColor.getPattern(s,this,cr(s),wt.FILL);m=Le(s),s.restore(),s.fillStyle=S}let y=t.lineWidth,w=t.textMatrixScale;if(w===0||y===0){let S=t.textRenderingMode&pt.FILL_STROKE_MASK;(S===pt.STROKE||S===pt.FILL_STROKE)&&(y=this.getSinglePixelWidth())}else y/=w;if(o!==1&&(s.scale(o,o),y/=o),s.lineWidth=y,r.isInvalidPDFjsFont){let S=[],T=0;for(let M of e)S.push(M.unicode),T+=M.width;s.fillText(S.join(""),0,0),t.x+=T*g*u,s.restore(),this.compose();return}let b=0,C;for(C=0;C<d;++C){let S=e[C];if(typeof S=="number"){b+=f*S*i/1e3;continue}let T=!1,M=(S.isSpace?l:0)+a,E=S.fontChar,x=S.accent,N,pe,de=S.width;if(h){let Ee=S.vmetric||p,je=-(S.vmetric?Ee[1]:de*.5)*g,V=Ee[2]*g;de=Ee?-Ee[0]:de,N=je/o,pe=(b+V)/o}else N=b/o,pe=0;if(r.remeasure&&de>0){let Ee=s.measureText(E).width*1e3/i*o;if(de<Ee&&this.isFontSubpixelAAEnabled){let je=de/Ee;T=!0,s.save(),s.scale(je,1),N/=je}else de!==Ee&&(N+=(de-Ee)/2e3*i/o)}if(this.contentVisible&&(S.isInFont||r.missingFile)){if(v&&!x)s.fillText(E,N,pe);else if(this.paintChar(E,N,pe,m),x){let Ee=N+i*x.offset.x/o,je=pe-i*x.offset.y/o;this.paintChar(x.fontChar,Ee,je,m)}}let ce=h?de*g-M*c:de*g+M*c;b+=ce,T&&s.restore()}h?t.y-=b:t.x+=b*u,s.restore(),this.compose()}showType3Text(e){let t=this.ctx,r=this.current,i=r.font,s=r.fontSize,o=r.fontDirection,a=i.vertical?1:-1,l=r.charSpacing,c=r.wordSpacing,u=r.textHScale*o,d=r.fontMatrix||vm,h=e.length,f=r.textRenderingMode===pt.INVISIBLE,p,g,v,m;if(!(f||s===0)){for(this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null,t.save(),t.transform(...r.textMatrix),t.translate(r.x,r.y),t.scale(u,o),p=0;p<h;++p){if(g=e[p],typeof g=="number"){m=a*g*s/1e3,this.ctx.translate(m,0),r.x+=m*u;continue}let y=(g.isSpace?c:0)+l,w=i.charProcOperatorList[g.operatorListId];if(!w){oe(`Type3 character "${g.operatorListId}" is not available.`);continue}this.contentVisible&&(this.processingType3=g,this.save(),t.scale(s,s),t.transform(...d),this.executeOperatorList(w),this.restore()),v=L.applyTransform([g.width,0],d)[0]*s+y,t.translate(v,0),r.x+=v*u}t.restore(),this.processingType3=null}}setCharWidth(e,t){}setCharWidthAndBounds(e,t,r,i,s,o){this.ctx.rect(r,i,s-r,o-i),this.ctx.clip(),this.endPath()}getColorN_Pattern(e){let t;if(e[0]==="TilingPattern"){let r=e[1],i=this.baseTransform||Le(this.ctx),s={createCanvasGraphics:o=>new n(o,this.commonObjs,this.objs,this.canvasFactory,this.filterFactory,{optionalContentConfig:this.optionalContentConfig,markedContentStack:this.markedContentStack})};t=new ck(e,r,this.ctx,s,i)}else t=this._getPattern(e[1],e[2]);return t}setStrokeColorN(){this.current.strokeColor=this.getColorN_Pattern(arguments)}setFillColorN(){this.current.fillColor=this.getColorN_Pattern(arguments),this.current.patternFill=!0}setStrokeRGBColor(e,t,r){this.ctx.strokeStyle=this.current.strokeColor=L.makeHexColor(e,t,r)}setStrokeTransparent(){this.ctx.strokeStyle=this.current.strokeColor="transparent"}setFillRGBColor(e,t,r){this.ctx.fillStyle=this.current.fillColor=L.makeHexColor(e,t,r),this.current.patternFill=!1}setFillTransparent(){this.ctx.fillStyle=this.current.fillColor="transparent",this.current.patternFill=!1}_getPattern(e,t=null){let r;return this.cachedPatterns.has(e)?r=this.cachedPatterns.get(e):(r=lk(this.getObject(e)),this.cachedPatterns.set(e,r)),t&&(r.matrix=t),r}shadingFill(e){if(!this.contentVisible)return;let t=this.ctx;this.save();let r=this._getPattern(e);t.fillStyle=r.getPattern(t,this,cr(t),wt.SHADING);let i=cr(t);if(i){let{width:s,height:o}=t.canvas,[a,l,c,u]=L.getAxialAlignedBoundingBox([0,0,s,o],i);this.ctx.fillRect(a,l,c-a,u-l)}else this.ctx.fillRect(-1e10,-1e10,2e10,2e10);this.compose(this.current.getClippedPathBoundingBox()),this.restore()}beginInlineImage(){Te("Should not call beginInlineImage")}beginImageData(){Te("Should not call beginImageData")}paintFormXObjectBegin(e,t){if(this.contentVisible&&(this.save(),this.baseTransformStack.push(this.baseTransform),e&&this.transform(...e),this.baseTransform=Le(this.ctx),t)){let r=t[2]-t[0],i=t[3]-t[1];this.ctx.rect(t[0],t[1],r,i),this.current.updateRectMinMax(Le(this.ctx),t),this.clip(),this.endPath()}}paintFormXObjectEnd(){this.contentVisible&&(this.restore(),this.baseTransform=this.baseTransformStack.pop())}beginGroup(e){if(!this.contentVisible)return;this.save(),this.inSMaskMode&&(this.endSMaskMode(),this.current.activeSMask=null);let t=this.ctx;e.isolated||sd("TODO: Support non-isolated groups."),e.knockout&&oe("Knockout groups not supported.");let r=Le(t);if(e.matrix&&t.transform(...e.matrix),!e.bbox)throw new Error("Bounding box is required.");let i=L.getAxialAlignedBoundingBox(e.bbox,Le(t)),s=[0,0,t.canvas.width,t.canvas.height];i=L.intersect(i,s)||[0,0,0,0];let o=Math.floor(i[0]),a=Math.floor(i[1]),l=Math.max(Math.ceil(i[2])-o,1),c=Math.max(Math.ceil(i[3])-a,1);this.current.startNewPathAndClipBox([0,0,l,c]);let u="groupAt"+this.groupLevel;e.smask&&(u+="_smask_"+this.smaskCounter++%2);let d=this.cachedCanvases.getCanvas(u,l,c),h=d.context;h.translate(-o,-a),h.transform(...r),e.smask?this.smaskStack.push({canvas:d.canvas,context:h,offsetX:o,offsetY:a,subtype:e.smask.subtype,backdrop:e.smask.backdrop,transferMap:e.smask.transferMap||null,startTransformInverse:null}):(t.setTransform(1,0,0,1,0,0),t.translate(o,a),t.save()),sa(t,h),this.ctx=h,this.setGState([["BM","source-over"],["ca",1],["CA",1]]),this.groupStack.push(t),this.groupLevel++}endGroup(e){if(!this.contentVisible)return;this.groupLevel--;let t=this.ctx,r=this.groupStack.pop();if(this.ctx=r,this.ctx.imageSmoothingEnabled=!1,e.smask)this.tempSMask=this.smaskStack.pop(),this.restore();else{this.ctx.restore();let i=Le(this.ctx);this.restore(),this.ctx.save(),this.ctx.setTransform(...i);let s=L.getAxialAlignedBoundingBox([0,0,t.canvas.width,t.canvas.height],i);this.ctx.drawImage(t.canvas,0,0),this.ctx.restore(),this.compose(s)}}beginAnnotation(e,t,r,i,s){if(this.#e(),vu(this.ctx),this.ctx.save(),this.save(),this.baseTransform&&this.ctx.setTransform(...this.baseTransform),t){let o=t[2]-t[0],a=t[3]-t[1];if(s&&this.annotationCanvasMap){r=r.slice(),r[4]-=t[0],r[5]-=t[1],t=t.slice(),t[0]=t[1]=0,t[2]=o,t[3]=a;let[l,c]=L.singularValueDecompose2dScale(Le(this.ctx)),{viewportScale:u}=this,d=Math.ceil(o*this.outputScaleX*u),h=Math.ceil(a*this.outputScaleY*u);this.annotationCanvas=this.canvasFactory.create(d,h);let{canvas:f,context:p}=this.annotationCanvas;this.annotationCanvasMap.set(e,f),this.annotationCanvas.savedCtx=this.ctx,this.ctx=p,this.ctx.save(),this.ctx.setTransform(l,0,0,-c,0,a*c),vu(this.ctx)}else vu(this.ctx),this.endPath(),this.ctx.rect(t[0],t[1],o,a),this.ctx.clip(),this.ctx.beginPath()}this.current=new Fu(this.ctx.canvas.width,this.ctx.canvas.height),this.transform(...r),this.transform(...i)}endAnnotation(){this.annotationCanvas&&(this.ctx.restore(),this.#t(),this.ctx=this.annotationCanvas.savedCtx,delete this.annotationCanvas.savedCtx,delete this.annotationCanvas)}paintImageMaskXObject(e){if(!this.contentVisible)return;let t=e.count;e=this.getObject(e.data,e),e.count=t;let r=this.ctx,i=this.processingType3;if(i&&(i.compiled===void 0&&(i.compiled=fk(e)),i.compiled)){i.compiled(r);return}let s=this._createMaskCanvas(e),o=s.canvas;r.save(),r.setTransform(1,0,0,1,0,0),r.drawImage(o,s.offsetX,s.offsetY),r.restore(),this.compose()}paintImageMaskXObjectRepeat(e,t,r=0,i=0,s,o){if(!this.contentVisible)return;e=this.getObject(e.data,e);let a=this.ctx;a.save();let l=Le(a);a.transform(t,r,i,s,0,0);let c=this._createMaskCanvas(e);a.setTransform(1,0,0,1,c.offsetX-l[4],c.offsetY-l[5]);for(let u=0,d=o.length;u<d;u+=2){let h=L.transform(l,[t,r,i,s,o[u],o[u+1]]),[f,p]=L.applyTransform([0,0],h);a.drawImage(c.canvas,f,p)}a.restore(),this.compose()}paintImageMaskXObjectGroup(e){if(!this.contentVisible)return;let t=this.ctx,r=this.current.fillColor,i=this.current.patternFill;for(let s of e){let{data:o,width:a,height:l,transform:c}=s,u=this.cachedCanvases.getCanvas("maskCanvas",a,l),d=u.context;d.save();let h=this.getObject(o,s);jA(d,h),d.globalCompositeOperation="source-in",d.fillStyle=i?r.getPattern(d,this,cr(t),wt.FILL):r,d.fillRect(0,0,a,l),d.restore(),t.save(),t.transform(...c),t.scale(1,-1),mu(t,u.canvas,0,0,a,l,0,-1,1,1),t.restore()}this.compose()}paintImageXObject(e){if(!this.contentVisible)return;let t=this.getObject(e);if(!t){oe("Dependent image isn't ready yet");return}this.paintInlineImageXObject(t)}paintImageXObjectRepeat(e,t,r,i){if(!this.contentVisible)return;let s=this.getObject(e);if(!s){oe("Dependent image isn't ready yet");return}let o=s.width,a=s.height,l=[];for(let c=0,u=i.length;c<u;c+=2)l.push({transform:[t,0,0,r,i[c],i[c+1]],x:0,y:0,w:o,h:a});this.paintInlineImageXObjectGroup(s,l)}applyTransferMapsToCanvas(e){return this.current.transferMaps!=="none"&&(e.filter=this.current.transferMaps,e.drawImage(e.canvas,0,0),e.filter="none"),e.canvas}applyTransferMapsToBitmap(e){if(this.current.transferMaps==="none")return e.bitmap;let{bitmap:t,width:r,height:i}=e,s=this.cachedCanvases.getCanvas("inlineImage",r,i),o=s.context;return o.filter=this.current.transferMaps,o.drawImage(t,0,0),o.filter="none",s.canvas}paintInlineImageXObject(e){if(!this.contentVisible)return;let t=e.width,r=e.height,i=this.ctx;if(this.save(),!gt){let{filter:a}=i;a!=="none"&&a!==""&&(i.filter="none")}i.scale(1/t,-1/r);let s;if(e.bitmap)s=this.applyTransferMapsToBitmap(e);else if(typeof HTMLElement=="function"&&e instanceof HTMLElement||!e.data)s=e;else{let l=this.cachedCanvases.getCanvas("inlineImage",t,r).context;FA(l,e),s=this.applyTransferMapsToCanvas(l)}let o=this._scaleImage(s,cr(i));i.imageSmoothingEnabled=BA(Le(i),e.interpolate),mu(i,o.img,0,0,o.paintWidth,o.paintHeight,0,-r,t,r),this.compose(),this.restore()}paintInlineImageXObjectGroup(e,t){if(!this.contentVisible)return;let r=this.ctx,i;if(e.bitmap)i=e.bitmap;else{let s=e.width,o=e.height,l=this.cachedCanvases.getCanvas("inlineImage",s,o).context;FA(l,e),i=this.applyTransferMapsToCanvas(l)}for(let s of t)r.save(),r.transform(...s.transform),r.scale(1,-1),mu(r,i,s.x,s.y,s.w,s.h,0,-1,1,1),r.restore();this.compose()}paintSolidColorImageMask(){this.contentVisible&&(this.ctx.fillRect(0,0,1,1),this.compose())}markPoint(e){}markPointProps(e,t){}beginMarkedContent(e){this.markedContentStack.push({visible:!0})}beginMarkedContentProps(e,t){e==="OC"?this.markedContentStack.push({visible:this.optionalContentConfig.isVisible(t)}):this.markedContentStack.push({visible:!0}),this.contentVisible=this.isContentVisible()}endMarkedContent(){this.markedContentStack.pop(),this.contentVisible=this.isContentVisible()}beginCompat(){}endCompat(){}consumePath(e){let t=this.current.isEmptyClip();this.pendingClip&&this.current.updateClipFromPath(),this.pendingClip||this.compose(e);let r=this.ctx;this.pendingClip&&(t||(this.pendingClip===VA?r.clip("evenodd"):r.clip()),this.pendingClip=null),this.current.startNewPathAndClipBox(this.current.clipBox),r.beginPath()}getSinglePixelWidth(){if(!this._cachedGetSinglePixelWidth){let e=Le(this.ctx);if(e[1]===0&&e[2]===0)this._cachedGetSinglePixelWidth=1/Math.min(Math.abs(e[0]),Math.abs(e[3]));else{let t=Math.abs(e[0]*e[3]-e[2]*e[1]),r=Math.hypot(e[0],e[2]),i=Math.hypot(e[1],e[3]);this._cachedGetSinglePixelWidth=Math.max(r,i)/t}}return this._cachedGetSinglePixelWidth}getScaleForStroking(){if(this._cachedScaleForStroking[0]===-1){let{lineWidth:e}=this.current,{a:t,b:r,c:i,d:s}=this.ctx.getTransform(),o,a;if(r===0&&i===0){let l=Math.abs(t),c=Math.abs(s);if(l===c)if(e===0)o=a=1/l;else{let u=l*e;o=a=u<1?1/u:1}else if(e===0)o=1/l,a=1/c;else{let u=l*e,d=c*e;o=u<1?1/u:1,a=d<1?1/d:1}}else{let l=Math.abs(t*s-r*i),c=Math.hypot(t,r),u=Math.hypot(i,s);if(e===0)o=u/l,a=c/l;else{let d=e*l;o=u>d?u/d:1,a=c>d?c/d:1}}this._cachedScaleForStroking[0]=o,this._cachedScaleForStroking[1]=a}return this._cachedScaleForStroking}rescaleAndStroke(e){let{ctx:t}=this,{lineWidth:r}=this.current,[i,s]=this.getScaleForStroking();if(t.lineWidth=r||1,i===1&&s===1){t.stroke();return}let o=t.getLineDash();if(e&&t.save(),t.scale(i,s),o.length>0){let a=Math.max(i,s);t.setLineDash(o.map(l=>l/a)),t.lineDashOffset/=a}t.stroke(),e&&t.restore()}isContentVisible(){for(let e=this.markedContentStack.length-1;e>=0;e--)if(!this.markedContentStack[e].visible)return!1;return!0}};for(let n in vn)Os.prototype[n]!==void 0&&(Os.prototype[vn[n]]=Os.prototype[n]);var Ci=class{static#e=null;static#t="";static get workerPort(){return this.#e}static set workerPort(e){if(!(typeof Worker<"u"&&e instanceof Worker)&&e!==null)throw new Error("Invalid `workerPort` type.");this.#e=e}static get workerSrc(){return this.#t}static set workerSrc(e){if(typeof e!="string")throw new Error("Invalid `workerSrc` type.");this.#t=e}},yu={UNKNOWN:0,DATA:1,ERROR:2},Ze={UNKNOWN:0,CANCEL:1,CANCEL_COMPLETE:2,CLOSE:3,ENQUEUE:4,ERROR:5,PULL:6,PULL_COMPLETE:7,START_COMPLETE:8};function Bt(n){switch(n instanceof Error||typeof n=="object"&&n!==null||Te('wrapReason: Expected "reason" to be a (possibly cloned) Error.'),n.name){case"AbortException":return new fr(n.message);case"MissingPDFException":return new hr(n.message);case"PasswordException":return new ca(n.message,n.code);case"UnexpectedResponseException":return new Ns(n.message,n.status);case"UnknownErrorException":return new ua(n.message,n.details);default:return new ua(n.message,n.toString())}}var Ei=class{#e=new AbortController;constructor(e,t,r){this.sourceName=e,this.targetName=t,this.comObj=r,this.callbackId=1,this.streamId=1,this.streamSinks=Object.create(null),this.streamControllers=Object.create(null),this.callbackCapabilities=Object.create(null),this.actionHandler=Object.create(null),r.addEventListener("message",this.#t.bind(this),{signal:this.#e.signal})}#t({data:e}){if(e.targetName!==this.sourceName)return;if(e.stream){this.#r(e);return}if(e.callback){let r=e.callbackId,i=this.callbackCapabilities[r];if(!i)throw new Error(`Cannot resolve callback ${r}`);if(delete this.callbackCapabilities[r],e.callback===yu.DATA)i.resolve(e.data);else if(e.callback===yu.ERROR)i.reject(Bt(e.reason));else throw new Error("Unexpected callback case");return}let t=this.actionHandler[e.action];if(!t)throw new Error(`Unknown action from worker: ${e.action}`);if(e.callbackId){let r=this.sourceName,i=e.sourceName,s=this.comObj;new Promise(function(o){o(t(e.data))}).then(function(o){s.postMessage({sourceName:r,targetName:i,callback:yu.DATA,callbackId:e.callbackId,data:o})},function(o){s.postMessage({sourceName:r,targetName:i,callback:yu.ERROR,callbackId:e.callbackId,reason:Bt(o)})});return}if(e.streamId){this.#n(e);return}t(e.data)}on(e,t){let r=this.actionHandler;if(r[e])throw new Error(`There is already an actionName called "${e}"`);r[e]=t}send(e,t,r){this.comObj.postMessage({sourceName:this.sourceName,targetName:this.targetName,action:e,data:t},r)}sendWithPromise(e,t,r){let i=this.callbackId++,s=Promise.withResolvers();this.callbackCapabilities[i]=s;try{this.comObj.postMessage({sourceName:this.sourceName,targetName:this.targetName,action:e,callbackId:i,data:t},r)}catch(o){s.reject(o)}return s.promise}sendWithStream(e,t,r,i){let s=this.streamId++,o=this.sourceName,a=this.targetName,l=this.comObj;return new ReadableStream({start:c=>{let u=Promise.withResolvers();return this.streamControllers[s]={controller:c,startCall:u,pullCall:null,cancelCall:null,isClosed:!1},l.postMessage({sourceName:o,targetName:a,action:e,streamId:s,data:t,desiredSize:c.desiredSize},i),u.promise},pull:c=>{let u=Promise.withResolvers();return this.streamControllers[s].pullCall=u,l.postMessage({sourceName:o,targetName:a,stream:Ze.PULL,streamId:s,desiredSize:c.desiredSize}),u.promise},cancel:c=>{it(c instanceof Error,"cancel must have a valid reason");let u=Promise.withResolvers();return this.streamControllers[s].cancelCall=u,this.streamControllers[s].isClosed=!0,l.postMessage({sourceName:o,targetName:a,stream:Ze.CANCEL,streamId:s,reason:Bt(c)}),u.promise}},r)}#n(e){let t=e.streamId,r=this.sourceName,i=e.sourceName,s=this.comObj,o=this,a=this.actionHandler[e.action],l={enqueue(c,u=1,d){if(this.isCancelled)return;let h=this.desiredSize;this.desiredSize-=u,h>0&&this.desiredSize<=0&&(this.sinkCapability=Promise.withResolvers(),this.ready=this.sinkCapability.promise),s.postMessage({sourceName:r,targetName:i,stream:Ze.ENQUEUE,streamId:t,chunk:c},d)},close(){this.isCancelled||(this.isCancelled=!0,s.postMessage({sourceName:r,targetName:i,stream:Ze.CLOSE,streamId:t}),delete o.streamSinks[t])},error(c){it(c instanceof Error,"error must have a valid reason"),!this.isCancelled&&(this.isCancelled=!0,s.postMessage({sourceName:r,targetName:i,stream:Ze.ERROR,streamId:t,reason:Bt(c)}))},sinkCapability:Promise.withResolvers(),onPull:null,onCancel:null,isCancelled:!1,desiredSize:e.desiredSize,ready:null};l.sinkCapability.resolve(),l.ready=l.sinkCapability.promise,this.streamSinks[t]=l,new Promise(function(c){c(a(e.data,l))}).then(function(){s.postMessage({sourceName:r,targetName:i,stream:Ze.START_COMPLETE,streamId:t,success:!0})},function(c){s.postMessage({sourceName:r,targetName:i,stream:Ze.START_COMPLETE,streamId:t,reason:Bt(c)})})}#r(e){let t=e.streamId,r=this.sourceName,i=e.sourceName,s=this.comObj,o=this.streamControllers[t],a=this.streamSinks[t];switch(e.stream){case Ze.START_COMPLETE:e.success?o.startCall.resolve():o.startCall.reject(Bt(e.reason));break;case Ze.PULL_COMPLETE:e.success?o.pullCall.resolve():o.pullCall.reject(Bt(e.reason));break;case Ze.PULL:if(!a){s.postMessage({sourceName:r,targetName:i,stream:Ze.PULL_COMPLETE,streamId:t,success:!0});break}a.desiredSize<=0&&e.desiredSize>0&&a.sinkCapability.resolve(),a.desiredSize=e.desiredSize,new Promise(function(l){l(a.onPull?.())}).then(function(){s.postMessage({sourceName:r,targetName:i,stream:Ze.PULL_COMPLETE,streamId:t,success:!0})},function(l){s.postMessage({sourceName:r,targetName:i,stream:Ze.PULL_COMPLETE,streamId:t,reason:Bt(l)})});break;case Ze.ENQUEUE:if(it(o,"enqueue should have stream controller"),o.isClosed)break;o.controller.enqueue(e.chunk);break;case Ze.CLOSE:if(it(o,"close should have stream controller"),o.isClosed)break;o.isClosed=!0,o.controller.close(),this.#i(o,t);break;case Ze.ERROR:it(o,"error should have stream controller"),o.controller.error(Bt(e.reason)),this.#i(o,t);break;case Ze.CANCEL_COMPLETE:e.success?o.cancelCall.resolve():o.cancelCall.reject(Bt(e.reason)),this.#i(o,t);break;case Ze.CANCEL:if(!a)break;new Promise(function(l){l(a.onCancel?.(Bt(e.reason)))}).then(function(){s.postMessage({sourceName:r,targetName:i,stream:Ze.CANCEL_COMPLETE,streamId:t,success:!0})},function(l){s.postMessage({sourceName:r,targetName:i,stream:Ze.CANCEL_COMPLETE,streamId:t,reason:Bt(l)})}),a.sinkCapability.reject(Bt(e.reason)),a.isCancelled=!0,delete this.streamSinks[t];break;default:throw new Error("Unexpected stream case")}}#i(e,t){return I(this,null,function*(){yield Promise.allSettled([e.startCall?.promise,e.pullCall?.promise,e.cancelCall?.promise]),delete this.streamControllers[t]})}destroy(){this.#e?.abort(),this.#e=null}},Vm=class{#e;#t;constructor({parsedData:e,rawData:t}){this.#e=e,this.#t=t}getRaw(){return this.#t}get(e){return this.#e.get(e)??null}getAll(){return kv(this.#e)}has(e){return this.#e.has(e)}},Rs=Symbol("INTERNAL"),Hm=class{#e=!1;#t=!1;#n=!1;#r=!0;constructor(e,{name:t,intent:r,usage:i,rbGroups:s}){this.#e=!!(e&Vt.DISPLAY),this.#t=!!(e&Vt.PRINT),this.name=t,this.intent=r,this.usage=i,this.rbGroups=s}get visible(){if(this.#n)return this.#r;if(!this.#r)return!1;let{print:e,view:t}=this.usage;return this.#e?t?.viewState!=="OFF":this.#t?e?.printState!=="OFF":!0}_setVisible(e,t,r=!1){e!==Rs&&Te("Internal method `_setVisible` called."),this.#n=r,this.#r=t}},Um=class{#e=null;#t=new Map;#n=null;#r=null;constructor(e,t=Vt.DISPLAY){if(this.renderingIntent=t,this.name=null,this.creator=null,e!==null){this.name=e.name,this.creator=e.creator,this.#r=e.order;for(let r of e.groups)this.#t.set(r.id,new Hm(t,r));if(e.baseState==="OFF")for(let r of this.#t.values())r._setVisible(Rs,!1);for(let r of e.on)this.#t.get(r)._setVisible(Rs,!0);for(let r of e.off)this.#t.get(r)._setVisible(Rs,!1);this.#n=this.getHash()}}#i(e){let t=e.length;if(t<2)return!0;let r=e[0];for(let i=1;i<t;i++){let s=e[i],o;if(Array.isArray(s))o=this.#i(s);else if(this.#t.has(s))o=this.#t.get(s).visible;else return oe(`Optional content group not found: ${s}`),!0;switch(r){case"And":if(!o)return!1;break;case"Or":if(o)return!0;break;case"Not":return!o;default:return!0}}return r==="And"}isVisible(e){if(this.#t.size===0)return!0;if(!e)return sd("Optional content group not defined."),!0;if(e.type==="OCG")return this.#t.has(e.id)?this.#t.get(e.id).visible:(oe(`Optional content group not found: ${e.id}`),!0);if(e.type==="OCMD"){if(e.expression)return this.#i(e.expression);if(!e.policy||e.policy==="AnyOn"){for(let t of e.ids){if(!this.#t.has(t))return oe(`Optional content group not found: ${t}`),!0;if(this.#t.get(t).visible)return!0}return!1}else if(e.policy==="AllOn"){for(let t of e.ids){if(!this.#t.has(t))return oe(`Optional content group not found: ${t}`),!0;if(!this.#t.get(t).visible)return!1}return!0}else if(e.policy==="AnyOff"){for(let t of e.ids){if(!this.#t.has(t))return oe(`Optional content group not found: ${t}`),!0;if(!this.#t.get(t).visible)return!0}return!1}else if(e.policy==="AllOff"){for(let t of e.ids){if(!this.#t.has(t))return oe(`Optional content group not found: ${t}`),!0;if(this.#t.get(t).visible)return!1}return!0}return oe(`Unknown optional content policy ${e.policy}.`),!0}return oe(`Unknown group type ${e.type}.`),!0}setVisibility(e,t=!0,r=!0){let i=this.#t.get(e);if(!i){oe(`Optional content group not found: ${e}`);return}if(r&&t&&i.rbGroups.length)for(let s of i.rbGroups)for(let o of s)o!==e&&this.#t.get(o)?._setVisible(Rs,!1,!0);i._setVisible(Rs,!!t,!0),this.#e=null}setOCGState({state:e,preserveRB:t}){let r;for(let i of e){switch(i){case"ON":case"OFF":case"Toggle":r=i;continue}let s=this.#t.get(i);if(s)switch(r){case"ON":this.setVisibility(i,!0,t);break;case"OFF":this.setVisibility(i,!1,t);break;case"Toggle":this.setVisibility(i,!s.visible,t);break}}this.#e=null}get hasInitialVisibility(){return this.#n===null||this.getHash()===this.#n}getOrder(){return this.#t.size?this.#r?this.#r.slice():[...this.#t.keys()]:null}getGroups(){return this.#t.size>0?kv(this.#t):null}getGroup(e){return this.#t.get(e)||null}getHash(){if(this.#e!==null)return this.#e;let e=new Tu;for(let[t,r]of this.#t)e.update(`${t}:${r.visible}`);return this.#e=e.hexdigest()}},$m=class{constructor(e,{disableRange:t=!1,disableStream:r=!1}){it(e,'PDFDataTransportStream - missing required "pdfDataRangeTransport" argument.');let{length:i,initialData:s,progressiveDone:o,contentDispositionFilename:a}=e;if(this._queuedChunks=[],this._progressiveDone=o,this._contentDispositionFilename=a,s?.length>0){let l=s instanceof Uint8Array&&s.byteLength===s.buffer.byteLength?s.buffer:new Uint8Array(s).buffer;this._queuedChunks.push(l)}this._pdfDataRangeTransport=e,this._isStreamingSupported=!r,this._isRangeSupported=!t,this._contentLength=i,this._fullRequestReader=null,this._rangeReaders=[],e.addRangeListener((l,c)=>{this._onReceiveData({begin:l,chunk:c})}),e.addProgressListener((l,c)=>{this._onProgress({loaded:l,total:c})}),e.addProgressiveReadListener(l=>{this._onReceiveData({chunk:l})}),e.addProgressiveDoneListener(()=>{this._onProgressiveDone()}),e.transportReady()}_onReceiveData({begin:e,chunk:t}){let r=t instanceof Uint8Array&&t.byteLength===t.buffer.byteLength?t.buffer:new Uint8Array(t).buffer;if(e===void 0)this._fullRequestReader?this._fullRequestReader._enqueue(r):this._queuedChunks.push(r);else{let i=this._rangeReaders.some(function(s){return s._begin!==e?!1:(s._enqueue(r),!0)});it(i,"_onReceiveData - no `PDFDataTransportStreamRangeReader` instance found.")}}get _progressiveDataLength(){return this._fullRequestReader?._loaded??0}_onProgress(e){e.total===void 0?this._rangeReaders[0]?.onProgress?.({loaded:e.loaded}):this._fullRequestReader?.onProgress?.({loaded:e.loaded,total:e.total})}_onProgressiveDone(){this._fullRequestReader?.progressiveDone(),this._progressiveDone=!0}_removeRangeReader(e){let t=this._rangeReaders.indexOf(e);t>=0&&this._rangeReaders.splice(t,1)}getFullReader(){it(!this._fullRequestReader,"PDFDataTransportStream.getFullReader can only be called once.");let e=this._queuedChunks;return this._queuedChunks=null,new zm(this,e,this._progressiveDone,this._contentDispositionFilename)}getRangeReader(e,t){if(t<=this._progressiveDataLength)return null;let r=new Wm(this,e,t);return this._pdfDataRangeTransport.requestDataRange(e,t),this._rangeReaders.push(r),r}cancelAllRequests(e){this._fullRequestReader?.cancel(e);for(let t of this._rangeReaders.slice(0))t.cancel(e);this._pdfDataRangeTransport.abort()}},zm=class{constructor(e,t,r=!1,i=null){this._stream=e,this._done=r||!1,this._filename=Fv(i)?i:null,this._queuedChunks=t||[],this._loaded=0;for(let s of this._queuedChunks)this._loaded+=s.byteLength;this._requests=[],this._headersReady=Promise.resolve(),e._fullRequestReader=this,this.onProgress=null}_enqueue(e){this._done||(this._requests.length>0?this._requests.shift().resolve({value:e,done:!1}):this._queuedChunks.push(e),this._loaded+=e.byteLength)}get headersReady(){return this._headersReady}get filename(){return this._filename}get isRangeSupported(){return this._stream._isRangeSupported}get isStreamingSupported(){return this._stream._isStreamingSupported}get contentLength(){return this._stream._contentLength}read(){return I(this,null,function*(){if(this._queuedChunks.length>0)return{value:this._queuedChunks.shift(),done:!1};if(this._done)return{value:void 0,done:!0};let e=Promise.withResolvers();return this._requests.push(e),e.promise})}cancel(e){this._done=!0;for(let t of this._requests)t.resolve({value:void 0,done:!0});this._requests.length=0}progressiveDone(){this._done||(this._done=!0)}},Wm=class{constructor(e,t,r){this._stream=e,this._begin=t,this._end=r,this._queuedChunk=null,this._requests=[],this._done=!1,this.onProgress=null}_enqueue(e){if(!this._done){if(this._requests.length===0)this._queuedChunk=e;else{this._requests.shift().resolve({value:e,done:!1});for(let r of this._requests)r.resolve({value:void 0,done:!0});this._requests.length=0}this._done=!0,this._stream._removeRangeReader(this)}}get isStreamingSupported(){return!1}read(){return I(this,null,function*(){if(this._queuedChunk){let t=this._queuedChunk;return this._queuedChunk=null,{value:t,done:!1}}if(this._done)return{value:void 0,done:!0};let e=Promise.withResolvers();return this._requests.push(e),e.promise})}cancel(e){this._done=!0;for(let t of this._requests)t.resolve({value:void 0,done:!0});this._requests.length=0,this._stream._removeRangeReader(this)}};function vk(n){let e=!0,t=r("filename\\*","i").exec(n);if(t){t=t[1];let u=a(t);return u=unescape(u),u=l(u),u=c(u),s(u)}if(t=o(n),t){let u=c(t);return s(u)}if(t=r("filename","i").exec(n),t){t=t[1];let u=a(t);return u=c(u),s(u)}function r(u,d){return new RegExp("(?:^|;)\\s*"+u+'\\s*=\\s*([^";\\s][^;\\s]*|"(?:[^"\\\\]|\\\\"?)+"?)',d)}function i(u,d){if(u){if(!/^[\x00-\xFF]+$/.test(d))return d;try{let h=new TextDecoder(u,{fatal:!0}),f=od(d);d=h.decode(f),e=!1}catch{}}return d}function s(u){return e&&/[\x80-\xff]/.test(u)&&(u=i("utf-8",u),e&&(u=i("iso-8859-1",u))),u}function o(u){let d=[],h,f=r("filename\\*((?!0\\d)\\d+)(\\*?)","ig");for(;(h=f.exec(u))!==null;){let[,g,v,m]=h;if(g=parseInt(g,10),g in d){if(g===0)break;continue}d[g]=[v,m]}let p=[];for(let g=0;g<d.length&&g in d;++g){let[v,m]=d[g];m=a(m),v&&(m=unescape(m),g===0&&(m=l(m))),p.push(m)}return p.join("")}function a(u){if(u.startsWith('"')){let d=u.slice(1).split('\\"');for(let h=0;h<d.length;++h){let f=d[h].indexOf('"');f!==-1&&(d[h]=d[h].slice(0,f),d.length=h+1),d[h]=d[h].replaceAll(/\\(.)/g,"$1")}u=d.join('"')}return u}function l(u){let d=u.indexOf("'");if(d===-1)return u;let h=u.slice(0,d),p=u.slice(d+1).replace(/^[^']*'/,"");return i(h,p)}function c(u){return!u.startsWith("=?")||/[\x00-\x19\x80-\xff]/.test(u)?u:u.replaceAll(/=\?([\w-]*)\?([QqBb])\?((?:[^?]|\?(?!=))*)\?=/g,function(d,h,f,p){if(f==="q"||f==="Q")return p=p.replaceAll("_"," "),p=p.replaceAll(/=([0-9a-fA-F]{2})/g,function(g,v){return String.fromCharCode(parseInt(v,16))}),i(h,p);try{p=atob(p)}catch{}return i(h,p)})}return""}function Bv(n,e){let t=new Headers;if(!n||!e||typeof e!="object")return t;for(let r in e){let i=e[r];i!==void 0&&t.append(r,i)}return t}function Vv({responseHeaders:n,isHttp:e,rangeChunkSize:t,disableRange:r}){let i={allowRangeRequests:!1,suggestedLength:void 0},s=parseInt(n.get("Content-Length"),10);return!Number.isInteger(s)||(i.suggestedLength=s,s<=2*t)||r||!e||n.get("Accept-Ranges")!=="bytes"||(n.get("Content-Encoding")||"identity")!=="identity"||(i.allowRangeRequests=!0),i}function Hv(n){let e=n.get("Content-Disposition");if(e){let t=vk(e);if(t.includes("%"))try{t=decodeURIComponent(t)}catch{}if(Fv(t))return t}return null}function cd(n,e){return n===404||n===0&&e.startsWith("file:")?new hr('Missing PDF "'+e+'".'):new Ns(`Unexpected server response (${n}) while retrieving PDF "${e}".`,n)}function qA(n){return n===200||n===206}function GA(n,e,t){return{method:"GET",headers:n,signal:t.signal,mode:"cors",credentials:e?"include":"same-origin",redirect:"follow"}}function YA(n){return n instanceof Uint8Array?n.buffer:n instanceof ArrayBuffer?n:(oe(`getArrayBuffer - unexpected data format: ${n}`),new Uint8Array(n).buffer)}var ju=class{constructor(e){this.source=e,this.isHttp=/^https?:/i.test(e.url),this.headers=Bv(this.isHttp,e.httpHeaders),this._fullRequestReader=null,this._rangeRequestReaders=[]}get _progressiveDataLength(){return this._fullRequestReader?._loaded??0}getFullReader(){return it(!this._fullRequestReader,"PDFFetchStream.getFullReader can only be called once."),this._fullRequestReader=new qm(this),this._fullRequestReader}getRangeReader(e,t){if(t<=this._progressiveDataLength)return null;let r=new Gm(this,e,t);return this._rangeRequestReaders.push(r),r}cancelAllRequests(e){this._fullRequestReader?.cancel(e);for(let t of this._rangeRequestReaders.slice(0))t.cancel(e)}},qm=class{constructor(e){this._stream=e,this._reader=null,this._loaded=0,this._filename=null;let t=e.source;this._withCredentials=t.withCredentials||!1,this._contentLength=t.length,this._headersCapability=Promise.withResolvers(),this._disableRange=t.disableRange||!1,this._rangeChunkSize=t.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._abortController=new AbortController,this._isStreamingSupported=!t.disableStream,this._isRangeSupported=!t.disableRange;let r=new Headers(e.headers),i=t.url;fetch(i,GA(r,this._withCredentials,this._abortController)).then(s=>{if(!qA(s.status))throw cd(s.status,i);this._reader=s.body.getReader(),this._headersCapability.resolve();let o=s.headers,{allowRangeRequests:a,suggestedLength:l}=Vv({responseHeaders:o,isHttp:e.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});this._isRangeSupported=a,this._contentLength=l||this._contentLength,this._filename=Hv(o),!this._isStreamingSupported&&this._isRangeSupported&&this.cancel(new fr("Streaming is disabled."))}).catch(this._headersCapability.reject),this.onProgress=null}get headersReady(){return this._headersCapability.promise}get filename(){return this._filename}get contentLength(){return this._contentLength}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}read(){return I(this,null,function*(){yield this._headersCapability.promise;let{value:e,done:t}=yield this._reader.read();return t?{value:e,done:t}:(this._loaded+=e.byteLength,this.onProgress?.({loaded:this._loaded,total:this._contentLength}),{value:YA(e),done:!1})})}cancel(e){this._reader?.cancel(e),this._abortController.abort()}},Gm=class{constructor(e,t,r){this._stream=e,this._reader=null,this._loaded=0;let i=e.source;this._withCredentials=i.withCredentials||!1,this._readCapability=Promise.withResolvers(),this._isStreamingSupported=!i.disableStream,this._abortController=new AbortController;let s=new Headers(e.headers);s.append("Range",`bytes=${t}-${r-1}`);let o=i.url;fetch(o,GA(s,this._withCredentials,this._abortController)).then(a=>{if(!qA(a.status))throw cd(a.status,o);this._readCapability.resolve(),this._reader=a.body.getReader()}).catch(this._readCapability.reject),this.onProgress=null}get isStreamingSupported(){return this._isStreamingSupported}read(){return I(this,null,function*(){yield this._readCapability.promise;let{value:e,done:t}=yield this._reader.read();return t?{value:e,done:t}:(this._loaded+=e.byteLength,this.onProgress?.({loaded:this._loaded}),{value:YA(e),done:!1})})}cancel(e){this._reader?.cancel(e),this._abortController.abort()}},gm=200,mm=206;function yk(n){let e=n.response;return typeof e!="string"?e:od(e).buffer}var Ym=class{constructor({url:e,httpHeaders:t,withCredentials:r}){this.url=e,this.isHttp=/^https?:/i.test(e),this.headers=Bv(this.isHttp,t),this.withCredentials=r||!1,this.currXhrId=0,this.pendingRequests=Object.create(null)}requestRange(e,t,r){let i={begin:e,end:t};for(let s in r)i[s]=r[s];return this.request(i)}requestFull(e){return this.request(e)}request(e){let t=new XMLHttpRequest,r=this.currXhrId++,i=this.pendingRequests[r]={xhr:t};t.open("GET",this.url),t.withCredentials=this.withCredentials;for(let[s,o]of this.headers)t.setRequestHeader(s,o);return this.isHttp&&"begin"in e&&"end"in e?(t.setRequestHeader("Range",`bytes=${e.begin}-${e.end-1}`),i.expectedStatus=mm):i.expectedStatus=gm,t.responseType="arraybuffer",e.onError&&(t.onerror=function(s){e.onError(t.status)}),t.onreadystatechange=this.onStateChange.bind(this,r),t.onprogress=this.onProgress.bind(this,r),i.onHeadersReceived=e.onHeadersReceived,i.onDone=e.onDone,i.onError=e.onError,i.onProgress=e.onProgress,t.send(null),r}onProgress(e,t){let r=this.pendingRequests[e];r&&r.onProgress?.(t)}onStateChange(e,t){let r=this.pendingRequests[e];if(!r)return;let i=r.xhr;if(i.readyState>=2&&r.onHeadersReceived&&(r.onHeadersReceived(),delete r.onHeadersReceived),i.readyState!==4||!(e in this.pendingRequests))return;if(delete this.pendingRequests[e],i.status===0&&this.isHttp){r.onError?.(i.status);return}let s=i.status||gm;if(!(s===gm&&r.expectedStatus===mm)&&s!==r.expectedStatus){r.onError?.(i.status);return}let a=yk(i);if(s===mm){let l=i.getResponseHeader("Content-Range"),c=/bytes (\d+)-(\d+)\/(\d+)/.exec(l);r.onDone({begin:parseInt(c[1],10),chunk:a})}else a?r.onDone({begin:0,chunk:a}):r.onError?.(i.status)}getRequestXhr(e){return this.pendingRequests[e].xhr}isPendingRequest(e){return e in this.pendingRequests}abortRequest(e){let t=this.pendingRequests[e].xhr;delete this.pendingRequests[e],t.abort()}},Km=class{constructor(e){this._source=e,this._manager=new Ym(e),this._rangeChunkSize=e.rangeChunkSize,this._fullRequestReader=null,this._rangeRequestReaders=[]}_onRangeRequestReaderClosed(e){let t=this._rangeRequestReaders.indexOf(e);t>=0&&this._rangeRequestReaders.splice(t,1)}getFullReader(){return it(!this._fullRequestReader,"PDFNetworkStream.getFullReader can only be called once."),this._fullRequestReader=new Xm(this._manager,this._source),this._fullRequestReader}getRangeReader(e,t){let r=new Qm(this._manager,e,t);return r.onClosed=this._onRangeRequestReaderClosed.bind(this),this._rangeRequestReaders.push(r),r}cancelAllRequests(e){this._fullRequestReader?.cancel(e);for(let t of this._rangeRequestReaders.slice(0))t.cancel(e)}},Xm=class{constructor(e,t){this._manager=e;let r={onHeadersReceived:this._onHeadersReceived.bind(this),onDone:this._onDone.bind(this),onError:this._onError.bind(this),onProgress:this._onProgress.bind(this)};this._url=t.url,this._fullRequestId=e.requestFull(r),this._headersCapability=Promise.withResolvers(),this._disableRange=t.disableRange||!1,this._contentLength=t.length,this._rangeChunkSize=t.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._isStreamingSupported=!1,this._isRangeSupported=!1,this._cachedChunks=[],this._requests=[],this._done=!1,this._storedError=void 0,this._filename=null,this.onProgress=null}_onHeadersReceived(){let e=this._fullRequestId,t=this._manager.getRequestXhr(e),r=new Headers(t.getAllResponseHeaders().trim().split(/[\r\n]+/).map(o=>{let[a,...l]=o.split(": ");return[a,l.join(": ")]})),{allowRangeRequests:i,suggestedLength:s}=Vv({responseHeaders:r,isHttp:this._manager.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});i&&(this._isRangeSupported=!0),this._contentLength=s||this._contentLength,this._filename=Hv(r),this._isRangeSupported&&this._manager.abortRequest(e),this._headersCapability.resolve()}_onDone(e){if(e&&(this._requests.length>0?this._requests.shift().resolve({value:e.chunk,done:!1}):this._cachedChunks.push(e.chunk)),this._done=!0,!(this._cachedChunks.length>0)){for(let t of this._requests)t.resolve({value:void 0,done:!0});this._requests.length=0}}_onError(e){this._storedError=cd(e,this._url),this._headersCapability.reject(this._storedError);for(let t of this._requests)t.reject(this._storedError);this._requests.length=0,this._cachedChunks.length=0}_onProgress(e){this.onProgress?.({loaded:e.loaded,total:e.lengthComputable?e.total:this._contentLength})}get filename(){return this._filename}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}get contentLength(){return this._contentLength}get headersReady(){return this._headersCapability.promise}read(){return I(this,null,function*(){if(this._storedError)throw this._storedError;if(this._cachedChunks.length>0)return{value:this._cachedChunks.shift(),done:!1};if(this._done)return{value:void 0,done:!0};let e=Promise.withResolvers();return this._requests.push(e),e.promise})}cancel(e){this._done=!0,this._headersCapability.reject(e);for(let t of this._requests)t.resolve({value:void 0,done:!0});this._requests.length=0,this._manager.isPendingRequest(this._fullRequestId)&&this._manager.abortRequest(this._fullRequestId),this._fullRequestReader=null}},Qm=class{constructor(e,t,r){this._manager=e;let i={onDone:this._onDone.bind(this),onError:this._onError.bind(this),onProgress:this._onProgress.bind(this)};this._url=e.url,this._requestId=e.requestRange(t,r,i),this._requests=[],this._queuedChunk=null,this._done=!1,this._storedError=void 0,this.onProgress=null,this.onClosed=null}_close(){this.onClosed?.(this)}_onDone(e){let t=e.chunk;this._requests.length>0?this._requests.shift().resolve({value:t,done:!1}):this._queuedChunk=t,this._done=!0;for(let r of this._requests)r.resolve({value:void 0,done:!0});this._requests.length=0,this._close()}_onError(e){this._storedError=cd(e,this._url);for(let t of this._requests)t.reject(this._storedError);this._requests.length=0,this._queuedChunk=null}_onProgress(e){this.isStreamingSupported||this.onProgress?.({loaded:e.loaded})}get isStreamingSupported(){return!1}read(){return I(this,null,function*(){if(this._storedError)throw this._storedError;if(this._queuedChunk!==null){let t=this._queuedChunk;return this._queuedChunk=null,{value:t,done:!1}}if(this._done)return{value:void 0,done:!0};let e=Promise.withResolvers();return this._requests.push(e),e.promise})}cancel(e){this._done=!0;for(let t of this._requests)t.resolve({value:void 0,done:!0});this._requests.length=0,this._manager.isPendingRequest(this._requestId)&&this._manager.abortRequest(this._requestId),this._close()}},bk=/^[a-z][a-z0-9\-+.]+:/i;function wk(n){if(bk.test(n))return new URL(n);let e=Vn.get("url");return new URL(e.pathToFileURL(n))}function KA(n,e,t){return n.protocol==="http:"?Vn.get("http").request(n,{headers:e},t):Vn.get("https").request(n,{headers:e},t)}var Zm=class{constructor(e){this.source=e,this.url=wk(e.url),this.isHttp=this.url.protocol==="http:"||this.url.protocol==="https:",this.isFsUrl=this.url.protocol==="file:",this.headers=Bv(this.isHttp,e.httpHeaders),this._fullRequestReader=null,this._rangeRequestReaders=[]}get _progressiveDataLength(){return this._fullRequestReader?._loaded??0}getFullReader(){return it(!this._fullRequestReader,"PDFNodeStream.getFullReader can only be called once."),this._fullRequestReader=this.isFsUrl?new tv(this):new Jm(this),this._fullRequestReader}getRangeReader(e,t){if(t<=this._progressiveDataLength)return null;let r=this.isFsUrl?new nv(this,e,t):new ev(this,e,t);return this._rangeRequestReaders.push(r),r}cancelAllRequests(e){this._fullRequestReader?.cancel(e);for(let t of this._rangeRequestReaders.slice(0))t.cancel(e)}},Bu=class{constructor(e){this._url=e.url,this._done=!1,this._storedError=null,this.onProgress=null;let t=e.source;this._contentLength=t.length,this._loaded=0,this._filename=null,this._disableRange=t.disableRange||!1,this._rangeChunkSize=t.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._isStreamingSupported=!t.disableStream,this._isRangeSupported=!t.disableRange,this._readableStream=null,this._readCapability=Promise.withResolvers(),this._headersCapability=Promise.withResolvers()}get headersReady(){return this._headersCapability.promise}get filename(){return this._filename}get contentLength(){return this._contentLength}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}read(){return I(this,null,function*(){if(yield this._readCapability.promise,this._done)return{value:void 0,done:!0};if(this._storedError)throw this._storedError;let e=this._readableStream.read();return e===null?(this._readCapability=Promise.withResolvers(),this.read()):(this._loaded+=e.length,this.onProgress?.({loaded:this._loaded,total:this._contentLength}),{value:new Uint8Array(e).buffer,done:!1})})}cancel(e){if(!this._readableStream){this._error(e);return}this._readableStream.destroy(e)}_error(e){this._storedError=e,this._readCapability.resolve()}_setReadableStream(e){this._readableStream=e,e.on("readable",()=>{this._readCapability.resolve()}),e.on("end",()=>{e.destroy(),this._done=!0,this._readCapability.resolve()}),e.on("error",t=>{this._error(t)}),!this._isStreamingSupported&&this._isRangeSupported&&this._error(new fr("streaming is disabled")),this._storedError&&this._readableStream.destroy(this._storedError)}},Vu=class{constructor(e){this._url=e.url,this._done=!1,this._storedError=null,this.onProgress=null,this._loaded=0,this._readableStream=null,this._readCapability=Promise.withResolvers();let t=e.source;this._isStreamingSupported=!t.disableStream}get isStreamingSupported(){return this._isStreamingSupported}read(){return I(this,null,function*(){if(yield this._readCapability.promise,this._done)return{value:void 0,done:!0};if(this._storedError)throw this._storedError;let e=this._readableStream.read();return e===null?(this._readCapability=Promise.withResolvers(),this.read()):(this._loaded+=e.length,this.onProgress?.({loaded:this._loaded}),{value:new Uint8Array(e).buffer,done:!1})})}cancel(e){if(!this._readableStream){this._error(e);return}this._readableStream.destroy(e)}_error(e){this._storedError=e,this._readCapability.resolve()}_setReadableStream(e){this._readableStream=e,e.on("readable",()=>{this._readCapability.resolve()}),e.on("end",()=>{e.destroy(),this._done=!0,this._readCapability.resolve()}),e.on("error",t=>{this._error(t)}),this._storedError&&this._readableStream.destroy(this._storedError)}},Jm=class extends Bu{constructor(e){super(e);let t=Object.fromEntries(e.headers),r=i=>{if(i.statusCode===404){let l=new hr(`Missing PDF "${this._url}".`);this._storedError=l,this._headersCapability.reject(l);return}this._headersCapability.resolve(),this._setReadableStream(i);let s=new Headers(this._readableStream.headers),{allowRangeRequests:o,suggestedLength:a}=Vv({responseHeaders:s,isHttp:e.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});this._isRangeSupported=o,this._contentLength=a||this._contentLength,this._filename=Hv(s)};this._request=KA(this._url,t,r),this._request.on("error",i=>{this._storedError=i,this._headersCapability.reject(i)}),this._request.end()}},ev=class extends Vu{constructor(e,t,r){super(e);let i=Object.fromEntries(e.headers);i.Range=`bytes=${t}-${r-1}`;let s=o=>{if(o.statusCode===404){let a=new hr(`Missing PDF "${this._url}".`);this._storedError=a;return}this._setReadableStream(o)};this._request=KA(this._url,i,s),this._request.on("error",o=>{this._storedError=o}),this._request.end()}},tv=class extends Bu{constructor(e){super(e);let t=Vn.get("fs");t.promises.lstat(this._url).then(r=>{this._contentLength=r.size,this._setReadableStream(t.createReadStream(this._url)),this._headersCapability.resolve()},r=>{r.code==="ENOENT"&&(r=new hr(`Missing PDF "${this._url}".`)),this._storedError=r,this._headersCapability.reject(r)})}},nv=class extends Vu{constructor(e,t,r){super(e);let i=Vn.get("fs");this._setReadableStream(i.createReadStream(this._url,{start:t,end:r-1}))}},Ek=1e5,Mt=30,Ck=.8,va=class n{#e=Promise.withResolvers();#t=null;#n=!1;#r=!!globalThis.FontInspector?.enabled;#i=null;#s=null;#l=0;#c=0;#u=null;#a=null;#d=0;#o=0;#h=Object.create(null);#p=[];#f=null;#g=[];#v=new WeakMap;#m=null;static#y=new Map;static#w=new Map;static#_=new WeakMap;static#E=null;static#C=new Set;constructor({textContentSource:e,container:t,viewport:r}){if(e instanceof ReadableStream)this.#f=e;else if(typeof e=="object")this.#f=new ReadableStream({start(l){l.enqueue(e),l.close()}});else throw new Error('No "textContentSource" parameter specified.');this.#t=this.#a=t,this.#o=r.scale*(globalThis.devicePixelRatio||1),this.#d=r.rotation,this.#s={div:null,properties:null,ctx:null};let{pageWidth:i,pageHeight:s,pageX:o,pageY:a}=r.rawDims;this.#m=[1,0,0,-1,-o,a+s],this.#c=i,this.#l=s,n.#R(),_i(t,r),this.#e.promise.finally(()=>{n.#C.delete(this),this.#s=null,this.#h=null}).catch(()=>{})}static get fontFamilyMap(){let{isWindows:e,isFirefox:t}=dt.platform;return ue(this,"fontFamilyMap",new Map([["sans-serif",`${e&&t?"Calibri, ":""}sans-serif`],["monospace",`${e&&t?"Lucida Console, ":""}monospace`]]))}render(){let e=()=>{this.#u.read().then(({value:t,done:r})=>{if(r){this.#e.resolve();return}this.#i??=t.lang,Object.assign(this.#h,t.styles),this.#M(t.items),e()},this.#e.reject)};return this.#u=this.#f.getReader(),n.#C.add(this),e(),this.#e.promise}update({viewport:e,onBefore:t=null}){let r=e.scale*(globalThis.devicePixelRatio||1),i=e.rotation;if(i!==this.#d&&(t?.(),this.#d=i,_i(this.#a,{rotation:i})),r!==this.#o){t?.(),this.#o=r;let s={div:null,properties:null,ctx:n.#D(this.#i)};for(let o of this.#g)s.properties=this.#v.get(o),s.div=o,this.#A(s)}}cancel(){let e=new fr("TextLayer task cancelled.");this.#u?.cancel(e).catch(()=>{}),this.#u=null,this.#e.reject(e)}get textDivs(){return this.#g}get textContentItemsStr(){return this.#p}#M(e){if(this.#n)return;this.#s.ctx??=n.#D(this.#i);let t=this.#g,r=this.#p;for(let i of e){if(t.length>Ek){oe("Ignoring additional textDivs for performance reasons."),this.#n=!0;return}if(i.str===void 0){if(i.type==="beginMarkedContentProps"||i.type==="beginMarkedContent"){let s=this.#t;this.#t=document.createElement("span"),this.#t.classList.add("markedContent"),i.id!==null&&this.#t.setAttribute("id",`${i.id}`),s.append(this.#t)}else i.type==="endMarkedContent"&&(this.#t=this.#t.parentNode);continue}r.push(i.str),this.#I(i)}}#I(e){let t=document.createElement("span"),r={angle:0,canvasWidth:0,hasText:e.str!=="",hasEOL:e.hasEOL,fontSize:0};this.#g.push(t);let i=L.transform(this.#m,e.transform),s=Math.atan2(i[1],i[0]),o=this.#h[e.fontName];o.vertical&&(s+=Math.PI/2);let a=this.#r&&o.fontSubstitution||o.fontFamily;a=n.fontFamilyMap.get(a)||a;let l=Math.hypot(i[2],i[3]),c=l*n.#P(a,this.#i),u,d;s===0?(u=i[4],d=i[5]-c):(u=i[4]+c*Math.sin(s),d=i[5]-c*Math.cos(s));let h="calc(var(--scale-factor)*",f=t.style;this.#t===this.#a?(f.left=`${(100*u/this.#c).toFixed(2)}%`,f.top=`${(100*d/this.#l).toFixed(2)}%`):(f.left=`${h}${u.toFixed(2)}px)`,f.top=`${h}${d.toFixed(2)}px)`),f.fontSize=`${h}${(n.#E*l).toFixed(2)}px)`,f.fontFamily=a,r.fontSize=l,t.setAttribute("role","presentation"),t.textContent=e.str,t.dir=e.dir,this.#r&&(t.dataset.fontName=o.fontSubstitutionLoadedName||e.fontName),s!==0&&(r.angle=s*(180/Math.PI));let p=!1;if(e.str.length>1)p=!0;else if(e.str!==" "&&e.transform[0]!==e.transform[3]){let g=Math.abs(e.transform[0]),v=Math.abs(e.transform[3]);g!==v&&Math.max(g,v)/Math.min(g,v)>1.5&&(p=!0)}if(p&&(r.canvasWidth=o.vertical?e.height:e.width),this.#v.set(t,r),this.#s.div=t,this.#s.properties=r,this.#A(this.#s),r.hasText&&this.#t.append(t),r.hasEOL){let g=document.createElement("br");g.setAttribute("role","presentation"),this.#t.append(g)}}#A(e){let{div:t,properties:r,ctx:i}=e,{style:s}=t,o="";if(n.#E>1&&(o=`scale(${1/n.#E})`),r.canvasWidth!==0&&r.hasText){let{fontFamily:a}=s,{canvasWidth:l,fontSize:c}=r;n.#x(i,c*this.#o,a);let{width:u}=i.measureText(t.textContent);u>0&&(o=`scaleX(${l*this.#o/u}) ${o}`)}r.angle!==0&&(o=`rotate(${r.angle}deg) ${o}`),o.length>0&&(s.transform=o)}static cleanup(){if(!(this.#C.size>0)){this.#y.clear();for(let{canvas:e}of this.#w.values())e.remove();this.#w.clear()}}static#D(e=null){let t=this.#w.get(e||="");if(!t){let r=document.createElement("canvas");r.className="hiddenCanvasElement",r.lang=e,document.body.append(r),t=r.getContext("2d",{alpha:!1,willReadFrequently:!0}),this.#w.set(e,t),this.#_.set(t,{size:0,family:""})}return t}static#x(e,t,r){let i=this.#_.get(e);t===i.size&&r===i.family||(e.font=`${t}px ${r}`,i.size=t,i.family=r)}static#R(){if(this.#E!==null)return;let e=document.createElement("div");e.style.opacity=0,e.style.lineHeight=1,e.style.fontSize="1px",e.style.position="absolute",e.textContent="X",document.body.append(e),this.#E=e.getBoundingClientRect().height,e.remove()}static#P(e,t){let r=this.#y.get(e);if(r)return r;let i=this.#D(t);i.canvas.width=i.canvas.height=Mt,this.#x(i,Mt,e);let s=i.measureText(""),o=s.fontBoundingBoxAscent,a=Math.abs(s.fontBoundingBoxDescent);if(o){let u=o/(o+a);return this.#y.set(e,u),i.canvas.width=i.canvas.height=0,u}i.strokeStyle="red",i.clearRect(0,0,Mt,Mt),i.strokeText("g",0,0);let l=i.getImageData(0,0,Mt,Mt).data;a=0;for(let u=l.length-1-3;u>=0;u-=4)if(l[u]>0){a=Math.ceil(u/4/Mt);break}i.clearRect(0,0,Mt,Mt),i.strokeText("A",0,Mt),l=i.getImageData(0,0,Mt,Mt).data,o=0;for(let u=0,d=l.length;u<d;u+=4)if(l[u]>0){o=Mt-Math.floor(u/4/Mt);break}i.canvas.width=i.canvas.height=0;let c=o?o/(o+a):Ck;return this.#y.set(e,c),c}},ya=class n{static textContent(e){let t=[],r={items:t,styles:Object.create(null)};function i(s){if(!s)return;let o=null,a=s.name;if(a==="#text")o=s.value;else if(n.shouldBuildText(a))s?.attributes?.textContent?o=s.attributes.textContent:s.value&&(o=s.value);else return;if(o!==null&&t.push({str:o}),!!s.children)for(let l of s.children)i(l)}return i(e),r}static shouldBuildText(e){return!(e==="textarea"||e==="input"||e==="option"||e==="select")}},_k=65536,Ak=100,Sk=5e3,xk=gt?Om:Tm,Ik=gt?Pm:Pu,Dk=gt?Rm:Mm,Tk=gt?Nm:Lu;function Mk(n={}){typeof n=="string"||n instanceof URL?n={url:n}:(n instanceof ArrayBuffer||ArrayBuffer.isView(n))&&(n={data:n});let e=new rv,{docId:t}=e,r=n.url?Rk(n.url):null,i=n.data?Ok(n.data):null,s=n.httpHeaders||null,o=n.withCredentials===!0,a=n.password??null,l=n.range instanceof Hu?n.range:null,c=Number.isInteger(n.rangeChunkSize)&&n.rangeChunkSize>0?n.rangeChunkSize:_k,u=n.worker instanceof Ps?n.worker:null,d=n.verbosity,h=typeof n.docBaseUrl=="string"&&!ld(n.docBaseUrl)?n.docBaseUrl:null,f=typeof n.cMapUrl=="string"?n.cMapUrl:null,p=n.cMapPacked!==!1,g=n.CMapReaderFactory||Ik,v=typeof n.standardFontDataUrl=="string"?n.standardFontDataUrl:null,m=n.StandardFontDataFactory||Tk,y=n.stopAtErrors!==!0,w=Number.isInteger(n.maxImageSize)&&n.maxImageSize>-1?n.maxImageSize:-1,b=n.isEvalSupported!==!1,C=typeof n.isOffscreenCanvasSupported=="boolean"?n.isOffscreenCanvasSupported:!gt,S=typeof n.isChrome=="boolean"?n.isChrome:!dt.platform.isFirefox&&typeof window<"u"&&!!window?.chrome,T=Number.isInteger(n.canvasMaxAreaInBytes)?n.canvasMaxAreaInBytes:-1,M=typeof n.disableFontFace=="boolean"?n.disableFontFace:gt,E=n.fontExtraProperties===!0,x=n.enableXfa===!0,N=n.ownerDocument||globalThis.document,pe=n.disableRange===!0,de=n.disableStream===!0,ce=n.disableAutoFetch===!0,Ee=n.pdfBug===!0,je=n.CanvasFactory||xk,V=n.FilterFactory||Dk,te=n.enableHWA===!0,wr=l?l.length:n.length??NaN,qr=typeof n.useSystemFonts=="boolean"?n.useSystemFonts:!gt&&!M,zt=typeof n.useWorkerFetch=="boolean"?n.useWorkerFetch:g===Pu&&m===Lu&&f&&v&&aa(f,document.baseURI)&&aa(v,document.baseURI);n.canvasFactory&&TA("`canvasFactory`-instance option, please use `CanvasFactory` instead."),n.filterFactory&&TA("`filterFactory`-instance option, please use `FilterFactory` instead.");let st=null;WN(d);let Xe={canvasFactory:new je({ownerDocument:N,enableHWA:te}),filterFactory:new V({docId:t,ownerDocument:N}),cMapReaderFactory:zt?null:new g({baseUrl:f,isCompressed:p}),standardFontDataFactory:zt?null:new m({baseUrl:v})};if(!u){let Wt={verbosity:d,port:Ci.workerPort};u=Wt.port?Ps.fromPort(Wt):new Ps(Wt),e._worker=u}let ki={docId:t,apiVersion:"4.8.69",data:i,password:a,disableAutoFetch:ce,rangeChunkSize:c,length:wr,docBaseUrl:h,enableXfa:x,evaluatorOptions:{maxImageSize:w,disableFontFace:M,ignoreErrors:y,isEvalSupported:b,isOffscreenCanvasSupported:C,isChrome:S,canvasMaxAreaInBytes:T,fontExtraProperties:E,useSystemFonts:qr,cMapUrl:zt?f:null,standardFontDataUrl:zt?v:null}},$s={disableFontFace:M,fontExtraProperties:E,ownerDocument:N,pdfBug:Ee,styleElement:st,loadingParams:{disableAutoFetch:ce,enableXfa:x}};return u.promise.then(function(){if(e.destroyed)throw new Error("Loading aborted");if(u.destroyed)throw new Error("Worker was destroyed");let Wt=u.messageHandler.sendWithPromise("GetDocRequest",ki,i?[i.buffer]:null),Re;if(l)Re=new $m(l,{disableRange:pe,disableStream:de});else if(!i){if(!r)throw new Error("getDocument - no `url` parameter provided.");let qn;gt?qn=typeof fetch<"u"&&typeof Response<"u"&&"body"in Response.prototype&&aa(r)?ju:Zm:qn=aa(r)?ju:Km,Re=new qn({url:r,length:wr,httpHeaders:s,withCredentials:o,rangeChunkSize:c,disableRange:pe,disableStream:de})}return Wt.then(qn=>{if(e.destroyed)throw new Error("Loading aborted");if(u.destroyed)throw new Error("Worker was destroyed");let sh=new Ei(t,qn,u.port),Lx=new av(sh,e,Re,$s,Xe);e._transport=Lx,sh.send("Ready",null)})}).catch(e._capability.reject),e}function Rk(n){if(n instanceof URL)return n.href;try{return new URL(n,window.location).href}catch{if(gt&&typeof n=="string")return n}throw new Error("Invalid PDF url data: either string or URL-object is expected in the url property.")}function Ok(n){if(gt&&typeof Buffer<"u"&&n instanceof Buffer)throw new Error("Please provide binary data as `Uint8Array`, rather than `Buffer`.");if(n instanceof Uint8Array&&n.byteLength===n.buffer.byteLength)return n;if(typeof n=="string")return od(n);if(n instanceof ArrayBuffer||ArrayBuffer.isView(n)||typeof n=="object"&&!isNaN(n?.length))return new Uint8Array(n);throw new Error("Invalid PDF binary data: either TypedArray, string, or array-like object is expected in the data property.")}function HA(n){return typeof n=="object"&&Number.isInteger(n?.num)&&n.num>=0&&Number.isInteger(n?.gen)&&n.gen>=0}var rv=class n{static#e=0;constructor(){this._capability=Promise.withResolvers(),this._transport=null,this._worker=null,this.docId=`d${n.#e++}`,this.destroyed=!1,this.onPassword=null,this.onProgress=null}get promise(){return this._capability.promise}destroy(){return I(this,null,function*(){this.destroyed=!0;try{this._worker?.port&&(this._worker._pendingDestroy=!0),yield this._transport?.destroy()}catch(e){throw this._worker?.port&&delete this._worker._pendingDestroy,e}this._transport=null,this._worker&&(this._worker.destroy(),this._worker=null)})}},Hu=class{constructor(e,t,r=!1,i=null){this.length=e,this.initialData=t,this.progressiveDone=r,this.contentDispositionFilename=i,this._rangeListeners=[],this._progressListeners=[],this._progressiveReadListeners=[],this._progressiveDoneListeners=[],this._readyCapability=Promise.withResolvers()}addRangeListener(e){this._rangeListeners.push(e)}addProgressListener(e){this._progressListeners.push(e)}addProgressiveReadListener(e){this._progressiveReadListeners.push(e)}addProgressiveDoneListener(e){this._progressiveDoneListeners.push(e)}onDataRange(e,t){for(let r of this._rangeListeners)r(e,t)}onDataProgress(e,t){this._readyCapability.promise.then(()=>{for(let r of this._progressListeners)r(e,t)})}onDataProgressiveRead(e){this._readyCapability.promise.then(()=>{for(let t of this._progressiveReadListeners)t(e)})}onDataProgressiveDone(){this._readyCapability.promise.then(()=>{for(let e of this._progressiveDoneListeners)e()})}transportReady(){this._readyCapability.resolve()}requestDataRange(e,t){Te("Abstract method PDFDataRangeTransport.requestDataRange")}abort(){}},iv=class{constructor(e,t){this._pdfInfo=e,this._transport=t}get annotationStorage(){return this._transport.annotationStorage}get canvasFactory(){return this._transport.canvasFactory}get filterFactory(){return this._transport.filterFactory}get numPages(){return this._pdfInfo.numPages}get fingerprints(){return this._pdfInfo.fingerprints}get isPureXfa(){return ue(this,"isPureXfa",!!this._transport._htmlForXfa)}get allXfaHtml(){return this._transport._htmlForXfa}getPage(e){return this._transport.getPage(e)}getPageIndex(e){return this._transport.getPageIndex(e)}getDestinations(){return this._transport.getDestinations()}getDestination(e){return this._transport.getDestination(e)}getPageLabels(){return this._transport.getPageLabels()}getPageLayout(){return this._transport.getPageLayout()}getPageMode(){return this._transport.getPageMode()}getViewerPreferences(){return this._transport.getViewerPreferences()}getOpenAction(){return this._transport.getOpenAction()}getAttachments(){return this._transport.getAttachments()}getJSActions(){return this._transport.getDocJSActions()}getOutline(){return this._transport.getOutline()}getOptionalContentConfig({intent:e="display"}={}){let{renderingIntent:t}=this._transport.getRenderingIntent(e);return this._transport.getOptionalContentConfig(t)}getPermissions(){return this._transport.getPermissions()}getMetadata(){return this._transport.getMetadata()}getMarkInfo(){return this._transport.getMarkInfo()}getData(){return this._transport.getData()}saveDocument(){return this._transport.saveDocument()}getDownloadInfo(){return this._transport.downloadInfoCapability.promise}cleanup(e=!1){return this._transport.startCleanup(e||this.isPureXfa)}destroy(){return this.loadingTask.destroy()}cachedPageNumber(e){return this._transport.cachedPageNumber(e)}get loadingParams(){return this._transport.loadingParams}get loadingTask(){return this._transport.loadingTask}getFieldObjects(){return this._transport.getFieldObjects()}hasJSActions(){return this._transport.hasJSActions()}getCalculationOrderIds(){return this._transport.getCalculationOrderIds()}},sv=class{#e=null;#t=!1;constructor(e,t,r,i=!1){this._pageIndex=e,this._pageInfo=t,this._transport=r,this._stats=i?new xu:null,this._pdfBug=i,this.commonObjs=r.commonObjs,this.objs=new Uu,this._maybeCleanupAfterRender=!1,this._intentStates=new Map,this.destroyed=!1}get pageNumber(){return this._pageIndex+1}get rotate(){return this._pageInfo.rotate}get ref(){return this._pageInfo.ref}get userUnit(){return this._pageInfo.userUnit}get view(){return this._pageInfo.view}getViewport({scale:e,rotation:t=this.rotate,offsetX:r=0,offsetY:i=0,dontFlip:s=!1}={}){return new da({viewBox:this.view,scale:e,rotation:t,offsetX:r,offsetY:i,dontFlip:s})}getAnnotations({intent:e="display"}={}){let{renderingIntent:t}=this._transport.getRenderingIntent(e);return this._transport.getAnnotations(this._pageIndex,t)}getJSActions(){return this._transport.getPageJSActions(this._pageIndex)}get filterFactory(){return this._transport.filterFactory}get isPureXfa(){return ue(this,"isPureXfa",!!this._transport._htmlForXfa)}getXfa(){return I(this,null,function*(){return this._transport._htmlForXfa?.children[this._pageIndex]||null})}render({canvasContext:e,viewport:t,intent:r="display",annotationMode:i=Br.ENABLE,transform:s=null,background:o=null,optionalContentConfigPromise:a=null,annotationCanvasMap:l=null,pageColors:c=null,printAnnotationStorage:u=null,isEditing:d=!1}){this._stats?.time("Overall");let h=this._transport.getRenderingIntent(r,i,u,d),{renderingIntent:f,cacheKey:p}=h;this.#t=!1,this.#r(),a||=this._transport.getOptionalContentConfig(f);let g=this._intentStates.get(p);g||(g=Object.create(null),this._intentStates.set(p,g)),g.streamReaderCancelTimeout&&(clearTimeout(g.streamReaderCancelTimeout),g.streamReaderCancelTimeout=null);let v=!!(f&Vt.PRINT);g.displayReadyCapability||(g.displayReadyCapability=Promise.withResolvers(),g.operatorList={fnArray:[],argsArray:[],lastChunk:!1,separateAnnots:null},this._stats?.time("Page Request"),this._pumpOperatorList(h));let m=b=>{g.renderTasks.delete(y),(this._maybeCleanupAfterRender||v)&&(this.#t=!0),this.#n(!v),b?(y.capability.reject(b),this._abortOperatorList({intentState:g,reason:b instanceof Error?b:new Error(b)})):y.capability.resolve(),this._stats&&(this._stats.timeEnd("Rendering"),this._stats.timeEnd("Overall"),globalThis.Stats?.enabled&&globalThis.Stats.add(this.pageNumber,this._stats))},y=new cv({callback:m,params:{canvasContext:e,viewport:t,transform:s,background:o},objs:this.objs,commonObjs:this.commonObjs,annotationCanvasMap:l,operatorList:g.operatorList,pageIndex:this._pageIndex,canvasFactory:this._transport.canvasFactory,filterFactory:this._transport.filterFactory,useRequestAnimationFrame:!v,pdfBug:this._pdfBug,pageColors:c});(g.renderTasks||=new Set).add(y);let w=y.task;return Promise.all([g.displayReadyCapability.promise,a]).then(([b,C])=>{if(this.destroyed){m();return}if(this._stats?.time("Rendering"),!(C.renderingIntent&f))throw new Error("Must use the same `intent`-argument when calling the `PDFPageProxy.render` and `PDFDocumentProxy.getOptionalContentConfig` methods.");y.initializeGraphics({transparency:b,optionalContentConfig:C}),y.operatorListChanged()}).catch(m),w}getOperatorList({intent:e="display",annotationMode:t=Br.ENABLE,printAnnotationStorage:r=null,isEditing:i=!1}={}){function s(){a.operatorList.lastChunk&&(a.opListReadCapability.resolve(a.operatorList),a.renderTasks.delete(l))}let o=this._transport.getRenderingIntent(e,t,r,i,!0),a=this._intentStates.get(o.cacheKey);a||(a=Object.create(null),this._intentStates.set(o.cacheKey,a));let l;return a.opListReadCapability||(l=Object.create(null),l.operatorListChanged=s,a.opListReadCapability=Promise.withResolvers(),(a.renderTasks||=new Set).add(l),a.operatorList={fnArray:[],argsArray:[],lastChunk:!1,separateAnnots:null},this._stats?.time("Page Request"),this._pumpOperatorList(o)),a.opListReadCapability.promise}streamTextContent({includeMarkedContent:e=!1,disableNormalization:t=!1}={}){return this._transport.messageHandler.sendWithStream("GetTextContent",{pageIndex:this._pageIndex,includeMarkedContent:e===!0,disableNormalization:t===!0},{highWaterMark:100,size(i){return i.items.length}})}getTextContent(e={}){if(this._transport._htmlForXfa)return this.getXfa().then(r=>ya.textContent(r));let t=this.streamTextContent(e);return new Promise(function(r,i){function s(){o.read().then(function({value:l,done:c}){if(c){r(a);return}a.lang??=l.lang,Object.assign(a.styles,l.styles),a.items.push(...l.items),s()},i)}let o=t.getReader(),a={items:[],styles:Object.create(null),lang:null};s()})}getStructTree(){return this._transport.getStructTree(this._pageIndex)}_destroy(){this.destroyed=!0;let e=[];for(let t of this._intentStates.values())if(this._abortOperatorList({intentState:t,reason:new Error("Page was destroyed."),force:!0}),!t.opListReadCapability)for(let r of t.renderTasks)e.push(r.completed),r.cancel();return this.objs.clear(),this.#t=!1,this.#r(),Promise.all(e)}cleanup(e=!1){this.#t=!0;let t=this.#n(!1);return e&&t&&(this._stats&&=new xu),t}#n(e=!1){if(this.#r(),!this.#t||this.destroyed)return!1;if(e)return this.#e=setTimeout(()=>{this.#e=null,this.#n(!1)},Sk),!1;for(let{renderTasks:t,operatorList:r}of this._intentStates.values())if(t.size>0||!r.lastChunk)return!1;return this._intentStates.clear(),this.objs.clear(),this.#t=!1,!0}#r(){this.#e&&(clearTimeout(this.#e),this.#e=null)}_startRenderPage(e,t){let r=this._intentStates.get(t);r&&(this._stats?.timeEnd("Page Request"),r.displayReadyCapability?.resolve(e))}_renderPageChunk(e,t){for(let r=0,i=e.length;r<i;r++)t.operatorList.fnArray.push(e.fnArray[r]),t.operatorList.argsArray.push(e.argsArray[r]);t.operatorList.lastChunk=e.lastChunk,t.operatorList.separateAnnots=e.separateAnnots;for(let r of t.renderTasks)r.operatorListChanged();e.lastChunk&&this.#n(!0)}_pumpOperatorList({renderingIntent:e,cacheKey:t,annotationStorageSerializable:r,modifiedIds:i}){let{map:s,transfer:o}=r,l=this._transport.messageHandler.sendWithStream("GetOperatorList",{pageIndex:this._pageIndex,intent:e,cacheKey:t,annotationStorage:s,modifiedIds:i},o).getReader(),c=this._intentStates.get(t);c.streamReader=l;let u=()=>{l.read().then(({value:d,done:h})=>{if(h){c.streamReader=null;return}this._transport.destroyed||(this._renderPageChunk(d,c),u())},d=>{if(c.streamReader=null,!this._transport.destroyed){if(c.operatorList){c.operatorList.lastChunk=!0;for(let h of c.renderTasks)h.operatorListChanged();this.#n(!0)}if(c.displayReadyCapability)c.displayReadyCapability.reject(d);else if(c.opListReadCapability)c.opListReadCapability.reject(d);else throw d}})};u()}_abortOperatorList({intentState:e,reason:t,force:r=!1}){if(e.streamReader){if(e.streamReaderCancelTimeout&&(clearTimeout(e.streamReaderCancelTimeout),e.streamReaderCancelTimeout=null),!r){if(e.renderTasks.size>0)return;if(t instanceof ha){let i=Ak;t.extraDelay>0&&t.extraDelay<1e3&&(i+=t.extraDelay),e.streamReaderCancelTimeout=setTimeout(()=>{e.streamReaderCancelTimeout=null,this._abortOperatorList({intentState:e,reason:t,force:!0})},i);return}}if(e.streamReader.cancel(new fr(t.message)).catch(()=>{}),e.streamReader=null,!this._transport.destroyed){for(let[i,s]of this._intentStates)if(s===e){this._intentStates.delete(i);break}this.cleanup()}}}get stats(){return this._stats}},ov=class{#e=new Map;#t=Promise.resolve();postMessage(e,t){let r={data:structuredClone(e,t?{transfer:t}:null)};this.#t.then(()=>{for(let[i]of this.#e)i.call(this,r)})}addEventListener(e,t,r=null){let i=null;if(r?.signal instanceof AbortSignal){let{signal:s}=r;if(s.aborted){oe("LoopbackPort - cannot use an `aborted` signal.");return}let o=()=>this.removeEventListener(e,t);i=()=>s.removeEventListener("abort",o),s.addEventListener("abort",o)}this.#e.set(t,i)}removeEventListener(e,t){this.#e.get(t)?.(),this.#e.delete(t)}terminate(){for(let[,e]of this.#e)e?.();this.#e.clear()}},Ps=class n{static#e=0;static#t=!1;static#n;static{gt&&(this.#t=!0,Ci.workerSrc||="./pdf.worker.mjs"),this._isSameOrigin=(e,t)=>{let r;try{if(r=new URL(e),!r.origin||r.origin==="null")return!1}catch{return!1}let i=new URL(t,r);return r.origin===i.origin},this._createCDNWrapper=e=>{let t=`await import("${e}");`;return URL.createObjectURL(new Blob([t],{type:"text/javascript"}))}}constructor({name:e=null,port:t=null,verbosity:r=qN()}={}){if(this.name=e,this.destroyed=!1,this.verbosity=r,this._readyCapability=Promise.withResolvers(),this._port=null,this._webWorker=null,this._messageHandler=null,t){if(n.#n?.has(t))throw new Error("Cannot use more than one PDFWorker per port.");(n.#n||=new WeakMap).set(t,this),this._initializeFromPort(t);return}this._initialize()}get promise(){return gt?Promise.all([Vn.promise,this._readyCapability.promise]):this._readyCapability.promise}#r(){this._readyCapability.resolve(),this._messageHandler.send("configure",{verbosity:this.verbosity})}get port(){return this._port}get messageHandler(){return this._messageHandler}_initializeFromPort(e){this._port=e,this._messageHandler=new Ei("main","worker",e),this._messageHandler.on("ready",function(){}),this.#r()}_initialize(){if(n.#t||n.#i){this._setupFakeWorker();return}let{workerSrc:e}=n;try{n._isSameOrigin(window.location.href,e)||(e=n._createCDNWrapper(new URL(e,window.location).href));let t=new Worker(e,{type:"module"}),r=new Ei("main","worker",t),i=()=>{s.abort(),r.destroy(),t.terminate(),this.destroyed?this._readyCapability.reject(new Error("Worker was destroyed")):this._setupFakeWorker()},s=new AbortController;t.addEventListener("error",()=>{this._webWorker||i()},{signal:s.signal}),r.on("test",a=>{if(s.abort(),this.destroyed||!a){i();return}this._messageHandler=r,this._port=t,this._webWorker=t,this.#r()}),r.on("ready",a=>{if(s.abort(),this.destroyed){i();return}try{o()}catch{this._setupFakeWorker()}});let o=()=>{let a=new Uint8Array;r.send("test",a,[a.buffer])};o();return}catch{sd("The worker has been disabled.")}this._setupFakeWorker()}_setupFakeWorker(){n.#t||(oe("Setting up fake worker."),n.#t=!0),n._setupFakeWorkerGlobal.then(e=>{if(this.destroyed){this._readyCapability.reject(new Error("Worker was destroyed"));return}let t=new ov;this._port=t;let r=`fake${n.#e++}`,i=new Ei(r+"_worker",r,t);e.setup(i,t),this._messageHandler=new Ei(r,r+"_worker",t),this.#r()}).catch(e=>{this._readyCapability.reject(new Error(`Setting up fake worker failed: "${e.message}".`))})}destroy(){this.destroyed=!0,this._webWorker&&(this._webWorker.terminate(),this._webWorker=null),n.#n?.delete(this._port),this._port=null,this._messageHandler&&(this._messageHandler.destroy(),this._messageHandler=null)}static fromPort(e){if(!e?.port)throw new Error("PDFWorker.fromPort - invalid method signature.");let t=this.#n?.get(e.port);if(t){if(t._pendingDestroy)throw new Error("PDFWorker.fromPort - the worker is being destroyed.\nPlease remember to await `PDFDocumentLoadingTask.destroy()`-calls.");return t}return new n(e)}static get workerSrc(){if(Ci.workerSrc)return Ci.workerSrc;throw new Error('No "GlobalWorkerOptions.workerSrc" specified.')}static get#i(){try{return globalThis.pdfjsWorker?.WorkerMessageHandler||null}catch{return null}}static get _setupFakeWorkerGlobal(){return ue(this,"_setupFakeWorkerGlobal",I(this,null,function*(){return this.#i?this.#i:(yield import(this.workerSrc)).WorkerMessageHandler}))}},av=class{#e=new Map;#t=new Map;#n=new Map;#r=new Map;#i=null;constructor(e,t,r,i,s){this.messageHandler=e,this.loadingTask=t,this.commonObjs=new Uu,this.fontLoader=new Im({ownerDocument:i.ownerDocument,styleElement:i.styleElement}),this.loadingParams=i.loadingParams,this._params=i,this.canvasFactory=s.canvasFactory,this.filterFactory=s.filterFactory,this.cMapReaderFactory=s.cMapReaderFactory,this.standardFontDataFactory=s.standardFontDataFactory,this.destroyed=!1,this.destroyCapability=null,this._networkStream=r,this._fullReader=null,this._lastProgress=null,this.downloadInfoCapability=Promise.withResolvers(),this.setupMessageHandler()}#s(e,t=null){let r=this.#e.get(e);if(r)return r;let i=this.messageHandler.sendWithPromise(e,t);return this.#e.set(e,i),i}get annotationStorage(){return ue(this,"annotationStorage",new ga)}getRenderingIntent(e,t=Br.ENABLE,r=null,i=!1,s=!1){let o=Vt.DISPLAY,a=xm;switch(e){case"any":o=Vt.ANY;break;case"display":break;case"print":o=Vt.PRINT;break;default:oe(`getRenderingIntent - invalid intent: ${e}`)}let l=o&Vt.PRINT&&r instanceof Mu?r:this.annotationStorage;switch(t){case Br.DISABLE:o+=Vt.ANNOTATIONS_DISABLE;break;case Br.ENABLE:break;case Br.ENABLE_FORMS:o+=Vt.ANNOTATIONS_FORMS;break;case Br.ENABLE_STORAGE:o+=Vt.ANNOTATIONS_STORAGE,a=l.serializable;break;default:oe(`getRenderingIntent - invalid annotationMode: ${t}`)}i&&(o+=Vt.IS_EDITING),s&&(o+=Vt.OPLIST);let{ids:c,hash:u}=l.modifiedIds,d=[o,a.hash,u];return{renderingIntent:o,cacheKey:d.join("_"),annotationStorageSerializable:a,modifiedIds:c}}destroy(){if(this.destroyCapability)return this.destroyCapability.promise;this.destroyed=!0,this.destroyCapability=Promise.withResolvers(),this.#i?.reject(new Error("Worker was destroyed during onPassword callback"));let e=[];for(let r of this.#t.values())e.push(r._destroy());this.#t.clear(),this.#n.clear(),this.#r.clear(),this.hasOwnProperty("annotationStorage")&&this.annotationStorage.resetModified();let t=this.messageHandler.sendWithPromise("Terminate",null);return e.push(t),Promise.all(e).then(()=>{this.commonObjs.clear(),this.fontLoader.clear(),this.#e.clear(),this.filterFactory.destroy(),va.cleanup(),this._networkStream?.cancelAllRequests(new fr("Worker was terminated.")),this.messageHandler&&(this.messageHandler.destroy(),this.messageHandler=null),this.destroyCapability.resolve()},this.destroyCapability.reject),this.destroyCapability.promise}setupMessageHandler(){let{messageHandler:e,loadingTask:t}=this;e.on("GetReader",(r,i)=>{it(this._networkStream,"GetReader - no `IPDFStream` instance available."),this._fullReader=this._networkStream.getFullReader(),this._fullReader.onProgress=s=>{this._lastProgress={loaded:s.loaded,total:s.total}},i.onPull=()=>{this._fullReader.read().then(function({value:s,done:o}){if(o){i.close();return}it(s instanceof ArrayBuffer,"GetReader - expected an ArrayBuffer."),i.enqueue(new Uint8Array(s),1,[s])}).catch(s=>{i.error(s)})},i.onCancel=s=>{this._fullReader.cancel(s),i.ready.catch(o=>{if(!this.destroyed)throw o})}}),e.on("ReaderHeadersReady",r=>I(this,null,function*(){yield this._fullReader.headersReady;let{isStreamingSupported:i,isRangeSupported:s,contentLength:o}=this._fullReader;return(!i||!s)&&(this._lastProgress&&t.onProgress?.(this._lastProgress),this._fullReader.onProgress=a=>{t.onProgress?.({loaded:a.loaded,total:a.total})}),{isStreamingSupported:i,isRangeSupported:s,contentLength:o}})),e.on("GetRangeReader",(r,i)=>{it(this._networkStream,"GetRangeReader - no `IPDFStream` instance available.");let s=this._networkStream.getRangeReader(r.begin,r.end);if(!s){i.close();return}i.onPull=()=>{s.read().then(function({value:o,done:a}){if(a){i.close();return}it(o instanceof ArrayBuffer,"GetRangeReader - expected an ArrayBuffer."),i.enqueue(new Uint8Array(o),1,[o])}).catch(o=>{i.error(o)})},i.onCancel=o=>{s.cancel(o),i.ready.catch(a=>{if(!this.destroyed)throw a})}}),e.on("GetDoc",({pdfInfo:r})=>{this._numPages=r.numPages,this._htmlForXfa=r.htmlForXfa,delete r.htmlForXfa,t._capability.resolve(new iv(r,this))}),e.on("DocException",function(r){let i;switch(r.name){case"PasswordException":i=new ca(r.message,r.code);break;case"InvalidPDFException":i=new Su(r.message);break;case"MissingPDFException":i=new hr(r.message);break;case"UnexpectedResponseException":i=new Ns(r.message,r.status);break;case"UnknownErrorException":i=new ua(r.message,r.details);break;default:Te("DocException - expected a valid Error.")}t._capability.reject(i)}),e.on("PasswordRequest",r=>{if(this.#i=Promise.withResolvers(),t.onPassword){let i=s=>{s instanceof Error?this.#i.reject(s):this.#i.resolve({password:s})};try{t.onPassword(i,r.code)}catch(s){this.#i.reject(s)}}else this.#i.reject(new ca(r.message,r.code));return this.#i.promise}),e.on("DataLoaded",r=>{t.onProgress?.({loaded:r.length,total:r.length}),this.downloadInfoCapability.resolve(r)}),e.on("StartRenderPage",r=>{if(this.destroyed)return;this.#t.get(r.pageIndex)._startRenderPage(r.transparency,r.cacheKey)}),e.on("commonobj",([r,i,s])=>{if(this.destroyed||this.commonObjs.has(r))return null;switch(i){case"Font":let{disableFontFace:o,fontExtraProperties:a,pdfBug:l}=this._params;if("error"in s){let h=s.error;oe(`Error during font loading: ${h}`),this.commonObjs.resolve(r,h);break}let c=l&&globalThis.FontInspector?.enabled?(h,f)=>globalThis.FontInspector.fontAdded(h,f):null,u=new Dm(s,{disableFontFace:o,inspectFont:c});this.fontLoader.bind(u).catch(()=>e.sendWithPromise("FontFallback",{id:r})).finally(()=>{!a&&u.data&&(u.data=null),this.commonObjs.resolve(r,u)});break;case"CopyLocalImage":let{imageRef:d}=s;it(d,"The imageRef must be defined.");for(let h of this.#t.values())for(let[,f]of h.objs)if(f?.ref===d)return f.dataLen?(this.commonObjs.resolve(r,structuredClone(f)),f.dataLen):null;break;case"FontPath":case"Image":case"Pattern":this.commonObjs.resolve(r,s);break;default:throw new Error(`Got unknown common object type ${i}`)}return null}),e.on("obj",([r,i,s,o])=>{if(this.destroyed)return;let a=this.#t.get(i);if(!a.objs.has(r)){if(a._intentStates.size===0){o?.bitmap?.close();return}switch(s){case"Image":a.objs.resolve(r,o),o?.dataLen>VN&&(a._maybeCleanupAfterRender=!0);break;case"Pattern":a.objs.resolve(r,o);break;default:throw new Error(`Got unknown object type ${s}`)}}}),e.on("DocProgress",r=>{this.destroyed||t.onProgress?.({loaded:r.loaded,total:r.total})}),e.on("FetchBuiltInCMap",r=>I(this,null,function*(){if(this.destroyed)throw new Error("Worker was destroyed.");if(!this.cMapReaderFactory)throw new Error("CMapReaderFactory not initialized, see the `useWorkerFetch` parameter.");return this.cMapReaderFactory.fetch(r)})),e.on("FetchStandardFontData",r=>I(this,null,function*(){if(this.destroyed)throw new Error("Worker was destroyed.");if(!this.standardFontDataFactory)throw new Error("StandardFontDataFactory not initialized, see the `useWorkerFetch` parameter.");return this.standardFontDataFactory.fetch(r)}))}getData(){return this.messageHandler.sendWithPromise("GetData",null)}saveDocument(){this.annotationStorage.size<=0&&oe("saveDocument called while `annotationStorage` is empty, please use the getData-method instead.");let{map:e,transfer:t}=this.annotationStorage.serializable;return this.messageHandler.sendWithPromise("SaveDocument",{isPureXfa:!!this._htmlForXfa,numPages:this._numPages,annotationStorage:e,filename:this._fullReader?.filename??null},t).finally(()=>{this.annotationStorage.resetModified()})}getPage(e){if(!Number.isInteger(e)||e<=0||e>this._numPages)return Promise.reject(new Error("Invalid page request."));let t=e-1,r=this.#n.get(t);if(r)return r;let i=this.messageHandler.sendWithPromise("GetPage",{pageIndex:t}).then(s=>{if(this.destroyed)throw new Error("Transport destroyed");s.refStr&&this.#r.set(s.refStr,e);let o=new sv(t,s,this,this._params.pdfBug);return this.#t.set(t,o),o});return this.#n.set(t,i),i}getPageIndex(e){return HA(e)?this.messageHandler.sendWithPromise("GetPageIndex",{num:e.num,gen:e.gen}):Promise.reject(new Error("Invalid pageIndex request."))}getAnnotations(e,t){return this.messageHandler.sendWithPromise("GetAnnotations",{pageIndex:e,intent:t})}getFieldObjects(){return this.#s("GetFieldObjects")}hasJSActions(){return this.#s("HasJSActions")}getCalculationOrderIds(){return this.messageHandler.sendWithPromise("GetCalculationOrderIds",null)}getDestinations(){return this.messageHandler.sendWithPromise("GetDestinations",null)}getDestination(e){return typeof e!="string"?Promise.reject(new Error("Invalid destination request.")):this.messageHandler.sendWithPromise("GetDestination",{id:e})}getPageLabels(){return this.messageHandler.sendWithPromise("GetPageLabels",null)}getPageLayout(){return this.messageHandler.sendWithPromise("GetPageLayout",null)}getPageMode(){return this.messageHandler.sendWithPromise("GetPageMode",null)}getViewerPreferences(){return this.messageHandler.sendWithPromise("GetViewerPreferences",null)}getOpenAction(){return this.messageHandler.sendWithPromise("GetOpenAction",null)}getAttachments(){return this.messageHandler.sendWithPromise("GetAttachments",null)}getDocJSActions(){return this.#s("GetDocJSActions")}getPageJSActions(e){return this.messageHandler.sendWithPromise("GetPageJSActions",{pageIndex:e})}getStructTree(e){return this.messageHandler.sendWithPromise("GetStructTree",{pageIndex:e})}getOutline(){return this.messageHandler.sendWithPromise("GetOutline",null)}getOptionalContentConfig(e){return this.#s("GetOptionalContentConfig").then(t=>new Um(t,e))}getPermissions(){return this.messageHandler.sendWithPromise("GetPermissions",null)}getMetadata(){let e="GetMetadata",t=this.#e.get(e);if(t)return t;let r=this.messageHandler.sendWithPromise(e,null).then(i=>({info:i[0],metadata:i[1]?new Vm(i[1]):null,contentDispositionFilename:this._fullReader?.filename??null,contentLength:this._fullReader?.contentLength??null}));return this.#e.set(e,r),r}getMarkInfo(){return this.messageHandler.sendWithPromise("GetMarkInfo",null)}startCleanup(e=!1){return I(this,null,function*(){if(!this.destroyed){yield this.messageHandler.sendWithPromise("Cleanup",null);for(let t of this.#t.values())if(!t.cleanup())throw new Error(`startCleanup: Page ${t.pageNumber} is currently rendering.`);this.commonObjs.clear(),e||this.fontLoader.clear(),this.#e.clear(),this.filterFactory.destroy(!0),va.cleanup()}})}cachedPageNumber(e){if(!HA(e))return null;let t=e.gen===0?`${e.num}R`:`${e.num}R${e.gen}`;return this.#r.get(t)??null}},bu=Symbol("INITIAL_DATA"),Uu=class{#e=Object.create(null);#t(e){return this.#e[e]||=W(_({},Promise.withResolvers()),{data:bu})}get(e,t=null){if(t){let i=this.#t(e);return i.promise.then(()=>t(i.data)),null}let r=this.#e[e];if(!r||r.data===bu)throw new Error(`Requesting object that isn't resolved yet ${e}.`);return r.data}has(e){let t=this.#e[e];return!!t&&t.data!==bu}resolve(e,t=null){let r=this.#t(e);r.data=t,r.resolve()}clear(){for(let e in this.#e){let{data:t}=this.#e[e];t?.bitmap?.close()}this.#e=Object.create(null)}*[Symbol.iterator](){for(let e in this.#e){let{data:t}=this.#e[e];t!==bu&&(yield[e,t])}}},lv=class{#e=null;constructor(e){this.#e=e,this.onContinue=null}get promise(){return this.#e.capability.promise}cancel(e=0){this.#e.cancel(null,e)}get separateAnnots(){let{separateAnnots:e}=this.#e.operatorList;if(!e)return!1;let{annotationCanvasMap:t}=this.#e;return e.form||e.canvas&&t?.size>0}},cv=class n{#e=null;static#t=new WeakSet;constructor({callback:e,params:t,objs:r,commonObjs:i,annotationCanvasMap:s,operatorList:o,pageIndex:a,canvasFactory:l,filterFactory:c,useRequestAnimationFrame:u=!1,pdfBug:d=!1,pageColors:h=null}){this.callback=e,this.params=t,this.objs=r,this.commonObjs=i,this.annotationCanvasMap=s,this.operatorListIdx=null,this.operatorList=o,this._pageIndex=a,this.canvasFactory=l,this.filterFactory=c,this._pdfBug=d,this.pageColors=h,this.running=!1,this.graphicsReadyCallback=null,this.graphicsReady=!1,this._useRequestAnimationFrame=u===!0&&typeof window<"u",this.cancelled=!1,this.capability=Promise.withResolvers(),this.task=new lv(this),this._cancelBound=this.cancel.bind(this),this._continueBound=this._continue.bind(this),this._scheduleNextBound=this._scheduleNext.bind(this),this._nextBound=this._next.bind(this),this._canvas=t.canvasContext.canvas}get completed(){return this.capability.promise.catch(function(){})}initializeGraphics({transparency:e=!1,optionalContentConfig:t}){if(this.cancelled)return;if(this._canvas){if(n.#t.has(this._canvas))throw new Error("Cannot use the same canvas during multiple render() operations. Use different canvas or ensure previous operations were cancelled or completed.");n.#t.add(this._canvas)}this._pdfBug&&globalThis.StepperManager?.enabled&&(this.stepper=globalThis.StepperManager.create(this._pageIndex),this.stepper.init(this.operatorList),this.stepper.nextBreakPoint=this.stepper.getNextBreakPoint());let{canvasContext:r,viewport:i,transform:s,background:o}=this.params;this.gfx=new Os(r,this.commonObjs,this.objs,this.canvasFactory,this.filterFactory,{optionalContentConfig:t},this.annotationCanvasMap,this.pageColors),this.gfx.beginDrawing({transform:s,viewport:i,transparency:e,background:o}),this.operatorListIdx=0,this.graphicsReady=!0,this.graphicsReadyCallback?.()}cancel(e=null,t=0){this.running=!1,this.cancelled=!0,this.gfx?.endDrawing(),this.#e&&(window.cancelAnimationFrame(this.#e),this.#e=null),n.#t.delete(this._canvas),this.callback(e||new ha(`Rendering cancelled, page ${this._pageIndex+1}`,t))}operatorListChanged(){if(!this.graphicsReady){this.graphicsReadyCallback||=this._continueBound;return}this.stepper?.updateOperatorList(this.operatorList),!this.running&&this._continue()}_continue(){this.running=!0,!this.cancelled&&(this.task.onContinue?this.task.onContinue(this._scheduleNextBound):this._scheduleNext())}_scheduleNext(){this._useRequestAnimationFrame?this.#e=window.requestAnimationFrame(()=>{this.#e=null,this._nextBound().catch(this._cancelBound)}):Promise.resolve().then(this._nextBound).catch(this._cancelBound)}_next(){return I(this,null,function*(){this.cancelled||(this.operatorListIdx=this.gfx.executeOperatorList(this.operatorList,this.operatorListIdx,this._continueBound,this.stepper),this.operatorListIdx===this.operatorList.argsArray.length&&(this.running=!1,this.operatorList.lastChunk&&(this.gfx.endDrawing(),n.#t.delete(this._canvas),this.callback())))})}},Pk="4.8.69",Nk="3634dab10";function UA(n){return Math.floor(Math.max(0,Math.min(1,n))*255).toString(16).padStart(2,"0")}function oa(n){return Math.max(0,Math.min(255,255*n))}var $u=class{static CMYK_G([e,t,r,i]){return["G",1-Math.min(1,.3*e+.59*r+.11*t+i)]}static G_CMYK([e]){return["CMYK",0,0,0,1-e]}static G_RGB([e]){return["RGB",e,e,e]}static G_rgb([e]){return e=oa(e),[e,e,e]}static G_HTML([e]){let t=UA(e);return`#${t}${t}${t}`}static RGB_G([e,t,r]){return["G",.3*e+.59*t+.11*r]}static RGB_rgb(e){return e.map(oa)}static RGB_HTML(e){return`#${e.map(UA).join("")}`}static T_HTML(){return"#00000000"}static T_rgb(){return[null]}static CMYK_RGB([e,t,r,i]){return["RGB",1-Math.min(1,e+i),1-Math.min(1,r+i),1-Math.min(1,t+i)]}static CMYK_rgb([e,t,r,i]){return[oa(1-Math.min(1,e+i)),oa(1-Math.min(1,r+i)),oa(1-Math.min(1,t+i))]}static CMYK_HTML(e){let t=this.CMYK_RGB(e).slice(1);return this.RGB_HTML(t)}static RGB_CMYK([e,t,r]){let i=1-e,s=1-t,o=1-r,a=Math.min(i,s,o);return["CMYK",i,s,o,a]}},uv=class{create(e,t,r=!1){if(e<=0||t<=0)throw new Error("Invalid SVG dimensions");let i=this._createSVG("svg:svg");return i.setAttribute("version","1.1"),r||(i.setAttribute("width",`${e}px`),i.setAttribute("height",`${t}px`)),i.setAttribute("preserveAspectRatio","none"),i.setAttribute("viewBox",`0 0 ${e} ${t}`),i}createElement(e){if(typeof e!="string")throw new Error("Invalid SVG element type");return this._createSVG(e)}_createSVG(e){Te("Abstract method `_createSVG` called.")}},ba=class extends uv{_createSVG(e){return document.createElementNS(ur,e)}},zu=class{static setupStorage(e,t,r,i,s){let o=i.getValue(t,{value:null});switch(r.name){case"textarea":if(o.value!==null&&(e.textContent=o.value),s==="print")break;e.addEventListener("input",a=>{i.setValue(t,{value:a.target.value})});break;case"input":if(r.attributes.type==="radio"||r.attributes.type==="checkbox"){if(o.value===r.attributes.xfaOn?e.setAttribute("checked",!0):o.value===r.attributes.xfaOff&&e.removeAttribute("checked"),s==="print")break;e.addEventListener("change",a=>{i.setValue(t,{value:a.target.checked?a.target.getAttribute("xfaOn"):a.target.getAttribute("xfaOff")})})}else{if(o.value!==null&&e.setAttribute("value",o.value),s==="print")break;e.addEventListener("input",a=>{i.setValue(t,{value:a.target.value})})}break;case"select":if(o.value!==null){e.setAttribute("value",o.value);for(let a of r.children)a.attributes.value===o.value?a.attributes.selected=!0:a.attributes.hasOwnProperty("selected")&&delete a.attributes.selected}e.addEventListener("input",a=>{let l=a.target.options,c=l.selectedIndex===-1?"":l[l.selectedIndex].value;i.setValue(t,{value:c})});break}}static setAttributes({html:e,element:t,storage:r=null,intent:i,linkService:s}){let{attributes:o}=t,a=e instanceof HTMLAnchorElement;o.type==="radio"&&(o.name=`${o.name}-${i}`);for(let[l,c]of Object.entries(o))if(c!=null)switch(l){case"class":c.length&&e.setAttribute(l,c.join(" "));break;case"dataId":break;case"id":e.setAttribute("data-element-id",c);break;case"style":Object.assign(e.style,c);break;case"textContent":e.textContent=c;break;default:(!a||l!=="href"&&l!=="newWindow")&&e.setAttribute(l,c)}a&&s.addLinkAttributes(e,o.href,o.newWindow),r&&o.dataId&&this.setupStorage(e,o.dataId,t,r)}static render(e){let t=e.annotationStorage,r=e.linkService,i=e.xfaHtml,s=e.intent||"display",o=document.createElement(i.name);i.attributes&&this.setAttributes({html:o,element:i,intent:s,linkService:r});let a=s!=="richText",l=e.div;if(l.append(o),e.viewport){let d=`matrix(${e.viewport.transform.join(",")})`;l.style.transform=d}a&&l.setAttribute("class","xfaLayer xfaFont");let c=[];if(i.children.length===0){if(i.value){let d=document.createTextNode(i.value);o.append(d),a&&ya.shouldBuildText(i.name)&&c.push(d)}return{textDivs:c}}let u=[[i,-1,o]];for(;u.length>0;){let[d,h,f]=u.at(-1);if(h+1===d.children.length){u.pop();continue}let p=d.children[++u.at(-1)[1]];if(p===null)continue;let{name:g}=p;if(g==="#text"){let m=document.createTextNode(p.value);c.push(m),f.append(m);continue}let v=p?.attributes?.xmlns?document.createElementNS(p.attributes.xmlns,g):document.createElement(g);if(f.append(v),p.attributes&&this.setAttributes({html:v,element:p,storage:t,intent:s,linkService:r}),p.children?.length>0)u.push([p,-1,v]);else if(p.value){let m=document.createTextNode(p.value);a&&ya.shouldBuildText(g)&&c.push(m),v.append(m)}}for(let d of l.querySelectorAll(".xfaNonInteractive input, .xfaNonInteractive textarea"))d.setAttribute("readOnly",!0);return{textDivs:c}}static update(e){let t=`matrix(${e.viewport.transform.join(",")})`;e.div.style.transform=t,e.div.hidden=!1}},_a=1e3,kk=9,Si=new WeakSet;function dr(n){return{width:n[2]-n[0],height:n[3]-n[1]}}var dv=class{static create(e){switch(e.data.annotationType){case rt.LINK:return new Wu(e);case rt.TEXT:return new hv(e);case rt.WIDGET:switch(e.data.fieldType){case"Tx":return new fv(e);case"Btn":return e.data.radioButton?new qu(e):e.data.checkBox?new gv(e):new mv(e);case"Ch":return new vv(e);case"Sig":return new pv(e)}return new pr(e);case rt.POPUP:return new wa(e);case rt.FREETEXT:return new Gu(e);case rt.LINE:return new bv(e);case rt.SQUARE:return new wv(e);case rt.CIRCLE:return new Ev(e);case rt.POLYLINE:return new Yu(e);case rt.CARET:return new _v(e);case rt.INK:return new Ea(e);case rt.POLYGON:return new Cv(e);case rt.HIGHLIGHT:return new Ku(e);case rt.UNDERLINE:return new Av(e);case rt.SQUIGGLY:return new Sv(e);case rt.STRIKEOUT:return new xv(e);case rt.STAMP:return new Xu(e);case rt.FILEATTACHMENT:return new Iv(e);default:return new Ke(e)}}},Ke=class n{#e=null;#t=!1;#n=null;constructor(e,{isRenderable:t=!1,ignoreBorder:r=!1,createQuadrilaterals:i=!1}={}){this.isRenderable=t,this.data=e.data,this.layer=e.layer,this.linkService=e.linkService,this.downloadManager=e.downloadManager,this.imageResourcesPath=e.imageResourcesPath,this.renderForms=e.renderForms,this.svgFactory=e.svgFactory,this.annotationStorage=e.annotationStorage,this.enableScripting=e.enableScripting,this.hasJSActions=e.hasJSActions,this._fieldObjects=e.fieldObjects,this.parent=e.parent,t&&(this.container=this._createContainer(r)),i&&this._createQuadrilaterals()}static _hasPopupData({titleObj:e,contentsObj:t,richText:r}){return!!(e?.str||t?.str||r?.str)}get _isEditable(){return this.data.isEditable}get hasPopupData(){return n._hasPopupData(this.data)}updateEdited(e){if(!this.container)return;this.#e||={rect:this.data.rect.slice(0)};let{rect:t}=e;t&&this.#r(t),this.#n?.popup.updateEdited(e)}resetEdited(){this.#e&&(this.#r(this.#e.rect),this.#n?.popup.resetEdited(),this.#e=null)}#r(e){let{container:{style:t},data:{rect:r,rotation:i},parent:{viewport:{rawDims:{pageWidth:s,pageHeight:o,pageX:a,pageY:l}}}}=this;r?.splice(0,4,...e);let{width:c,height:u}=dr(e);t.left=`${100*(e[0]-a)/s}%`,t.top=`${100*(o-e[3]+l)/o}%`,i===0?(t.width=`${100*c/s}%`,t.height=`${100*u/o}%`):this.setRotation(i)}_createContainer(e){let{data:t,parent:{page:r,viewport:i}}=this,s=document.createElement("section");s.setAttribute("data-annotation-id",t.id),this instanceof pr||(s.tabIndex=_a);let{style:o}=s;if(o.zIndex=this.parent.zIndex++,t.alternativeText&&(s.title=t.alternativeText),t.noRotate&&s.classList.add("norotate"),!t.rect||this instanceof wa){let{rotation:g}=t;return!t.hasOwnCanvas&&g!==0&&this.setRotation(g,s),s}let{width:a,height:l}=dr(t.rect);if(!e&&t.borderStyle.width>0){o.borderWidth=`${t.borderStyle.width}px`;let g=t.borderStyle.horizontalCornerRadius,v=t.borderStyle.verticalCornerRadius;if(g>0||v>0){let y=`calc(${g}px * var(--scale-factor)) / calc(${v}px * var(--scale-factor))`;o.borderRadius=y}else if(this instanceof qu){let y=`calc(${a}px * var(--scale-factor)) / calc(${l}px * var(--scale-factor))`;o.borderRadius=y}switch(t.borderStyle.style){case ia.SOLID:o.borderStyle="solid";break;case ia.DASHED:o.borderStyle="dashed";break;case ia.BEVELED:oe("Unimplemented border style: beveled");break;case ia.INSET:oe("Unimplemented border style: inset");break;case ia.UNDERLINE:o.borderBottomStyle="solid";break;default:break}let m=t.borderColor||null;m?(this.#t=!0,o.borderColor=L.makeHexColor(m[0]|0,m[1]|0,m[2]|0)):o.borderWidth=0}let c=L.normalizeRect([t.rect[0],r.view[3]-t.rect[1]+r.view[1],t.rect[2],r.view[3]-t.rect[3]+r.view[1]]),{pageWidth:u,pageHeight:d,pageX:h,pageY:f}=i.rawDims;o.left=`${100*(c[0]-h)/u}%`,o.top=`${100*(c[1]-f)/d}%`;let{rotation:p}=t;return t.hasOwnCanvas||p===0?(o.width=`${100*a/u}%`,o.height=`${100*l/d}%`):this.setRotation(p,s),s}setRotation(e,t=this.container){if(!this.data.rect)return;let{pageWidth:r,pageHeight:i}=this.parent.viewport.rawDims,{width:s,height:o}=dr(this.data.rect),a,l;e%180===0?(a=100*s/r,l=100*o/i):(a=100*o/r,l=100*s/i),t.style.width=`${a}%`,t.style.height=`${l}%`,t.setAttribute("data-main-rotation",(360-e)%360)}get _commonActions(){let e=(t,r,i)=>{let s=i.detail[t],o=s[0],a=s.slice(1);i.target.style[r]=$u[`${o}_HTML`](a),this.annotationStorage.setValue(this.data.id,{[r]:$u[`${o}_rgb`](a)})};return ue(this,"_commonActions",{display:t=>{let{display:r}=t.detail,i=r%2===1;this.container.style.visibility=i?"hidden":"visible",this.annotationStorage.setValue(this.data.id,{noView:i,noPrint:r===1||r===2})},print:t=>{this.annotationStorage.setValue(this.data.id,{noPrint:!t.detail.print})},hidden:t=>{let{hidden:r}=t.detail;this.container.style.visibility=r?"hidden":"visible",this.annotationStorage.setValue(this.data.id,{noPrint:r,noView:r})},focus:t=>{setTimeout(()=>t.target.focus({preventScroll:!1}),0)},userName:t=>{t.target.title=t.detail.userName},readonly:t=>{t.target.disabled=t.detail.readonly},required:t=>{this._setRequired(t.target,t.detail.required)},bgColor:t=>{e("bgColor","backgroundColor",t)},fillColor:t=>{e("fillColor","backgroundColor",t)},fgColor:t=>{e("fgColor","color",t)},textColor:t=>{e("textColor","color",t)},borderColor:t=>{e("borderColor","borderColor",t)},strokeColor:t=>{e("strokeColor","borderColor",t)},rotation:t=>{let r=t.detail.rotation;this.setRotation(r),this.annotationStorage.setValue(this.data.id,{rotation:r})}})}_dispatchEventFromSandbox(e,t){let r=this._commonActions;for(let i of Object.keys(t.detail))(e[i]||r[i])?.(t)}_setDefaultPropertiesFromJS(e){if(!this.enableScripting)return;let t=this.annotationStorage.getRawValue(this.data.id);if(!t)return;let r=this._commonActions;for(let[i,s]of Object.entries(t)){let o=r[i];if(o){let a={detail:{[i]:s},target:e};o(a),delete t[i]}}}_createQuadrilaterals(){if(!this.container)return;let{quadPoints:e}=this.data;if(!e)return;let[t,r,i,s]=this.data.rect.map(g=>Math.fround(g));if(e.length===8){let[g,v,m,y]=e.subarray(2,6);if(i===g&&s===v&&t===m&&r===y)return}let{style:o}=this.container,a;if(this.#t){let{borderColor:g,borderWidth:v}=o;o.borderWidth=0,a=["url('data:image/svg+xml;utf8,",'<svg xmlns="http://www.w3.org/2000/svg"',' preserveAspectRatio="none" viewBox="0 0 1 1">',`<g fill="transparent" stroke="${g}" stroke-width="${v}">`],this.container.classList.add("hasBorder")}let l=i-t,c=s-r,{svgFactory:u}=this,d=u.createElement("svg");d.classList.add("quadrilateralsContainer"),d.setAttribute("width",0),d.setAttribute("height",0);let h=u.createElement("defs");d.append(h);let f=u.createElement("clipPath"),p=`clippath_${this.data.id}`;f.setAttribute("id",p),f.setAttribute("clipPathUnits","objectBoundingBox"),h.append(f);for(let g=2,v=e.length;g<v;g+=8){let m=e[g],y=e[g+1],w=e[g+2],b=e[g+3],C=u.createElement("rect"),S=(w-t)/l,T=(s-y)/c,M=(m-w)/l,E=(y-b)/c;C.setAttribute("x",S),C.setAttribute("y",T),C.setAttribute("width",M),C.setAttribute("height",E),f.append(C),a?.push(`<rect vector-effect="non-scaling-stroke" x="${S}" y="${T}" width="${M}" height="${E}"/>`)}this.#t&&(a.push("</g></svg>')"),o.backgroundImage=a.join("")),this.container.append(d),this.container.style.clipPath=`url(#${p})`}_createPopup(){let{data:e}=this,t=this.#n=new wa({data:{color:e.color,titleObj:e.titleObj,modificationDate:e.modificationDate,contentsObj:e.contentsObj,richText:e.richText,parentRect:e.rect,borderStyle:0,id:`popup_${e.id}`,rotation:e.rotation},parent:this.parent,elements:[this]});this.parent.div.append(t.render())}render(){Te("Abstract method `AnnotationElement.render` called")}_getElementsByName(e,t=null){let r=[];if(this._fieldObjects){let i=this._fieldObjects[e];if(i)for(let{page:s,id:o,exportValues:a}of i){if(s===-1||o===t)continue;let l=typeof a=="string"?a:null,c=document.querySelector(`[data-element-id="${o}"]`);if(c&&!Si.has(c)){oe(`_getElementsByName - element not allowed: ${o}`);continue}r.push({id:o,exportValue:l,domElement:c})}return r}for(let i of document.getElementsByName(e)){let{exportValue:s}=i,o=i.getAttribute("data-element-id");o!==t&&Si.has(i)&&r.push({id:o,exportValue:s,domElement:i})}return r}show(){this.container&&(this.container.hidden=!1),this.popup?.maybeShow()}hide(){this.container&&(this.container.hidden=!0),this.popup?.forceHide()}getElementsToTriggerPopup(){return this.container}addHighlightArea(){let e=this.getElementsToTriggerPopup();if(Array.isArray(e))for(let t of e)t.classList.add("highlightArea");else e.classList.add("highlightArea")}_editOnDoubleClick(){if(!this._isEditable)return;let{annotationEditorType:e,data:{id:t}}=this;this.container.addEventListener("dblclick",()=>{this.linkService.eventBus?.dispatch("switchannotationeditormode",{source:this,mode:e,editId:t})})}},Wu=class extends Ke{constructor(e,t=null){super(e,{isRenderable:!0,ignoreBorder:!!t?.ignoreBorder,createQuadrilaterals:!0}),this.isTooltipOnly=e.data.isTooltipOnly}render(){let{data:e,linkService:t}=this,r=document.createElement("a");r.setAttribute("data-element-id",e.id);let i=!1;return e.url?(t.addLinkAttributes(r,e.url,e.newWindow),i=!0):e.action?(this._bindNamedAction(r,e.action),i=!0):e.attachment?(this.#t(r,e.attachment,e.attachmentDest),i=!0):e.setOCGState?(this.#n(r,e.setOCGState),i=!0):e.dest?(this._bindLink(r,e.dest),i=!0):(e.actions&&(e.actions.Action||e.actions["Mouse Up"]||e.actions["Mouse Down"])&&this.enableScripting&&this.hasJSActions&&(this._bindJSAction(r,e),i=!0),e.resetForm?(this._bindResetFormAction(r,e.resetForm),i=!0):this.isTooltipOnly&&!i&&(this._bindLink(r,""),i=!0)),this.container.classList.add("linkAnnotation"),i&&this.container.append(r),this.container}#e(){this.container.setAttribute("data-internal-link","")}_bindLink(e,t){e.href=this.linkService.getDestinationHash(t),e.onclick=()=>(t&&this.linkService.goToDestination(t),!1),(t||t==="")&&this.#e()}_bindNamedAction(e,t){e.href=this.linkService.getAnchorUrl(""),e.onclick=()=>(this.linkService.executeNamedAction(t),!1),this.#e()}#t(e,t,r=null){e.href=this.linkService.getAnchorUrl(""),t.description&&(e.title=t.description),e.onclick=()=>(this.downloadManager?.openOrDownloadData(t.content,t.filename,r),!1),this.#e()}#n(e,t){e.href=this.linkService.getAnchorUrl(""),e.onclick=()=>(this.linkService.executeSetOCGState(t),!1),this.#e()}_bindJSAction(e,t){e.href=this.linkService.getAnchorUrl("");let r=new Map([["Action","onclick"],["Mouse Up","onmouseup"],["Mouse Down","onmousedown"]]);for(let i of Object.keys(t.actions)){let s=r.get(i);s&&(e[s]=()=>(this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:t.id,name:i}}),!1))}e.onclick||(e.onclick=()=>!1),this.#e()}_bindResetFormAction(e,t){let r=e.onclick;if(r||(e.href=this.linkService.getAnchorUrl("")),this.#e(),!this._fieldObjects){oe('_bindResetFormAction - "resetForm" action not supported, ensure that the `fieldObjects` parameter is provided.'),r||(e.onclick=()=>!1);return}e.onclick=()=>{r?.();let{fields:i,refs:s,include:o}=t,a=[];if(i.length!==0||s.length!==0){let u=new Set(s);for(let d of i){let h=this._fieldObjects[d]||[];for(let{id:f}of h)u.add(f)}for(let d of Object.values(this._fieldObjects))for(let h of d)u.has(h.id)===o&&a.push(h)}else for(let u of Object.values(this._fieldObjects))a.push(...u);let l=this.annotationStorage,c=[];for(let u of a){let{id:d}=u;switch(c.push(d),u.type){case"text":{let f=u.defaultValue||"";l.setValue(d,{value:f});break}case"checkbox":case"radiobutton":{let f=u.defaultValue===u.exportValues;l.setValue(d,{value:f});break}case"combobox":case"listbox":{let f=u.defaultValue||"";l.setValue(d,{value:f});break}default:continue}let h=document.querySelector(`[data-element-id="${d}"]`);if(h){if(!Si.has(h)){oe(`_bindResetFormAction - element not allowed: ${d}`);continue}}else continue;h.dispatchEvent(new Event("resetform"))}return this.enableScripting&&this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:"app",ids:c,name:"ResetForm"}}),!1}}},hv=class extends Ke{constructor(e){super(e,{isRenderable:!0})}render(){this.container.classList.add("textAnnotation");let e=document.createElement("img");return e.src=this.imageResourcesPath+"annotation-"+this.data.name.toLowerCase()+".svg",e.setAttribute("data-l10n-id","pdfjs-text-annotation-type"),e.setAttribute("data-l10n-args",JSON.stringify({type:this.data.name})),!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.append(e),this.container}},pr=class extends Ke{render(){return this.container}showElementAndHideCanvas(e){this.data.hasOwnCanvas&&(e.previousSibling?.nodeName==="CANVAS"&&(e.previousSibling.hidden=!0),e.hidden=!1)}_getKeyModifier(e){return dt.platform.isMac?e.metaKey:e.ctrlKey}_setEventListener(e,t,r,i,s){r.includes("mouse")?e.addEventListener(r,o=>{this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:this.data.id,name:i,value:s(o),shift:o.shiftKey,modifier:this._getKeyModifier(o)}})}):e.addEventListener(r,o=>{if(r==="blur"){if(!t.focused||!o.relatedTarget)return;t.focused=!1}else if(r==="focus"){if(t.focused)return;t.focused=!0}s&&this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:this.data.id,name:i,value:s(o)}})})}_setEventListeners(e,t,r,i){for(let[s,o]of r)(o==="Action"||this.data.actions?.[o])&&((o==="Focus"||o==="Blur")&&(t||={focused:!1}),this._setEventListener(e,t,s,o,i),o==="Focus"&&!this.data.actions?.Blur?this._setEventListener(e,t,"blur","Blur",null):o==="Blur"&&!this.data.actions?.Focus&&this._setEventListener(e,t,"focus","Focus",null))}_setBackgroundColor(e){let t=this.data.backgroundColor||null;e.style.backgroundColor=t===null?"transparent":L.makeHexColor(t[0],t[1],t[2])}_setTextStyle(e){let t=["left","center","right"],{fontColor:r}=this.data.defaultAppearanceData,i=this.data.defaultAppearanceData.fontSize||kk,s=e.style,o,a=2,l=c=>Math.round(10*c)/10;if(this.data.multiLine){let c=Math.abs(this.data.rect[3]-this.data.rect[1]-a),u=Math.round(c/(Eu*i))||1,d=c/u;o=Math.min(i,l(d/Eu))}else{let c=Math.abs(this.data.rect[3]-this.data.rect[1]-a);o=Math.min(i,l(c/Eu))}s.fontSize=`calc(${o}px * var(--scale-factor))`,s.color=L.makeHexColor(r[0],r[1],r[2]),this.data.textAlignment!==null&&(s.textAlign=t[this.data.textAlignment])}_setRequired(e,t){t?e.setAttribute("required",!0):e.removeAttribute("required"),e.setAttribute("aria-required",t)}},fv=class extends pr{constructor(e){let t=e.renderForms||e.data.hasOwnCanvas||!e.data.hasAppearance&&!!e.data.fieldValue;super(e,{isRenderable:t})}setPropertyOnSiblings(e,t,r,i){let s=this.annotationStorage;for(let o of this._getElementsByName(e.name,e.id))o.domElement&&(o.domElement[t]=r),s.setValue(o.id,{[i]:r})}render(){let e=this.annotationStorage,t=this.data.id;this.container.classList.add("textWidgetAnnotation");let r=null;if(this.renderForms){let i=e.getValue(t,{value:this.data.fieldValue}),s=i.value||"",o=e.getValue(t,{charLimit:this.data.maxLen}).charLimit;o&&s.length>o&&(s=s.slice(0,o));let a=i.formattedValue||this.data.textContent?.join(`
`)||null;a&&this.data.comb&&(a=a.replaceAll(/\s+/g,""));let l={userValue:s,formattedValue:a,lastCommittedValue:null,commitKey:1,focused:!1};this.data.multiLine?(r=document.createElement("textarea"),r.textContent=a??s,this.data.doNotScroll&&(r.style.overflowY="hidden")):(r=document.createElement("input"),r.type="text",r.setAttribute("value",a??s),this.data.doNotScroll&&(r.style.overflowX="hidden")),this.data.hasOwnCanvas&&(r.hidden=!0),Si.add(r),r.setAttribute("data-element-id",t),r.disabled=this.data.readOnly,r.name=this.data.fieldName,r.tabIndex=_a,this._setRequired(r,this.data.required),o&&(r.maxLength=o),r.addEventListener("input",u=>{e.setValue(t,{value:u.target.value}),this.setPropertyOnSiblings(r,"value",u.target.value,"value"),l.formattedValue=null}),r.addEventListener("resetform",u=>{let d=this.data.defaultFieldValue??"";r.value=l.userValue=d,l.formattedValue=null});let c=u=>{let{formattedValue:d}=l;d!=null&&(u.target.value=d),u.target.scrollLeft=0};if(this.enableScripting&&this.hasJSActions){r.addEventListener("focus",d=>{if(l.focused)return;let{target:h}=d;l.userValue&&(h.value=l.userValue),l.lastCommittedValue=h.value,l.commitKey=1,this.data.actions?.Focus||(l.focused=!0)}),r.addEventListener("updatefromsandbox",d=>{this.showElementAndHideCanvas(d.target);let h={value(f){l.userValue=f.detail.value??"",e.setValue(t,{value:l.userValue.toString()}),f.target.value=l.userValue},formattedValue(f){let{formattedValue:p}=f.detail;l.formattedValue=p,p!=null&&f.target!==document.activeElement&&(f.target.value=p),e.setValue(t,{formattedValue:p})},selRange(f){f.target.setSelectionRange(...f.detail.selRange)},charLimit:f=>{let{charLimit:p}=f.detail,{target:g}=f;if(p===0){g.removeAttribute("maxLength");return}g.setAttribute("maxLength",p);let v=l.userValue;!v||v.length<=p||(v=v.slice(0,p),g.value=l.userValue=v,e.setValue(t,{value:v}),this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:t,name:"Keystroke",value:v,willCommit:!0,commitKey:1,selStart:g.selectionStart,selEnd:g.selectionEnd}}))}};this._dispatchEventFromSandbox(h,d)}),r.addEventListener("keydown",d=>{l.commitKey=1;let h=-1;if(d.key==="Escape"?h=0:d.key==="Enter"&&!this.data.multiLine?h=2:d.key==="Tab"&&(l.commitKey=3),h===-1)return;let{value:f}=d.target;l.lastCommittedValue!==f&&(l.lastCommittedValue=f,l.userValue=f,this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:t,name:"Keystroke",value:f,willCommit:!0,commitKey:h,selStart:d.target.selectionStart,selEnd:d.target.selectionEnd}}))});let u=c;c=null,r.addEventListener("blur",d=>{if(!l.focused||!d.relatedTarget)return;this.data.actions?.Blur||(l.focused=!1);let{value:h}=d.target;l.userValue=h,l.lastCommittedValue!==h&&this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:t,name:"Keystroke",value:h,willCommit:!0,commitKey:l.commitKey,selStart:d.target.selectionStart,selEnd:d.target.selectionEnd}}),u(d)}),this.data.actions?.Keystroke&&r.addEventListener("beforeinput",d=>{l.lastCommittedValue=null;let{data:h,target:f}=d,{value:p,selectionStart:g,selectionEnd:v}=f,m=g,y=v;switch(d.inputType){case"deleteWordBackward":{let w=p.substring(0,g).match(/\w*[^\w]*$/);w&&(m-=w[0].length);break}case"deleteWordForward":{let w=p.substring(g).match(/^[^\w]*\w*/);w&&(y+=w[0].length);break}case"deleteContentBackward":g===v&&(m-=1);break;case"deleteContentForward":g===v&&(y+=1);break}d.preventDefault(),this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:t,name:"Keystroke",value:p,change:h||"",willCommit:!1,selStart:m,selEnd:y}})}),this._setEventListeners(r,l,[["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],d=>d.target.value)}if(c&&r.addEventListener("blur",c),this.data.comb){let d=(this.data.rect[2]-this.data.rect[0])/o;r.classList.add("comb"),r.style.letterSpacing=`calc(${d}px * var(--scale-factor) - 1ch)`}}else r=document.createElement("div"),r.textContent=this.data.fieldValue,r.style.verticalAlign="middle",r.style.display="table-cell",this.data.hasOwnCanvas&&(r.hidden=!0);return this._setTextStyle(r),this._setBackgroundColor(r),this._setDefaultPropertiesFromJS(r),this.container.append(r),this.container}},pv=class extends pr{constructor(e){super(e,{isRenderable:!!e.data.hasOwnCanvas})}},gv=class extends pr{constructor(e){super(e,{isRenderable:e.renderForms})}render(){let e=this.annotationStorage,t=this.data,r=t.id,i=e.getValue(r,{value:t.exportValue===t.fieldValue}).value;typeof i=="string"&&(i=i!=="Off",e.setValue(r,{value:i})),this.container.classList.add("buttonWidgetAnnotation","checkBox");let s=document.createElement("input");return Si.add(s),s.setAttribute("data-element-id",r),s.disabled=t.readOnly,this._setRequired(s,this.data.required),s.type="checkbox",s.name=t.fieldName,i&&s.setAttribute("checked",!0),s.setAttribute("exportValue",t.exportValue),s.tabIndex=_a,s.addEventListener("change",o=>{let{name:a,checked:l}=o.target;for(let c of this._getElementsByName(a,r)){let u=l&&c.exportValue===t.exportValue;c.domElement&&(c.domElement.checked=u),e.setValue(c.id,{value:u})}e.setValue(r,{value:l})}),s.addEventListener("resetform",o=>{let a=t.defaultFieldValue||"Off";o.target.checked=a===t.exportValue}),this.enableScripting&&this.hasJSActions&&(s.addEventListener("updatefromsandbox",o=>{let a={value(l){l.target.checked=l.detail.value!=="Off",e.setValue(r,{value:l.target.checked})}};this._dispatchEventFromSandbox(a,o)}),this._setEventListeners(s,null,[["change","Validate"],["change","Action"],["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],o=>o.target.checked)),this._setBackgroundColor(s),this._setDefaultPropertiesFromJS(s),this.container.append(s),this.container}},qu=class extends pr{constructor(e){super(e,{isRenderable:e.renderForms})}render(){this.container.classList.add("buttonWidgetAnnotation","radioButton");let e=this.annotationStorage,t=this.data,r=t.id,i=e.getValue(r,{value:t.fieldValue===t.buttonValue}).value;if(typeof i=="string"&&(i=i!==t.buttonValue,e.setValue(r,{value:i})),i)for(let o of this._getElementsByName(t.fieldName,r))e.setValue(o.id,{value:!1});let s=document.createElement("input");if(Si.add(s),s.setAttribute("data-element-id",r),s.disabled=t.readOnly,this._setRequired(s,this.data.required),s.type="radio",s.name=t.fieldName,i&&s.setAttribute("checked",!0),s.tabIndex=_a,s.addEventListener("change",o=>{let{name:a,checked:l}=o.target;for(let c of this._getElementsByName(a,r))e.setValue(c.id,{value:!1});e.setValue(r,{value:l})}),s.addEventListener("resetform",o=>{let a=t.defaultFieldValue;o.target.checked=a!=null&&a===t.buttonValue}),this.enableScripting&&this.hasJSActions){let o=t.buttonValue;s.addEventListener("updatefromsandbox",a=>{let l={value:c=>{let u=o===c.detail.value;for(let d of this._getElementsByName(c.target.name)){let h=u&&d.id===r;d.domElement&&(d.domElement.checked=h),e.setValue(d.id,{value:h})}}};this._dispatchEventFromSandbox(l,a)}),this._setEventListeners(s,null,[["change","Validate"],["change","Action"],["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],a=>a.target.checked)}return this._setBackgroundColor(s),this._setDefaultPropertiesFromJS(s),this.container.append(s),this.container}},mv=class extends Wu{constructor(e){super(e,{ignoreBorder:e.data.hasAppearance})}render(){let e=super.render();e.classList.add("buttonWidgetAnnotation","pushButton");let t=e.lastChild;return this.enableScripting&&this.hasJSActions&&t&&(this._setDefaultPropertiesFromJS(t),t.addEventListener("updatefromsandbox",r=>{this._dispatchEventFromSandbox({},r)})),e}},vv=class extends pr{constructor(e){super(e,{isRenderable:e.renderForms})}render(){this.container.classList.add("choiceWidgetAnnotation");let e=this.annotationStorage,t=this.data.id,r=e.getValue(t,{value:this.data.fieldValue}),i=document.createElement("select");Si.add(i),i.setAttribute("data-element-id",t),i.disabled=this.data.readOnly,this._setRequired(i,this.data.required),i.name=this.data.fieldName,i.tabIndex=_a;let s=this.data.combo&&this.data.options.length>0;this.data.combo||(i.size=this.data.options.length,this.data.multiSelect&&(i.multiple=!0)),i.addEventListener("resetform",u=>{let d=this.data.defaultFieldValue;for(let h of i.options)h.selected=h.value===d});for(let u of this.data.options){let d=document.createElement("option");d.textContent=u.displayValue,d.value=u.exportValue,r.value.includes(u.exportValue)&&(d.setAttribute("selected",!0),s=!1),i.append(d)}let o=null;if(s){let u=document.createElement("option");u.value=" ",u.setAttribute("hidden",!0),u.setAttribute("selected",!0),i.prepend(u),o=()=>{u.remove(),i.removeEventListener("input",o),o=null},i.addEventListener("input",o)}let a=u=>{let d=u?"value":"textContent",{options:h,multiple:f}=i;return f?Array.prototype.filter.call(h,p=>p.selected).map(p=>p[d]):h.selectedIndex===-1?null:h[h.selectedIndex][d]},l=a(!1),c=u=>{let d=u.target.options;return Array.prototype.map.call(d,h=>({displayValue:h.textContent,exportValue:h.value}))};return this.enableScripting&&this.hasJSActions?(i.addEventListener("updatefromsandbox",u=>{let d={value(h){o?.();let f=h.detail.value,p=new Set(Array.isArray(f)?f:[f]);for(let g of i.options)g.selected=p.has(g.value);e.setValue(t,{value:a(!0)}),l=a(!1)},multipleSelection(h){i.multiple=!0},remove(h){let f=i.options,p=h.detail.remove;f[p].selected=!1,i.remove(p),f.length>0&&Array.prototype.findIndex.call(f,v=>v.selected)===-1&&(f[0].selected=!0),e.setValue(t,{value:a(!0),items:c(h)}),l=a(!1)},clear(h){for(;i.length!==0;)i.remove(0);e.setValue(t,{value:null,items:[]}),l=a(!1)},insert(h){let{index:f,displayValue:p,exportValue:g}=h.detail.insert,v=i.children[f],m=document.createElement("option");m.textContent=p,m.value=g,v?v.before(m):i.append(m),e.setValue(t,{value:a(!0),items:c(h)}),l=a(!1)},items(h){let{items:f}=h.detail;for(;i.length!==0;)i.remove(0);for(let p of f){let{displayValue:g,exportValue:v}=p,m=document.createElement("option");m.textContent=g,m.value=v,i.append(m)}i.options.length>0&&(i.options[0].selected=!0),e.setValue(t,{value:a(!0),items:c(h)}),l=a(!1)},indices(h){let f=new Set(h.detail.indices);for(let p of h.target.options)p.selected=f.has(p.index);e.setValue(t,{value:a(!0)}),l=a(!1)},editable(h){h.target.disabled=!h.detail.editable}};this._dispatchEventFromSandbox(d,u)}),i.addEventListener("input",u=>{let d=a(!0),h=a(!1);e.setValue(t,{value:d}),u.preventDefault(),this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:t,name:"Keystroke",value:l,change:h,changeEx:d,willCommit:!1,commitKey:1,keyDown:!1}})}),this._setEventListeners(i,null,[["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"],["input","Action"],["input","Validate"]],u=>u.target.value)):i.addEventListener("input",function(u){e.setValue(t,{value:a(!0)})}),this.data.combo&&this._setTextStyle(i),this._setBackgroundColor(i),this._setDefaultPropertiesFromJS(i),this.container.append(i),this.container}},wa=class extends Ke{constructor(e){let{data:t,elements:r}=e;super(e,{isRenderable:Ke._hasPopupData(t)}),this.elements=r,this.popup=null}render(){this.container.classList.add("popupAnnotation");let e=this.popup=new yv({container:this.container,color:this.data.color,titleObj:this.data.titleObj,modificationDate:this.data.modificationDate,contentsObj:this.data.contentsObj,richText:this.data.richText,rect:this.data.rect,parentRect:this.data.parentRect||null,parent:this.parent,elements:this.elements,open:this.data.open}),t=[];for(let r of this.elements)r.popup=e,r.container.ariaHasPopup="dialog",t.push(r.data.id),r.addHighlightArea();return this.container.setAttribute("aria-controls",t.map(r=>`${Lv}${r}`).join(",")),this.container}},yv=class{#e=this.#M.bind(this);#t=this.#x.bind(this);#n=this.#D.bind(this);#r=this.#A.bind(this);#i=null;#s=null;#l=null;#c=null;#u=null;#a=null;#d=null;#o=!1;#h=null;#p=null;#f=null;#g=null;#v=null;#m=null;#y=!1;constructor({container:e,color:t,elements:r,titleObj:i,modificationDate:s,contentsObj:o,richText:a,parent:l,rect:c,parentRect:u,open:d}){this.#s=e,this.#v=i,this.#l=o,this.#g=a,this.#a=l,this.#i=t,this.#f=c,this.#d=u,this.#u=r,this.#c=Iu.toDateObject(s),this.trigger=r.flatMap(h=>h.getElementsToTriggerPopup());for(let h of this.trigger)h.addEventListener("click",this.#r),h.addEventListener("mouseenter",this.#n),h.addEventListener("mouseleave",this.#t),h.classList.add("popupTriggerArea");for(let h of r)h.container?.addEventListener("keydown",this.#e);this.#s.hidden=!0,d&&this.#A()}render(){if(this.#h)return;let e=this.#h=document.createElement("div");if(e.className="popup",this.#i){let s=e.style.outlineColor=L.makeHexColor(...this.#i);CSS.supports("background-color","color-mix(in srgb, red 30%, white)")?e.style.backgroundColor=`color-mix(in srgb, ${s} 30%, white)`:e.style.backgroundColor=L.makeHexColor(...this.#i.map(a=>Math.floor(.7*(255-a)+a)))}let t=document.createElement("span");t.className="header";let r=document.createElement("h1");if(t.append(r),{dir:r.dir,str:r.textContent}=this.#v,e.append(t),this.#c){let s=document.createElement("span");s.classList.add("popupDate"),s.setAttribute("data-l10n-id","pdfjs-annotation-date-time-string"),s.setAttribute("data-l10n-args",JSON.stringify({dateObj:this.#c.valueOf()})),t.append(s)}let i=this.#w;if(i)zu.render({xfaHtml:i,intent:"richText",div:e}),e.lastChild.classList.add("richText","popupContent");else{let s=this._formatContents(this.#l);e.append(s)}this.#s.append(e)}get#w(){let e=this.#g,t=this.#l;return e?.str&&(!t?.str||t.str===e.str)&&this.#g.html||null}get#_(){return this.#w?.attributes?.style?.fontSize||0}get#E(){return this.#w?.attributes?.style?.color||null}#C(e){let t=[],r={str:e,html:{name:"div",attributes:{dir:"auto"},children:[{name:"p",children:t}]}},i={style:{color:this.#E,fontSize:this.#_?`calc(${this.#_}px * var(--scale-factor))`:""}};for(let s of e.split(`
`))t.push({name:"span",value:s,attributes:i});return r}_formatContents({str:e,dir:t}){let r=document.createElement("p");r.classList.add("popupContent"),r.dir=t;let i=e.split(/(?:\r\n?|\n)/);for(let s=0,o=i.length;s<o;++s){let a=i[s];r.append(document.createTextNode(a)),s<o-1&&r.append(document.createElement("br"))}return r}#M(e){e.altKey||e.shiftKey||e.ctrlKey||e.metaKey||(e.key==="Enter"||e.key==="Escape"&&this.#o)&&this.#A()}updateEdited({rect:e,popupContent:t}){this.#m||={contentsObj:this.#l,richText:this.#g},e&&(this.#p=null),t&&(this.#g=this.#C(t),this.#l=null),this.#h?.remove(),this.#h=null}resetEdited(){this.#m&&({contentsObj:this.#l,richText:this.#g}=this.#m,this.#m=null,this.#h?.remove(),this.#h=null,this.#p=null)}#I(){if(this.#p!==null)return;let{page:{view:e},viewport:{rawDims:{pageWidth:t,pageHeight:r,pageX:i,pageY:s}}}=this.#a,o=!!this.#d,a=o?this.#d:this.#f;for(let p of this.#u)if(!a||L.intersect(p.data.rect,a)!==null){a=p.data.rect,o=!0;break}let l=L.normalizeRect([a[0],e[3]-a[1]+e[1],a[2],e[3]-a[3]+e[1]]),u=o?a[2]-a[0]+5:0,d=l[0]+u,h=l[1];this.#p=[100*(d-i)/t,100*(h-s)/r];let{style:f}=this.#s;f.left=`${this.#p[0]}%`,f.top=`${this.#p[1]}%`}#A(){this.#o=!this.#o,this.#o?(this.#D(),this.#s.addEventListener("click",this.#r),this.#s.addEventListener("keydown",this.#e)):(this.#x(),this.#s.removeEventListener("click",this.#r),this.#s.removeEventListener("keydown",this.#e))}#D(){this.#h||this.render(),this.isVisible?this.#o&&this.#s.classList.add("focused"):(this.#I(),this.#s.hidden=!1,this.#s.style.zIndex=parseInt(this.#s.style.zIndex)+1e3)}#x(){this.#s.classList.remove("focused"),!(this.#o||!this.isVisible)&&(this.#s.hidden=!0,this.#s.style.zIndex=parseInt(this.#s.style.zIndex)-1e3)}forceHide(){this.#y=this.isVisible,this.#y&&(this.#s.hidden=!0)}maybeShow(){this.#y&&(this.#h||this.#D(),this.#y=!1,this.#s.hidden=!1)}get isVisible(){return this.#s.hidden===!1}},Gu=class extends Ke{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0}),this.textContent=e.data.textContent,this.textPosition=e.data.textPosition,this.annotationEditorType=ee.FREETEXT}render(){if(this.container.classList.add("freeTextAnnotation"),this.textContent){let e=document.createElement("div");e.classList.add("annotationTextContent"),e.setAttribute("role","comment");for(let t of this.textContent){let r=document.createElement("span");r.textContent=t,e.append(r)}this.container.append(e)}return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this._editOnDoubleClick(),this.container}},bv=class extends Ke{#e=null;constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0})}render(){this.container.classList.add("lineAnnotation");let e=this.data,{width:t,height:r}=dr(e.rect),i=this.svgFactory.create(t,r,!0),s=this.#e=this.svgFactory.createElement("svg:line");return s.setAttribute("x1",e.rect[2]-e.lineCoordinates[0]),s.setAttribute("y1",e.rect[3]-e.lineCoordinates[1]),s.setAttribute("x2",e.rect[2]-e.lineCoordinates[2]),s.setAttribute("y2",e.rect[3]-e.lineCoordinates[3]),s.setAttribute("stroke-width",e.borderStyle.width||1),s.setAttribute("stroke","transparent"),s.setAttribute("fill","transparent"),i.append(s),this.container.append(i),!e.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return this.#e}addHighlightArea(){this.container.classList.add("highlightArea")}},wv=class extends Ke{#e=null;constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0})}render(){this.container.classList.add("squareAnnotation");let e=this.data,{width:t,height:r}=dr(e.rect),i=this.svgFactory.create(t,r,!0),s=e.borderStyle.width,o=this.#e=this.svgFactory.createElement("svg:rect");return o.setAttribute("x",s/2),o.setAttribute("y",s/2),o.setAttribute("width",t-s),o.setAttribute("height",r-s),o.setAttribute("stroke-width",s||1),o.setAttribute("stroke","transparent"),o.setAttribute("fill","transparent"),i.append(o),this.container.append(i),!e.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return this.#e}addHighlightArea(){this.container.classList.add("highlightArea")}},Ev=class extends Ke{#e=null;constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0})}render(){this.container.classList.add("circleAnnotation");let e=this.data,{width:t,height:r}=dr(e.rect),i=this.svgFactory.create(t,r,!0),s=e.borderStyle.width,o=this.#e=this.svgFactory.createElement("svg:ellipse");return o.setAttribute("cx",t/2),o.setAttribute("cy",r/2),o.setAttribute("rx",t/2-s/2),o.setAttribute("ry",r/2-s/2),o.setAttribute("stroke-width",s||1),o.setAttribute("stroke","transparent"),o.setAttribute("fill","transparent"),i.append(o),this.container.append(i),!e.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return this.#e}addHighlightArea(){this.container.classList.add("highlightArea")}},Yu=class extends Ke{#e=null;constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0}),this.containerClassName="polylineAnnotation",this.svgElementName="svg:polyline"}render(){this.container.classList.add(this.containerClassName);let{data:{rect:e,vertices:t,borderStyle:r,popupRef:i}}=this;if(!t)return this.container;let{width:s,height:o}=dr(e),a=this.svgFactory.create(s,o,!0),l=[];for(let u=0,d=t.length;u<d;u+=2){let h=t[u]-e[0],f=e[3]-t[u+1];l.push(`${h},${f}`)}l=l.join(" ");let c=this.#e=this.svgFactory.createElement(this.svgElementName);return c.setAttribute("points",l),c.setAttribute("stroke-width",r.width||1),c.setAttribute("stroke","transparent"),c.setAttribute("fill","transparent"),a.append(c),this.container.append(a),!i&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return this.#e}addHighlightArea(){this.container.classList.add("highlightArea")}},Cv=class extends Yu{constructor(e){super(e),this.containerClassName="polygonAnnotation",this.svgElementName="svg:polygon"}},_v=class extends Ke{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0})}render(){return this.container.classList.add("caretAnnotation"),!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container}},Ea=class extends Ke{#e=[];constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0}),this.containerClassName="inkAnnotation",this.svgElementName="svg:polyline",this.annotationEditorType=this.data.it==="InkHighlight"?ee.HIGHLIGHT:ee.INK}render(){this.container.classList.add(this.containerClassName);let{data:{rect:e,inkLists:t,borderStyle:r,popupRef:i}}=this,{width:s,height:o}=dr(e),a=this.svgFactory.create(s,o,!0);for(let l of t){let c=[];for(let d=0,h=l.length;d<h;d+=2){let f=l[d]-e[0],p=e[3]-l[d+1];c.push(`${f},${p}`)}c=c.join(" ");let u=this.svgFactory.createElement(this.svgElementName);this.#e.push(u),u.setAttribute("points",c),u.setAttribute("stroke-width",r.width||1),u.setAttribute("stroke","transparent"),u.setAttribute("fill","transparent"),a.append(u)}return!i&&this.hasPopupData&&this._createPopup(),this.container.append(a),this._editOnDoubleClick(),this.container}getElementsToTriggerPopup(){return this.#e}addHighlightArea(){this.container.classList.add("highlightArea")}},Ku=class extends Ke{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0}),this.annotationEditorType=ee.HIGHLIGHT}render(){return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.classList.add("highlightAnnotation"),this._editOnDoubleClick(),this.container}},Av=class extends Ke{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.classList.add("underlineAnnotation"),this.container}},Sv=class extends Ke{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.classList.add("squigglyAnnotation"),this.container}},xv=class extends Ke{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.classList.add("strikeoutAnnotation"),this.container}},Xu=class extends Ke{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0}),this.annotationEditorType=ee.STAMP}render(){return this.container.classList.add("stampAnnotation"),this.container.setAttribute("role","img"),!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this._editOnDoubleClick(),this.container}},Iv=class extends Ke{#e=null;constructor(e){super(e,{isRenderable:!0});let{file:t}=this.data;this.filename=t.filename,this.content=t.content,this.linkService.eventBus?.dispatch("fileattachmentannotation",_({source:this},t))}render(){this.container.classList.add("fileAttachmentAnnotation");let{container:e,data:t}=this,r;t.hasAppearance||t.fillAlpha===0?r=document.createElement("div"):(r=document.createElement("img"),r.src=`${this.imageResourcesPath}annotation-${/paperclip/i.test(t.name)?"paperclip":"pushpin"}.svg`,t.fillAlpha&&t.fillAlpha<1&&(r.style=`filter: opacity(${Math.round(t.fillAlpha*100)}%);`)),r.addEventListener("dblclick",this.#t.bind(this)),this.#e=r;let{isMac:i}=dt.platform;return e.addEventListener("keydown",s=>{s.key==="Enter"&&(i?s.metaKey:s.ctrlKey)&&this.#t()}),!t.popupRef&&this.hasPopupData?this._createPopup():r.classList.add("popupTriggerArea"),e.append(r),e}getElementsToTriggerPopup(){return this.#e}addHighlightArea(){this.container.classList.add("highlightArea")}#t(){this.downloadManager?.openOrDownloadData(this.content,this.filename)}},Dv=class{#e=null;#t=null;#n=new Map;#r=null;constructor({div:e,accessibilityManager:t,annotationCanvasMap:r,annotationEditorUIManager:i,page:s,viewport:o,structTreeLayer:a}){this.div=e,this.#e=t,this.#t=r,this.#r=a||null,this.page=s,this.viewport=o,this.zIndex=0,this._annotationEditorUIManager=i}hasEditableAnnotations(){return this.#n.size>0}#i(e,t){return I(this,null,function*(){let r=e.firstChild||e,i=r.id=`${Lv}${t}`,s=yield this.#r?.getAriaAttributes(i);if(s)for(let[o,a]of s)r.setAttribute(o,a);this.div.append(e),this.#e?.moveElementInDOM(this.div,e,r,!1)})}render(e){return I(this,null,function*(){let{annotations:t}=e,r=this.div;_i(r,this.viewport);let i=new Map,s={data:null,layer:r,linkService:e.linkService,downloadManager:e.downloadManager,imageResourcesPath:e.imageResourcesPath||"",renderForms:e.renderForms!==!1,svgFactory:new ba,annotationStorage:e.annotationStorage||new ga,enableScripting:e.enableScripting===!0,hasJSActions:e.hasJSActions,fieldObjects:e.fieldObjects,parent:this,elements:null};for(let o of t){if(o.noHTML)continue;let a=o.annotationType===rt.POPUP;if(a){let u=i.get(o.id);if(!u)continue;s.elements=u}else{let{width:u,height:d}=dr(o.rect);if(u<=0||d<=0)continue}s.data=o;let l=dv.create(s);if(!l.isRenderable)continue;if(!a&&o.popupRef){let u=i.get(o.popupRef);u?u.push(l):i.set(o.popupRef,[l])}let c=l.render();o.hidden&&(c.style.visibility="hidden"),yield this.#i(c,o.id),l._isEditable&&(this.#n.set(l.data.id,l),this._annotationEditorUIManager?.renderAnnotationElement(l))}this.#s()})}update({viewport:e}){let t=this.div;this.viewport=e,_i(t,{rotation:e.rotation}),this.#s(),t.hidden=!1}#s(){if(!this.#t)return;let e=this.div;for(let[t,r]of this.#t){let i=e.querySelector(`[data-annotation-id="${t}"]`);if(!i)continue;r.className="annotationContent";let{firstChild:s}=i;s?s.nodeName==="CANVAS"?s.replaceWith(r):s.classList.contains("annotationContent")?s.after(r):s.before(r):i.append(r)}this.#t.clear()}getEditableAnnotations(){return Array.from(this.#n.values())}getEditableAnnotation(e){return this.#n.get(e)}},wu=/\r\n?|\n/g,Tv=class n extends be{#e;#t="";#n=`${this.id}-editor`;#r=null;#i;static _freeTextDefaultContent="";static _internalPadding=0;static _defaultColor=null;static _defaultFontSize=10;static get _keyboardManager(){let e=n.prototype,t=s=>s.isEmpty(),r=pa.TRANSLATE_SMALL,i=pa.TRANSLATE_BIG;return ue(this,"_keyboardManager",new Ai([[["ctrl+s","mac+meta+s","ctrl+p","mac+meta+p"],e.commitOrRemove,{bubbles:!0}],[["ctrl+Enter","mac+meta+Enter","Escape","mac+Escape"],e.commitOrRemove],[["ArrowLeft","mac+ArrowLeft"],e._translateEmpty,{args:[-r,0],checker:t}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],e._translateEmpty,{args:[-i,0],checker:t}],[["ArrowRight","mac+ArrowRight"],e._translateEmpty,{args:[r,0],checker:t}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],e._translateEmpty,{args:[i,0],checker:t}],[["ArrowUp","mac+ArrowUp"],e._translateEmpty,{args:[0,-r],checker:t}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],e._translateEmpty,{args:[0,-i],checker:t}],[["ArrowDown","mac+ArrowDown"],e._translateEmpty,{args:[0,r],checker:t}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],e._translateEmpty,{args:[0,i],checker:t}]]))}static _type="freetext";static _editorType=ee.FREETEXT;constructor(e){super(W(_({},e),{name:"freeTextEditor"})),this.#e=e.color||n._defaultColor||be._defaultLineColor,this.#i=e.fontSize||n._defaultFontSize}static initialize(e,t){be.initialize(e,t);let r=getComputedStyle(document.documentElement);this._internalPadding=parseFloat(r.getPropertyValue("--freetext-padding"))}static updateDefaultParams(e,t){switch(e){case Y.FREETEXT_SIZE:n._defaultFontSize=t;break;case Y.FREETEXT_COLOR:n._defaultColor=t;break}}updateParams(e,t){switch(e){case Y.FREETEXT_SIZE:this.#s(t);break;case Y.FREETEXT_COLOR:this.#l(t);break}}static get defaultPropertiesToUpdate(){return[[Y.FREETEXT_SIZE,n._defaultFontSize],[Y.FREETEXT_COLOR,n._defaultColor||be._defaultLineColor]]}get propertiesToUpdate(){return[[Y.FREETEXT_SIZE,this.#i],[Y.FREETEXT_COLOR,this.#e]]}#s(e){let t=i=>{this.editorDiv.style.fontSize=`calc(${i}px * var(--scale-factor))`,this.translate(0,-(i-this.#i)*this.parentScale),this.#i=i,this.#u()},r=this.#i;this.addCommands({cmd:t.bind(this,e),undo:t.bind(this,r),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:Y.FREETEXT_SIZE,overwriteIfSameType:!0,keepUndo:!0})}#l(e){let t=i=>{this.#e=this.editorDiv.style.color=i},r=this.#e;this.addCommands({cmd:t.bind(this,e),undo:t.bind(this,r),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:Y.FREETEXT_COLOR,overwriteIfSameType:!0,keepUndo:!0})}_translateEmpty(e,t){this._uiManager.translateSelectedEditors(e,t,!0)}getInitialTranslation(){let e=this.parentScale;return[-n._internalPadding*e,-(n._internalPadding+this.#i)*e]}rebuild(){this.parent&&(super.rebuild(),this.div!==null&&(this.isAttachedToDOM||this.parent.add(this)))}enableEditMode(){if(this.isInEditMode())return;this.parent.setEditingState(!1),this.parent.updateToolbar(ee.FREETEXT),super.enableEditMode(),this.overlayDiv.classList.remove("enabled"),this.editorDiv.contentEditable=!0,this._isDraggable=!1,this.div.removeAttribute("aria-activedescendant"),this.#r=new AbortController;let e=this._uiManager.combinedSignal(this.#r);this.editorDiv.addEventListener("keydown",this.editorDivKeydown.bind(this),{signal:e}),this.editorDiv.addEventListener("focus",this.editorDivFocus.bind(this),{signal:e}),this.editorDiv.addEventListener("blur",this.editorDivBlur.bind(this),{signal:e}),this.editorDiv.addEventListener("input",this.editorDivInput.bind(this),{signal:e}),this.editorDiv.addEventListener("paste",this.editorDivPaste.bind(this),{signal:e})}disableEditMode(){this.isInEditMode()&&(this.parent.setEditingState(!0),super.disableEditMode(),this.overlayDiv.classList.add("enabled"),this.editorDiv.contentEditable=!1,this.div.setAttribute("aria-activedescendant",this.#n),this._isDraggable=!0,this.#r?.abort(),this.#r=null,this.div.focus({preventScroll:!0}),this.isEditing=!1,this.parent.div.classList.add("freetextEditing"))}focusin(e){this._focusEventsAllowed&&(super.focusin(e),e.target!==this.editorDiv&&this.editorDiv.focus())}onceAdded(){this.width||(this.enableEditMode(),this.editorDiv.focus(),this._initialOptions?.isCentered&&this.center(),this._initialOptions=null)}isEmpty(){return!this.editorDiv||this.editorDiv.innerText.trim()===""}remove(){this.isEditing=!1,this.parent&&(this.parent.setEditingState(!0),this.parent.div.classList.add("freetextEditing")),super.remove()}#c(){let e=[];this.editorDiv.normalize();let t=null;for(let r of this.editorDiv.childNodes)t?.nodeType===Node.TEXT_NODE&&r.nodeName==="BR"||(e.push(n.#a(r)),t=r);return e.join(`
`)}#u(){let[e,t]=this.parentDimensions,r;if(this.isAttachedToDOM)r=this.div.getBoundingClientRect();else{let{currentLayer:i,div:s}=this,o=s.style.display,a=s.classList.contains("hidden");s.classList.remove("hidden"),s.style.display="hidden",i.div.append(this.div),r=s.getBoundingClientRect(),s.remove(),s.style.display=o,s.classList.toggle("hidden",a)}this.rotation%180===this.parentRotation%180?(this.width=r.width/e,this.height=r.height/t):(this.width=r.height/e,this.height=r.width/t),this.fixAndSetPosition()}commit(){if(!this.isInEditMode())return;super.commit(),this.disableEditMode();let e=this.#t,t=this.#t=this.#c().trimEnd();if(e===t)return;let r=i=>{if(this.#t=i,!i){this.remove();return}this.#d(),this._uiManager.rebuild(this),this.#u()};this.addCommands({cmd:()=>{r(t)},undo:()=>{r(e)},mustExec:!1}),this.#u()}shouldGetKeyboardEvents(){return this.isInEditMode()}enterInEditMode(){this.enableEditMode(),this.editorDiv.focus()}dblclick(e){this.enterInEditMode()}keydown(e){e.target===this.div&&e.key==="Enter"&&(this.enterInEditMode(),e.preventDefault())}editorDivKeydown(e){n._keyboardManager.exec(this,e)}editorDivFocus(e){this.isEditing=!0}editorDivBlur(e){this.isEditing=!1}editorDivInput(e){this.parent.div.classList.toggle("freetextEditing",this.isEmpty())}disableEditing(){this.editorDiv.setAttribute("role","comment"),this.editorDiv.removeAttribute("aria-multiline")}enableEditing(){this.editorDiv.setAttribute("role","textbox"),this.editorDiv.setAttribute("aria-multiline",!0)}render(){if(this.div)return this.div;let e,t;this.width&&(e=this.x,t=this.y),super.render(),this.editorDiv=document.createElement("div"),this.editorDiv.className="internal",this.editorDiv.setAttribute("id",this.#n),this.editorDiv.setAttribute("data-l10n-id","pdfjs-free-text2"),this.editorDiv.setAttribute("data-l10n-attrs","default-content"),this.enableEditing(),this.editorDiv.contentEditable=!0;let{style:r}=this.editorDiv;if(r.fontSize=`calc(${this.#i}px * var(--scale-factor))`,r.color=this.#e,this.div.append(this.editorDiv),this.overlayDiv=document.createElement("div"),this.overlayDiv.classList.add("overlay","enabled"),this.div.append(this.overlayDiv),Du(this,this.div,["dblclick","keydown"]),this.width){let[i,s]=this.parentDimensions;if(this.annotationElementId){let{position:o}=this._initialData,[a,l]=this.getInitialTranslation();[a,l]=this.pageTranslationToScreen(a,l);let[c,u]=this.pageDimensions,[d,h]=this.pageTranslation,f,p;switch(this.rotation){case 0:f=e+(o[0]-d)/c,p=t+this.height-(o[1]-h)/u;break;case 90:f=e+(o[0]-d)/c,p=t-(o[1]-h)/u,[a,l]=[l,-a];break;case 180:f=e-this.width+(o[0]-d)/c,p=t-(o[1]-h)/u,[a,l]=[-a,-l];break;case 270:f=e+(o[0]-d-this.height*u)/c,p=t+(o[1]-h-this.width*c)/u,[a,l]=[-l,a];break}this.setAt(f*i,p*s,a,l)}else this.setAt(e*i,t*s,this.width*i,this.height*s);this.#d(),this._isDraggable=!0,this.editorDiv.contentEditable=!1}else this._isDraggable=!1,this.editorDiv.contentEditable=!0;return this.div}static#a(e){return(e.nodeType===Node.TEXT_NODE?e.nodeValue:e.innerText).replaceAll(wu,"")}editorDivPaste(e){let t=e.clipboardData||window.clipboardData,{types:r}=t;if(r.length===1&&r[0]==="text/plain")return;e.preventDefault();let i=n.#h(t.getData("text")||"").replaceAll(wu,`
`);if(!i)return;let s=window.getSelection();if(!s.rangeCount)return;this.editorDiv.normalize(),s.deleteFromDocument();let o=s.getRangeAt(0);if(!i.includes(`
`)){o.insertNode(document.createTextNode(i)),this.editorDiv.normalize(),s.collapseToStart();return}let{startContainer:a,startOffset:l}=o,c=[],u=[];if(a.nodeType===Node.TEXT_NODE){let f=a.parentElement;if(u.push(a.nodeValue.slice(l).replaceAll(wu,"")),f!==this.editorDiv){let p=c;for(let g of this.editorDiv.childNodes){if(g===f){p=u;continue}p.push(n.#a(g))}}c.push(a.nodeValue.slice(0,l).replaceAll(wu,""))}else if(a===this.editorDiv){let f=c,p=0;for(let g of this.editorDiv.childNodes)p++===l&&(f=u),f.push(n.#a(g))}this.#t=`${c.join(`
`)}${i}${u.join(`
`)}`,this.#d();let d=new Range,h=c.reduce((f,p)=>f+p.length,0);for(let{firstChild:f}of this.editorDiv.childNodes)if(f.nodeType===Node.TEXT_NODE){let p=f.nodeValue.length;if(h<=p){d.setStart(f,h),d.setEnd(f,h);break}h-=p}s.removeAllRanges(),s.addRange(d)}#d(){if(this.editorDiv.replaceChildren(),!!this.#t)for(let e of this.#t.split(`
`)){let t=document.createElement("div");t.append(e?document.createTextNode(e):document.createElement("br")),this.editorDiv.append(t)}}#o(){return this.#t.replaceAll("\xA0"," ")}static#h(e){return e.replaceAll(" ","\xA0")}get contentDiv(){return this.editorDiv}static deserialize(e,t,r){return I(this,null,function*(){let i=null;if(e instanceof Gu){let{data:{defaultAppearanceData:{fontSize:o,fontColor:a},rect:l,rotation:c,id:u,popupRef:d},textContent:h,textPosition:f,parent:{page:{pageNumber:p}}}=e;if(!h||h.length===0)return null;i=e={annotationType:ee.FREETEXT,color:Array.from(a),fontSize:o,value:h.join(`
`),position:f,pageIndex:p-1,rect:l.slice(0),rotation:c,id:u,deleted:!1,popupRef:d}}let s=yield Li(n,this,"deserialize").call(this,e,t,r);return s.#i=e.fontSize,s.#e=L.makeHexColor(...e.color),s.#t=n.#h(e.value),s.annotationElementId=e.id||null,s._initialData=i,s})}serialize(e=!1){if(this.isEmpty())return null;if(this.deleted)return this.serializeDeleted();let t=n._internalPadding*this.parentScale,r=this.getRect(t,t),i=be._colorManager.convert(this.isAttachedToDOM?getComputedStyle(this.editorDiv).color:this.#e),s={annotationType:ee.FREETEXT,color:i,fontSize:this.#i,value:this.#o(),pageIndex:this.pageIndex,rect:r,rotation:this.rotation,structTreeParentId:this._structTreeParentId};return e?s:this.annotationElementId&&!this.#p(s)?null:(s.id=this.annotationElementId,s)}#p(e){let{value:t,fontSize:r,color:i,pageIndex:s}=this._initialData;return this._hasBeenMoved||e.value!==t||e.fontSize!==r||e.color.some((o,a)=>o!==i[a])||e.pageIndex!==s}renderAnnotationElement(e){let t=super.renderAnnotationElement(e);if(this.deleted)return t;let{style:r}=t;r.fontSize=`calc(${this.#i}px * var(--scale-factor))`,r.color=this.#e,t.replaceChildren();for(let s of this.#t.split(`
`)){let o=document.createElement("div");o.append(s?document.createTextNode(s):document.createElement("br")),t.append(o)}let i=n._internalPadding*this.parentScale;return e.updateEdited({rect:this.getRect(i,i),popupContent:this.#t}),t}resetAnnotationElement(e){super.resetAnnotationElement(e),e.resetEdited()}},Qu=class{toSVGPath(){Te("Abstract method `toSVGPath` must be implemented.")}get box(){Te("Abstract getter `box` must be implemented.")}serialize(e,t){Te("Abstract method `serialize` must be implemented.")}get classNamesForDrawing(){Te("Abstract getter `classNamesForDrawing` must be implemented.")}get classNamesForOutlining(){Te("Abstract getter `classNamesForOutlining` must be implemented.")}get mustRemoveSelfIntersections(){return!1}},Zu=class n{#e;#t=[];#n;#r;#i=[];#s=new Float64Array(18);#l;#c;#u;#a;#d;#o;#h=[];static#p=8;static#f=2;static#g=n.#p+n.#f;constructor({x:e,y:t},r,i,s,o,a=0){this.#e=r,this.#o=s*i,this.#r=o,this.#s.set([NaN,NaN,NaN,NaN,e,t],6),this.#n=a,this.#a=n.#p*i,this.#u=n.#g*i,this.#d=i,this.#h.push(e,t)}isEmpty(){return isNaN(this.#s[8])}#v(){let e=this.#s.subarray(4,6),t=this.#s.subarray(16,18),[r,i,s,o]=this.#e;return[(this.#l+(e[0]-t[0])/2-r)/s,(this.#c+(e[1]-t[1])/2-i)/o,(this.#l+(t[0]-e[0])/2-r)/s,(this.#c+(t[1]-e[1])/2-i)/o]}add({x:e,y:t}){this.#l=e,this.#c=t;let[r,i,s,o]=this.#e,[a,l,c,u]=this.#s.subarray(8,12),d=e-c,h=t-u,f=Math.hypot(d,h);if(f<this.#u)return!1;let p=f-this.#a,g=p/f,v=g*d,m=g*h,y=a,w=l;a=c,l=u,c+=v,u+=m,this.#h?.push(e,t);let b=-m/p,C=v/p,S=b*this.#o,T=C*this.#o;return this.#s.set(this.#s.subarray(2,8),0),this.#s.set([c+S,u+T],4),this.#s.set(this.#s.subarray(14,18),12),this.#s.set([c-S,u-T],16),isNaN(this.#s[6])?(this.#i.length===0&&(this.#s.set([a+S,l+T],2),this.#i.push(NaN,NaN,NaN,NaN,(a+S-r)/s,(l+T-i)/o),this.#s.set([a-S,l-T],14),this.#t.push(NaN,NaN,NaN,NaN,(a-S-r)/s,(l-T-i)/o)),this.#s.set([y,w,a,l,c,u],6),!this.isEmpty()):(this.#s.set([y,w,a,l,c,u],6),Math.abs(Math.atan2(w-l,y-a)-Math.atan2(m,v))<Math.PI/2?([a,l,c,u]=this.#s.subarray(2,6),this.#i.push(NaN,NaN,NaN,NaN,((a+c)/2-r)/s,((l+u)/2-i)/o),[a,l,y,w]=this.#s.subarray(14,18),this.#t.push(NaN,NaN,NaN,NaN,((y+a)/2-r)/s,((w+l)/2-i)/o),!0):([y,w,a,l,c,u]=this.#s.subarray(0,6),this.#i.push(((y+5*a)/6-r)/s,((w+5*l)/6-i)/o,((5*a+c)/6-r)/s,((5*l+u)/6-i)/o,((a+c)/2-r)/s,((l+u)/2-i)/o),[c,u,a,l,y,w]=this.#s.subarray(12,18),this.#t.push(((y+5*a)/6-r)/s,((w+5*l)/6-i)/o,((5*a+c)/6-r)/s,((5*l+u)/6-i)/o,((a+c)/2-r)/s,((l+u)/2-i)/o),!0))}toSVGPath(){if(this.isEmpty())return"";let e=this.#i,t=this.#t;if(isNaN(this.#s[6])&&!this.isEmpty())return this.#m();let r=[];r.push(`M${e[4]} ${e[5]}`);for(let i=6;i<e.length;i+=6)isNaN(e[i])?r.push(`L${e[i+4]} ${e[i+5]}`):r.push(`C${e[i]} ${e[i+1]} ${e[i+2]} ${e[i+3]} ${e[i+4]} ${e[i+5]}`);this.#w(r);for(let i=t.length-6;i>=6;i-=6)isNaN(t[i])?r.push(`L${t[i+4]} ${t[i+5]}`):r.push(`C${t[i]} ${t[i+1]} ${t[i+2]} ${t[i+3]} ${t[i+4]} ${t[i+5]}`);return this.#y(r),r.join(" ")}#m(){let[e,t,r,i]=this.#e,[s,o,a,l]=this.#v();return`M${(this.#s[2]-e)/r} ${(this.#s[3]-t)/i} L${(this.#s[4]-e)/r} ${(this.#s[5]-t)/i} L${s} ${o} L${a} ${l} L${(this.#s[16]-e)/r} ${(this.#s[17]-t)/i} L${(this.#s[14]-e)/r} ${(this.#s[15]-t)/i} Z`}#y(e){let t=this.#t;e.push(`L${t[4]} ${t[5]} Z`)}#w(e){let[t,r,i,s]=this.#e,o=this.#s.subarray(4,6),a=this.#s.subarray(16,18),[l,c,u,d]=this.#v();e.push(`L${(o[0]-t)/i} ${(o[1]-r)/s} L${l} ${c} L${u} ${d} L${(a[0]-t)/i} ${(a[1]-r)/s}`)}newFreeDrawOutline(e,t,r,i,s,o){return new Ju(e,t,r,i,s,o)}getOutlines(){let e=this.#i,t=this.#t,r=this.#s,[i,s,o,a]=this.#e,l=new Float64Array((this.#h?.length??0)+2);for(let d=0,h=l.length-2;d<h;d+=2)l[d]=(this.#h[d]-i)/o,l[d+1]=(this.#h[d+1]-s)/a;if(l[l.length-2]=(this.#l-i)/o,l[l.length-1]=(this.#c-s)/a,isNaN(r[6])&&!this.isEmpty())return this.#_(l);let c=new Float64Array(this.#i.length+24+this.#t.length),u=e.length;for(let d=0;d<u;d+=2){if(isNaN(e[d])){c[d]=c[d+1]=NaN;continue}c[d]=e[d],c[d+1]=e[d+1]}u=this.#C(c,u);for(let d=t.length-6;d>=6;d-=6)for(let h=0;h<6;h+=2){if(isNaN(t[d+h])){c[u]=c[u+1]=NaN,u+=2;continue}c[u]=t[d+h],c[u+1]=t[d+h+1],u+=2}return this.#E(c,u),this.newFreeDrawOutline(c,l,this.#e,this.#d,this.#n,this.#r)}#_(e){let t=this.#s,[r,i,s,o]=this.#e,[a,l,c,u]=this.#v(),d=new Float64Array(36);return d.set([NaN,NaN,NaN,NaN,(t[2]-r)/s,(t[3]-i)/o,NaN,NaN,NaN,NaN,(t[4]-r)/s,(t[5]-i)/o,NaN,NaN,NaN,NaN,a,l,NaN,NaN,NaN,NaN,c,u,NaN,NaN,NaN,NaN,(t[16]-r)/s,(t[17]-i)/o,NaN,NaN,NaN,NaN,(t[14]-r)/s,(t[15]-i)/o],0),this.newFreeDrawOutline(d,e,this.#e,this.#d,this.#n,this.#r)}#E(e,t){let r=this.#t;return e.set([NaN,NaN,NaN,NaN,r[4],r[5]],t),t+=6}#C(e,t){let r=this.#s.subarray(4,6),i=this.#s.subarray(16,18),[s,o,a,l]=this.#e,[c,u,d,h]=this.#v();return e.set([NaN,NaN,NaN,NaN,(r[0]-s)/a,(r[1]-o)/l,NaN,NaN,NaN,NaN,c,u,NaN,NaN,NaN,NaN,d,h,NaN,NaN,NaN,NaN,(i[0]-s)/a,(i[1]-o)/l],t),t+=24}},Ju=class extends Qu{#e;#t=null;#n;#r;#i;#s;#l;constructor(e,t,r,i,s,o){super(),this.#l=e,this.#i=t,this.#e=r,this.#s=i,this.#n=s,this.#r=o,this.#a(o);let{x:a,y:l,width:c,height:u}=this.#t;for(let d=0,h=e.length;d<h;d+=2)e[d]=(e[d]-a)/c,e[d+1]=(e[d+1]-l)/u;for(let d=0,h=t.length;d<h;d+=2)t[d]=(t[d]-a)/c,t[d+1]=(t[d+1]-l)/u}toSVGPath(){let e=[`M${this.#l[4]} ${this.#l[5]}`];for(let t=6,r=this.#l.length;t<r;t+=6){if(isNaN(this.#l[t])){e.push(`L${this.#l[t+4]} ${this.#l[t+5]}`);continue}e.push(`C${this.#l[t]} ${this.#l[t+1]} ${this.#l[t+2]} ${this.#l[t+3]} ${this.#l[t+4]} ${this.#l[t+5]}`)}return e.push("Z"),e.join(" ")}serialize([e,t,r,i],s){let o=r-e,a=i-t,l,c;switch(s){case 0:l=this.#c(this.#l,e,i,o,-a),c=this.#c(this.#i,e,i,o,-a);break;case 90:l=this.#u(this.#l,e,t,o,a),c=this.#u(this.#i,e,t,o,a);break;case 180:l=this.#c(this.#l,r,t,-o,a),c=this.#c(this.#i,r,t,-o,a);break;case 270:l=this.#u(this.#l,r,i,-o,-a),c=this.#u(this.#i,r,i,-o,-a);break}return{outline:Array.from(l),points:[Array.from(c)]}}#c(e,t,r,i,s){let o=new Float64Array(e.length);for(let a=0,l=e.length;a<l;a+=2)o[a]=t+e[a]*i,o[a+1]=r+e[a+1]*s;return o}#u(e,t,r,i,s){let o=new Float64Array(e.length);for(let a=0,l=e.length;a<l;a+=2)o[a]=t+e[a+1]*i,o[a+1]=r+e[a]*s;return o}#a(e){let t=this.#l,r=t[4],i=t[5],s=r,o=i,a=r,l=i,c=r,u=i,d=e?Math.max:Math.min;for(let v=6,m=t.length;v<m;v+=6){if(isNaN(t[v]))s=Math.min(s,t[v+4]),o=Math.min(o,t[v+5]),a=Math.max(a,t[v+4]),l=Math.max(l,t[v+5]),u<t[v+5]?(c=t[v+4],u=t[v+5]):u===t[v+5]&&(c=d(c,t[v+4]));else{let y=L.bezierBoundingBox(r,i,...t.slice(v,v+6));s=Math.min(s,y[0]),o=Math.min(o,y[1]),a=Math.max(a,y[2]),l=Math.max(l,y[3]),u<y[3]?(c=y[2],u=y[3]):u===y[3]&&(c=d(c,y[2]))}r=t[v+4],i=t[v+5]}let h=s-this.#n,f=o-this.#n,p=a-s+2*this.#n,g=l-o+2*this.#n;this.#t={x:h,y:f,width:p,height:g,lastPoint:[c,u]}}get box(){return this.#t}newOutliner(e,t,r,i,s,o=0){return new Zu(e,t,r,i,s,o)}getNewOutline(e,t){let{x:r,y:i,width:s,height:o}=this.#t,[a,l,c,u]=this.#e,d=s*c,h=o*u,f=r*c+a,p=i*u+l,g=this.newOutliner({x:this.#i[0]*d+f,y:this.#i[1]*h+p},this.#e,this.#s,e,this.#r,t??this.#n);for(let v=2;v<this.#i.length;v+=2)g.add({x:this.#i[v]*d+f,y:this.#i[v+1]*h+p});return g.getOutlines()}get mustRemoveSelfIntersections(){return!0}},ed=class{#e;#t=[];#n=[];constructor(e,t=0,r=0,i=!0){let s=1/0,o=-1/0,a=1/0,l=-1/0,u=10**-4;for(let{x:m,y,width:w,height:b}of e){let C=Math.floor((m-t)/u)*u,S=Math.ceil((m+w+t)/u)*u,T=Math.floor((y-t)/u)*u,M=Math.ceil((y+b+t)/u)*u,E=[C,T,M,!0],x=[S,T,M,!1];this.#t.push(E,x),s=Math.min(s,C),o=Math.max(o,S),a=Math.min(a,T),l=Math.max(l,M)}let d=o-s+2*r,h=l-a+2*r,f=s-r,p=a-r,g=this.#t.at(i?-1:-2),v=[g[0],g[2]];for(let m of this.#t){let[y,w,b]=m;m[0]=(y-f)/d,m[1]=(w-p)/h,m[2]=(b-p)/h}this.#e={x:f,y:p,width:d,height:h,lastPoint:v}}getOutlines(){this.#t.sort((t,r)=>t[0]-r[0]||t[1]-r[1]||t[2]-r[2]);let e=[];for(let t of this.#t)t[3]?(e.push(...this.#c(t)),this.#s(t)):(this.#l(t),e.push(...this.#c(t)));return this.#r(e)}#r(e){let t=[],r=new Set;for(let o of e){let[a,l,c]=o;t.push([a,l,o],[a,c,o])}t.sort((o,a)=>o[1]-a[1]||o[0]-a[0]);for(let o=0,a=t.length;o<a;o+=2){let l=t[o][2],c=t[o+1][2];l.push(c),c.push(l),r.add(l),r.add(c)}let i=[],s;for(;r.size>0;){let o=r.values().next().value,[a,l,c,u,d]=o;r.delete(o);let h=a,f=l;for(s=[a,c],i.push(s);;){let p;if(r.has(u))p=u;else if(r.has(d))p=d;else break;r.delete(p),[a,l,c,u,d]=p,h!==a&&(s.push(h,f,a,f===l?l:c),h=a),f=f===l?c:l}s.push(h,f)}return new Mv(i,this.#e)}#i(e){let t=this.#n,r=0,i=t.length-1;for(;r<=i;){let s=r+i>>1,o=t[s][0];if(o===e)return s;o<e?r=s+1:i=s-1}return i+1}#s([,e,t]){let r=this.#i(e);this.#n.splice(r,0,[e,t])}#l([,e,t]){let r=this.#i(e);for(let i=r;i<this.#n.length;i++){let[s,o]=this.#n[i];if(s!==e)break;if(s===e&&o===t){this.#n.splice(i,1);return}}for(let i=r-1;i>=0;i--){let[s,o]=this.#n[i];if(s!==e)break;if(s===e&&o===t){this.#n.splice(i,1);return}}}#c(e){let[t,r,i]=e,s=[[t,r,i]],o=this.#i(i);for(let a=0;a<o;a++){let[l,c]=this.#n[a];for(let u=0,d=s.length;u<d;u++){let[,h,f]=s[u];if(!(c<=h||f<=l)){if(h>=l){if(f>c)s[u][1]=c;else{if(d===1)return[];s.splice(u,1),u--,d--}continue}s[u][2]=l,f>c&&s.push([t,c,f])}}}return s}},Mv=class extends Qu{#e;#t;constructor(e,t){super(),this.#t=e,this.#e=t}toSVGPath(){let e=[];for(let t of this.#t){let[r,i]=t;e.push(`M${r} ${i}`);for(let s=2;s<t.length;s+=2){let o=t[s],a=t[s+1];o===r?(e.push(`V${a}`),i=a):a===i&&(e.push(`H${o}`),r=o)}e.push("Z")}return e.join(" ")}serialize([e,t,r,i],s){let o=[],a=r-e,l=i-t;for(let c of this.#t){let u=new Array(c.length);for(let d=0;d<c.length;d+=2)u[d]=e+c[d]*a,u[d+1]=i-c[d+1]*l;o.push(u)}return o}get box(){return this.#e}get classNamesForDrawing(){return["highlight"]}get classNamesForOutlining(){return["highlightOutline"]}},Ca=class extends Zu{newFreeDrawOutline(e,t,r,i,s,o){return new Rv(e,t,r,i,s,o)}get classNamesForDrawing(){return["highlight","free"]}},Rv=class extends Ju{get classNamesForDrawing(){return["highlight","free"]}get classNamesForOutlining(){return["highlightOutline","free"]}newOutliner(e,t,r,i,s,o=0){return new Ca(e,t,r,i,s,o)}},td=class n{#e=null;#t=null;#n;#r=null;#i=!1;#s=!1;#l=null;#c;#u=null;#a=null;#d;static#o=null;static get _keyboardManager(){return ue(this,"_keyboardManager",new Ai([[["Escape","mac+Escape"],n.prototype._hideDropdownFromKeyboard],[[" ","mac+ "],n.prototype._colorSelectFromKeyboard],[["ArrowDown","ArrowRight","mac+ArrowDown","mac+ArrowRight"],n.prototype._moveToNext],[["ArrowUp","ArrowLeft","mac+ArrowUp","mac+ArrowLeft"],n.prototype._moveToPrevious],[["Home","mac+Home"],n.prototype._moveToBeginning],[["End","mac+End"],n.prototype._moveToEnd]]))}constructor({editor:e=null,uiManager:t=null}){e?(this.#s=!1,this.#d=Y.HIGHLIGHT_COLOR,this.#l=e):(this.#s=!0,this.#d=Y.HIGHLIGHT_DEFAULT_COLOR),this.#a=e?._uiManager||t,this.#c=this.#a._eventBus,this.#n=e?.color||this.#a?.highlightColors.values().next().value||"#FFFF98",n.#o||=Object.freeze({blue:"pdfjs-editor-colorpicker-blue",green:"pdfjs-editor-colorpicker-green",pink:"pdfjs-editor-colorpicker-pink",red:"pdfjs-editor-colorpicker-red",yellow:"pdfjs-editor-colorpicker-yellow"})}renderButton(){let e=this.#e=document.createElement("button");e.className="colorPicker",e.tabIndex="0",e.setAttribute("data-l10n-id","pdfjs-editor-colorpicker-button"),e.setAttribute("aria-haspopup",!0);let t=this.#a._signal;e.addEventListener("click",this.#g.bind(this),{signal:t}),e.addEventListener("keydown",this.#f.bind(this),{signal:t});let r=this.#t=document.createElement("span");return r.className="swatch",r.setAttribute("aria-hidden",!0),r.style.backgroundColor=this.#n,e.append(r),e}renderMainDropdown(){let e=this.#r=this.#h();return e.setAttribute("aria-orientation","horizontal"),e.setAttribute("aria-labelledby","highlightColorPickerLabel"),e}#h(){let e=document.createElement("div"),t=this.#a._signal;e.addEventListener("contextmenu",en,{signal:t}),e.className="dropdown",e.role="listbox",e.setAttribute("aria-multiselectable",!1),e.setAttribute("aria-orientation","vertical"),e.setAttribute("data-l10n-id","pdfjs-editor-colorpicker-dropdown");for(let[r,i]of this.#a.highlightColors){let s=document.createElement("button");s.tabIndex="0",s.role="option",s.setAttribute("data-color",i),s.title=r,s.setAttribute("data-l10n-id",n.#o[r]);let o=document.createElement("span");s.append(o),o.className="swatch",o.style.backgroundColor=i,s.setAttribute("aria-selected",i===this.#n),s.addEventListener("click",this.#p.bind(this,i),{signal:t}),e.append(s)}return e.addEventListener("keydown",this.#f.bind(this),{signal:t}),e}#p(e,t){t.stopPropagation(),this.#c.dispatch("switchannotationeditorparams",{source:this,type:this.#d,value:e})}_colorSelectFromKeyboard(e){if(e.target===this.#e){this.#g(e);return}let t=e.target.getAttribute("data-color");t&&this.#p(t,e)}_moveToNext(e){if(!this.#m){this.#g(e);return}if(e.target===this.#e){this.#r.firstChild?.focus();return}e.target.nextSibling?.focus()}_moveToPrevious(e){if(e.target===this.#r?.firstChild||e.target===this.#e){this.#m&&this._hideDropdownFromKeyboard();return}this.#m||this.#g(e),e.target.previousSibling?.focus()}_moveToBeginning(e){if(!this.#m){this.#g(e);return}this.#r.firstChild?.focus()}_moveToEnd(e){if(!this.#m){this.#g(e);return}this.#r.lastChild?.focus()}#f(e){n._keyboardManager.exec(this,e)}#g(e){if(this.#m){this.hideDropdown();return}if(this.#i=e.detail===0,this.#u||(this.#u=new AbortController,window.addEventListener("pointerdown",this.#v.bind(this),{signal:this.#a.combinedSignal(this.#u)})),this.#r){this.#r.classList.remove("hidden");return}let t=this.#r=this.#h();this.#e.append(t)}#v(e){this.#r?.contains(e.target)||this.hideDropdown()}hideDropdown(){this.#r?.classList.add("hidden"),this.#u?.abort(),this.#u=null}get#m(){return this.#r&&!this.#r.classList.contains("hidden")}_hideDropdownFromKeyboard(){if(!this.#s){if(!this.#m){this.#l?.unselect();return}this.hideDropdown(),this.#e.focus({preventScroll:!0,focusVisible:this.#i})}}updateColor(e){if(this.#t&&(this.#t.style.backgroundColor=e),!this.#r)return;let t=this.#a.highlightColors.values();for(let r of this.#r.children)r.setAttribute("aria-selected",t.next().value===e)}destroy(){this.#e?.remove(),this.#e=null,this.#t=null,this.#r?.remove(),this.#r=null}},nd=class n extends be{#e=null;#t=0;#n;#r=null;#i=null;#s=null;#l=null;#c=0;#u=null;#a=null;#d=null;#o=!1;#h=null;#p;#f=null;#g="";#v;#m="";static _defaultColor=null;static _defaultOpacity=1;static _defaultThickness=12;static _type="highlight";static _editorType=ee.HIGHLIGHT;static _freeHighlightId=-1;static _freeHighlight=null;static _freeHighlightClipId="";static get _keyboardManager(){let e=n.prototype;return ue(this,"_keyboardManager",new Ai([[["ArrowLeft","mac+ArrowLeft"],e._moveCaret,{args:[0]}],[["ArrowRight","mac+ArrowRight"],e._moveCaret,{args:[1]}],[["ArrowUp","mac+ArrowUp"],e._moveCaret,{args:[2]}],[["ArrowDown","mac+ArrowDown"],e._moveCaret,{args:[3]}]]))}constructor(e){super(W(_({},e),{name:"highlightEditor"})),this.color=e.color||n._defaultColor,this.#v=e.thickness||n._defaultThickness,this.#p=e.opacity||n._defaultOpacity,this.#n=e.boxes||null,this.#m=e.methodOfCreation||"",this.#g=e.text||"",this._isDraggable=!1,e.highlightId>-1?(this.#o=!0,this.#w(e),this.#I()):this.#n&&(this.#e=e.anchorNode,this.#t=e.anchorOffset,this.#l=e.focusNode,this.#c=e.focusOffset,this.#y(),this.#I(),this.rotate(this.rotation))}get telemetryInitialData(){return{action:"added",type:this.#o?"free_highlight":"highlight",color:this._uiManager.highlightColorNames.get(this.color),thickness:this.#v,methodOfCreation:this.#m}}get telemetryFinalData(){return{type:"highlight",color:this._uiManager.highlightColorNames.get(this.color)}}static computeTelemetryFinalData(e){return{numberOfColors:e.get("color").size}}#y(){let e=new ed(this.#n,.001);this.#a=e.getOutlines(),{x:this.x,y:this.y,width:this.width,height:this.height}=this.#a.box;let t=new ed(this.#n,.0025,.001,this._uiManager.direction==="ltr");this.#s=t.getOutlines();let{lastPoint:r}=this.#s.box;this.#h=[(r[0]-this.x)/this.width,(r[1]-this.y)/this.height]}#w({highlightOutlines:e,highlightId:t,clipPathId:r}){this.#a=e;let i=1.5;if(this.#s=e.getNewOutline(this.#v/2+i,.0025),t>=0)this.#d=t,this.#r=r,this.parent.drawLayer.finalizeLine(t,e),this.#f=this.parent.drawLayer.drawOutline(this.#s);else if(this.parent){let u=this.parent.viewport.rotation;this.parent.drawLayer.updateLine(this.#d,e),this.parent.drawLayer.updateBox(this.#d,n.#A(this.#a.box,(u-this.rotation+360)%360)),this.parent.drawLayer.updateLine(this.#f,this.#s),this.parent.drawLayer.updateBox(this.#f,n.#A(this.#s.box,u))}let{x:s,y:o,width:a,height:l}=e.box;switch(this.rotation){case 0:this.x=s,this.y=o,this.width=a,this.height=l;break;case 90:{let[u,d]=this.parentDimensions;this.x=o,this.y=1-s,this.width=a*d/u,this.height=l*u/d;break}case 180:this.x=1-s,this.y=1-o,this.width=a,this.height=l;break;case 270:{let[u,d]=this.parentDimensions;this.x=1-o,this.y=s,this.width=a*d/u,this.height=l*u/d;break}}let{lastPoint:c}=this.#s.box;this.#h=[(c[0]-s)/a,(c[1]-o)/l]}static initialize(e,t){be.initialize(e,t),n._defaultColor||=t.highlightColors?.values().next().value||"#fff066"}static updateDefaultParams(e,t){switch(e){case Y.HIGHLIGHT_DEFAULT_COLOR:n._defaultColor=t;break;case Y.HIGHLIGHT_THICKNESS:n._defaultThickness=t;break}}translateInPage(e,t){}get toolbarPosition(){return this.#h}updateParams(e,t){switch(e){case Y.HIGHLIGHT_COLOR:this.#_(t);break;case Y.HIGHLIGHT_THICKNESS:this.#E(t);break}}static get defaultPropertiesToUpdate(){return[[Y.HIGHLIGHT_DEFAULT_COLOR,n._defaultColor],[Y.HIGHLIGHT_THICKNESS,n._defaultThickness]]}get propertiesToUpdate(){return[[Y.HIGHLIGHT_COLOR,this.color||n._defaultColor],[Y.HIGHLIGHT_THICKNESS,this.#v||n._defaultThickness],[Y.HIGHLIGHT_FREE,this.#o]]}#_(e){let t=(s,o)=>{this.color=s,this.parent?.drawLayer.changeColor(this.#d,s),this.#i?.updateColor(s),this.#p=o,this.parent?.drawLayer.changeOpacity(this.#d,o)},r=this.color,i=this.#p;this.addCommands({cmd:t.bind(this,e,n._defaultOpacity),undo:t.bind(this,r,i),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:Y.HIGHLIGHT_COLOR,overwriteIfSameType:!0,keepUndo:!0}),this._reportTelemetry({action:"color_changed",color:this._uiManager.highlightColorNames.get(e)},!0)}#E(e){let t=this.#v,r=i=>{this.#v=i,this.#C(i)};this.addCommands({cmd:r.bind(this,e),undo:r.bind(this,t),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:Y.INK_THICKNESS,overwriteIfSameType:!0,keepUndo:!0}),this._reportTelemetry({action:"thickness_changed",thickness:e},!0)}addEditToolbar(){return I(this,null,function*(){let e=yield Li(n.prototype,this,"addEditToolbar").call(this);return e?(this._uiManager.highlightColors&&(this.#i=new td({editor:this}),e.addColorPicker(this.#i)),e):null})}disableEditing(){super.disableEditing(),this.div.classList.toggle("disabled",!0)}enableEditing(){super.enableEditing(),this.div.classList.toggle("disabled",!1)}fixAndSetPosition(){return super.fixAndSetPosition(this.#R())}getBaseTranslation(){return[0,0]}getRect(e,t){return super.getRect(e,t,this.#R())}onceAdded(){this.annotationElementId||this.parent.addUndoableEditor(this),this.div.focus()}remove(){this.#M(),this._reportTelemetry({action:"deleted"}),super.remove()}rebuild(){this.parent&&(super.rebuild(),this.div!==null&&(this.#I(),this.isAttachedToDOM||this.parent.add(this)))}setParent(e){let t=!1;this.parent&&!e?this.#M():e&&(this.#I(e),t=!this.parent&&this.div?.classList.contains("selectedEditor")),super.setParent(e),this.show(this._isVisible),t&&this.select()}#C(e){if(!this.#o)return;this.#w({highlightOutlines:this.#a.getNewOutline(e/2)}),this.fixAndSetPosition();let[t,r]=this.parentDimensions;this.setDims(this.width*t,this.height*r)}#M(){this.#d===null||!this.parent||(this.parent.drawLayer.remove(this.#d),this.#d=null,this.parent.drawLayer.remove(this.#f),this.#f=null)}#I(e=this.parent){this.#d===null&&({id:this.#d,clipPathId:this.#r}=e.drawLayer.draw(this.#a,this.color,this.#p),this.#f=e.drawLayer.drawOutline(this.#s),this.#u&&(this.#u.style.clipPath=this.#r))}static#A({x:e,y:t,width:r,height:i},s){switch(s){case 90:return{x:1-t-i,y:e,width:i,height:r};case 180:return{x:1-e-r,y:1-t-i,width:r,height:i};case 270:return{x:t,y:1-e-r,width:i,height:r}}return{x:e,y:t,width:r,height:i}}rotate(e){let{drawLayer:t}=this.parent,r;this.#o?(e=(e-this.rotation+360)%360,r=n.#A(this.#a.box,e)):r=n.#A(this,e),t.rotate(this.#d,e),t.rotate(this.#f,e),t.updateBox(this.#d,r),t.updateBox(this.#f,n.#A(this.#s.box,e))}render(){if(this.div)return this.div;let e=super.render();this.#g&&(e.setAttribute("aria-label",this.#g),e.setAttribute("role","mark")),this.#o?e.classList.add("free"):this.div.addEventListener("keydown",this.#D.bind(this),{signal:this._uiManager._signal});let t=this.#u=document.createElement("div");e.append(t),t.setAttribute("aria-hidden","true"),t.className="internal",t.style.clipPath=this.#r;let[r,i]=this.parentDimensions;return this.setDims(this.width*r,this.height*i),Du(this,this.#u,["pointerover","pointerleave"]),this.enableEditing(),e}pointerover(){this.isSelected||this.parent.drawLayer.addClass(this.#f,"hovered")}pointerleave(){this.isSelected||this.parent.drawLayer.removeClass(this.#f,"hovered")}#D(e){n._keyboardManager.exec(this,e)}_moveCaret(e){switch(this.parent.unselect(this),e){case 0:case 2:this.#x(!0);break;case 1:case 3:this.#x(!1);break}}#x(e){if(!this.#e)return;let t=window.getSelection();e?t.setPosition(this.#e,this.#t):t.setPosition(this.#l,this.#c)}select(){super.select(),this.#f&&(this.parent?.drawLayer.removeClass(this.#f,"hovered"),this.parent?.drawLayer.addClass(this.#f,"selected"))}unselect(){super.unselect(),this.#f&&(this.parent?.drawLayer.removeClass(this.#f,"selected"),this.#o||this.#x(!1))}get _mustFixPosition(){return!this.#o}show(e=this._isVisible){super.show(e),this.parent&&(this.parent.drawLayer.show(this.#d,e),this.parent.drawLayer.show(this.#f,e))}#R(){return this.#o?this.rotation:0}#P(){if(this.#o)return null;let[e,t]=this.pageDimensions,[r,i]=this.pageTranslation,s=this.#n,o=new Float32Array(s.length*8),a=0;for(let{x:l,y:c,width:u,height:d}of s){let h=l*e+r,f=(1-c-d)*t+i;o[a]=o[a+4]=h,o[a+1]=o[a+3]=f,o[a+2]=o[a+6]=h+u*e,o[a+5]=o[a+7]=f+d*t,a+=8}return o}#S(e){return this.#a.serialize(e,this.#R())}static startHighlighting(e,t,{target:r,x:i,y:s}){let{x:o,y:a,width:l,height:c}=r.getBoundingClientRect(),u=new AbortController,d=e.combinedSignal(u),h=p=>{p.preventDefault(),p.stopPropagation()},f=p=>{u.abort(),this.#T(e,p)};window.addEventListener("blur",f,{signal:d}),window.addEventListener("pointerup",f,{signal:d}),window.addEventListener("pointerdown",h,{capture:!0,passive:!1,signal:d}),window.addEventListener("contextmenu",en,{signal:d}),r.addEventListener("pointermove",this.#b.bind(this,e),{signal:d}),this._freeHighlight=new Ca({x:i,y:s},[o,a,l,c],e.scale,this._defaultThickness/2,t,.001),{id:this._freeHighlightId,clipPathId:this._freeHighlightClipId}=e.drawLayer.draw(this._freeHighlight,this._defaultColor,this._defaultOpacity,!0)}static#b(e,t){this._freeHighlight.add(t)&&e.drawLayer.updatePath(this._freeHighlightId,this._freeHighlight)}static#T(e,t){this._freeHighlight.isEmpty()?e.drawLayer.remove(this._freeHighlightId):e.createAndAddNewEditor(t,!1,{highlightId:this._freeHighlightId,highlightOutlines:this._freeHighlight.getOutlines(),clipPathId:this._freeHighlightClipId,methodOfCreation:"main_toolbar"}),this._freeHighlightId=-1,this._freeHighlight=null,this._freeHighlightClipId=""}static deserialize(e,t,r){return I(this,null,function*(){let i=null;if(e instanceof Ku){let{data:{quadPoints:p,rect:g,rotation:v,id:m,color:y,opacity:w,popupRef:b},parent:{page:{pageNumber:C}}}=e;i=e={annotationType:ee.HIGHLIGHT,color:Array.from(y),opacity:w,quadPoints:p,boxes:null,pageIndex:C-1,rect:g.slice(0),rotation:v,id:m,deleted:!1,popupRef:b}}else if(e instanceof Ea){let{data:{inkLists:p,rect:g,rotation:v,id:m,color:y,borderStyle:{rawWidth:w},popupRef:b},parent:{page:{pageNumber:C}}}=e;i=e={annotationType:ee.HIGHLIGHT,color:Array.from(y),thickness:w,inkLists:p,boxes:null,pageIndex:C-1,rect:g.slice(0),rotation:v,id:m,deleted:!1,popupRef:b}}let{color:s,quadPoints:o,inkLists:a,opacity:l}=e,c=yield Li(n,this,"deserialize").call(this,e,t,r);c.color=L.makeHexColor(...s),c.#p=l||1,a&&(c.#v=e.thickness),c.annotationElementId=e.id||null,c._initialData=i;let[u,d]=c.pageDimensions,[h,f]=c.pageTranslation;if(o){let p=c.#n=[];for(let g=0;g<o.length;g+=8)p.push({x:(o[g]-h)/u,y:1-(o[g+1]-f)/d,width:(o[g+2]-o[g])/u,height:(o[g+1]-o[g+5])/d});c.#y(),c.#I(),c.rotate(c.rotation)}else if(a){c.#o=!0;let p=a[0],g={x:p[0]-h,y:d-(p[1]-f)},v=new Ca(g,[0,0,u,d],1,c.#v/2,!0,.001);for(let w=0,b=p.length;w<b;w+=2)g.x=p[w]-h,g.y=d-(p[w+1]-f),v.add(g);let{id:m,clipPathId:y}=t.drawLayer.draw(v,c.color,c._defaultOpacity,!0);c.#w({highlightOutlines:v.getOutlines(),highlightId:m,clipPathId:y}),c.#I()}return c})}serialize(e=!1){if(this.isEmpty()||e)return null;if(this.deleted)return this.serializeDeleted();let t=this.getRect(0,0),r=be._colorManager.convert(this.color),i={annotationType:ee.HIGHLIGHT,color:r,opacity:this.#p,thickness:this.#v,quadPoints:this.#P(),outlines:this.#S(t),pageIndex:this.pageIndex,rect:t,rotation:this.#R(),structTreeParentId:this._structTreeParentId};return this.annotationElementId&&!this.#O(i)?null:(i.id=this.annotationElementId,i)}#O(e){let{color:t}=this._initialData;return e.color.some((r,i)=>r!==t[i])}renderAnnotationElement(e){return e.updateEdited({rect:this.getRect(0,0)}),null}static canCreateNewEmptyEditor(){return!1}},Ov=class n extends be{#e=0;#t=0;#n=null;#r=new Path2D;#i=!1;#s=null;#l=!1;#c=!1;#u=null;#a=null;#d=0;#o=0;#h=null;static _defaultColor=null;static _defaultOpacity=1;static _defaultThickness=1;static _type="ink";static _editorType=ee.INK;constructor(e){super(W(_({},e),{name:"inkEditor"})),this.color=e.color||null,this.thickness=e.thickness||null,this.opacity=e.opacity||null,this.paths=[],this.bezierPath2D=[],this.allRawPaths=[],this.currentPath=[],this.scaleFactor=1,this.translationX=this.translationY=0,this.x=0,this.y=0,this._willKeepAspectRatio=!0}static initialize(e,t){be.initialize(e,t)}static updateDefaultParams(e,t){switch(e){case Y.INK_THICKNESS:n._defaultThickness=t;break;case Y.INK_COLOR:n._defaultColor=t;break;case Y.INK_OPACITY:n._defaultOpacity=t/100;break}}updateParams(e,t){switch(e){case Y.INK_THICKNESS:this.#p(t);break;case Y.INK_COLOR:this.#f(t);break;case Y.INK_OPACITY:this.#g(t);break}}static get defaultPropertiesToUpdate(){return[[Y.INK_THICKNESS,n._defaultThickness],[Y.INK_COLOR,n._defaultColor||be._defaultLineColor],[Y.INK_OPACITY,Math.round(n._defaultOpacity*100)]]}get propertiesToUpdate(){return[[Y.INK_THICKNESS,this.thickness||n._defaultThickness],[Y.INK_COLOR,this.color||n._defaultColor||be._defaultLineColor],[Y.INK_OPACITY,Math.round(100*(this.opacity??n._defaultOpacity))]]}#p(e){let t=i=>{this.thickness=i,this.#N()},r=this.thickness;this.addCommands({cmd:t.bind(this,e),undo:t.bind(this,r),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:Y.INK_THICKNESS,overwriteIfSameType:!0,keepUndo:!0})}#f(e){let t=i=>{this.color=i,this.#A()},r=this.color;this.addCommands({cmd:t.bind(this,e),undo:t.bind(this,r),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:Y.INK_COLOR,overwriteIfSameType:!0,keepUndo:!0})}#g(e){let t=i=>{this.opacity=i,this.#A()};e/=100;let r=this.opacity;this.addCommands({cmd:t.bind(this,e),undo:t.bind(this,r),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:Y.INK_OPACITY,overwriteIfSameType:!0,keepUndo:!0})}rebuild(){this.parent&&(super.rebuild(),this.div!==null&&(this.canvas||(this.#P(),this.#S()),this.isAttachedToDOM||(this.parent.add(this),this.#b()),this.#N()))}remove(){this.canvas!==null&&(this.isEmpty()||this.commit(),this.canvas.width=this.canvas.height=0,this.canvas.remove(),this.canvas=null,this.#n&&(clearTimeout(this.#n),this.#n=null),this.#u?.disconnect(),this.#u=null,super.remove())}setParent(e){!this.parent&&e?this._uiManager.removeShouldRescale(this):this.parent&&e===null&&this._uiManager.addShouldRescale(this),super.setParent(e)}onScaleChanging(){let[e,t]=this.parentDimensions,r=this.width*e,i=this.height*t;this.setDimensions(r,i)}enableEditMode(){this.#i||this.canvas===null||(super.enableEditMode(),this._isDraggable=!1,this.#D())}disableEditMode(){!this.isInEditMode()||this.canvas===null||(super.disableEditMode(),this._isDraggable=!this.isEmpty(),this.div.classList.remove("editing"),this.#x())}onceAdded(){this._isDraggable=!this.isEmpty()}isEmpty(){return this.paths.length===0||this.paths.length===1&&this.paths[0].length===0}#v(){let{parentRotation:e,parentDimensions:[t,r]}=this;switch(e){case 90:return[0,r,r,t];case 180:return[t,r,t,r];case 270:return[t,0,r,t];default:return[0,0,t,r]}}#m(){let{ctx:e,color:t,opacity:r,thickness:i,parentScale:s,scaleFactor:o}=this;e.lineWidth=i*s/o,e.lineCap="round",e.lineJoin="round",e.miterLimit=10,e.strokeStyle=`${t}${ok(r)}`}#y(e,t){this.canvas.addEventListener("contextmenu",en,{signal:this._uiManager._signal}),this.#x(),this.#s=new AbortController;let r=this._uiManager.combinedSignal(this.#s);this.canvas.addEventListener("pointerleave",this.canvasPointerleave.bind(this),{signal:r}),this.canvas.addEventListener("pointermove",this.canvasPointermove.bind(this),{signal:r}),this.canvas.addEventListener("pointerup",this.canvasPointerup.bind(this),{signal:r}),this.isEditing=!0,this.#c||(this.#c=!0,this.#b(),this.thickness||=n._defaultThickness,this.color||=n._defaultColor||be._defaultLineColor,this.opacity??=n._defaultOpacity),this.currentPath.push([e,t]),this.#l=!1,this.#m(),this.#h=()=>{this.#C(),this.#h&&window.requestAnimationFrame(this.#h)},window.requestAnimationFrame(this.#h)}#w(e,t){let[r,i]=this.currentPath.at(-1);if(this.currentPath.length>1&&e===r&&t===i)return;let s=this.currentPath,o=this.#r;if(s.push([e,t]),this.#l=!0,s.length<=2){o.moveTo(...s[0]),o.lineTo(e,t);return}s.length===3&&(this.#r=o=new Path2D,o.moveTo(...s[0])),this.#M(o,...s.at(-3),...s.at(-2),e,t)}#_(){if(this.currentPath.length===0)return;let e=this.currentPath.at(-1);this.#r.lineTo(...e)}#E(e,t){this.#h=null,e=Math.min(Math.max(e,0),this.canvas.width),t=Math.min(Math.max(t,0),this.canvas.height),this.#w(e,t),this.#_();let r;if(this.currentPath.length!==1)r=this.#I();else{let l=[e,t];r=[[l,l.slice(),l.slice(),l]]}let i=this.#r,s=this.currentPath;this.currentPath=[],this.#r=new Path2D;let o=()=>{this.allRawPaths.push(s),this.paths.push(r),this.bezierPath2D.push(i),this._uiManager.rebuild(this)},a=()=>{this.allRawPaths.pop(),this.paths.pop(),this.bezierPath2D.pop(),this.paths.length===0?this.remove():(this.canvas||(this.#P(),this.#S()),this.#N())};this.addCommands({cmd:o,undo:a,mustExec:!0})}#C(){if(!this.#l)return;this.#l=!1;let e=Math.ceil(this.thickness*this.parentScale),t=this.currentPath.slice(-3),r=t.map(u=>u[0]),i=t.map(u=>u[1]),s=Math.min(...r)-e,o=Math.max(...r)+e,a=Math.min(...i)-e,l=Math.max(...i)+e,{ctx:c}=this;c.save(),c.clearRect(0,0,this.canvas.width,this.canvas.height);for(let u of this.bezierPath2D)c.stroke(u);c.stroke(this.#r),c.restore()}#M(e,t,r,i,s,o,a){let l=(t+i)/2,c=(r+s)/2,u=(i+o)/2,d=(s+a)/2;e.bezierCurveTo(l+2*(i-l)/3,c+2*(s-c)/3,u+2*(i-u)/3,d+2*(s-d)/3,u,d)}#I(){let e=this.currentPath;if(e.length<=2)return[[e[0],e[0],e.at(-1),e.at(-1)]];let t=[],r,[i,s]=e[0];for(r=1;r<e.length-2;r++){let[h,f]=e[r],[p,g]=e[r+1],v=(h+p)/2,m=(f+g)/2,y=[i+2*(h-i)/3,s+2*(f-s)/3],w=[v+2*(h-v)/3,m+2*(f-m)/3];t.push([[i,s],y,w,[v,m]]),[i,s]=[v,m]}let[o,a]=e[r],[l,c]=e[r+1],u=[i+2*(o-i)/3,s+2*(a-s)/3],d=[l+2*(o-l)/3,c+2*(a-c)/3];return t.push([[i,s],u,d,[l,c]]),t}#A(){if(this.isEmpty()){this.#O();return}this.#m();let{canvas:e,ctx:t}=this;t.setTransform(1,0,0,1,0,0),t.clearRect(0,0,e.width,e.height),this.#O();for(let r of this.bezierPath2D)t.stroke(r)}commit(){this.#i||(super.commit(),this.isEditing=!1,this.disableEditMode(),this.setInForeground(),this.#i=!0,this.div.classList.add("disabled"),this.#N(!0),this.select(),this.parent.addInkEditorIfNeeded(!0),this.moveInDOM(),this.div.focus({preventScroll:!0}))}focusin(e){this._focusEventsAllowed&&(super.focusin(e),this.enableEditMode())}#D(){if(this.#a)return;this.#a=new AbortController;let e=this._uiManager.combinedSignal(this.#a);this.canvas.addEventListener("pointerdown",this.canvasPointerdown.bind(this),{signal:e})}#x(){this.pointerdownAC?.abort(),this.pointerdownAC=null}canvasPointerdown(e){e.button!==0||!this.isInEditMode()||this.#i||(this.setInForeground(),e.preventDefault(),this.div.contains(document.activeElement)||this.div.focus({preventScroll:!0}),this.#y(e.offsetX,e.offsetY))}canvasPointermove(e){e.preventDefault(),this.#w(e.offsetX,e.offsetY)}canvasPointerup(e){e.preventDefault(),this.#R(e)}canvasPointerleave(e){this.#R(e)}#R(e){this.#s?.abort(),this.#s=null,this.#D(),this.#n&&clearTimeout(this.#n),this.#n=setTimeout(()=>{this.#n=null,this.canvas.removeEventListener("contextmenu",en)},10),this.#E(e.offsetX,e.offsetY),this.addToAnnotationStorage(),this.setInBackground()}#P(){this.canvas=document.createElement("canvas"),this.canvas.width=this.canvas.height=0,this.canvas.className="inkEditorCanvas",this.canvas.setAttribute("data-l10n-id","pdfjs-ink-canvas"),this.div.append(this.canvas),this.ctx=this.canvas.getContext("2d")}#S(){this.#u=new ResizeObserver(e=>{let t=e[0].contentRect;t.width&&t.height&&this.setDimensions(t.width,t.height)}),this.#u.observe(this.div),this._uiManager._signal.addEventListener("abort",()=>{this.#u?.disconnect(),this.#u=null},{once:!0})}get isResizable(){return!this.isEmpty()&&this.#i}render(){if(this.div)return this.div;let e,t;this.width&&(e=this.x,t=this.y),super.render(),this.div.setAttribute("data-l10n-id","pdfjs-ink");let[r,i,s,o]=this.#v();if(this.setAt(r,i,0,0),this.setDims(s,o),this.#P(),this.width){let[a,l]=this.parentDimensions;this.setAspectRatio(this.width*a,this.height*l),this.setAt(e*a,t*l,this.width*a,this.height*l),this.#c=!0,this.#b(),this.setDims(this.width*a,this.height*l),this.#A(),this.div.classList.add("disabled")}else this.div.classList.add("editing"),this.enableEditMode();return this.#S(),this.div}#b(){if(!this.#c)return;let[e,t]=this.parentDimensions;this.canvas.width=Math.ceil(this.width*e),this.canvas.height=Math.ceil(this.height*t),this.#O()}setDimensions(e,t){let r=Math.round(e),i=Math.round(t);if(this.#d===r&&this.#o===i)return;this.#d=r,this.#o=i,this.canvas.style.visibility="hidden";let[s,o]=this.parentDimensions;this.width=e/s,this.height=t/o,this.fixAndSetPosition(),this.#i&&this.#T(e,t),this.#b(),this.#A(),this.canvas.style.visibility="visible",this.fixDims()}#T(e,t){let r=this.#B(),i=(e-r)/this.#t,s=(t-r)/this.#e;this.scaleFactor=Math.min(i,s)}#O(){let e=this.#B()/2;this.ctx.setTransform(this.scaleFactor,0,0,this.scaleFactor,this.translationX*this.scaleFactor+e,this.translationY*this.scaleFactor+e)}static#F(e){let t=new Path2D;for(let r=0,i=e.length;r<i;r++){let[s,o,a,l]=e[r];r===0&&t.moveTo(...s),t.bezierCurveTo(o[0],o[1],a[0],a[1],l[0],l[1])}return t}static#H(e,t,r){let[i,s,o,a]=t;switch(r){case 0:for(let l=0,c=e.length;l<c;l+=2)e[l]+=i,e[l+1]=a-e[l+1];break;case 90:for(let l=0,c=e.length;l<c;l+=2){let u=e[l];e[l]=e[l+1]+i,e[l+1]=u+s}break;case 180:for(let l=0,c=e.length;l<c;l+=2)e[l]=o-e[l],e[l+1]+=s;break;case 270:for(let l=0,c=e.length;l<c;l+=2){let u=e[l];e[l]=o-e[l+1],e[l+1]=a-u}break;default:throw new Error("Invalid rotation")}return e}static#V(e,t,r){let[i,s,o,a]=t;switch(r){case 0:for(let l=0,c=e.length;l<c;l+=2)e[l]-=i,e[l+1]=a-e[l+1];break;case 90:for(let l=0,c=e.length;l<c;l+=2){let u=e[l];e[l]=e[l+1]-s,e[l+1]=u-i}break;case 180:for(let l=0,c=e.length;l<c;l+=2)e[l]=o-e[l],e[l+1]-=s;break;case 270:for(let l=0,c=e.length;l<c;l+=2){let u=e[l];e[l]=a-e[l+1],e[l+1]=o-u}break;default:throw new Error("Invalid rotation")}return e}#L(e,t,r,i){let s=[],o=this.thickness/2,a=e*t+o,l=e*r+o;for(let c of this.paths){let u=[],d=[];for(let h=0,f=c.length;h<f;h++){let[p,g,v,m]=c[h];if(p[0]===m[0]&&p[1]===m[1]&&f===1){let x=e*p[0]+a,N=e*p[1]+l;u.push(x,N),d.push(x,N);break}let y=e*p[0]+a,w=e*p[1]+l,b=e*g[0]+a,C=e*g[1]+l,S=e*v[0]+a,T=e*v[1]+l,M=e*m[0]+a,E=e*m[1]+l;h===0&&(u.push(y,w),d.push(y,w)),u.push(b,C,S,T,M,E),d.push(b,C),h===f-1&&d.push(M,E)}s.push({bezier:n.#H(u,i,this.rotation),points:n.#H(d,i,this.rotation)})}return s}#j(){let e=1/0,t=-1/0,r=1/0,i=-1/0;for(let s of this.paths)for(let[o,a,l,c]of s){let u=L.bezierBoundingBox(...o,...a,...l,...c);e=Math.min(e,u[0]),r=Math.min(r,u[1]),t=Math.max(t,u[2]),i=Math.max(i,u[3])}return[e,r,t,i]}#B(){return this.#i?Math.ceil(this.thickness*this.parentScale):0}#N(e=!1){if(this.isEmpty())return;if(!this.#i){this.#A();return}let t=this.#j(),r=this.#B();this.#t=Math.max(be.MIN_SIZE,t[2]-t[0]),this.#e=Math.max(be.MIN_SIZE,t[3]-t[1]);let i=Math.ceil(r+this.#t*this.scaleFactor),s=Math.ceil(r+this.#e*this.scaleFactor),[o,a]=this.parentDimensions;this.width=i/o,this.height=s/a,this.setAspectRatio(i,s);let l=this.translationX,c=this.translationY;this.translationX=-t[0],this.translationY=-t[1],this.#b(),this.#A(),this.#d=i,this.#o=s,this.setDims(i,s);let u=e?r/this.scaleFactor/2:0;this.translate(l-this.translationX-u,c-this.translationY-u)}static deserialize(e,t,r){return I(this,null,function*(){if(e instanceof Ea)return null;let i=yield Li(n,this,"deserialize").call(this,e,t,r);i.thickness=e.thickness,i.color=L.makeHexColor(...e.color),i.opacity=e.opacity;let[s,o]=i.pageDimensions,a=i.width*s,l=i.height*o,c=i.parentScale,u=e.thickness/2;i.#i=!0,i.#d=Math.round(a),i.#o=Math.round(l);let{paths:d,rect:h,rotation:f}=e;for(let{bezier:g}of d){g=n.#V(g,h,f);let v=[];i.paths.push(v);let m=c*(g[0]-u),y=c*(g[1]-u);for(let b=2,C=g.length;b<C;b+=6){let S=c*(g[b]-u),T=c*(g[b+1]-u),M=c*(g[b+2]-u),E=c*(g[b+3]-u),x=c*(g[b+4]-u),N=c*(g[b+5]-u);v.push([[m,y],[S,T],[M,E],[x,N]]),m=x,y=N}let w=this.#F(v);i.bezierPath2D.push(w)}let p=i.#j();return i.#t=Math.max(be.MIN_SIZE,p[2]-p[0]),i.#e=Math.max(be.MIN_SIZE,p[3]-p[1]),i.#T(a,l),i})}serialize(){if(this.isEmpty())return null;let e=this.getRect(0,0),t=be._colorManager.convert(this.ctx.strokeStyle);return{annotationType:ee.INK,color:t,thickness:this.thickness,opacity:this.opacity,paths:this.#L(this.scaleFactor/this.parentScale,this.translationX,this.translationY,e),pageIndex:this.pageIndex,rect:e,rotation:this.rotation,structTreeParentId:this._structTreeParentId}}},Pv=class n extends be{#e=null;#t=null;#n=null;#r=null;#i=null;#s="";#l=null;#c=null;#u=null;#a=!1;#d=!1;static _type="stamp";static _editorType=ee.STAMP;constructor(e){super(W(_({},e),{name:"stampEditor"})),this.#r=e.bitmapUrl,this.#i=e.bitmapFile}static initialize(e,t){be.initialize(e,t)}static get supportedTypes(){return ue(this,"supportedTypes",["apng","avif","bmp","gif","jpeg","png","svg+xml","webp","x-icon"].map(t=>`image/${t}`))}static get supportedTypesStr(){return ue(this,"supportedTypesStr",this.supportedTypes.join(","))}static isHandlingMimeForPasting(e){return this.supportedTypes.includes(e)}static paste(e,t){t.pasteEditor(ee.STAMP,{bitmapFile:e.getAsFile()})}altTextFinish(){this._uiManager.useNewAltTextFlow&&(this.div.hidden=!1),super.altTextFinish()}get telemetryFinalData(){return{type:"stamp",hasAltText:!!this.altTextData?.altText}}static computeTelemetryFinalData(e){let t=e.get("hasAltText");return{hasAltText:t.get(!0)??0,hasNoAltText:t.get(!1)??0}}#o(e,t=!1){if(!e){this.remove();return}this.#e=e.bitmap,t||(this.#t=e.id,this.#a=e.isSvg),e.file&&(this.#s=e.file.name),this.#f()}#h(){if(this.#n=null,this._uiManager.enableWaiting(!1),!!this.#l){if(this._uiManager.useNewAltTextWhenAddingImage&&this._uiManager.useNewAltTextFlow&&this.#e){this._editToolbar.hide(),this._uiManager.editAltText(this,!0);return}if(!this._uiManager.useNewAltTextWhenAddingImage&&this._uiManager.useNewAltTextFlow&&this.#e){this._reportTelemetry({action:"pdfjs.image.image_added",data:{alt_text_modal:!1,alt_text_type:"empty"}});try{this.mlGuessAltText()}catch{}}this.div.focus()}}mlGuessAltText(e=null,t=!0){return I(this,null,function*(){if(this.hasAltTextData())return null;let{mlManager:r}=this._uiManager;if(!r)throw new Error("No ML.");if(!(yield r.isEnabledFor("altText")))throw new Error("ML isn't enabled for alt text.");let{data:i,width:s,height:o}=e||this.copyCanvas(null,null,!0).imageData,a=yield r.guess({name:"altText",request:{data:i,width:s,height:o,channels:i.length/(s*o)}});if(!a)throw new Error("No response from the AI service.");if(a.error)throw new Error("Error from the AI service.");if(a.cancel)return null;if(!a.output)throw new Error("No valid response from the AI service.");let l=a.output;return yield this.setGuessedAltText(l),t&&!this.hasAltTextData()&&(this.altTextData={alt:l,decorative:!1}),l})}#p(){if(this.#t){this._uiManager.enableWaiting(!0),this._uiManager.imageManager.getFromId(this.#t).then(r=>this.#o(r,!0)).finally(()=>this.#h());return}if(this.#r){let r=this.#r;this.#r=null,this._uiManager.enableWaiting(!0),this.#n=this._uiManager.imageManager.getFromUrl(r).then(i=>this.#o(i)).finally(()=>this.#h());return}if(this.#i){let r=this.#i;this.#i=null,this._uiManager.enableWaiting(!0),this.#n=this._uiManager.imageManager.getFromFile(r).then(i=>this.#o(i)).finally(()=>this.#h());return}let e=document.createElement("input");e.type="file",e.accept=n.supportedTypesStr;let t=this._uiManager._signal;this.#n=new Promise(r=>{e.addEventListener("change",()=>I(this,null,function*(){if(!e.files||e.files.length===0)this.remove();else{this._uiManager.enableWaiting(!0);let i=yield this._uiManager.imageManager.getFromFile(e.files[0]);this._reportTelemetry({action:"pdfjs.image.image_selected",data:{alt_text_modal:this._uiManager.useNewAltTextFlow}}),this.#o(i)}r()}),{signal:t}),e.addEventListener("cancel",()=>{this.remove(),r()},{signal:t})}).finally(()=>this.#h()),e.click()}remove(){this.#t&&(this.#e=null,this._uiManager.imageManager.deleteId(this.#t),this.#l?.remove(),this.#l=null,this.#c?.disconnect(),this.#c=null,this.#u&&(clearTimeout(this.#u),this.#u=null)),super.remove()}rebuild(){if(!this.parent){this.#t&&this.#p();return}super.rebuild(),this.div!==null&&(this.#t&&this.#l===null&&this.#p(),this.isAttachedToDOM||this.parent.add(this))}onceAdded(){this._isDraggable=!0,this.div.focus()}isEmpty(){return!(this.#n||this.#e||this.#r||this.#i||this.#t)}get isResizable(){return!0}render(){if(this.div)return this.div;let e,t;if(this.width&&(e=this.x,t=this.y),super.render(),this.div.hidden=!0,this.div.setAttribute("role","figure"),this.addAltTextButton(),this.#e?this.#f():this.#p(),this.width&&!this.annotationElementId){let[r,i]=this.parentDimensions;this.setAt(e*r,t*i,this.width*r,this.height*i)}return this.div}#f(){let{div:e}=this,{width:t,height:r}=this.#e,[i,s]=this.pageDimensions,o=.75;if(this.width)t=this.width*i,r=this.height*s;else if(t>o*i||r>o*s){let u=Math.min(o*i/t,o*s/r);t*=u,r*=u}let[a,l]=this.parentDimensions;this.setDims(t*a/i,r*l/s),this._uiManager.enableWaiting(!1);let c=this.#l=document.createElement("canvas");c.setAttribute("role","img"),this.addContainer(c),(!this._uiManager.useNewAltTextWhenAddingImage||!this._uiManager.useNewAltTextFlow||this.annotationElementId)&&(e.hidden=!1),this.#m(t,r),this.#w(),this.#d||(this.parent.addUndoableEditor(this),this.#d=!0),this._reportTelemetry({action:"inserted_image"}),this.#s&&c.setAttribute("aria-label",this.#s)}copyCanvas(e,t,r=!1){e||(e=224);let{width:i,height:s}=this.#e,o=new fa,a=this.#e,l=i,c=s,u=null;if(t){if(i>t||s>t){let S=Math.min(t/i,t/s);l=Math.floor(i*S),c=Math.floor(s*S)}u=document.createElement("canvas");let h=u.width=Math.ceil(l*o.sx),f=u.height=Math.ceil(c*o.sy);this.#a||(a=this.#v(h,f));let p=u.getContext("2d");p.filter=this._uiManager.hcmFilter;let g="white",v="#cfcfd8";this._uiManager.hcmFilter!=="none"?v="black":window.matchMedia?.("(prefers-color-scheme: dark)").matches&&(g="#8f8f9d",v="#42414d");let m=15,y=m*o.sx,w=m*o.sy,b=new OffscreenCanvas(y*2,w*2),C=b.getContext("2d");C.fillStyle=g,C.fillRect(0,0,y*2,w*2),C.fillStyle=v,C.fillRect(0,0,y,w),C.fillRect(y,w,y,w),p.fillStyle=p.createPattern(b,"repeat"),p.fillRect(0,0,h,f),p.drawImage(a,0,0,a.width,a.height,0,0,h,f)}let d=null;if(r){let h,f;if(o.symmetric&&a.width<e&&a.height<e)h=a.width,f=a.height;else if(a=this.#e,i>e||s>e){let v=Math.min(e/i,e/s);h=Math.floor(i*v),f=Math.floor(s*v),this.#a||(a=this.#v(h,f))}let g=new OffscreenCanvas(h,f).getContext("2d",{willReadFrequently:!0});g.drawImage(a,0,0,a.width,a.height,0,0,h,f),d={width:h,height:f,data:g.getImageData(0,0,h,f).data}}return{canvas:u,width:l,height:c,imageData:d}}#g(e,t){let[r,i]=this.parentDimensions;this.width=e/r,this.height=t/i,this._initialOptions?.isCentered?this.center():this.fixAndSetPosition(),this._initialOptions=null,this.#u!==null&&clearTimeout(this.#u);let s=200;this.#u=setTimeout(()=>{this.#u=null,this.#m(e,t)},s)}#v(e,t){let{width:r,height:i}=this.#e,s=r,o=i,a=this.#e;for(;s>2*e||o>2*t;){let l=s,c=o;s>2*e&&(s=s>=16384?Math.floor(s/2)-1:Math.ceil(s/2)),o>2*t&&(o=o>=16384?Math.floor(o/2)-1:Math.ceil(o/2));let u=new OffscreenCanvas(s,o);u.getContext("2d").drawImage(a,0,0,l,c,0,0,s,o),a=u.transferToImageBitmap()}return a}#m(e,t){let r=new fa,i=Math.ceil(e*r.sx),s=Math.ceil(t*r.sy),o=this.#l;if(!o||o.width===i&&o.height===s)return;o.width=i,o.height=s;let a=this.#a?this.#e:this.#v(i,s),l=o.getContext("2d");l.filter=this._uiManager.hcmFilter,l.drawImage(a,0,0,a.width,a.height,0,0,i,s)}getImageForAltText(){return this.#l}#y(e){if(e){if(this.#a){let i=this._uiManager.imageManager.getSvgUrl(this.#t);if(i)return i}let t=document.createElement("canvas");return{width:t.width,height:t.height}=this.#e,t.getContext("2d").drawImage(this.#e,0,0),t.toDataURL()}if(this.#a){let[t,r]=this.pageDimensions,i=Math.round(this.width*t*Vr.PDF_TO_CSS_UNITS),s=Math.round(this.height*r*Vr.PDF_TO_CSS_UNITS),o=new OffscreenCanvas(i,s);return o.getContext("2d").drawImage(this.#e,0,0,this.#e.width,this.#e.height,0,0,i,s),o.transferToImageBitmap()}return structuredClone(this.#e)}#w(){this._uiManager._signal&&(this.#c=new ResizeObserver(e=>{let t=e[0].contentRect;t.width&&t.height&&this.#g(t.width,t.height)}),this.#c.observe(this.div),this._uiManager._signal.addEventListener("abort",()=>{this.#c?.disconnect(),this.#c=null},{once:!0}))}static deserialize(e,t,r){return I(this,null,function*(){let i=null;if(e instanceof Xu){let{data:{rect:p,rotation:g,id:v,structParent:m,popupRef:y},container:w,parent:{page:{pageNumber:b}}}=e,C=w.querySelector("canvas"),S=r.imageManager.getFromCanvas(w.id,C);C.remove();let T=(yield t._structTree.getAriaAttributes(`${Lv}${v}`))?.get("aria-label")||"";i=e={annotationType:ee.STAMP,bitmapId:S.id,bitmap:S.bitmap,pageIndex:b-1,rect:p.slice(0),rotation:g,id:v,deleted:!1,accessibilityData:{decorative:!1,altText:T},isSvg:!1,structParent:m,popupRef:y}}let s=yield Li(n,this,"deserialize").call(this,e,t,r),{rect:o,bitmap:a,bitmapUrl:l,bitmapId:c,isSvg:u,accessibilityData:d}=e;c&&r.imageManager.isValidId(c)?(s.#t=c,a&&(s.#e=a)):s.#r=l,s.#a=u;let[h,f]=s.pageDimensions;return s.width=(o[2]-o[0])/h,s.height=(o[3]-o[1])/f,s.annotationElementId=e.id||null,d&&(s.altTextData=d),s._initialData=i,s.#d=!!i,s})}serialize(e=!1,t=null){if(this.isEmpty())return null;if(this.deleted)return this.serializeDeleted();let r={annotationType:ee.STAMP,bitmapId:this.#t,pageIndex:this.pageIndex,rect:this.getRect(0,0),rotation:this.rotation,isSvg:this.#a,structTreeParentId:this._structTreeParentId};if(e)return r.bitmapUrl=this.#y(!0),r.accessibilityData=this.serializeAltText(!0),r;let{decorative:i,altText:s}=this.serializeAltText(!1);if(!i&&s&&(r.accessibilityData={type:"Figure",alt:s}),this.annotationElementId){let a=this.#_(r);if(a.isSame)return null;a.isSameAltText?delete r.accessibilityData:r.accessibilityData.structParent=this._initialData.structParent??-1}if(r.id=this.annotationElementId,t===null)return r;t.stamps||=new Map;let o=this.#a?(r.rect[2]-r.rect[0])*(r.rect[3]-r.rect[1]):null;if(!t.stamps.has(this.#t))t.stamps.set(this.#t,{area:o,serialized:r}),r.bitmap=this.#y(!1);else if(this.#a){let a=t.stamps.get(this.#t);o>a.area&&(a.area=o,a.serialized.bitmap.close(),a.serialized.bitmap=this.#y(!1))}return r}#_(e){let{rect:t,pageIndex:r,accessibilityData:{altText:i}}=this._initialData,s=e.rect.every((l,c)=>Math.abs(l-t[c])<1),o=e.pageIndex===r,a=(e.accessibilityData?.alt||"")===i;return{isSame:s&&o&&a,isSameAltText:a}}renderAnnotationElement(e){return e.updateEdited({rect:this.getRect(0,0)}),null}},Lk=(()=>{class n{#e;#t=!1;#n=null;#r=null;#i=null;#s=new Map;#l=!1;#c=!1;#u=!1;#a=null;#d=null;#o;static _initialized=!1;static#h=new Map([Tv,Ov,Pv,nd].map(t=>[t._editorType,t]));constructor({uiManager:t,pageIndex:r,div:i,structTreeLayer:s,accessibilityManager:o,annotationLayer:a,drawLayer:l,textLayer:c,viewport:u,l10n:d}){let h=[...n.#h.values()];if(!n._initialized){n._initialized=!0;for(let f of h)f.initialize(d,t)}t.registerEditorTypes(h),this.#o=t,this.pageIndex=r,this.div=i,this.#e=o,this.#n=a,this.viewport=u,this.#a=c,this.drawLayer=l,this._structTree=s,this.#o.addLayer(this)}get isEmpty(){return this.#s.size===0}get isInvisible(){return this.isEmpty&&this.#o.getMode()===ee.NONE}updateToolbar(t){this.#o.updateToolbar(t)}updateMode(t=this.#o.getMode()){switch(this.#m(),t){case ee.NONE:this.disableTextSelection(),this.togglePointerEvents(!1),this.toggleAnnotationLayerPointerEvents(!0),this.disableClick();return;case ee.INK:this.addInkEditorIfNeeded(!1),this.disableTextSelection(),this.togglePointerEvents(!0),this.disableClick();break;case ee.HIGHLIGHT:this.enableTextSelection(),this.togglePointerEvents(!1),this.disableClick();break;default:this.disableTextSelection(),this.togglePointerEvents(!0),this.enableClick()}this.toggleAnnotationLayerPointerEvents(!1);let{classList:r}=this.div;for(let i of n.#h.values())r.toggle(`${i._type}Editing`,t===i._editorType);this.div.hidden=!1}hasTextLayer(t){return t===this.#a?.div}addInkEditorIfNeeded(t){if(this.#o.getMode()!==ee.INK)return;if(!t){for(let i of this.#s.values())if(i.isEmpty()){i.setInBackground();return}}this.createAndAddNewEditor({offsetX:0,offsetY:0},!1).setInBackground()}setEditingState(t){this.#o.setEditingState(t)}addCommands(t){this.#o.addCommands(t)}toggleDrawing(t=!1){this.div.classList.toggle("drawing",!t)}togglePointerEvents(t=!1){this.div.classList.toggle("disabled",!t)}toggleAnnotationLayerPointerEvents(t=!1){this.#n?.div.classList.toggle("disabled",!t)}enable(){return I(this,null,function*(){this.div.tabIndex=0,this.togglePointerEvents(!0);let t=new Set;for(let i of this.#s.values())i.enableEditing(),i.show(!0),i.annotationElementId&&(this.#o.removeChangedExistingAnnotation(i),t.add(i.annotationElementId));if(!this.#n)return;let r=this.#n.getEditableAnnotations();for(let i of r){if(i.hide(),this.#o.isDeletedAnnotationElement(i.data.id)||t.has(i.data.id))continue;let s=yield this.deserialize(i);s&&(this.addOrRebuild(s),s.enableEditing())}})}disable(){this.#u=!0,this.div.tabIndex=-1,this.togglePointerEvents(!1);let t=new Map,r=new Map;for(let s of this.#s.values())if(s.disableEditing(),!!s.annotationElementId){if(s.serialize()!==null){t.set(s.annotationElementId,s);continue}else r.set(s.annotationElementId,s);this.getEditableAnnotation(s.annotationElementId)?.show(),s.remove()}if(this.#n){let s=this.#n.getEditableAnnotations();for(let o of s){let{id:a}=o.data;if(this.#o.isDeletedAnnotationElement(a))continue;let l=r.get(a);if(l){l.resetAnnotationElement(o),l.show(!1),o.show();continue}l=t.get(a),l&&(this.#o.addChangedExistingAnnotation(l),l.renderAnnotationElement(o)&&l.show(!1)),o.show()}}this.#m(),this.isEmpty&&(this.div.hidden=!0);let{classList:i}=this.div;for(let s of n.#h.values())i.remove(`${s._type}Editing`);this.disableTextSelection(),this.toggleAnnotationLayerPointerEvents(!0),this.#u=!1}getEditableAnnotation(t){return this.#n?.getEditableAnnotation(t)||null}setActiveEditor(t){this.#o.getActive()!==t&&this.#o.setActiveEditor(t)}enableTextSelection(){if(this.div.tabIndex=-1,this.#a?.div&&!this.#d){this.#d=new AbortController;let t=this.#o.combinedSignal(this.#d);this.#a.div.addEventListener("pointerdown",this.#p.bind(this),{signal:t}),this.#a.div.classList.add("highlighting")}}disableTextSelection(){this.div.tabIndex=0,this.#a?.div&&this.#d&&(this.#d.abort(),this.#d=null,this.#a.div.classList.remove("highlighting"))}#p(t){this.#o.unselectAll();let{target:r}=t;if(r===this.#a.div||(r.getAttribute("role")==="img"||r.classList.contains("endOfContent"))&&this.#a.div.contains(r)){let{isMac:i}=dt.platform;if(t.button!==0||t.ctrlKey&&i)return;this.#o.showAllEditors("highlight",!0,!0),this.#a.div.classList.add("free"),this.toggleDrawing(),nd.startHighlighting(this,this.#o.direction==="ltr",{target:this.#a.div,x:t.x,y:t.y}),this.#a.div.addEventListener("pointerup",()=>{this.#a.div.classList.remove("free"),this.toggleDrawing(!0)},{once:!0,signal:this.#o._signal}),t.preventDefault()}}enableClick(){if(this.#r)return;this.#r=new AbortController;let t=this.#o.combinedSignal(this.#r);this.div.addEventListener("pointerdown",this.pointerdown.bind(this),{signal:t}),this.div.addEventListener("pointerup",this.pointerup.bind(this),{signal:t})}disableClick(){this.#r?.abort(),this.#r=null}attach(t){this.#s.set(t.id,t);let{annotationElementId:r}=t;r&&this.#o.isDeletedAnnotationElement(r)&&this.#o.removeDeletedAnnotationElement(t)}detach(t){this.#s.delete(t.id),this.#e?.removePointerInTextLayer(t.contentDiv),!this.#u&&t.annotationElementId&&this.#o.addDeletedAnnotationElement(t)}remove(t){this.detach(t),this.#o.removeEditor(t),t.div.remove(),t.isAttachedToDOM=!1,this.#c||this.addInkEditorIfNeeded(!1)}changeParent(t){t.parent!==this&&(t.parent&&t.annotationElementId&&(this.#o.addDeletedAnnotationElement(t.annotationElementId),be.deleteAnnotationElement(t),t.annotationElementId=null),this.attach(t),t.parent?.detach(t),t.setParent(this),t.div&&t.isAttachedToDOM&&(t.div.remove(),this.div.append(t.div)))}add(t){if(!(t.parent===this&&t.isAttachedToDOM)){if(this.changeParent(t),this.#o.addEditor(t),this.attach(t),!t.isAttachedToDOM){let r=t.render();this.div.append(r),t.isAttachedToDOM=!0}t.fixAndSetPosition(),t.onceAdded(),this.#o.addToAnnotationStorage(t),t._reportTelemetry(t.telemetryInitialData)}}moveEditorInDOM(t){if(!t.isAttachedToDOM)return;let{activeElement:r}=document;t.div.contains(r)&&!this.#i&&(t._focusEventsAllowed=!1,this.#i=setTimeout(()=>{this.#i=null,t.div.contains(document.activeElement)?t._focusEventsAllowed=!0:(t.div.addEventListener("focusin",()=>{t._focusEventsAllowed=!0},{once:!0,signal:this.#o._signal}),r.focus())},0)),t._structTreeParentId=this.#e?.moveElementInDOM(this.div,t.div,t.contentDiv,!0)}addOrRebuild(t){t.needsToBeRebuilt()?(t.parent||=this,t.rebuild(),t.show()):this.add(t)}addUndoableEditor(t){let r=()=>t._uiManager.rebuild(t),i=()=>{t.remove()};this.addCommands({cmd:r,undo:i,mustExec:!1})}getNextId(){return this.#o.getId()}get#f(){return n.#h.get(this.#o.getMode())}combinedSignal(t){return this.#o.combinedSignal(t)}#g(t){let r=this.#f;return r?new r.prototype.constructor(t):null}canCreateNewEmptyEditor(){return this.#f?.canCreateNewEmptyEditor()}pasteEditor(t,r){this.#o.updateToolbar(t),this.#o.updateMode(t);let{offsetX:i,offsetY:s}=this.#v(),o=this.getNextId(),a=this.#g(_({parent:this,id:o,x:i,y:s,uiManager:this.#o,isCentered:!0},r));a&&this.add(a)}deserialize(t){return I(this,null,function*(){return(yield n.#h.get(t.annotationType??t.annotationEditorType)?.deserialize(t,this,this.#o))||null})}createAndAddNewEditor(t,r,i={}){let s=this.getNextId(),o=this.#g(_({parent:this,id:s,x:t.offsetX,y:t.offsetY,uiManager:this.#o,isCentered:r},i));return o&&this.add(o),o}#v(){let{x:t,y:r,width:i,height:s}=this.div.getBoundingClientRect(),o=Math.max(0,t),a=Math.max(0,r),l=Math.min(window.innerWidth,t+i),c=Math.min(window.innerHeight,r+s),u=(o+l)/2-t,d=(a+c)/2-r,[h,f]=this.viewport.rotation%180===0?[u,d]:[d,u];return{offsetX:h,offsetY:f}}addNewEditor(){this.createAndAddNewEditor(this.#v(),!0)}setSelected(t){this.#o.setSelected(t)}toggleSelected(t){this.#o.toggleSelected(t)}unselect(t){this.#o.unselect(t)}pointerup(t){let{isMac:r}=dt.platform;if(!(t.button!==0||t.ctrlKey&&r)&&t.target===this.div&&this.#l){if(this.#l=!1,!this.#t){this.#t=!0;return}if(this.#o.getMode()===ee.STAMP){this.#o.unselectAll();return}this.createAndAddNewEditor(t,!1)}}pointerdown(t){if(this.#o.getMode()===ee.HIGHLIGHT&&this.enableTextSelection(),this.#l){this.#l=!1;return}let{isMac:r}=dt.platform;if(t.button!==0||t.ctrlKey&&r||t.target!==this.div)return;this.#l=!0;let i=this.#o.getActive();this.#t=!i||i.isEmpty()}findNewParent(t,r,i){let s=this.#o.findParent(r,i);return s===null||s===this?!1:(s.changeParent(t),!0)}destroy(){this.#o.getActive()?.parent===this&&(this.#o.commitOrRemove(),this.#o.setActiveEditor(null)),this.#i&&(clearTimeout(this.#i),this.#i=null);for(let t of this.#s.values())this.#e?.removePointerInTextLayer(t.contentDiv),t.setParent(null),t.isAttachedToDOM=!1,t.div.remove();this.div=null,this.#s.clear(),this.#o.removeLayer(this)}#m(){this.#c=!0;for(let t of this.#s.values())t.isEmpty()&&t.remove();this.#c=!1}render({viewport:t}){this.viewport=t,_i(this.div,t);for(let r of this.#o.getEditors(this.pageIndex))this.add(r),r.rebuild();this.updateMode()}update({viewport:t}){this.#o.commitOrRemove(),this.#m();let r=this.viewport.rotation,i=t.rotation;if(this.viewport=t,_i(this.div,{rotation:i}),r!==i)for(let s of this.#s.values())s.rotate(i);this.addInkEditorIfNeeded(!1)}get pageDimensions(){let{pageWidth:t,pageHeight:r}=this.viewport.rawDims;return[t,r]}get scale(){return this.#o.viewParameters.realScale}}return n})(),Nv=class n{#e=null;#t=0;#n=new Map;#r=new Map;constructor({pageIndex:e}){this.pageIndex=e}setParent(e){if(!this.#e){this.#e=e;return}if(this.#e!==e){if(this.#n.size>0)for(let t of this.#n.values())t.remove(),e.append(t);this.#e=e}}static get _svgFactory(){return ue(this,"_svgFactory",new ba)}static#i(e,{x:t=0,y:r=0,width:i=1,height:s=1}={}){let{style:o}=e;o.top=`${100*r}%`,o.left=`${100*t}%`,o.width=`${100*i}%`,o.height=`${100*s}%`}#s(e){let t=n._svgFactory.create(1,1,!0);return this.#e.append(t),t.setAttribute("aria-hidden",!0),n.#i(t,e),t}#l(e,t){let r=n._svgFactory.createElement("clipPath");e.append(r);let i=`clip_${t}`;r.setAttribute("id",i),r.setAttribute("clipPathUnits","objectBoundingBox");let s=n._svgFactory.createElement("use");return r.append(s),s.setAttribute("href",`#${t}`),s.classList.add("clip"),i}draw(e,t,r,i=!1){let s=this.#t++,o=this.#s(e.box);o.classList.add(...e.classNamesForDrawing);let a=n._svgFactory.createElement("defs");o.append(a);let l=n._svgFactory.createElement("path");a.append(l);let c=`path_p${this.pageIndex}_${s}`;l.setAttribute("id",c),l.setAttribute("d",e.toSVGPath()),i&&this.#r.set(s,l);let u=this.#l(a,c),d=n._svgFactory.createElement("use");return o.append(d),o.setAttribute("fill",t),o.setAttribute("fill-opacity",r),d.setAttribute("href",`#${c}`),this.#n.set(s,o),{id:s,clipPathId:`url(#${u})`}}drawOutline(e){let t=this.#t++,r=this.#s(e.box);r.classList.add(...e.classNamesForOutlining);let i=n._svgFactory.createElement("defs");r.append(i);let s=n._svgFactory.createElement("path");i.append(s);let o=`path_p${this.pageIndex}_${t}`;s.setAttribute("id",o),s.setAttribute("d",e.toSVGPath()),s.setAttribute("vector-effect","non-scaling-stroke");let a;if(e.mustRemoveSelfIntersections){let u=n._svgFactory.createElement("mask");i.append(u),a=`mask_p${this.pageIndex}_${t}`,u.setAttribute("id",a),u.setAttribute("maskUnits","objectBoundingBox");let d=n._svgFactory.createElement("rect");u.append(d),d.setAttribute("width","1"),d.setAttribute("height","1"),d.setAttribute("fill","white");let h=n._svgFactory.createElement("use");u.append(h),h.setAttribute("href",`#${o}`),h.setAttribute("stroke","none"),h.setAttribute("fill","black"),h.setAttribute("fill-rule","nonzero"),h.classList.add("mask")}let l=n._svgFactory.createElement("use");r.append(l),l.setAttribute("href",`#${o}`),a&&l.setAttribute("mask",`url(#${a})`);let c=l.cloneNode();return r.append(c),l.classList.add("mainOutline"),c.classList.add("secondaryOutline"),this.#n.set(t,r),t}finalizeLine(e,t){let r=this.#r.get(e);this.#r.delete(e),this.updateBox(e,t.box),r.setAttribute("d",t.toSVGPath())}updateLine(e,t){this.#n.get(e).firstChild.firstChild.setAttribute("d",t.toSVGPath())}updatePath(e,t){this.#r.get(e).setAttribute("d",t.toSVGPath())}updateBox(e,t){n.#i(this.#n.get(e),t)}show(e,t){this.#n.get(e).classList.toggle("hidden",!t)}rotate(e,t){this.#n.get(e).setAttribute("data-main-rotation",t)}changeColor(e,t){this.#n.get(e).setAttribute("fill",t)}changeOpacity(e,t){this.#n.get(e).setAttribute("fill-opacity",t)}addClass(e,t){this.#n.get(e).classList.add(t)}removeClass(e,t){this.#n.get(e).classList.remove(t)}getSVGRoot(e){return this.#n.get(e)}remove(e){this.#r.delete(e),this.#e!==null&&(this.#n.get(e).remove(),this.#n.delete(e))}destroy(){this.#e=null;for(let e of this.#n.values())e.remove();this.#n.clear(),this.#r.clear()}};var Fk=X.AbortException,jk=X.AnnotationEditorLayer,Bk=X.AnnotationEditorParamsType,Uv=X.AnnotationEditorType,Vk=X.AnnotationEditorUIManager,Hk=X.AnnotationLayer,Uk=X.AnnotationMode,$k=X.ColorPicker,zk=X.DOMSVGFactory,Wk=X.DrawLayer,qk=X.FeatureTest,$v=X.GlobalWorkerOptions,Gk=X.ImageKind,Yk=X.InvalidPDFException,Kk=X.MissingPDFException,Xk=X.OPS,Qk=X.OutputScale,Zk=X.PDFDataRangeTransport,Jk=X.PDFDateString,eL=X.PDFWorker,tL=X.PasswordResponses,nL=X.PermissionFlag,rL=X.PixelsPerInch,iL=X.RenderingCancelledException,sL=X.TextLayer,oL=X.UnexpectedResponseException,aL=X.Util,zv=X.VerbosityLevel,lL=X.XfaLayer,cL=X.build,uL=X.createValidAbsoluteUrl,dL=X.fetchData,Wv=X.getDocument,hL=X.getFilenameFromUrl,fL=X.getPdfFilenameFromUrl,pL=X.getXfaPageViewport,gL=X.isDataScheme,mL=X.isPdfFile,vL=X.noContextMenu,yL=X.normalizeUnicode,bL=X.setLayerDimensions,wL=X.shadow,Aa=X.version;var Py={};ab(Py,{AnnotationLayerBuilder:()=>a2,DownloadManager:()=>l2,EventBus:()=>c2,FindState:()=>u2,GenericL10n:()=>Dy,LinkTarget:()=>Ti,PDFFindController:()=>Ty,PDFHistory:()=>d2,PDFLinkService:()=>My,PDFPageView:()=>h2,PDFScriptingManager:()=>f2,PDFSinglePageViewer:()=>Ry,PDFViewer:()=>Oy,ProgressBar:()=>p2,RenderingStates:()=>g2,ScrollMode:()=>m2,SimpleLinkService:()=>v2,SpreadMode:()=>y2,StructTreeLayerBuilder:()=>b2,TextLayerBuilder:()=>w2,XfaLayerBuilder:()=>E2,parseQueryString:()=>C2});var xa={};xa.d=(n,e)=>{for(var t in e)xa.o(e,t)&&!xa.o(n,t)&&Object.defineProperty(n,t,{enumerable:!0,get:e[t]})};xa.o=(n,e)=>Object.prototype.hasOwnProperty.call(n,e);var Fe=globalThis.pdfjsViewer={};xa.d(Fe,{AnnotationLayerBuilder:()=>bd,DownloadManager:()=>iy,EventBus:()=>wd,FindState:()=>Ur,GenericL10n:()=>Bs,LinkTarget:()=>xi,PDFFindController:()=>ny,PDFHistory:()=>gy,PDFLinkService:()=>vd,PDFPageView:()=>xd,PDFScriptingManager:()=>Ay,PDFSinglePageViewer:()=>Iy,PDFViewer:()=>Id,ProgressBar:()=>ty,RenderingStates:()=>We,ScrollMode:()=>fe,SimpleLinkService:()=>Ta,SpreadMode:()=>mt,StructTreeLayerBuilder:()=>_d,TextLayerBuilder:()=>Ad,XfaLayerBuilder:()=>Sd,parseQueryString:()=>Dd});var EL="auto",TS=1,XA=1.1,CL=.1,_L=10,qv=0,AL=1.25,QA=40,ZA=5,We={INITIAL:0,RUNNING:1,PAUSED:2,FINISHED:3},Ls={UNKNOWN:0,NORMAL:1,CHANGING:2,FULLSCREEN:3};var Hn={DISABLE:0,ENABLE:1,ENABLE_PERMISSIONS:2},fe={UNKNOWN:-1,VERTICAL:0,HORIZONTAL:1,WRAPPED:2,PAGE:3},mt={UNKNOWN:-1,NONE:0,ODD:1,EVEN:2};function MS(n,e,t=!1){let r=n.offsetParent;if(!r){console.error("offsetParent is not set -- cannot scroll");return}let i=n.offsetTop+n.clientTop,s=n.offsetLeft+n.clientLeft;for(;r.clientHeight===r.scrollHeight&&r.clientWidth===r.scrollWidth||t&&(r.classList.contains("markedContent")||getComputedStyle(r).overflow==="hidden");)if(i+=r.offsetTop,s+=r.offsetLeft,r=r.offsetParent,!r)return;e&&(e.top!==void 0&&(i+=e.top),e.left!==void 0&&(s+=e.left,r.scrollLeft=s)),r.scrollTop=i}function SL(n,e,t=void 0){let r=function(o){s||(s=window.requestAnimationFrame(function(){s=null;let l=n.scrollLeft,c=i.lastX;l!==c&&(i.right=l>c),i.lastX=l;let u=n.scrollTop,d=i.lastY;u!==d&&(i.down=u>d),i.lastY=u,e(i)}))},i={right:!0,down:!0,lastX:n.scrollLeft,lastY:n.scrollTop,_eventHandler:r},s=null;return n.addEventListener("scroll",r,{useCapture:!0,signal:t}),t?.addEventListener("abort",()=>window.cancelAnimationFrame(s),{once:!0}),i}function Dd(n){let e=new Map;for(let[t,r]of new URLSearchParams(n))e.set(t.toLowerCase(),r);return e}var JA=/[\x00-\x1F]/g;function Ia(n,e=!1){return JA.test(n)?e?n.replaceAll(JA,t=>t==="\0"?"":" "):n.replaceAll("\0",""):n}function Da(n,e,t=0){let r=t,i=n.length-1;if(i<0||!e(n[i]))return n.length;if(e(n[r]))return r;for(;r<i;){let s=r+i>>1,o=n[s];e(o)?i=s:r=s+1}return r}function eS(n){if(Math.floor(n)===n)return[n,1];let e=1/n,t=8;if(e>t)return[1,t];if(Math.floor(e)===e)return[1,e];let r=n>1?e:n,i=0,s=1,o=1,a=1;for(;;){let c=i+o,u=s+a;if(u>t)break;r<=c/u?(o=c,a=u):(i=c,s=u)}let l;return r-i/s<o/a-r?l=r===n?[i,s]:[s,i]:l=r===n?[o,a]:[a,o],l}function ud(n,e){return n-n%e}function xL(n,e,t){if(n<2)return n;let r=e[n].div,i=r.offsetTop+r.clientTop;i>=t&&(r=e[n-1].div,i=r.offsetTop+r.clientTop);for(let s=n-2;s>=0&&(r=e[s].div,!(r.offsetTop+r.clientTop+r.clientHeight<=i));--s)n=s;return n}function IL({scrollEl:n,views:e,sortByVisibility:t=!1,horizontal:r=!1,rtl:i=!1}){let s=n.scrollTop,o=s+n.clientHeight,a=n.scrollLeft,l=a+n.clientWidth;function c(y){let w=y.div;return w.offsetTop+w.clientTop+w.clientHeight>s}function u(y){let w=y.div,b=w.offsetLeft+w.clientLeft,C=b+w.clientWidth;return i?b<l:C>a}let d=[],h=new Set,f=e.length,p=Da(e,r?u:c);p>0&&p<f&&!r&&(p=xL(p,e,s));let g=r?l:-1;for(let y=p;y<f;y++){let w=e[y],b=w.div,C=b.offsetLeft+b.clientLeft,S=b.offsetTop+b.clientTop,T=b.clientWidth,M=b.clientHeight,E=C+T,x=S+M;if(g===-1)x>=o&&(g=x);else if((r?C:S)>g)break;if(x<=s||S>=o||E<=a||C>=l)continue;let N=Math.max(0,s-S)+Math.max(0,x-o),pe=Math.max(0,a-C)+Math.max(0,E-l),de=(M-N)/M,ce=(T-pe)/T,Ee=de*ce*100|0;d.push({id:w.id,x:C,y:S,view:w,percent:Ee,widthPercent:ce*100|0}),h.add(w.id)}let v=d[0],m=d.at(-1);return t&&d.sort(function(y,w){let b=y.percent-w.percent;return Math.abs(b)>.001?-b:y.id-w.id}),{first:v,last:m,views:d,ids:h}}function RS(n){return Number.isInteger(n)&&n%90===0}function DL(n){return Number.isInteger(n)&&Object.values(fe).includes(n)&&n!==fe.UNKNOWN}function TL(n){return Number.isInteger(n)&&Object.values(mt).includes(n)&&n!==mt.UNKNOWN}function tS(n){return n.width<=n.height}var B5=new Promise(function(n){window.requestAnimationFrame(n)}),ML=document.documentElement.style;function RL(n,e,t){return Math.min(Math.max(n,e),t)}var ty=class{#e=null;#t=null;#n=0;#r=null;#i=!0;constructor(e){this.#e=e.classList,this.#r=e.style}get percent(){return this.#n}set percent(e){if(this.#n=RL(e,0,100),isNaN(e)){this.#e.add("indeterminate");return}this.#e.remove("indeterminate"),this.#r.setProperty("--progressBar-percent",`${this.#n}%`)}setWidth(e){if(!e)return;let r=e.parentNode.offsetWidth-e.offsetWidth;r>0&&this.#r.setProperty("--progressBar-end-offset",`${r}px`)}setDisableAutoFetch(e=5e3){this.#n===100||isNaN(this.#n)||(this.#t&&clearTimeout(this.#t),this.show(),this.#t=setTimeout(()=>{this.#t=null,this.hide()},e))}hide(){this.#i&&(this.#i=!1,this.#e.add("hidden"))}show(){this.#i||(this.#i=!0,this.#e.remove("hidden"))}};function OL(n){let e=fe.VERTICAL,t=mt.NONE;switch(n){case"SinglePage":e=fe.PAGE;break;case"OneColumn":break;case"TwoPageLeft":e=fe.PAGE;case"TwoColumnLeft":t=mt.ODD;break;case"TwoPageRight":e=fe.PAGE;case"TwoColumnRight":t=mt.EVEN;break}return{scrollMode:e,spreadMode:t}}var dd=function(){let n=document.createElement("div");return n.style.width="round(down, calc(1.6666666666666665 * 792px), 1px)",n.style.width==="calc(1320px)"?Math.fround:e=>e}(),yn={SPACE:0,ALPHA_LETTER:1,PUNCT:2,HAN_LETTER:3,KATAKANA_LETTER:4,HIRAGANA_LETTER:5,HALFWIDTH_KATAKANA_LETTER:6,THAI_LETTER:7};function PL(n){return n<11904}function NL(n){return(n&65408)===0}function kL(n){return n>=97&&n<=122||n>=65&&n<=90}function LL(n){return n>=48&&n<=57}function FL(n){return n===32||n===9||n===13||n===10}function jL(n){return n>=13312&&n<=40959||n>=63744&&n<=64255}function BL(n){return n>=12448&&n<=12543}function VL(n){return n>=12352&&n<=12447}function HL(n){return n>=65376&&n<=65439}function UL(n){return(n&65408)===3584}function hd(n){return PL(n)?NL(n)?FL(n)?yn.SPACE:kL(n)||LL(n)||n===95?yn.ALPHA_LETTER:yn.PUNCT:UL(n)?yn.THAI_LETTER:n===160?yn.SPACE:yn.ALPHA_LETTER:jL(n)?yn.HAN_LETTER:BL(n)?yn.KATAKANA_LETTER:VL(n)?yn.HIRAGANA_LETTER:HL(n)?yn.HALFWIDTH_KATAKANA_LETTER:yn.ALPHA_LETTER}var nS;function $L(){return nS||="\xA0\xA8\xAA\xAF\xB2-\xB5\xB8-\xBA\xBC-\xBE\u0132-\u0133\u013F-\u0140\u0149\u017F\u01C4-\u01CC\u01F1-\u01F3\u02B0-\u02B8\u02D8-\u02DD\u02E0-\u02E4\u0374\u037A\u037E\u0384-\u0385\u0387\u03D0-\u03D6\u03F0-\u03F2\u03F4-\u03F5\u03F9\u0587\u0675-\u0678\u0958-\u095F\u09DC-\u09DD\u09DF\u0A33\u0A36\u0A59-\u0A5B\u0A5E\u0B5C-\u0B5D\u0E33\u0EB3\u0EDC-\u0EDD\u0F0C\u0F43\u0F4D\u0F52\u0F57\u0F5C\u0F69\u10FC\u1D2C-\u1D2E\u1D30-\u1D3A\u1D3C-\u1D4D\u1D4F-\u1D6A\u1D78\u1D9B-\u1DBF\u1E9A-\u1E9B\u1F71\u1F73\u1F75\u1F77\u1F79\u1F7B\u1F7D\u1FBB\u1FBD-\u1FC1\u1FC9\u1FCB\u1FCD-\u1FCF\u1FD3\u1FDB\u1FDD-\u1FDF\u1FE3\u1FEB\u1FED-\u1FEF\u1FF9\u1FFB\u1FFD-\u1FFE\u2000-\u200A\u2011\u2017\u2024-\u2026\u202F\u2033-\u2034\u2036-\u2037\u203C\u203E\u2047-\u2049\u2057\u205F\u2070-\u2071\u2074-\u208E\u2090-\u209C\u20A8\u2100-\u2103\u2105-\u2107\u2109-\u2113\u2115-\u2116\u2119-\u211D\u2120-\u2122\u2124\u2126\u2128\u212A-\u212D\u212F-\u2131\u2133-\u2139\u213B-\u2140\u2145-\u2149\u2150-\u217F\u2189\u222C-\u222D\u222F-\u2230\u2329-\u232A\u2460-\u24EA\u2A0C\u2A74-\u2A76\u2ADC\u2C7C-\u2C7D\u2D6F\u2E9F\u2EF3\u2F00-\u2FD5\u3000\u3036\u3038-\u303A\u309B-\u309C\u309F\u30FF\u3131-\u318E\u3192-\u319F\u3200-\u321E\u3220-\u3247\u3250-\u327E\u3280-\u33FF\uA69C-\uA69D\uA770\uA7F2-\uA7F4\uA7F8-\uA7F9\uAB5C-\uAB5F\uAB69\uF900-\uFA0D\uFA10\uFA12\uFA15-\uFA1E\uFA20\uFA22\uFA25-\uFA26\uFA2A-\uFA6D\uFA70-\uFAD9\uFB00-\uFB06\uFB13-\uFB17\uFB1D\uFB1F-\uFB36\uFB38-\uFB3C\uFB3E\uFB40-\uFB41\uFB43-\uFB44\uFB46-\uFBB1\uFBD3-\uFD3D\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFC\uFE10-\uFE19\uFE30-\uFE44\uFE47-\uFE52\uFE54-\uFE66\uFE68-\uFE6B\uFE70-\uFE72\uFE74\uFE76-\uFEFC\uFF01-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF\uFFD2-\uFFD7\uFFDA-\uFFDC\uFFE0-\uFFE6",nS}var Ur={FOUND:0,NOT_FOUND:1,WRAPPED:2,PENDING:3},zL=250,WL=-50,qL=-400,rS={"\u2010":"-","\u2018":"'","\u2019":"'","\u201A":"'","\u201B":"'","\u201C":'"',"\u201D":'"',"\u201E":'"',"\u201F":'"',"\xBC":"1/4","\xBD":"1/2","\xBE":"3/4"},iS=new Set([12441,12442,2381,2509,2637,2765,2893,3021,3149,3277,3387,3388,3405,3530,3642,3770,3972,4153,4154,5908,5940,6098,6752,6980,7082,7083,7154,7155,11647,43014,43052,43204,43347,43456,43766,44013,3158,3953,3954,3962,3963,3964,3965,3968,3956]),sS,GL=new RegExp("\\p{M}+","gu"),YL=new RegExp("([.*+?^${}()|[\\]\\\\])|(\\p{P})|(\\s+)|(\\p{M})|(\\p{L})","gu"),KL=new RegExp("([^\\p{M}])\\p{M}*$","u"),XL=new RegExp("^\\p{M}*([^\\p{M}])","u"),QL=/[\uAC00-\uD7AF\uFA6C\uFACF-\uFAD1\uFAD5-\uFAD7]+/g,oS=new Map,ZL="[\\u1100-\\u1112\\ud7a4-\\ud7af\\ud84a\\ud84c\\ud850\\ud854\\ud857\\ud85f]",aS=new Map,Gv=null,Yv=null;function Kv(n){let e=[],t;for(;(t=QL.exec(n))!==null;){let{index:f}=t;for(let p of t[0]){let g=oS.get(p);g||(g=p.normalize("NFD").length,oS.set(p,g)),e.push([g,f++])}}let r;if(e.length===0&&Gv)r=Gv;else if(e.length>0&&Yv)r=Yv;else{let f=Object.keys(rS).join(""),p=$L(),y=`([${f}])|([${p}])|((?:\u3099|\u309A)\\n)|(\\p{M}+(?:-\\n)?)|(\\p{Ll}-\\n\\p{Lu})|(\\S-\\n)|((?:\\p{Ideographic}|[\u3040-\u30FF])\\n)|(\\n)`;e.length===0?r=Gv=new RegExp(y+"|(\\u0000)","gum"):r=Yv=new RegExp(y+`|(${ZL})`,"gum")}let i=[];for(;(t=GL.exec(n))!==null;)i.push([t[0].length,t.index]);let s=n.normalize("NFD"),o=[[0,0]],a=0,l=0,c=0,u=0,d=0,h=!1;return s=s.replace(r,(f,p,g,v,m,y,w,b,C,S,T)=>{if(T-=u,p){let M=rS[p],E=M.length;for(let x=1;x<E;x++)o.push([T-c+x,c-x]);return c-=E-1,M}if(g){let M=aS.get(g);M||(M=g.normalize("NFKC"),aS.set(g,M));let E=M.length;for(let x=1;x<E;x++)o.push([T-c+x,c-x]);return c-=E-1,M}if(v)return h=!0,T+d===i[a]?.[1]?++a:(o.push([T-1-c+1,c-1]),c-=1,u+=1),o.push([T-c+1,c]),u+=1,d+=1,v.charAt(0);if(m){let M=m.endsWith(`
`),E=M?m.length-2:m.length;h=!0;let x=E;T+d===i[a]?.[1]&&(x-=i[a][0],++a);for(let N=1;N<=x;N++)o.push([T-1-c+N,c-N]);return c-=x,u+=x,M?(T+=E-1,o.push([T-c+1,1+c]),c+=1,u+=1,d+=1,m.slice(0,E)):m}if(y)return o.push([T-c+3,1+c]),c+=1,u+=1,d+=1,y.replace(`
`,"");if(w){let M=w.length-2;return o.push([T-c+M,1+c]),c+=1,u+=1,d+=1,w.slice(0,-2)}if(b){let M=b.length-1;return o.push([T-c+M,c]),u+=1,d+=1,b.slice(0,-1)}if(C)return o.push([T-c+1,c-1]),c-=1,u+=1,d+=1," ";if(T+d===e[l]?.[1]){let M=e[l][0]-1;++l;for(let E=1;E<=M;E++)o.push([T-(c-E),c-E]);c-=M,u+=M}return S}),o.push([s.length,c]),[s,o,h]}function JL(n,e,t){if(!n)return[e,t];let r=e,i=e+t-1,s=Da(n,u=>u[0]>=r);n[s][0]>r&&--s;let o=Da(n,u=>u[0]>=i,s);n[o][0]>i&&--o;let a=r+n[s][1],c=i+n[o][1]+1-a;return[a,c]}var ny=class{#e=null;#t=!0;#n=0;constructor({linkService:e,eventBus:t,updateMatchesCountOnProgress:r=!0}){this._linkService=e,this._eventBus=t,this.#t=r,this.onIsPageVisible=null,this.#i(),t._on("find",this.#r.bind(this)),t._on("findbarclose",this.#y.bind(this))}get highlightMatches(){return this._highlightMatches}get pageMatches(){return this._pageMatches}get pageMatchesLength(){return this._pageMatchesLength}get selected(){return this._selected}get state(){return this.#e}setDocument(e){this._pdfDocument&&this.#i(),e&&(this._pdfDocument=e,this._firstPageCapability.resolve())}#r(e){if(!e)return;let t=this._pdfDocument,{type:r}=e;(this.#e===null||this.#l(e))&&(this._dirtyMatch=!0),this.#e=e,r!=="highlightallchange"&&this.#E(Ur.PENDING),this._firstPageCapability.promise.then(()=>{if(!this._pdfDocument||t&&this._pdfDocument!==t)return;this.#d();let i=!this._highlightMatches,s=!!this._findTimeout;this._findTimeout&&(clearTimeout(this._findTimeout),this._findTimeout=null),r?this._dirtyMatch?this.#p():r==="again"?(this.#p(),i&&this.#e.highlightAll&&this.#h()):r==="highlightallchange"?(s?this.#p():this._highlightMatches=!0,this.#h()):this.#p():this._findTimeout=setTimeout(()=>{this.#p(),this._findTimeout=null},zL)})}scrollMatchIntoView({element:e=null,selectedLeft:t=0,pageIndex:r=-1,matchIndex:i=-1}){if(!this._scrollMatches||!e)return;if(i===-1||i!==this._selected.matchIdx)return;if(r===-1||r!==this._selected.pageIdx)return;this._scrollMatches=!1;let s={top:WL,left:t+qL};MS(e,s,!0)}#i(){this._highlightMatches=!1,this._scrollMatches=!1,this._pdfDocument=null,this._pageMatches=[],this._pageMatchesLength=[],this.#n=0,this.#e=null,this._selected={pageIdx:-1,matchIdx:-1},this._offset={pageIdx:null,matchIdx:null,wrapped:!1},this._extractTextPromises=[],this._pageContents=[],this._pageDiffs=[],this._hasDiacritics=[],this._matchesCountTotal=0,this._pagesToSearch=null,this._pendingFindMatches=new Set,this._resumePageIdx=null,this._dirtyMatch=!1,clearTimeout(this._findTimeout),this._findTimeout=null,this._firstPageCapability=Promise.withResolvers()}get#s(){let{query:e}=this.#e;return typeof e=="string"?(e!==this._rawQuery&&(this._rawQuery=e,[this._normalizedQuery]=Kv(e)),this._normalizedQuery):(e||[]).filter(t=>!!t).map(t=>Kv(t)[0])}#l(e){let t=e.query,r=this.#e.query,i=typeof t;if(i!==typeof r)return!0;if(i==="string"){if(t!==r)return!0}else if(JSON.stringify(t)!==JSON.stringify(r))return!0;switch(e.type){case"again":let o=this._selected.pageIdx+1,a=this._linkService;return o>=1&&o<=a.pagesCount&&o!==a.page&&!(this.onIsPageVisible?.(o)??!0);case"highlightallchange":return!1}return!0}#c(e,t,r){let i=e.slice(0,t).match(KL);if(i){let s=e.charCodeAt(t),o=i[1].charCodeAt(0);if(hd(s)===hd(o))return!1}if(i=e.slice(t+r).match(XL),i){let s=e.charCodeAt(t+r-1),o=i[1].charCodeAt(0);if(hd(s)===hd(o))return!1}return!0}#u(e,t){let{matchDiacritics:r}=this.#e,i=!1;e=e.replaceAll(YL,(o,a,l,c,u,d)=>a?`[ ]*\\${a}[ ]*`:l?`[ ]*${l}[ ]*`:c?"[ ]+":r?u||d:u?iS.has(u.charCodeAt(0))?u:"":t?(i=!0,`${d}\\p{M}*`):d);let s="[ ]*";return e.endsWith(s)&&(e=e.slice(0,e.length-s.length)),r&&t&&(sS||=String.fromCharCode(...iS),i=!0,e=`${e}(?=[${sS}]|[^\\p{M}]|$)`),[i,e]}#a(e){let t=this.#s;if(t.length===0)return;let r=this._pageContents[e],i=this.match(t,r,e),s=this._pageMatches[e]=[],o=this._pageMatchesLength[e]=[],a=this._pageDiffs[e];i?.forEach(({index:c,length:u})=>{let[d,h]=JL(a,c,u);h&&(s.push(d),o.push(h))}),this.#e.highlightAll&&this.#o(e),this._resumePageIdx===e&&(this._resumePageIdx=null,this.#g());let l=s.length;this._matchesCountTotal+=l,this.#t?l>0&&this.#_():++this.#n===this._linkService.pagesCount&&this.#_()}match(e,t,r){let i=this._hasDiacritics[r],s=!1;if(typeof e=="string"?[s,e]=this.#u(e,i):e=e.sort().reverse().map(d=>{let[h,f]=this.#u(d,i);return s||=h,`(${f})`}).join("|"),!e)return;let{caseSensitive:o,entireWord:a}=this.#e,l=`g${s?"u":""}${o?"":"i"}`;e=new RegExp(e,l);let c=[],u;for(;(u=e.exec(t))!==null;)a&&!this.#c(t,u.index,u[0].length)||c.push({index:u.index,length:u[0].length});return c}#d(){if(this._extractTextPromises.length>0)return;let e=Promise.resolve(),t={disableNormalization:!0};for(let r=0,i=this._linkService.pagesCount;r<i;r++){let{promise:s,resolve:o}=Promise.withResolvers();this._extractTextPromises[r]=s,e=e.then(()=>this._pdfDocument.getPage(r+1).then(a=>a.getTextContent(t)).then(a=>{let l=[];for(let c of a.items)l.push(c.str),c.hasEOL&&l.push(`
`);[this._pageContents[r],this._pageDiffs[r],this._hasDiacritics[r]]=Kv(l.join("")),o()},a=>{console.error(`Unable to get text content for page ${r+1}`,a),this._pageContents[r]="",this._pageDiffs[r]=null,this._hasDiacritics[r]=!1,o()}))}}#o(e){this._scrollMatches&&this._selected.pageIdx===e&&(this._linkService.page=e+1),this._eventBus.dispatch("updatetextlayermatches",{source:this,pageIndex:e})}#h(){this._eventBus.dispatch("updatetextlayermatches",{source:this,pageIndex:-1})}#p(){let e=this.#e.findPrevious,t=this._linkService.page-1,r=this._linkService.pagesCount;if(this._highlightMatches=!0,this._dirtyMatch){this._dirtyMatch=!1,this._selected.pageIdx=this._selected.matchIdx=-1,this._offset.pageIdx=t,this._offset.matchIdx=null,this._offset.wrapped=!1,this._resumePageIdx=null,this._pageMatches.length=0,this._pageMatchesLength.length=0,this.#n=0,this._matchesCountTotal=0,this.#h();for(let o=0;o<r;o++)this._pendingFindMatches.has(o)||(this._pendingFindMatches.add(o),this._extractTextPromises[o].then(()=>{this._pendingFindMatches.delete(o),this.#a(o)}))}if(this.#s.length===0){this.#E(Ur.FOUND);return}if(this._resumePageIdx)return;let s=this._offset;if(this._pagesToSearch=r,s.matchIdx!==null){let o=this._pageMatches[s.pageIdx].length;if(!e&&s.matchIdx+1<o||e&&s.matchIdx>0){s.matchIdx=e?s.matchIdx-1:s.matchIdx+1,this.#m(!0);return}this.#v(e)}this.#g()}#f(e){let t=this._offset,r=e.length,i=this.#e.findPrevious;return r?(t.matchIdx=i?r-1:0,this.#m(!0),!0):(this.#v(i),t.wrapped&&(t.matchIdx=null,this._pagesToSearch<0)?(this.#m(!1),!0):!1)}#g(){this._resumePageIdx!==null&&console.error("There can only be one pending page.");let e=null;do{let t=this._offset.pageIdx;if(e=this._pageMatches[t],!e){this._resumePageIdx=t;break}}while(!this.#f(e))}#v(e){let t=this._offset,r=this._linkService.pagesCount;t.pageIdx=e?t.pageIdx-1:t.pageIdx+1,t.matchIdx=null,this._pagesToSearch--,(t.pageIdx>=r||t.pageIdx<0)&&(t.pageIdx=e?r-1:0,t.wrapped=!0)}#m(e=!1){let t=Ur.NOT_FOUND,r=this._offset.wrapped;if(this._offset.wrapped=!1,e){let i=this._selected.pageIdx;this._selected.pageIdx=this._offset.pageIdx,this._selected.matchIdx=this._offset.matchIdx,t=r?Ur.WRAPPED:Ur.FOUND,i!==-1&&i!==this._selected.pageIdx&&this.#o(i)}this.#E(t,this.#e.findPrevious),this._selected.pageIdx!==-1&&(this._scrollMatches=!0,this.#o(this._selected.pageIdx))}#y(e){let t=this._pdfDocument;this._firstPageCapability.promise.then(()=>{!this._pdfDocument||t&&this._pdfDocument!==t||(this._findTimeout&&(clearTimeout(this._findTimeout),this._findTimeout=null),this._resumePageIdx&&(this._resumePageIdx=null,this._dirtyMatch=!0),this.#E(Ur.FOUND),this._highlightMatches=!1,this.#h())})}#w(){let{pageIdx:e,matchIdx:t}=this._selected,r=0,i=this._matchesCountTotal;if(t!==-1){for(let s=0;s<e;s++)r+=this._pageMatches[s]?.length||0;r+=t+1}return(r<1||r>i)&&(r=i=0),{current:r,total:i}}#_(){this._eventBus.dispatch("updatefindmatchescount",{source:this,matchesCount:this.#w()})}#E(e,t=!1){!this.#t&&(this.#n!==this._linkService.pagesCount||e===Ur.PENDING)||this._eventBus.dispatch("updatefindcontrolstate",{source:this,state:e,previous:t,entireWord:this.#e?.entireWord??null,matchesCount:this.#w(),rawQuery:this.#e?.query??null})}},eF="noopener noreferrer nofollow",xi={NONE:0,SELF:1,BLANK:2,PARENT:3,TOP:4},vd=class n{externalLinkEnabled=!0;constructor({eventBus:e,externalLinkTarget:t=null,externalLinkRel:r=null,ignoreDestinationZoom:i=!1}={}){this.eventBus=e,this.externalLinkTarget=t,this.externalLinkRel=r,this._ignoreDestinationZoom=i,this.baseUrl=null,this.pdfDocument=null,this.pdfViewer=null,this.pdfHistory=null}setDocument(e,t=null){this.baseUrl=t,this.pdfDocument=e}setViewer(e){this.pdfViewer=e}setHistory(e){this.pdfHistory=e}get pagesCount(){return this.pdfDocument?this.pdfDocument.numPages:0}get page(){return this.pdfDocument?this.pdfViewer.currentPageNumber:1}set page(e){this.pdfDocument&&(this.pdfViewer.currentPageNumber=e)}get rotation(){return this.pdfDocument?this.pdfViewer.pagesRotation:0}set rotation(e){this.pdfDocument&&(this.pdfViewer.pagesRotation=e)}get isInPresentationMode(){return this.pdfDocument?this.pdfViewer.isInPresentationMode:!1}goToDestination(e){return I(this,null,function*(){if(!this.pdfDocument)return;let t,r,i;if(typeof e=="string"?(t=e,r=yield this.pdfDocument.getDestination(e)):(t=null,r=yield e),!Array.isArray(r)){console.error(`goToDestination: "${r}" is not a valid destination array, for dest="${e}".`);return}let[s]=r;if(s&&typeof s=="object"){if(i=this.pdfDocument.cachedPageNumber(s),!i)try{i=(yield this.pdfDocument.getPageIndex(s))+1}catch{console.error(`goToDestination: "${s}" is not a valid page reference, for dest="${e}".`);return}}else Number.isInteger(s)&&(i=s+1);if(!i||i<1||i>this.pagesCount){console.error(`goToDestination: "${i}" is not a valid page number, for dest="${e}".`);return}this.pdfHistory&&(this.pdfHistory.pushCurrentPosition(),this.pdfHistory.push({namedDest:t,explicitDest:r,pageNumber:i})),this.pdfViewer.scrollPageIntoView({pageNumber:i,destArray:r,ignoreDestinationZoom:this._ignoreDestinationZoom})})}goToPage(e){if(!this.pdfDocument)return;let t=typeof e=="string"&&this.pdfViewer.pageLabelToPageNumber(e)||e|0;if(!(Number.isInteger(t)&&t>0&&t<=this.pagesCount)){console.error(`PDFLinkService.goToPage: "${e}" is not a valid page.`);return}this.pdfHistory&&(this.pdfHistory.pushCurrentPosition(),this.pdfHistory.pushPage(t)),this.pdfViewer.scrollPageIntoView({pageNumber:t})}addLinkAttributes(e,t,r=!1){if(!t||typeof t!="string")throw new Error('A valid "url" parameter must provided.');let i=r?xi.BLANK:this.externalLinkTarget,s=this.externalLinkRel;this.externalLinkEnabled?e.href=e.title=t:(e.href="",e.title=`Disabled: ${t}`,e.onclick=()=>!1);let o="";switch(i){case xi.NONE:break;case xi.SELF:o="_self";break;case xi.BLANK:o="_blank";break;case xi.PARENT:o="_parent";break;case xi.TOP:o="_top";break}e.target=o,e.rel=typeof s=="string"?s:eF}getDestinationHash(e){if(typeof e=="string"){if(e.length>0)return this.getAnchorUrl("#"+escape(e))}else if(Array.isArray(e)){let t=JSON.stringify(e);if(t.length>0)return this.getAnchorUrl("#"+escape(t))}return this.getAnchorUrl("")}getAnchorUrl(e){return this.baseUrl?this.baseUrl+e:e}setHash(e){if(!this.pdfDocument)return;let t,r;if(e.includes("=")){let i=Dd(e);if(i.has("search")){let s=i.get("search").replaceAll('"',""),o=i.get("phrase")==="true";this.eventBus.dispatch("findfromurlhash",{source:this,query:o?s:s.match(/\S+/g)})}if(i.has("page")&&(t=i.get("page")|0||1),i.has("zoom")){let s=i.get("zoom").split(","),o=s[0],a=parseFloat(o);o.includes("Fit")?o==="Fit"||o==="FitB"?r=[null,{name:o}]:o==="FitH"||o==="FitBH"||o==="FitV"||o==="FitBV"?r=[null,{name:o},s.length>1?s[1]|0:null]:o==="FitR"?s.length!==5?console.error('PDFLinkService.setHash: Not enough parameters for "FitR".'):r=[null,{name:o},s[1]|0,s[2]|0,s[3]|0,s[4]|0]:console.error(`PDFLinkService.setHash: "${o}" is not a valid zoom value.`):r=[null,{name:"XYZ"},s.length>1?s[1]|0:null,s.length>2?s[2]|0:null,a?a/100:o]}r?this.pdfViewer.scrollPageIntoView({pageNumber:t||this.page,destArray:r,allowNegativeOffset:!0}):t&&(this.page=t),i.has("pagemode")&&this.eventBus.dispatch("pagemode",{source:this,mode:i.get("pagemode")}),i.has("nameddest")&&this.goToDestination(i.get("nameddest"));return}r=unescape(e);try{r=JSON.parse(r),Array.isArray(r)||(r=r.toString())}catch{}if(typeof r=="string"||n.#e(r)){this.goToDestination(r);return}console.error(`PDFLinkService.setHash: "${unescape(e)}" is not a valid destination.`)}executeNamedAction(e){if(this.pdfDocument){switch(e){case"GoBack":this.pdfHistory?.back();break;case"GoForward":this.pdfHistory?.forward();break;case"NextPage":this.pdfViewer.nextPage();break;case"PrevPage":this.pdfViewer.previousPage();break;case"LastPage":this.page=this.pagesCount;break;case"FirstPage":this.page=1;break;default:break}this.eventBus.dispatch("namedaction",{source:this,action:e})}}executeSetOCGState(e){return I(this,null,function*(){if(!this.pdfDocument)return;let t=this.pdfDocument,r=yield this.pdfViewer.optionalContentConfigPromise;t===this.pdfDocument&&(r.setOCGState(e),this.pdfViewer.optionalContentConfigPromise=Promise.resolve(r))})}static#e(e){if(!Array.isArray(e)||e.length<2)return!1;let[t,r,...i]=e;if(!(typeof t=="object"&&Number.isInteger(t?.num)&&Number.isInteger(t?.gen))&&!Number.isInteger(t)||!(typeof r=="object"&&typeof r?.name=="string"))return!1;let s=i.length,o=!0;switch(r.name){case"XYZ":if(s<2||s>3)return!1;break;case"Fit":case"FitB":return s===0;case"FitH":case"FitBH":case"FitV":case"FitBV":if(s>1)return!1;break;case"FitR":if(s!==4)return!1;o=!1;break;default:return!1}for(let a of i)if(!(typeof a=="number"||o&&a===null))return!1;return!0}},Ta=class extends vd{setDocument(e,t=null){}},{AbortException:tF,AnnotationEditorLayer:nF,AnnotationEditorParamsType:V5,AnnotationEditorType:Ht,AnnotationEditorUIManager:rF,AnnotationLayer:iF,AnnotationMode:mr,build:H5,ColorPicker:U5,createValidAbsoluteUrl:sF,DOMSVGFactory:$5,DrawLayer:oF,FeatureTest:z5,fetchData:lS,getDocument:W5,getFilenameFromUrl:q5,getPdfFilenameFromUrl:aF,getXfaPageViewport:G5,GlobalWorkerOptions:Y5,ImageKind:K5,InvalidPDFException:X5,isDataScheme:Q5,isPdfFile:lF,MissingPDFException:Z5,noContextMenu:J5,normalizeUnicode:cF,OPS:eq,OutputScale:uF,PasswordResponses:tq,PDFDataRangeTransport:nq,PDFDateString:rq,PDFWorker:iq,PermissionFlag:fd,PixelsPerInch:gr,RenderingCancelledException:ry,setLayerDimensions:dF,shadow:yd,TextLayer:hF,UnexpectedResponseException:sq,Util:oq,VerbosityLevel:aq,version:cS,XfaLayer:Xv}=globalThis.pdfjsLib,bd=class{#e=null;#t=null;constructor({pdfPage:e,linkService:t,downloadManager:r,annotationStorage:i=null,imageResourcesPath:s="",renderForms:o=!0,enableScripting:a=!1,hasJSActionsPromise:l=null,fieldObjectsPromise:c=null,annotationCanvasMap:u=null,accessibilityManager:d=null,annotationEditorUIManager:h=null,onAppend:f=null}){this.pdfPage=e,this.linkService=t,this.downloadManager=r,this.imageResourcesPath=s,this.renderForms=o,this.annotationStorage=i,this.enableScripting=a,this._hasJSActionsPromise=l||Promise.resolve(!1),this._fieldObjectsPromise=c||Promise.resolve(null),this._annotationCanvasMap=u,this._accessibilityManager=d,this._annotationEditorUIManager=h,this.#e=f,this.annotationLayer=null,this.div=null,this._cancelled=!1,this._eventBus=t.eventBus}render(e,t,r="display"){return I(this,null,function*(){if(this.div){if(this._cancelled||!this.annotationLayer)return;this.annotationLayer.update({viewport:e.clone({dontFlip:!0})});return}let[i,s,o]=yield Promise.all([this.pdfPage.getAnnotations({intent:r}),this._hasJSActionsPromise,this._fieldObjectsPromise]);if(this._cancelled)return;let a=this.div=document.createElement("div");if(a.className="annotationLayer",this.#e?.(a),i.length===0){this.hide();return}this.annotationLayer=new iF({div:a,accessibilityManager:this._accessibilityManager,annotationCanvasMap:this._annotationCanvasMap,annotationEditorUIManager:this._annotationEditorUIManager,page:this.pdfPage,viewport:e.clone({dontFlip:!0}),structTreeLayer:t?.structTreeLayer||null}),yield this.annotationLayer.render({annotations:i,imageResourcesPath:this.imageResourcesPath,renderForms:this.renderForms,linkService:this.linkService,downloadManager:this.downloadManager,annotationStorage:this.annotationStorage,enableScripting:this.enableScripting,hasJSActions:s,fieldObjects:o}),this.linkService.isInPresentationMode&&this.#n(Ls.FULLSCREEN),this.#t||(this.#t=new AbortController,this._eventBus?._on("presentationmodechanged",l=>{this.#n(l.state)},{signal:this.#t.signal}))})}cancel(){this._cancelled=!0,this.#t?.abort(),this.#t=null}hide(){this.div&&(this.div.hidden=!0)}hasEditableAnnotations(){return!!this.annotationLayer?.hasEditableAnnotations()}#n(e){if(!this.div)return;let t=!1;switch(e){case Ls.FULLSCREEN:t=!0;break;case Ls.NORMAL:break;default:return}for(let r of this.div.childNodes)r.hasAttribute("data-internal-link")||(r.inert=t)}};function uS(n,e){let t=document.createElement("a");if(!t.click)throw new Error('DownloadManager: "a.click()" is not supported.');t.href=n,t.target="_parent","download"in t&&(t.download=e),(document.body||document.documentElement).append(t),t.click(),t.remove()}var iy=class{#e=new WeakMap;downloadData(e,t,r){let i=URL.createObjectURL(new Blob([e],{type:r}));uS(i,t)}openOrDownloadData(e,t,r=null){let s=lF(t)?"application/pdf":"";return this.downloadData(e,t,s),!1}download(e,t,r){let i;if(e)i=URL.createObjectURL(new Blob([e],{type:"application/pdf"}));else{if(!sF(t,"http://example.com")){console.error(`download - not a valid URL: ${t}`);return}i=t+"#pdfjs.action=download"}uS(i,r)}},dS={EVENT:"event",TIMEOUT:"timeout"};function fF(r){return I(this,arguments,function*({target:n,name:e,delay:t=0}){if(typeof n!="object"||!(e&&typeof e=="string")||!(Number.isInteger(t)&&t>=0))throw new Error("waitOnEventOrTimeout - invalid parameters.");let{promise:i,resolve:s}=Promise.withResolvers(),o=new AbortController;function a(u){o.abort(),clearTimeout(c),s(u)}let l=n instanceof wd?"_on":"addEventListener";n[l](e,a.bind(null,dS.EVENT),{signal:o.signal});let c=setTimeout(a.bind(null,dS.TIMEOUT),t);return i})}var wd=class{#e=Object.create(null);on(e,t,r=null){this._on(e,t,{external:!0,once:r?.once,signal:r?.signal})}off(e,t,r=null){this._off(e,t)}dispatch(e,t){let r=this.#e[e];if(!r||r.length===0)return;let i;for(let{listener:s,external:o,once:a}of r.slice(0)){if(a&&this._off(e,s),o){(i||=[]).push(s);continue}s(t)}if(i){for(let s of i)s(t);i=null}}_on(e,t,r=null){let i=null;if(r?.signal instanceof AbortSignal){let{signal:o}=r;if(o.aborted){console.error("Cannot use an `aborted` signal.");return}let a=()=>this._off(e,t);i=()=>o.removeEventListener("abort",a),o.addEventListener("abort",a)}(this.#e[e]||=[]).push({listener:t,external:r?.external===!0,once:r?.once===!0,rmAbort:i})}_off(e,t,r=null){let i=this.#e[e];if(i)for(let s=0,o=i.length;s<o;s++){let a=i[s];if(a.listener===t){a.rmAbort?.(),i.splice(s,1);return}}}};var Fs=class{constructor(e){this.value=e}valueOf(){return this.value}},qe=class extends Fs{constructor(e="???"){super(e)}toString(e){return`{${this.value}}`}},bn=class extends Fs{constructor(e,t={}){super(e),this.opts=t}toString(e){try{return e.memoizeIntlObject(Intl.NumberFormat,this.opts).format(this.value)}catch(t){return e.reportError(t),this.value.toString(10)}}},Di=class extends Fs{constructor(e,t={}){super(e),this.opts=t}toString(e){try{return e.memoizeIntlObject(Intl.DateTimeFormat,this.opts).format(this.value)}catch(t){return e.reportError(t),new Date(this.value).toISOString()}}},hS=100,pF="\u2068",gF="\u2069";function mF(n,e,t){if(t===e||t instanceof bn&&e instanceof bn&&t.value===e.value)return!0;if(e instanceof bn&&typeof t=="string"){let r=n.memoizeIntlObject(Intl.PluralRules,e.opts).select(e.value);if(t===r)return!0}return!1}function fS(n,e,t){return e[t]?js(n,e[t].value):(n.reportError(new RangeError("No default")),new qe)}function sy(n,e){let t=[],r=Object.create(null);for(let i of e)i.type==="narg"?r[i.name]=Ma(n,i.value):t.push(Ma(n,i));return{positional:t,named:r}}function Ma(n,e){switch(e.type){case"str":return e.value;case"num":return new bn(e.value,{minimumFractionDigits:e.precision});case"var":return vF(n,e);case"mesg":return yF(n,e);case"term":return bF(n,e);case"func":return wF(n,e);case"select":return EF(n,e);default:return new qe}}function vF(n,{name:e}){let t;if(n.params)if(Object.prototype.hasOwnProperty.call(n.params,e))t=n.params[e];else return new qe(`$${e}`);else if(n.args&&Object.prototype.hasOwnProperty.call(n.args,e))t=n.args[e];else return n.reportError(new ReferenceError(`Unknown variable: $${e}`)),new qe(`$${e}`);if(t instanceof Fs)return t;switch(typeof t){case"string":return t;case"number":return new bn(t);case"object":if(t instanceof Date)return new Di(t.getTime());default:return n.reportError(new TypeError(`Variable type not supported: $${e}, ${typeof t}`)),new qe(`$${e}`)}}function yF(n,{name:e,attr:t}){let r=n.bundle._messages.get(e);if(!r)return n.reportError(new ReferenceError(`Unknown message: ${e}`)),new qe(e);if(t){let i=r.attributes[t];return i?js(n,i):(n.reportError(new ReferenceError(`Unknown attribute: ${t}`)),new qe(`${e}.${t}`))}return r.value?js(n,r.value):(n.reportError(new ReferenceError(`No value: ${e}`)),new qe(e))}function bF(n,{name:e,attr:t,args:r}){let i=`-${e}`,s=n.bundle._terms.get(i);if(!s)return n.reportError(new ReferenceError(`Unknown term: ${i}`)),new qe(i);if(t){let a=s.attributes[t];if(a){n.params=sy(n,r).named;let l=js(n,a);return n.params=null,l}return n.reportError(new ReferenceError(`Unknown attribute: ${t}`)),new qe(`${i}.${t}`)}n.params=sy(n,r).named;let o=js(n,s.value);return n.params=null,o}function wF(n,{name:e,args:t}){let r=n.bundle._functions[e];if(!r)return n.reportError(new ReferenceError(`Unknown function: ${e}()`)),new qe(`${e}()`);if(typeof r!="function")return n.reportError(new TypeError(`Function ${e}() is not callable`)),new qe(`${e}()`);try{let i=sy(n,t);return r(i.positional,i.named)}catch(i){return n.reportError(i),new qe(`${e}()`)}}function EF(n,{selector:e,variants:t,star:r}){let i=Ma(n,e);if(i instanceof qe)return fS(n,t,r);for(let s of t){let o=Ma(n,s.key);if(mF(n,i,o))return js(n,s.value)}return fS(n,t,r)}function OS(n,e){if(n.dirty.has(e))return n.reportError(new RangeError("Cyclic reference")),new qe;n.dirty.add(e);let t=[],r=n.bundle._useIsolating&&e.length>1;for(let i of e){if(typeof i=="string"){t.push(n.bundle._transform(i));continue}if(n.placeables++,n.placeables>hS)throw n.dirty.delete(e),new RangeError(`Too many placeables expanded: ${n.placeables}, max allowed is ${hS}`);r&&t.push(pF),t.push(Ma(n,i).toString(n)),r&&t.push(gF)}return n.dirty.delete(e),t.join("")}function js(n,e){return typeof e=="string"?n.bundle._transform(e):OS(n,e)}var oy=class{constructor(e,t,r){this.dirty=new WeakSet,this.params=null,this.placeables=0,this.bundle=e,this.errors=t,this.args=r}reportError(e){if(!this.errors||!(e instanceof Error))throw e;this.errors.push(e)}memoizeIntlObject(e,t){let r=this.bundle._intls.get(e);r||(r={},this.bundle._intls.set(e,r));let i=JSON.stringify(t);return r[i]||(r[i]=new e(this.bundle.locales,t)),r[i]}};function Ed(n,e){let t=Object.create(null);for(let[r,i]of Object.entries(n))e.includes(r)&&(t[r]=i.valueOf());return t}var pS=["unitDisplay","currencyDisplay","useGrouping","minimumIntegerDigits","minimumFractionDigits","maximumFractionDigits","minimumSignificantDigits","maximumSignificantDigits"];function CF(n,e){let t=n[0];if(t instanceof qe)return new qe(`NUMBER(${t.valueOf()})`);if(t instanceof bn)return new bn(t.valueOf(),_(_({},t.opts),Ed(e,pS)));if(t instanceof Di)return new bn(t.valueOf(),_({},Ed(e,pS)));throw new TypeError("Invalid argument to NUMBER")}var gS=["dateStyle","timeStyle","fractionalSecondDigits","dayPeriod","hour12","weekday","era","year","month","day","hour","minute","second","timeZoneName"];function _F(n,e){let t=n[0];if(t instanceof qe)return new qe(`DATETIME(${t.valueOf()})`);if(t instanceof Di)return new Di(t.valueOf(),_(_({},t.opts),Ed(e,gS)));if(t instanceof bn)return new Di(t.valueOf(),_({},Ed(e,gS)));throw new TypeError("Invalid argument to DATETIME")}var mS=new Map;function AF(n){let e=Array.isArray(n)?n.join(" "):n,t=mS.get(e);return t===void 0&&(t=new Map,mS.set(e,t)),t}var ay=class{constructor(e,{functions:t,useIsolating:r=!0,transform:i=s=>s}={}){this._terms=new Map,this._messages=new Map,this.locales=Array.isArray(e)?e:[e],this._functions=_({NUMBER:CF,DATETIME:_F},t),this._useIsolating=r,this._transform=i,this._intls=AF(e)}hasMessage(e){return this._messages.has(e)}getMessage(e){return this._messages.get(e)}addResource(e,{allowOverrides:t=!1}={}){let r=[];for(let i=0;i<e.body.length;i++){let s=e.body[i];if(s.id.startsWith("-")){if(t===!1&&this._terms.has(s.id)){r.push(new Error(`Attempt to override an existing term: "${s.id}"`));continue}this._terms.set(s.id,s)}else{if(t===!1&&this._messages.has(s.id)){r.push(new Error(`Attempt to override an existing message: "${s.id}"`));continue}this._messages.set(s.id,s)}}return r}formatPattern(e,t=null,r=null){if(typeof e=="string")return this._transform(e);let i=new oy(this,r,t);try{return OS(i,e).toString(i)}catch(s){if(i.errors&&s instanceof Error)return i.errors.push(s),new qe().toString(i);throw s}}},Qv=/^(-?[a-zA-Z][\w-]*) *= */gm,vS=/\.([a-zA-Z][\w-]*) *= */y,SF=/\*?\[/y,Zv=/(-?[0-9]+(?:\.([0-9]+))?)/y,xF=/([a-zA-Z][\w-]*)/y,yS=/([$-])?([a-zA-Z][\w-]*)(?:\.([a-zA-Z][\w-]*))?/y,IF=/^[A-Z][A-Z0-9_-]*$/,pd=/([^{}\n\r]+)/y,DF=/([^\\"\n\r]*)/y,bS=/\\([\\"])/y,wS=/\\u([a-fA-F0-9]{4})|\\U([a-fA-F0-9]{6})/y,TF=/^\n+/,ES=/ +$/,MF=/ *\r?\n/g,RF=/( *)$/,OF=/{\s*/y,CS=/\s*}/y,PF=/\[\s*/y,NF=/\s*] */y,kF=/\s*\(\s*/y,LF=/\s*->\s*/y,FF=/\s*:\s*/y,jF=/\s*,?\s*/y,BF=/\s+/y,ly=class{constructor(e){this.body=[],Qv.lastIndex=0;let t=0;for(;;){let E=Qv.exec(e);if(E===null)break;t=Qv.lastIndex;try{this.body.push(l(E[1]))}catch(x){if(x instanceof SyntaxError)continue;throw x}}function r(E){return E.lastIndex=t,E.test(e)}function i(E,x){if(e[t]===E)return t++,!0;if(x)throw new x(`Expected ${E}`);return!1}function s(E,x){if(r(E))return t=E.lastIndex,!0;if(x)throw new x(`Expected ${E.toString()}`);return!1}function o(E){E.lastIndex=t;let x=E.exec(e);if(x===null)throw new SyntaxError(`Expected ${E.toString()}`);return t=E.lastIndex,x}function a(E){return o(E)[1]}function l(E){let x=u(),N=c();if(x===null&&Object.keys(N).length===0)throw new SyntaxError("Expected message value or attributes");return{id:E,value:x,attributes:N}}function c(){let E=Object.create(null);for(;r(vS);){let x=a(vS),N=u();if(N===null)throw new SyntaxError("Expected attribute value");E[x]=N}return E}function u(){let E;if(r(pd)&&(E=a(pd)),e[t]==="{"||e[t]==="}")return d(E?[E]:[],1/0);let x=S();return x?E?d([E,x],x.length):(x.value=T(x.value,TF),d([x],x.length)):E?T(E,ES):null}function d(E=[],x){for(;;){if(r(pd)){E.push(a(pd));continue}if(e[t]==="{"){E.push(h());continue}if(e[t]==="}")throw new SyntaxError("Unbalanced closing brace");let ce=S();if(ce){E.push(ce),x=Math.min(x,ce.length);continue}break}let N=E.length-1,pe=E[N];typeof pe=="string"&&(E[N]=T(pe,ES));let de=[];for(let ce of E)ce instanceof Cd&&(ce=ce.value.slice(0,ce.value.length-x)),ce&&de.push(ce);return de}function h(){s(OF,SyntaxError);let E=f();if(s(CS))return E;if(s(LF)){let x=v();return s(CS,SyntaxError),_({type:"select",selector:E},x)}throw new SyntaxError("Unclosed placeable")}function f(){if(e[t]==="{")return h();if(r(yS)){let[,E,x,N=null]=o(yS);if(E==="$")return{type:"var",name:x};if(s(kF)){let pe=p();if(E==="-")return{type:"term",name:x,attr:N,args:pe};if(IF.test(x))return{type:"func",name:x,args:pe};throw new SyntaxError("Function names must be all upper-case")}return E==="-"?{type:"term",name:x,attr:N,args:[]}:{type:"mesg",name:x,attr:N}}return y()}function p(){let E=[];for(;;){switch(e[t]){case")":return t++,E;case void 0:throw new SyntaxError("Unclosed argument list")}E.push(g()),s(jF)}}function g(){let E=f();return E.type!=="mesg"?E:s(FF)?{type:"narg",name:E.name,value:y()}:E}function v(){let E=[],x=0,N;for(;r(SF);){i("*")&&(N=x);let pe=m(),de=u();if(de===null)throw new SyntaxError("Expected variant value");E[x++]={key:pe,value:de}}if(x===0)return null;if(N===void 0)throw new SyntaxError("Expected default variant");return{variants:E,star:N}}function m(){s(PF,SyntaxError);let E;return r(Zv)?E=w():E={type:"str",value:a(xF)},s(NF,SyntaxError),E}function y(){if(r(Zv))return w();if(e[t]==='"')return b();throw new SyntaxError("Invalid expression")}function w(){let[,E,x=""]=o(Zv),N=x.length;return{type:"num",value:parseFloat(E),precision:N}}function b(){i('"',SyntaxError);let E="";for(;;){if(E+=a(DF),e[t]==="\\"){E+=C();continue}if(i('"'))return{type:"str",value:E};throw new SyntaxError("Unclosed string literal")}}function C(){if(r(bS))return a(bS);if(r(wS)){let[,E,x]=o(wS),N=parseInt(E||x,16);return N<=55295||57344<=N?String.fromCodePoint(N):"\uFFFD"}throw new SyntaxError("Unknown escape sequence")}function S(){let E=t;switch(s(BF),e[t]){case".":case"[":case"*":case"}":case void 0:return!1;case"{":return M(e.slice(E,t))}return e[t-1]===" "?M(e.slice(E,t)):!1}function T(E,x){return E.replace(x,"")}function M(E){let x=E.replace(MF,`
`),N=RF.exec(E)[1].length;return new Cd(x,N)}}},Cd=class{constructor(e,t){this.value=e,this.length=t}},VF=/<|&#?\w+;/,HF={"http://www.w3.org/1999/xhtml":["em","strong","small","s","cite","q","dfn","abbr","data","time","code","var","samp","kbd","sub","sup","i","b","u","mark","bdi","bdo","span","br","wbr"]},UF={"http://www.w3.org/1999/xhtml":{global:["title","aria-label","aria-valuetext"],a:["download"],area:["download","alt"],input:["alt","placeholder"],menuitem:["label"],menu:["label"],optgroup:["label"],option:["label"],track:["label"],img:["alt"],textarea:["placeholder"],th:["abbr"]},"http://www.mozilla.org/keymaster/gatekeeper/there.is.only.xul":{global:["accesskey","aria-label","aria-valuetext","label","title","tooltiptext"],description:["value"],key:["key","keycode"],label:["value"],textbox:["placeholder","value"]}};function $F(n,e){let{value:t}=e;if(typeof t=="string")if(n.localName==="title"&&n.namespaceURI==="http://www.w3.org/1999/xhtml")n.textContent=t;else if(!VF.test(t))n.textContent=t;else{let r=n.ownerDocument.createElementNS("http://www.w3.org/1999/xhtml","template");r.innerHTML=t,zF(r.content,n)}PS(e,n)}function zF(n,e){for(let t of n.childNodes)if(t.nodeType!==t.TEXT_NODE){if(t.hasAttribute("data-l10n-name")){let r=qF(e,t);n.replaceChild(r,t);continue}if(YF(t)){let r=GF(t);n.replaceChild(r,t);continue}console.warn(`An element of forbidden type "${t.localName}" was found in the translation. Only safe text-level elements and elements with data-l10n-name are allowed.`),n.replaceChild(cy(t),t)}e.textContent="",e.appendChild(n)}function WF(n,e){if(!n)return!1;for(let t of n)if(t.name===e)return!0;return!1}function PS(n,e){let t=e.hasAttribute("data-l10n-attrs")?e.getAttribute("data-l10n-attrs").split(",").map(r=>r.trim()):null;for(let r of Array.from(e.attributes))_S(r.name,e,t)&&!WF(n.attributes,r.name)&&e.removeAttribute(r.name);if(n.attributes)for(let r of Array.from(n.attributes))_S(r.name,e,t)&&e.getAttribute(r.name)!==r.value&&e.setAttribute(r.name,r.value)}function qF(n,e){let t=e.getAttribute("data-l10n-name"),r=n.querySelector(`[data-l10n-name="${t}"]`);if(!r)return console.warn(`An element named "${t}" wasn't found in the source.`),cy(e);if(r.localName!==e.localName)return console.warn(`An element named "${t}" was found in the translation but its type ${e.localName} didn't match the element found in the source (${r.localName}).`),cy(e);n.removeChild(r);let i=r.cloneNode(!1);return NS(e,i)}function GF(n){let e=n.ownerDocument.createElement(n.localName);return NS(n,e)}function cy(n){return n.ownerDocument.createTextNode(n.textContent)}function YF(n){let e=HF[n.namespaceURI];return e&&e.includes(n.localName)}function _S(n,e,t=null){if(t&&t.includes(n))return!0;let r=UF[e.namespaceURI];if(!r)return!1;let i=n.toLowerCase(),s=e.localName;if(r.global.includes(i))return!0;if(!r[s])return!1;if(r[s].includes(i))return!0;if(e.namespaceURI==="http://www.w3.org/1999/xhtml"&&s==="input"&&i==="value"){let o=e.type.toLowerCase();if(o==="submit"||o==="button"||o==="reset")return!0}return!1}function NS(n,e){return e.textContent=n.textContent,PS(n,e),e}var uy=class extends Array{static from(e){return e instanceof this?e:new this(e)}};var dy=class extends uy{constructor(e){if(super(),Symbol.asyncIterator in Object(e))this.iterator=e[Symbol.asyncIterator]();else if(Symbol.iterator in Object(e))this.iterator=e[Symbol.iterator]();else throw new TypeError("Argument must implement the iteration protocol.")}[Symbol.asyncIterator](){let e=this,t=0;return{next(){return I(this,null,function*(){return e.length<=t&&e.push(e.iterator.next()),e[t++]})}}}touchNext(e=1){return I(this,null,function*(){let t=0;for(;t++<e;){let r=this[this.length-1];if(r&&(yield r).done)break;this.push(this.iterator.next())}return this[this.length-1]})}},hy=class{constructor(e=[],t){this.resourceIds=e,this.generateBundles=t,this.onChange(!0)}addResourceIds(e,t=!1){return this.resourceIds.push(...e),this.onChange(t),this.resourceIds.length}removeResourceIds(e){return this.resourceIds=this.resourceIds.filter(t=>!e.includes(t)),this.onChange(),this.resourceIds.length}formatWithFallback(e,t){return I(this,null,function*(){let r=[],i=!1;try{for(var s=lb(this.bundles),o,a,l;o=!(a=yield s.next()).done;o=!1){let c=a.value;i=!0;let u=QF(t,c,e,r);if(u.size===0)break;if(typeof console<"u"){let d=c.locales[0],h=Array.from(u).join(", ");console.warn(`[fluent] Missing translations in ${d}: ${h}`)}}}catch{l=[a]}finally{try{o&&(a=s.return)&&(yield a.call(s))}finally{if(l)throw l[0]}}return!i&&typeof console<"u"&&console.warn(`[fluent] Request for keys failed because no resource bundles got generated.
  keys: ${JSON.stringify(e)}.
  resourceIds: ${JSON.stringify(this.resourceIds)}.`),r})}formatMessages(e){return this.formatWithFallback(e,XF)}formatValues(e){return this.formatWithFallback(e,KF)}formatValue(e,t){return I(this,null,function*(){let[r]=yield this.formatValues([{id:e,args:t}]);return r})}handleEvent(){this.onChange()}onChange(e=!1){this.bundles=dy.from(this.generateBundles(this.resourceIds)),e&&this.bundles.touchNext(2)}};function KF(n,e,t,r){return t.value?n.formatPattern(t.value,r,e):null}function XF(n,e,t,r){let i={value:null,attributes:null};t.value&&(i.value=n.formatPattern(t.value,r,e));let s=Object.keys(t.attributes);if(s.length>0){i.attributes=new Array(s.length);for(let[o,a]of s.entries()){let l=n.formatPattern(t.attributes[a],r,e);i.attributes[o]={name:a,value:l}}}return i}function QF(n,e,t,r){let i=[],s=new Set;return t.forEach(({id:o,args:a},l)=>{if(r[l]!==void 0)return;let c=e.getMessage(o);if(c){if(i.length=0,r[l]=n(e,i,c,a),i.length>0&&typeof console<"u"){let u=e.locales[0],d=i.join(", ");console.warn(`[fluent][resolver] errors in ${u}/${o}: ${d}.`)}}else s.add(o)}),s}var Ii="data-l10n-id",Sa="data-l10n-args",ZF=`[${Ii}]`,fy=class extends hy{constructor(e,t){super(e,t),this.roots=new Set,this.pendingrAF=null,this.pendingElements=new Set,this.windowElement=null,this.mutationObserver=null,this.observerConfig={attributes:!0,characterData:!1,childList:!0,subtree:!0,attributeFilter:[Ii,Sa]}}onChange(e=!1){super.onChange(e),this.roots&&this.translateRoots()}setAttributes(e,t,r){return e.setAttribute(Ii,t),r?e.setAttribute(Sa,JSON.stringify(r)):e.removeAttribute(Sa),e}getAttributes(e){return{id:e.getAttribute(Ii),args:JSON.parse(e.getAttribute(Sa)||null)}}connectRoot(e){for(let t of this.roots)if(t===e||t.contains(e)||e.contains(t))throw new Error("Cannot add a root that overlaps with existing root.");if(this.windowElement){if(this.windowElement!==e.ownerDocument.defaultView)throw new Error(`Cannot connect a root:
          DOMLocalization already has a root from a different window.`)}else this.windowElement=e.ownerDocument.defaultView,this.mutationObserver=new this.windowElement.MutationObserver(t=>this.translateMutations(t));this.roots.add(e),this.mutationObserver.observe(e,this.observerConfig)}disconnectRoot(e){return this.roots.delete(e),this.pauseObserving(),this.roots.size===0?(this.mutationObserver=null,this.windowElement&&this.pendingrAF&&this.windowElement.cancelAnimationFrame(this.pendingrAF),this.windowElement=null,this.pendingrAF=null,this.pendingElements.clear(),!0):(this.resumeObserving(),!1)}translateRoots(){let e=Array.from(this.roots);return Promise.all(e.map(t=>this.translateFragment(t)))}pauseObserving(){this.mutationObserver&&(this.translateMutations(this.mutationObserver.takeRecords()),this.mutationObserver.disconnect())}resumeObserving(){if(this.mutationObserver)for(let e of this.roots)this.mutationObserver.observe(e,this.observerConfig)}translateMutations(e){for(let t of e)switch(t.type){case"attributes":t.target.hasAttribute("data-l10n-id")&&this.pendingElements.add(t.target);break;case"childList":for(let r of t.addedNodes)if(r.nodeType===r.ELEMENT_NODE)if(r.childElementCount)for(let i of this.getTranslatables(r))this.pendingElements.add(i);else r.hasAttribute(Ii)&&this.pendingElements.add(r);break}this.pendingElements.size>0&&this.pendingrAF===null&&(this.pendingrAF=this.windowElement.requestAnimationFrame(()=>{this.translateElements(Array.from(this.pendingElements)),this.pendingElements.clear(),this.pendingrAF=null}))}translateFragment(e){return this.translateElements(this.getTranslatables(e))}translateElements(e){return I(this,null,function*(){if(!e.length)return;let t=e.map(this.getKeysForElement),r=yield this.formatMessages(t);return this.applyTranslations(e,r)})}applyTranslations(e,t){this.pauseObserving();for(let r=0;r<e.length;r++)t[r]!==void 0&&$F(e[r],t[r]);this.resumeObserving()}getTranslatables(e){let t=Array.from(e.querySelectorAll(ZF));return typeof e.hasAttribute=="function"&&e.hasAttribute(Ii)&&t.push(e),t}getKeysForElement(e){return{id:e.getAttribute(Ii),args:JSON.parse(e.getAttribute(Sa)||null)}}},py=class n{#e;#t;#n;#r;constructor({lang:e,isRTL:t},r=null){this.#n=n.#i(e),this.#r=r,this.#e=t??n.#s(this.#n)?"rtl":"ltr"}_setL10n(e){this.#r=e}getLanguage(){return this.#n}getDirection(){return this.#e}get(e,t=null,r){return I(this,null,function*(){return Array.isArray(e)?(e=e.map(o=>({id:o})),(yield this.#r.formatMessages(e)).map(o=>o.value)):(yield this.#r.formatMessages([{id:e,args:t}]))[0]?.value||r})}translate(e){return I(this,null,function*(){(this.#t||=new Set).add(e);try{this.#r.connectRoot(e),yield this.#r.translateRoots()}catch{}})}translateOnce(e){return I(this,null,function*(){try{yield this.#r.translateElements([e])}catch(t){console.error(`translateOnce: "${t}".`)}})}destroy(){return I(this,null,function*(){if(this.#t){for(let e of this.#t)this.#r.disconnectRoot(e);this.#t.clear(),this.#t=null}this.#r.pauseObserving()})}pause(){this.#r.pauseObserving()}resume(){this.#r.resumeObserving()}static#i(e){return e=e?.toLowerCase()||"en-us",{en:"en-us",es:"es-es",fy:"fy-nl",ga:"ga-ie",gu:"gu-in",hi:"hi-in",hy:"hy-am",nb:"nb-no",ne:"ne-np",nn:"nn-no",pa:"pa-in",pt:"pt-pt",sv:"sv-se",zh:"zh-cn"}[e]||e}static#s(e){let t=e.split("-",1)[0];return["ar","he","fa","ps","ur"].includes(t)}};function AS(n,e){let t=new ly(e),r=new ay(n),i=r.addResource(t);return i.length&&console.error("L10n errors",i),r}var Bs=class n extends py{constructor(e){super({lang:e});let t=e?n.#e.bind(n,"en-us",this.getLanguage()):n.#r.bind(n,this.getLanguage());this._setL10n(new fy([],t))}static#e(e,t){return ah(this,null,function*(){let{baseURL:r,paths:i}=yield new oh(this.#n()),s=[t];if(e!==t){let o=t.split("-",1)[0];o!==t&&s.push(o),s.push(e)}for(let o of s){let a=yield new oh(this.#t(o,r,i));a?yield a:o==="en-us"&&(yield this.#i(o))}})}static#t(e,t,r){return I(this,null,function*(){let i=r[e];if(!i)return null;let s=new URL(i,t),o=yield lS(s,"text");return AS(e,o)})}static#n(){return I(this,null,function*(){try{let{href:e}=document.querySelector('link[type="application/l10n"]'),t=yield lS(e,"json");return{baseURL:e.replace(/[^/]*$/,"")||"./",paths:t}}catch{}return{baseURL:"./",paths:Object.create(null)}})}static#r(e){return ah(this,null,function*(){yield this.#i(e)})}static#i(e){return I(this,null,function*(){return AS(e,`pdfjs-previous-button =
    .title = Previous Page
pdfjs-previous-button-label = Previous
pdfjs-next-button =
    .title = Next Page
pdfjs-next-button-label = Next
pdfjs-page-input =
    .title = Page
pdfjs-of-pages = of { $pagesCount }
pdfjs-page-of-pages = ({ $pageNumber } of { $pagesCount })
pdfjs-zoom-out-button =
    .title = Zoom Out
pdfjs-zoom-out-button-label = Zoom Out
pdfjs-zoom-in-button =
    .title = Zoom In
pdfjs-zoom-in-button-label = Zoom In
pdfjs-zoom-select =
    .title = Zoom
pdfjs-presentation-mode-button =
    .title = Switch to Presentation Mode
pdfjs-presentation-mode-button-label = Presentation Mode
pdfjs-open-file-button =
    .title = Open File
pdfjs-open-file-button-label = Open
pdfjs-print-button =
    .title = Print
pdfjs-print-button-label = Print
pdfjs-save-button =
    .title = Save
pdfjs-save-button-label = Save
pdfjs-download-button =
    .title = Download
pdfjs-download-button-label = Download
pdfjs-bookmark-button =
    .title = Current Page (View URL from Current Page)
pdfjs-bookmark-button-label = Current Page
pdfjs-tools-button =
    .title = Tools
pdfjs-tools-button-label = Tools
pdfjs-first-page-button =
    .title = Go to First Page
pdfjs-first-page-button-label = Go to First Page
pdfjs-last-page-button =
    .title = Go to Last Page
pdfjs-last-page-button-label = Go to Last Page
pdfjs-page-rotate-cw-button =
    .title = Rotate Clockwise
pdfjs-page-rotate-cw-button-label = Rotate Clockwise
pdfjs-page-rotate-ccw-button =
    .title = Rotate Counterclockwise
pdfjs-page-rotate-ccw-button-label = Rotate Counterclockwise
pdfjs-cursor-text-select-tool-button =
    .title = Enable Text Selection Tool
pdfjs-cursor-text-select-tool-button-label = Text Selection Tool
pdfjs-cursor-hand-tool-button =
    .title = Enable Hand Tool
pdfjs-cursor-hand-tool-button-label = Hand Tool
pdfjs-scroll-page-button =
    .title = Use Page Scrolling
pdfjs-scroll-page-button-label = Page Scrolling
pdfjs-scroll-vertical-button =
    .title = Use Vertical Scrolling
pdfjs-scroll-vertical-button-label = Vertical Scrolling
pdfjs-scroll-horizontal-button =
    .title = Use Horizontal Scrolling
pdfjs-scroll-horizontal-button-label = Horizontal Scrolling
pdfjs-scroll-wrapped-button =
    .title = Use Wrapped Scrolling
pdfjs-scroll-wrapped-button-label = Wrapped Scrolling
pdfjs-spread-none-button =
    .title = Do not join page spreads
pdfjs-spread-none-button-label = No Spreads
pdfjs-spread-odd-button =
    .title = Join page spreads starting with odd-numbered pages
pdfjs-spread-odd-button-label = Odd Spreads
pdfjs-spread-even-button =
    .title = Join page spreads starting with even-numbered pages
pdfjs-spread-even-button-label = Even Spreads
pdfjs-document-properties-button =
    .title = Document Properties\u2026
pdfjs-document-properties-button-label = Document Properties\u2026
pdfjs-document-properties-file-name = File name:
pdfjs-document-properties-file-size = File size:
pdfjs-document-properties-size-kb = { NUMBER($kb, maximumSignificantDigits: 3) } KB ({ $b } bytes)
pdfjs-document-properties-size-mb = { NUMBER($mb, maximumSignificantDigits: 3) } MB ({ $b } bytes)
pdfjs-document-properties-title = Title:
pdfjs-document-properties-author = Author:
pdfjs-document-properties-subject = Subject:
pdfjs-document-properties-keywords = Keywords:
pdfjs-document-properties-creation-date = Creation Date:
pdfjs-document-properties-modification-date = Modification Date:
pdfjs-document-properties-date-time-string = { DATETIME($dateObj, dateStyle: "short", timeStyle: "medium") }
pdfjs-document-properties-creator = Creator:
pdfjs-document-properties-producer = PDF Producer:
pdfjs-document-properties-version = PDF Version:
pdfjs-document-properties-page-count = Page Count:
pdfjs-document-properties-page-size = Page Size:
pdfjs-document-properties-page-size-unit-inches = in
pdfjs-document-properties-page-size-unit-millimeters = mm
pdfjs-document-properties-page-size-orientation-portrait = portrait
pdfjs-document-properties-page-size-orientation-landscape = landscape
pdfjs-document-properties-page-size-name-a-three = A3
pdfjs-document-properties-page-size-name-a-four = A4
pdfjs-document-properties-page-size-name-letter = Letter
pdfjs-document-properties-page-size-name-legal = Legal
pdfjs-document-properties-page-size-dimension-string = { $width } \xD7 { $height } { $unit } ({ $orientation })
pdfjs-document-properties-page-size-dimension-name-string = { $width } \xD7 { $height } { $unit } ({ $name }, { $orientation })
pdfjs-document-properties-linearized = Fast Web View:
pdfjs-document-properties-linearized-yes = Yes
pdfjs-document-properties-linearized-no = No
pdfjs-document-properties-close-button = Close
pdfjs-print-progress-message = Preparing document for printing\u2026
pdfjs-print-progress-percent = { $progress }%
pdfjs-print-progress-close-button = Cancel
pdfjs-printing-not-supported = Warning: Printing is not fully supported by this browser.
pdfjs-printing-not-ready = Warning: The PDF is not fully loaded for printing.
pdfjs-toggle-sidebar-button =
    .title = Toggle Sidebar
pdfjs-toggle-sidebar-notification-button =
    .title = Toggle Sidebar (document contains outline/attachments/layers)
pdfjs-toggle-sidebar-button-label = Toggle Sidebar
pdfjs-document-outline-button =
    .title = Show Document Outline (double-click to expand/collapse all items)
pdfjs-document-outline-button-label = Document Outline
pdfjs-attachments-button =
    .title = Show Attachments
pdfjs-attachments-button-label = Attachments
pdfjs-layers-button =
    .title = Show Layers (double-click to reset all layers to the default state)
pdfjs-layers-button-label = Layers
pdfjs-thumbs-button =
    .title = Show Thumbnails
pdfjs-thumbs-button-label = Thumbnails
pdfjs-current-outline-item-button =
    .title = Find Current Outline Item
pdfjs-current-outline-item-button-label = Current Outline Item
pdfjs-findbar-button =
    .title = Find in Document
pdfjs-findbar-button-label = Find
pdfjs-additional-layers = Additional Layers
pdfjs-thumb-page-title =
    .title = Page { $page }
pdfjs-thumb-page-canvas =
    .aria-label = Thumbnail of Page { $page }
pdfjs-find-input =
    .title = Find
    .placeholder = Find in document\u2026
pdfjs-find-previous-button =
    .title = Find the previous occurrence of the phrase
pdfjs-find-previous-button-label = Previous
pdfjs-find-next-button =
    .title = Find the next occurrence of the phrase
pdfjs-find-next-button-label = Next
pdfjs-find-highlight-checkbox = Highlight All
pdfjs-find-match-case-checkbox-label = Match Case
pdfjs-find-match-diacritics-checkbox-label = Match Diacritics
pdfjs-find-entire-word-checkbox-label = Whole Words
pdfjs-find-reached-top = Reached top of document, continued from bottom
pdfjs-find-reached-bottom = Reached end of document, continued from top
pdfjs-find-match-count =
    { $total ->
        [one] { $current } of { $total } match
       *[other] { $current } of { $total } matches
    }
pdfjs-find-match-count-limit =
    { $limit ->
        [one] More than { $limit } match
       *[other] More than { $limit } matches
    }
pdfjs-find-not-found = Phrase not found
pdfjs-page-scale-width = Page Width
pdfjs-page-scale-fit = Page Fit
pdfjs-page-scale-auto = Automatic Zoom
pdfjs-page-scale-actual = Actual Size
pdfjs-page-scale-percent = { $scale }%
pdfjs-page-landmark =
    .aria-label = Page { $page }
pdfjs-loading-error = An error occurred while loading the PDF.
pdfjs-invalid-file-error = Invalid or corrupted PDF file.
pdfjs-missing-file-error = Missing PDF file.
pdfjs-unexpected-response-error = Unexpected server response.
pdfjs-rendering-error = An error occurred while rendering the page.
pdfjs-annotation-date-time-string = { DATETIME($dateObj, dateStyle: "short", timeStyle: "medium") }
pdfjs-text-annotation-type =
    .alt = [{ $type } Annotation]
pdfjs-password-label = Enter the password to open this PDF file.
pdfjs-password-invalid = Invalid password. Please try again.
pdfjs-password-ok-button = OK
pdfjs-password-cancel-button = Cancel
pdfjs-web-fonts-disabled = Web fonts are disabled: unable to use embedded PDF fonts.
pdfjs-editor-free-text-button =
    .title = Text
pdfjs-editor-free-text-button-label = Text
pdfjs-editor-ink-button =
    .title = Draw
pdfjs-editor-ink-button-label = Draw
pdfjs-editor-stamp-button =
    .title = Add or edit images
pdfjs-editor-stamp-button-label = Add or edit images
pdfjs-editor-highlight-button =
    .title = Highlight
pdfjs-editor-highlight-button-label = Highlight
pdfjs-highlight-floating-button1 =
    .title = Highlight
    .aria-label = Highlight
pdfjs-highlight-floating-button-label = Highlight
pdfjs-editor-remove-ink-button =
    .title = Remove drawing
pdfjs-editor-remove-freetext-button =
    .title = Remove text
pdfjs-editor-remove-stamp-button =
    .title = Remove image
pdfjs-editor-remove-highlight-button =
    .title = Remove highlight
pdfjs-editor-free-text-color-input = Color
pdfjs-editor-free-text-size-input = Size
pdfjs-editor-ink-color-input = Color
pdfjs-editor-ink-thickness-input = Thickness
pdfjs-editor-ink-opacity-input = Opacity
pdfjs-editor-stamp-add-image-button =
    .title = Add image
pdfjs-editor-stamp-add-image-button-label = Add image
pdfjs-editor-free-highlight-thickness-input = Thickness
pdfjs-editor-free-highlight-thickness-title =
    .title = Change thickness when highlighting items other than text
pdfjs-free-text2 =
    .aria-label = Text Editor
    .default-content = Start typing\u2026
pdfjs-ink =
    .aria-label = Draw Editor
pdfjs-ink-canvas =
    .aria-label = User-created image
pdfjs-editor-alt-text-button =
    .aria-label = Alt text
pdfjs-editor-alt-text-button-label = Alt text
pdfjs-editor-alt-text-edit-button =
    .aria-label = Edit alt text
pdfjs-editor-alt-text-dialog-label = Choose an option
pdfjs-editor-alt-text-dialog-description = Alt text (alternative text) helps when people can\u2019t see the image or when it doesn\u2019t load.
pdfjs-editor-alt-text-add-description-label = Add a description
pdfjs-editor-alt-text-add-description-description = Aim for 1-2 sentences that describe the subject, setting, or actions.
pdfjs-editor-alt-text-mark-decorative-label = Mark as decorative
pdfjs-editor-alt-text-mark-decorative-description = This is used for ornamental images, like borders or watermarks.
pdfjs-editor-alt-text-cancel-button = Cancel
pdfjs-editor-alt-text-save-button = Save
pdfjs-editor-alt-text-decorative-tooltip = Marked as decorative
pdfjs-editor-alt-text-textarea =
    .placeholder = For example, \u201CA young man sits down at a table to eat a meal\u201D
pdfjs-editor-resizer-top-left =
    .aria-label = Top left corner \u2014 resize
pdfjs-editor-resizer-top-middle =
    .aria-label = Top middle \u2014 resize
pdfjs-editor-resizer-top-right =
    .aria-label = Top right corner \u2014 resize
pdfjs-editor-resizer-middle-right =
    .aria-label = Middle right \u2014 resize
pdfjs-editor-resizer-bottom-right =
    .aria-label = Bottom right corner \u2014 resize
pdfjs-editor-resizer-bottom-middle =
    .aria-label = Bottom middle \u2014 resize
pdfjs-editor-resizer-bottom-left =
    .aria-label = Bottom left corner \u2014 resize
pdfjs-editor-resizer-middle-left =
    .aria-label = Middle left \u2014 resize
pdfjs-editor-highlight-colorpicker-label = Highlight color
pdfjs-editor-colorpicker-button =
    .title = Change color
pdfjs-editor-colorpicker-dropdown =
    .aria-label = Color choices
pdfjs-editor-colorpicker-yellow =
    .title = Yellow
pdfjs-editor-colorpicker-green =
    .title = Green
pdfjs-editor-colorpicker-blue =
    .title = Blue
pdfjs-editor-colorpicker-pink =
    .title = Pink
pdfjs-editor-colorpicker-red =
    .title = Red
pdfjs-editor-highlight-show-all-button-label = Show all
pdfjs-editor-highlight-show-all-button =
    .title = Show all
pdfjs-editor-new-alt-text-dialog-edit-label = Edit alt text (image description)
pdfjs-editor-new-alt-text-dialog-add-label = Add alt text (image description)
pdfjs-editor-new-alt-text-textarea =
    .placeholder = Write your description here\u2026
pdfjs-editor-new-alt-text-description = Short description for people who can\u2019t see the image or when the image doesn\u2019t load.
pdfjs-editor-new-alt-text-disclaimer1 = This alt text was created automatically and may be inaccurate.
pdfjs-editor-new-alt-text-disclaimer-learn-more-url = Learn more
pdfjs-editor-new-alt-text-create-automatically-button-label = Create alt text automatically
pdfjs-editor-new-alt-text-not-now-button = Not now
pdfjs-editor-new-alt-text-error-title = Couldn\u2019t create alt text automatically
pdfjs-editor-new-alt-text-error-description = Please write your own alt text or try again later.
pdfjs-editor-new-alt-text-error-close-button = Close
pdfjs-editor-new-alt-text-ai-model-downloading-progress = Downloading alt text AI model ({ $downloadedSize } of { $totalSize } MB)
    .aria-valuetext = Downloading alt text AI model ({ $downloadedSize } of { $totalSize } MB)
pdfjs-editor-new-alt-text-added-button =
    .aria-label = Alt text added
pdfjs-editor-new-alt-text-added-button-label = Alt text added
pdfjs-editor-new-alt-text-missing-button =
    .aria-label = Missing alt text
pdfjs-editor-new-alt-text-missing-button-label = Missing alt text
pdfjs-editor-new-alt-text-to-review-button =
    .aria-label = Review alt text
pdfjs-editor-new-alt-text-to-review-button-label = Review alt text
pdfjs-editor-new-alt-text-generated-alt-text-with-disclaimer = Created automatically: { $generatedAltText }
pdfjs-image-alt-text-settings-button =
    .title = Image alt text settings
pdfjs-image-alt-text-settings-button-label = Image alt text settings
pdfjs-editor-alt-text-settings-dialog-label = Image alt text settings
pdfjs-editor-alt-text-settings-automatic-title = Automatic alt text
pdfjs-editor-alt-text-settings-create-model-button-label = Create alt text automatically
pdfjs-editor-alt-text-settings-create-model-description = Suggests descriptions to help people who can\u2019t see the image or when the image doesn\u2019t load.
pdfjs-editor-alt-text-settings-download-model-label = Alt text AI model ({ $totalSize } MB)
pdfjs-editor-alt-text-settings-ai-model-description = Runs locally on your device so your data stays private. Required for automatic alt text.
pdfjs-editor-alt-text-settings-delete-model-button = Delete
pdfjs-editor-alt-text-settings-download-model-button = Download
pdfjs-editor-alt-text-settings-downloading-model-button = Downloading\u2026
pdfjs-editor-alt-text-settings-editor-title = Alt text editor
pdfjs-editor-alt-text-settings-show-dialog-button-label = Show alt text editor right away when adding an image
pdfjs-editor-alt-text-settings-show-dialog-description = Helps you make sure all your images have alt text.
pdfjs-editor-alt-text-settings-close-button = Close`)})}},JF=1e3,Jv=50,SS=1e3;function ey(){return document.location.hash}var gy=class{#e=null;constructor({linkService:e,eventBus:t}){this.linkService=e,this.eventBus=t,this._initialized=!1,this._fingerprint="",this.reset(),this.eventBus._on("pagesinit",()=>{this._isPagesLoaded=!1,this.eventBus._on("pagesloaded",r=>{this._isPagesLoaded=!!r.pagesCount},{once:!0})})}initialize({fingerprint:e,resetHistory:t=!1,updateUrl:r=!1}){if(!e||typeof e!="string"){console.error('PDFHistory.initialize: The "fingerprint" must be a non-empty string.');return}this._initialized&&this.reset();let i=this._fingerprint!==""&&this._fingerprint!==e;this._fingerprint=e,this._updateUrl=r===!0,this._initialized=!0,this.#d();let s=window.history.state;if(this._popStateInProgress=!1,this._blockHashChange=0,this._currentHash=ey(),this._numPositionUpdates=0,this._uid=this._maxUid=0,this._destination=null,this._position=null,!this.#i(s,!0)||t){let{hash:a,page:l,rotation:c}=this.#l(!0);if(!a||i||t){this.#t(null,!0);return}this.#t({hash:a,page:l,rotation:c},!0);return}let o=s.destination;this.#s(o,s.uid,!0),o.rotation!==void 0&&(this._initialRotation=o.rotation),o.dest?(this._initialBookmark=JSON.stringify(o.dest),this._destination.page=null):o.hash?this._initialBookmark=o.hash:o.page&&(this._initialBookmark=`page=${o.page}`)}reset(){this._initialized&&(this.#a(),this._initialized=!1,this.#o()),this._updateViewareaTimeout&&(clearTimeout(this._updateViewareaTimeout),this._updateViewareaTimeout=null),this._initialBookmark=null,this._initialRotation=null}push({namedDest:e=null,explicitDest:t,pageNumber:r}){if(!this._initialized)return;if(e&&typeof e!="string"){console.error(`PDFHistory.push: "${e}" is not a valid namedDest parameter.`);return}else if(Array.isArray(t)){if(!this.#r(r)&&(r!==null||this._destination)){console.error(`PDFHistory.push: "${r}" is not a valid pageNumber parameter.`);return}}else{console.error(`PDFHistory.push: "${t}" is not a valid explicitDest parameter.`);return}let i=e||JSON.stringify(t);if(!i)return;let s=!1;if(this._destination&&(e2(this._destination.hash,i)||t2(this._destination.dest,t))){if(this._destination.page)return;s=!0}this._popStateInProgress&&!s||(this.#t({dest:t,hash:i,page:r,rotation:this.linkService.rotation},s),this._popStateInProgress||(this._popStateInProgress=!0,Promise.resolve().then(()=>{this._popStateInProgress=!1})))}pushPage(e){if(this._initialized){if(!this.#r(e)){console.error(`PDFHistory.pushPage: "${e}" is not a valid page number.`);return}this._destination?.page!==e&&(this._popStateInProgress||(this.#t({dest:null,hash:`page=${e}`,page:e,rotation:this.linkService.rotation}),this._popStateInProgress||(this._popStateInProgress=!0,Promise.resolve().then(()=>{this._popStateInProgress=!1}))))}}pushCurrentPosition(){!this._initialized||this._popStateInProgress||this.#n()}back(){if(!this._initialized||this._popStateInProgress)return;let e=window.history.state;this.#i(e)&&e.uid>0&&window.history.back()}forward(){if(!this._initialized||this._popStateInProgress)return;let e=window.history.state;this.#i(e)&&e.uid<this._maxUid&&window.history.forward()}get popStateInProgress(){return this._initialized&&(this._popStateInProgress||this._blockHashChange>0)}get initialBookmark(){return this._initialized?this._initialBookmark:null}get initialRotation(){return this._initialized?this._initialRotation:null}#t(e,t=!1){let r=t||!this._destination,i={fingerprint:this._fingerprint,uid:r?this._uid:this._uid+1,destination:e};this.#s(e,i.uid);let s;if(this._updateUrl&&e?.hash){let o=document.location.href.split("#",1)[0];o.startsWith("file://")||(s=`${o}#${e.hash}`)}r?window.history.replaceState(i,"",s):window.history.pushState(i,"",s)}#n(e=!1){if(!this._position)return;let t=this._position;if(e&&(t=Object.assign(Object.create(null),this._position),t.temporary=!0),!this._destination){this.#t(t);return}if(this._destination.temporary){this.#t(t,!0);return}if(this._destination.hash===t.hash||!this._destination.page&&(Jv<=0||this._numPositionUpdates<=Jv))return;let r=!1;if(this._destination.page>=t.first&&this._destination.page<=t.page){if(this._destination.dest!==void 0||!this._destination.first)return;r=!0}this.#t(t,r)}#r(e){return Number.isInteger(e)&&e>0&&e<=this.linkService.pagesCount}#i(e,t=!1){if(!e)return!1;if(e.fingerprint!==this._fingerprint)if(t){if(typeof e.fingerprint!="string"||e.fingerprint.length!==this._fingerprint.length)return!1;let[r]=performance.getEntriesByType("navigation");if(r?.type!=="reload")return!1}else return!1;return!(!Number.isInteger(e.uid)||e.uid<0||e.destination===null||typeof e.destination!="object")}#s(e,t,r=!1){this._updateViewareaTimeout&&(clearTimeout(this._updateViewareaTimeout),this._updateViewareaTimeout=null),r&&e?.temporary&&delete e.temporary,this._destination=e,this._uid=t,this._maxUid=Math.max(this._maxUid,t),this._numPositionUpdates=0}#l(e=!1){let t=unescape(ey()).substring(1),r=Dd(t),i=r.get("nameddest")||"",s=r.get("page")|0;return(!this.#r(s)||e&&i.length>0)&&(s=null),{hash:t,page:s,rotation:this.linkService.rotation}}#c({location:e}){this._updateViewareaTimeout&&(clearTimeout(this._updateViewareaTimeout),this._updateViewareaTimeout=null),this._position={hash:e.pdfOpenParams.substring(1),page:this.linkService.page,first:e.pageNumber,rotation:e.rotation},!this._popStateInProgress&&(Jv>0&&this._isPagesLoaded&&this._destination&&!this._destination.page&&this._numPositionUpdates++,SS>0&&(this._updateViewareaTimeout=setTimeout(()=>{this._popStateInProgress||this.#n(!0),this._updateViewareaTimeout=null},SS)))}#u({state:e}){let t=ey(),r=this._currentHash!==t;if(this._currentHash=t,!e){this._uid++;let{hash:s,page:o,rotation:a}=this.#l();this.#t({hash:s,page:o,rotation:a},!0);return}if(!this.#i(e))return;this._popStateInProgress=!0,r&&(this._blockHashChange++,fF({target:window,name:"hashchange",delay:JF}).then(()=>{this._blockHashChange--}));let i=e.destination;this.#s(i,e.uid,!0),RS(i.rotation)&&(this.linkService.rotation=i.rotation),i.dest?this.linkService.goToDestination(i.dest):i.hash?this.linkService.setHash(i.hash):i.page&&(this.linkService.page=i.page),Promise.resolve().then(()=>{this._popStateInProgress=!1})}#a(){(!this._destination||this._destination.temporary)&&this.#n()}#d(){if(this.#e)return;this.#e=new AbortController;let{signal:e}=this.#e;this.eventBus._on("updateviewarea",this.#c.bind(this),{signal:e}),window.addEventListener("popstate",this.#u.bind(this),{signal:e}),window.addEventListener("pagehide",this.#a.bind(this),{signal:e})}#o(){this.#e?.abort(),this.#e=null}};function e2(n,e){return typeof n!="string"||typeof e!="string"?!1:n===e||Dd(n).get("nameddest")===e}function t2(n,e){function t(r,i){if(typeof r!=typeof i||Array.isArray(r)||Array.isArray(i))return!1;if(r!==null&&typeof r=="object"&&i!==null){if(Object.keys(r).length!==Object.keys(i).length)return!1;for(let s in r)if(!t(r[s],i[s]))return!1;return!0}return r===i||Number.isNaN(r)&&Number.isNaN(i)}if(!(Array.isArray(n)&&Array.isArray(e))||n.length!==e.length)return!1;for(let r=0,i=n.length;r<i;r++)if(!t(n[r],e[r]))return!1;return!0}var my=class{#e=null;#t=null;#n=null;#r=null;#i=null;#s;constructor(e){this.pdfPage=e.pdfPage,this.accessibilityManager=e.accessibilityManager,this.l10n=e.l10n,this.l10n||=new Bs,this.annotationEditorLayer=null,this.div=null,this._cancelled=!1,this.#s=e.uiManager,this.#e=e.annotationLayer||null,this.#i=e.textLayer||null,this.#t=e.drawLayer||null,this.#n=e.onAppend||null,this.#r=e.structTreeLayer||null}render(e,t="display"){return I(this,null,function*(){if(t!=="display"||this._cancelled)return;let r=e.clone({dontFlip:!0});if(this.div){this.annotationEditorLayer.update({viewport:r}),this.show();return}let i=this.div=document.createElement("div");i.className="annotationEditorLayer",i.hidden=!0,i.dir=this.#s.direction,this.#n?.(i),this.annotationEditorLayer=new nF({uiManager:this.#s,div:i,structTreeLayer:this.#r,accessibilityManager:this.accessibilityManager,pageIndex:this.pdfPage.pageNumber-1,l10n:this.l10n,viewport:r,annotationLayer:this.#e,textLayer:this.#i,drawLayer:this.#t});let s={viewport:r,div:i,annotations:null,intent:t};this.annotationEditorLayer.render(s),this.show()})}cancel(){this._cancelled=!0,this.div&&this.annotationEditorLayer.destroy()}hide(){this.div&&(this.div.hidden=!0)}show(){!this.div||this.annotationEditorLayer.isInvisible||(this.div.hidden=!1)}};{md=new Map;let n=navigator.userAgent||"",e=navigator.platform||"",t=navigator.maxTouchPoints||1,r=/Android/.test(n),i=/\b(iPad|iPhone|iPod)(?=;)/.test(n)||e==="MacIntel"&&t>1;(function(){(i||r)&&md.set("maxCanvasPixels",5242880)})(),function(){r&&md.set("useSystemFonts",!1)}()}var md,D={BROWSER:1,VIEWER:2,API:4,WORKER:8,EVENT_DISPATCH:16,PREFERENCE:128},vy={BOOLEAN:1,NUMBER:2,OBJECT:4,STRING:8,UNDEFINED:16},Un={allowedGlobalEvents:{value:null,kind:D.BROWSER},canvasMaxAreaInBytes:{value:-1,kind:D.BROWSER+D.API},isInAutomation:{value:!1,kind:D.BROWSER},localeProperties:{value:{lang:navigator.language||"en-US"},kind:D.BROWSER},nimbusDataStr:{value:"",kind:D.BROWSER},supportsCaretBrowsingMode:{value:!1,kind:D.BROWSER},supportsDocumentFonts:{value:!0,kind:D.BROWSER},supportsIntegratedFind:{value:!1,kind:D.BROWSER},supportsMouseWheelZoomCtrlKey:{value:!0,kind:D.BROWSER},supportsMouseWheelZoomMetaKey:{value:!0,kind:D.BROWSER},supportsPinchToZoom:{value:!0,kind:D.BROWSER},toolbarDensity:{value:0,kind:D.BROWSER+D.EVENT_DISPATCH},altTextLearnMoreUrl:{value:"",kind:D.VIEWER+D.PREFERENCE},annotationEditorMode:{value:0,kind:D.VIEWER+D.PREFERENCE},annotationMode:{value:2,kind:D.VIEWER+D.PREFERENCE},cursorToolOnLoad:{value:0,kind:D.VIEWER+D.PREFERENCE},debuggerSrc:{value:"./debugger.mjs",kind:D.VIEWER},defaultZoomDelay:{value:400,kind:D.VIEWER+D.PREFERENCE},defaultZoomValue:{value:"",kind:D.VIEWER+D.PREFERENCE},disableHistory:{value:!1,kind:D.VIEWER},disablePageLabels:{value:!1,kind:D.VIEWER+D.PREFERENCE},enableAltText:{value:!1,kind:D.VIEWER+D.PREFERENCE},enableAltTextModelDownload:{value:!0,kind:D.VIEWER+D.PREFERENCE+D.EVENT_DISPATCH},enableGuessAltText:{value:!0,kind:D.VIEWER+D.PREFERENCE+D.EVENT_DISPATCH},enableHighlightFloatingButton:{value:!1,kind:D.VIEWER+D.PREFERENCE},enableNewAltTextWhenAddingImage:{value:!0,kind:D.VIEWER+D.PREFERENCE},enablePermissions:{value:!1,kind:D.VIEWER+D.PREFERENCE},enablePrintAutoRotate:{value:!0,kind:D.VIEWER+D.PREFERENCE},enableScripting:{value:!0,kind:D.VIEWER+D.PREFERENCE},enableUpdatedAddImage:{value:!1,kind:D.VIEWER+D.PREFERENCE},externalLinkRel:{value:"noopener noreferrer nofollow",kind:D.VIEWER},externalLinkTarget:{value:0,kind:D.VIEWER+D.PREFERENCE},highlightEditorColors:{value:"yellow=#FFFF98,green=#53FFBC,blue=#80EBFF,pink=#FFCBE6,red=#FF4F5F",kind:D.VIEWER+D.PREFERENCE},historyUpdateUrl:{value:!1,kind:D.VIEWER+D.PREFERENCE},ignoreDestinationZoom:{value:!1,kind:D.VIEWER+D.PREFERENCE},imageResourcesPath:{value:"./images/",kind:D.VIEWER},maxCanvasPixels:{value:2**25,kind:D.VIEWER},forcePageColors:{value:!1,kind:D.VIEWER+D.PREFERENCE},pageColorsBackground:{value:"Canvas",kind:D.VIEWER+D.PREFERENCE},pageColorsForeground:{value:"CanvasText",kind:D.VIEWER+D.PREFERENCE},pdfBugEnabled:{value:!1,kind:D.VIEWER+D.PREFERENCE},printResolution:{value:150,kind:D.VIEWER},sidebarViewOnLoad:{value:-1,kind:D.VIEWER+D.PREFERENCE},scrollModeOnLoad:{value:-1,kind:D.VIEWER+D.PREFERENCE},spreadModeOnLoad:{value:-1,kind:D.VIEWER+D.PREFERENCE},textLayerMode:{value:1,kind:D.VIEWER+D.PREFERENCE},viewOnLoad:{value:0,kind:D.VIEWER+D.PREFERENCE},cMapPacked:{value:!0,kind:D.API},cMapUrl:{value:"../web/cmaps/",kind:D.API},disableAutoFetch:{value:!1,kind:D.API+D.PREFERENCE},disableFontFace:{value:!1,kind:D.API+D.PREFERENCE},disableRange:{value:!1,kind:D.API+D.PREFERENCE},disableStream:{value:!1,kind:D.API+D.PREFERENCE},docBaseUrl:{value:"",kind:D.API},enableHWA:{value:!0,kind:D.API+D.VIEWER+D.PREFERENCE},enableXfa:{value:!0,kind:D.API+D.PREFERENCE},fontExtraProperties:{value:!1,kind:D.API},isEvalSupported:{value:!0,kind:D.API},isOffscreenCanvasSupported:{value:!0,kind:D.API},maxImageSize:{value:-1,kind:D.API},pdfBug:{value:!1,kind:D.API},standardFontDataUrl:{value:"../web/standard_fonts/",kind:D.API},useSystemFonts:{value:void 0,kind:D.API,type:vy.BOOLEAN+vy.UNDEFINED},verbosity:{value:1,kind:D.API},workerPort:{value:null,kind:D.WORKER},workerSrc:{value:"../build/pdf.worker.mjs",kind:D.WORKER}};Un.defaultUrl={value:"compressed.tracemonkey-pldi-09.pdf",kind:D.VIEWER},Un.sandboxBundleSrc={value:"../build/pdf.sandbox.mjs",kind:D.VIEWER},Un.viewerCssTheme={value:0,kind:D.VIEWER+D.PREFERENCE},Un.enableFakeMLManager={value:!0,kind:D.VIEWER};Un.disablePreferences={value:!1,kind:D.VIEWER};var yy=class{static eventBus;static#e=new Map;static{for(let e in Un)this.#e.set(e,Un[e].value);for(let[e,t]of md)this.#e.set(e,t);this._hasInvokedSet=!1,this._checkDisablePreferences=()=>this.get("disablePreferences")?!0:(this._hasInvokedSet&&console.warn('The Preferences may override manually set AppOptions; please use the "disablePreferences"-option to prevent that.'),!1)}static get(e){return this.#e.get(e)}static getAll(e=null,t=!1){let r=Object.create(null);for(let i in Un){let s=Un[i];e&&!(e&s.kind)||(r[i]=t?s.value:this.#e.get(i))}return r}static set(e,t){this.setAll({[e]:t})}static setAll(e,t=!1){this._hasInvokedSet||=!0;let r;for(let i in e){let s=Un[i],o=e[i];if(!s||!(typeof o==typeof s.value||vy[(typeof o).toUpperCase()]&s.type))continue;let{kind:a}=s;t&&!(a&D.BROWSER||a&D.PREFERENCE)||(this.eventBus&&a&D.EVENT_DISPATCH&&(r||=new Map).set(i,o),this.#e.set(i,o))}if(r)for(let[i,s]of r)this.eventBus.dispatch(i.toLowerCase(),{source:this,value:s})}},by=class{#e=null;constructor(e){this.pageIndex=e.pageIndex}render(e="display"){return I(this,null,function*(){e!=="display"||this.#e||this._cancelled||(this.#e=new oF({pageIndex:this.pageIndex}))})}cancel(){this._cancelled=!0,this.#e&&(this.#e.destroy(),this.#e=null)}setParent(e){this.#e?.setParent(e)}getDrawLayer(){return this.#e}},xS={Document:null,DocumentFragment:null,Part:"group",Sect:"group",Div:"group",Aside:"note",NonStruct:"none",P:null,H:"heading",Title:null,FENote:"note",Sub:"group",Lbl:null,Span:null,Em:null,Strong:null,Link:"link",Annot:"note",Form:"form",Ruby:null,RB:null,RT:null,RP:null,Warichu:null,WT:null,WP:null,L:"list",LI:"listitem",LBody:null,Table:"table",TR:"row",TH:"columnheader",TD:"cell",THead:"columnheader",TBody:null,TFoot:null,Caption:null,Figure:"figure",Formula:null,Artifact:null},n2=/^H(\d+)$/,_d=class{#e;#t=null;#n;#r=new Map;#i;#s=null;constructor(e,t){this.#e=e.getStructTree(),this.#i=t}render(){return I(this,null,function*(){if(this.#n)return this.#n;let{promise:e,resolve:t,reject:r}=Promise.withResolvers();this.#n=e;try{this.#t=this.#u(yield this.#e)}catch(i){r(i)}return this.#e=null,this.#t?.classList.add("structTree"),t(this.#t),e})}getAriaAttributes(e){return I(this,null,function*(){try{return yield this.render(),this.#r.get(e)}catch{}return null})}hide(){this.#t&&!this.#t.hidden&&(this.#t.hidden=!0)}show(){this.#t?.hidden&&(this.#t.hidden=!1)}#l(e,t){let{alt:r,id:i,lang:s}=e;if(r!==void 0){let o=!1,a=Ia(r);for(let l of e.children)if(l.type==="annotation"){let c=this.#r.get(l.id);c||(c=new Map,this.#r.set(l.id,c)),c.set("aria-label",a),o=!0}o||t.setAttribute("aria-label",a)}i!==void 0&&t.setAttribute("aria-owns",i),s!==void 0&&t.setAttribute("lang",Ia(s,!0))}#c(e,t){let{alt:r,bbox:i,children:s}=e,o=s?.[0];if(!this.#i||!r||!i||o?.type!=="content")return!1;let{id:a}=o;if(!a)return!1;t.setAttribute("aria-owns",a);let l=document.createElement("span");(this.#s||=new Map).set(a,l),l.setAttribute("role","img"),l.setAttribute("aria-label",Ia(r));let{pageHeight:c,pageX:u,pageY:d}=this.#i,h="calc(var(--scale-factor)*",{style:f}=l;return f.width=`${h}${i[2]-i[0]}px)`,f.height=`${h}${i[3]-i[1]}px)`,f.left=`${h}${i[0]-u}px)`,f.top=`${h}${c-i[3]+d}px)`,!0}addElementsToTextLayer(){if(this.#s){for(let[e,t]of this.#s)document.getElementById(e)?.append(t);this.#s.clear(),this.#s=null}}#u(e){if(!e)return null;let t=document.createElement("span");if("role"in e){let{role:r}=e,i=r.match(n2);if(i?(t.setAttribute("role","heading"),t.setAttribute("aria-level",i[1])):xS[r]&&t.setAttribute("role",xS[r]),r==="Figure"&&this.#c(e,t))return t}if(this.#l(e,t),e.children)if(e.children.length===1&&"id"in e.children[0])this.#l(e.children[0],t);else for(let r of e.children)t.append(this.#u(r));return t}},wy=class n{#e=!1;#t=null;#n=new Map;#r=new Map;setTextMapping(e){this.#t=e}static#i(e,t){let r=e.getBoundingClientRect(),i=t.getBoundingClientRect();if(r.width===0&&r.height===0)return 1;if(i.width===0&&i.height===0)return-1;let s=r.y,o=r.y+r.height,a=r.y+r.height/2,l=i.y,c=i.y+i.height,u=i.y+i.height/2;if(a<=l&&u>=o)return-1;if(u<=s&&a>=c)return 1;let d=r.x+r.width/2,h=i.x+i.width/2;return d-h}enable(){if(this.#e)throw new Error("TextAccessibilityManager is already enabled.");if(!this.#t)throw new Error("Text divs and strings have not been set.");if(this.#e=!0,this.#t=this.#t.slice(),this.#t.sort(n.#i),this.#n.size>0){let e=this.#t;for(let[t,r]of this.#n){if(!document.getElementById(t)){this.#n.delete(t);continue}this.#s(t,e[r])}}for(let[e,t]of this.#r)this.addPointerInTextLayer(e,t);this.#r.clear()}disable(){this.#e&&(this.#r.clear(),this.#t=null,this.#e=!1)}removePointerInTextLayer(e){if(!this.#e){this.#r.delete(e);return}let t=this.#t;if(!t||t.length===0)return;let{id:r}=e,i=this.#n.get(r);if(i===void 0)return;let s=t[i];this.#n.delete(r);let o=s.getAttribute("aria-owns");o?.includes(r)&&(o=o.split(" ").filter(a=>a!==r).join(" "),o?s.setAttribute("aria-owns",o):(s.removeAttribute("aria-owns"),s.setAttribute("role","presentation")))}#s(e,t){let r=t.getAttribute("aria-owns");r?.includes(e)||t.setAttribute("aria-owns",r?`${r} ${e}`:e),t.removeAttribute("role")}addPointerInTextLayer(e,t){let{id:r}=e;if(!r)return null;if(!this.#e)return this.#r.set(e,t),null;t&&this.removePointerInTextLayer(e);let i=this.#t;if(!i||i.length===0)return null;let s=Da(i,c=>n.#i(e,c)<0),o=Math.max(0,s-1),a=i[o];this.#s(r,a),this.#n.set(r,o);let l=a.parentNode;return l?.classList.contains("markedContent")?l.id:null}moveElementInDOM(e,t,r,i){let s=this.addPointerInTextLayer(r,i);if(!e.hasChildNodes())return e.append(t),s;let o=Array.from(e.childNodes).filter(c=>c!==t);if(o.length===0)return s;let a=r||t,l=Da(o,c=>n.#i(a,c)<0);return l===0?o[0].before(t):o[l-1].after(t),s}},Ey=class{#e=null;constructor({findController:e,eventBus:t,pageIndex:r}){this.findController=e,this.matches=[],this.eventBus=t,this.pageIdx=r,this.textDivs=null,this.textContentItemsStr=null,this.enabled=!1}setTextMapping(e,t){this.textDivs=e,this.textContentItemsStr=t}enable(){if(!this.textDivs||!this.textContentItemsStr)throw new Error("Text divs and strings have not been set.");if(this.enabled)throw new Error("TextHighlighter is already enabled.");this.enabled=!0,this.#e||(this.#e=new AbortController,this.eventBus._on("updatetextlayermatches",e=>{(e.pageIndex===this.pageIdx||e.pageIndex===-1)&&this._updateMatches()},{signal:this.#e.signal})),this._updateMatches()}disable(){this.enabled&&(this.enabled=!1,this.#e?.abort(),this.#e=null,this._updateMatches(!0))}_convertMatches(e,t){if(!e)return[];let{textContentItemsStr:r}=this,i=0,s=0,o=r.length-1,a=[];for(let l=0,c=e.length;l<c;l++){let u=e[l];for(;i!==o&&u>=s+r[i].length;)s+=r[i].length,i++;i===r.length&&console.error("Could not find a matching mapping");let d={begin:{divIdx:i,offset:u-s}};for(u+=t[l];i!==o&&u>s+r[i].length;)s+=r[i].length,i++;d.end={divIdx:i,offset:u-s},a.push(d)}return a}_renderMatches(e){if(e.length===0)return;let{findController:t,pageIdx:r}=this,{textContentItemsStr:i,textDivs:s}=this,o=r===t.selected.pageIdx,a=t.selected.matchIdx,l=t.state.highlightAll,c=null,u={divIdx:-1,offset:void 0};function d(m,y){let w=m.divIdx;return s[w].textContent="",h(w,0,m.offset,y)}function h(m,y,w,b){let C=s[m];if(C.nodeType===Node.TEXT_NODE){let M=document.createElement("span");C.before(M),M.append(C),s[m]=M,C=M}let S=i[m].substring(y,w),T=document.createTextNode(S);if(b){let M=document.createElement("span");return M.className=`${b} appended`,M.append(T),C.append(M),b.includes("selected")?M.offsetLeft:0}return C.append(T),0}let f=a,p=f+1;if(l)f=0,p=e.length;else if(!o)return;let g=-1,v=-1;for(let m=f;m<p;m++){let y=e[m],w=y.begin;if(w.divIdx===g&&w.offset===v)continue;g=w.divIdx,v=w.offset;let b=y.end,C=o&&m===a,S=C?" selected":"",T=0;if(!c||w.divIdx!==c.divIdx?(c!==null&&h(c.divIdx,c.offset,u.offset),d(w)):h(c.divIdx,c.offset,w.offset),w.divIdx===b.divIdx)T=h(w.divIdx,w.offset,b.offset,"highlight"+S);else{T=h(w.divIdx,w.offset,u.offset,"highlight begin"+S);for(let M=w.divIdx+1,E=b.divIdx;M<E;M++)s[M].className="highlight middle"+S;d(b,"highlight end"+S)}c=b,C&&t.scrollMatchIntoView({element:s[w.divIdx],selectedLeft:T,pageIndex:r,matchIndex:a})}c&&h(c.divIdx,c.offset,u.offset)}_updateMatches(e=!1){if(!this.enabled&&!e)return;let{findController:t,matches:r,pageIdx:i}=this,{textContentItemsStr:s,textDivs:o}=this,a=-1;for(let u of r){let d=Math.max(a,u.begin.divIdx);for(let h=d,f=u.end.divIdx;h<=f;h++){let p=o[h];p.textContent=s[h],p.className=""}a=u.end.divIdx+1}if(!t?.highlightMatches||e)return;let l=t.pageMatches[i]||null,c=t.pageMatchesLength[i]||null;this.matches=this._convertMatches(l,c),this._renderMatches(this.matches)}},Ad=class n{#e=!1;#t=null;#n=!1;#r=null;static#i=new Map;static#s=null;constructor({pdfPage:e,highlighter:t=null,accessibilityManager:r=null,enablePermissions:i=!1,onAppend:s=null}){this.pdfPage=e,this.highlighter=t,this.accessibilityManager=r,this.#e=i===!0,this.#t=s,this.div=document.createElement("div"),this.div.tabIndex=0,this.div.className="textLayer"}render(e,t=null){return I(this,null,function*(){if(this.#n&&this.#r){this.#r.update({viewport:e,onBefore:this.hide.bind(this)}),this.show();return}this.cancel(),this.#r=new hF({textContentSource:this.pdfPage.streamTextContent(t||{includeMarkedContent:!0,disableNormalization:!0}),container:this.div,viewport:e});let{textDivs:r,textContentItemsStr:i}=this.#r;this.highlighter?.setTextMapping(r,i),this.accessibilityManager?.setTextMapping(r),yield this.#r.render(),this.#n=!0;let s=document.createElement("div");s.className="endOfContent",this.div.append(s),this.#l(s),this.#t?.(this.div),this.highlighter?.enable(),this.accessibilityManager?.enable()})}hide(){!this.div.hidden&&this.#n&&(this.highlighter?.disable(),this.div.hidden=!0)}show(){this.div.hidden&&this.#n&&(this.div.hidden=!1,this.highlighter?.enable())}cancel(){this.#r?.cancel(),this.#r=null,this.highlighter?.disable(),this.accessibilityManager?.disable(),n.#c(this.div)}#l(e){let{div:t}=this;t.addEventListener("mousedown",()=>{t.classList.add("selecting")}),t.addEventListener("copy",r=>{if(!this.#e){let i=document.getSelection();r.clipboardData.setData("text/plain",Ia(cF(i.toString())))}r.preventDefault(),r.stopPropagation()}),n.#i.set(t,e),n.#u()}static#c(e){this.#i.delete(e),this.#i.size===0&&(this.#s?.abort(),this.#s=null)}static#u(){if(this.#s)return;this.#s=new AbortController;let{signal:e}=this.#s,t=(o,a)=>{a.append(o),o.style.width="",o.style.height="",a.classList.remove("selecting")},r=!1;document.addEventListener("pointerdown",()=>{r=!0},{signal:e}),document.addEventListener("pointerup",()=>{r=!1,this.#i.forEach(t)},{signal:e}),window.addEventListener("blur",()=>{r=!1,this.#i.forEach(t)},{signal:e}),document.addEventListener("keyup",()=>{r||this.#i.forEach(t)},{signal:e});var i,s;document.addEventListener("selectionchange",()=>{let o=document.getSelection();if(o.rangeCount===0){this.#i.forEach(t);return}let a=new Set;for(let f=0;f<o.rangeCount;f++){let p=o.getRangeAt(f);for(let g of this.#i.keys())!a.has(g)&&p.intersectsNode(g)&&a.add(g)}for(let[f,p]of this.#i)a.has(f)?f.classList.add("selecting"):t(p,f);if(i??=getComputedStyle(this.#i.values().next().value).getPropertyValue("-moz-user-select")==="none",i)return;let l=o.getRangeAt(0),c=s&&(l.compareBoundaryPoints(Range.END_TO_END,s)===0||l.compareBoundaryPoints(Range.START_TO_END,s)===0),u=c?l.startContainer:l.endContainer;u.nodeType===Node.TEXT_NODE&&(u=u.parentNode);let d=u.parentElement?.closest(".textLayer"),h=this.#i.get(d);h&&(h.style.width=d.style.width,h.style.height=d.style.height,u.parentElement.insertBefore(h,c?u:u.nextSibling)),s=l.cloneRange()},{signal:e})}},Sd=class{constructor({pdfPage:e,annotationStorage:t=null,linkService:r,xfaHtml:i=null}){this.pdfPage=e,this.annotationStorage=t,this.linkService=r,this.xfaHtml=i,this.div=null,this._cancelled=!1}render(e,t="display"){return I(this,null,function*(){if(t==="print"){let s={viewport:e.clone({dontFlip:!0}),div:this.div,xfaHtml:this.xfaHtml,annotationStorage:this.annotationStorage,linkService:this.linkService,intent:t};return this.div=document.createElement("div"),s.div=this.div,Xv.render(s)}let r=yield this.pdfPage.getXfa();if(this._cancelled||!r)return{textDivs:[]};let i={viewport:e.clone({dontFlip:!0}),div:this.div,xfaHtml:r,annotationStorage:this.annotationStorage,linkService:this.linkService,intent:t};return this.div?Xv.update(i):(this.div=document.createElement("div"),i.div=this.div,Xv.render(i))})}cancel(){this._cancelled=!0}hide(){this.div&&(this.div.hidden=!0)}},r2={annotationEditorUIManager:null,annotationStorage:null,downloadManager:null,enableScripting:!1,fieldObjectsPromise:null,findController:null,hasJSActionsPromise:null,get linkService(){return new Ta}},i2=new Map([["canvasWrapper",0],["textLayer",1],["annotationLayer",2],["annotationEditorLayer",3],["xfaLayer",3]]),xd=class{#e=mr.ENABLE_FORMS;#t=!1;#n=!1;#r=!1;#i=null;#s=null;#l=null;#c=1;#u=1;#a=null;#d=We.INITIAL;#o=Hn.ENABLE;#h={directDrawing:!0,initialOptionalContent:!0,regularAnnotations:!0};#p=new WeakMap;#f=[null,null,null,null];constructor(e){let t=e.container,r=e.defaultViewport;this.id=e.id,this.renderingId="page"+this.id,this.#i=e.layerProperties||r2,this.pdfPage=null,this.pageLabel=null,this.rotation=0,this.scale=e.scale||TS,this.viewport=r,this.pdfPageRotate=r.rotation,this._optionalContentConfigPromise=e.optionalContentConfigPromise||null,this.#o=e.textLayerMode??Hn.ENABLE,this.#e=e.annotationMode??mr.ENABLE_FORMS,this.imageResourcesPath=e.imageResourcesPath||"",this.maxCanvasPixels=e.maxCanvasPixels??yy.get("maxCanvasPixels"),this.pageColors=e.pageColors||null,this.#t=e.enableHWA||!1,this.eventBus=e.eventBus,this.renderingQueue=e.renderingQueue,this.l10n=e.l10n,this.l10n||=new Bs,this.renderTask=null,this.resume=null,this._isStandalone=!this.renderingQueue?.hasViewer(),this._container=t,this._annotationCanvasMap=null,this.annotationLayer=null,this.annotationEditorLayer=null,this.textLayer=null,this.zoomLayer=null,this.xfaLayer=null,this.structTreeLayer=null,this.drawLayer=null;let i=document.createElement("div");if(i.className="page",i.setAttribute("data-page-number",this.id),i.setAttribute("role","region"),i.setAttribute("data-l10n-id","pdfjs-page-landmark"),i.setAttribute("data-l10n-args",JSON.stringify({page:this.id})),this.div=i,this.#v(),t?.append(i),this._isStandalone){t?.style.setProperty("--scale-factor",this.scale*gr.PDF_TO_CSS_UNITS),this.pageColors?.background&&t?.style.setProperty("--page-bg-color",this.pageColors.background);let{optionalContentConfigPromise:s}=e;s&&s.then(o=>{s===this._optionalContentConfigPromise&&(this.#h.initialOptionalContent=o.hasInitialVisibility)}),e.l10n||this.l10n.translate(this.div)}}#g(e,t){let r=i2.get(t),i=this.#f[r];if(this.#f[r]=e,i){i.replaceWith(e);return}for(let s=r-1;s>=0;s--){let o=this.#f[s];if(o){o.after(e);return}}this.div.prepend(e)}get renderingState(){return this.#d}set renderingState(e){if(e!==this.#d)switch(this.#d=e,this.#s&&(clearTimeout(this.#s),this.#s=null),e){case We.PAUSED:this.div.classList.remove("loading");break;case We.RUNNING:this.div.classList.add("loadingIcon"),this.#s=setTimeout(()=>{this.div.classList.add("loading"),this.#s=null},0);break;case We.INITIAL:case We.FINISHED:this.div.classList.remove("loadingIcon","loading");break}}#v(){let{viewport:e}=this;if(this.pdfPage){if(this.#l===e.rotation)return;this.#l=e.rotation}dF(this.div,e,!0,!1)}setPdfPage(e){this._isStandalone&&(this.pageColors?.foreground==="CanvasText"||this.pageColors?.background==="Canvas")&&(this._container?.style.setProperty("--hcm-highlight-filter",e.filterFactory.addHighlightHCMFilter("highlight","CanvasText","Canvas","HighlightText","Highlight")),this._container?.style.setProperty("--hcm-highlight-selected-filter",e.filterFactory.addHighlightHCMFilter("highlight_selected","CanvasText","Canvas","HighlightText","Highlight"))),this.pdfPage=e,this.pdfPageRotate=e.rotate;let t=(this.rotation+this.pdfPageRotate)%360;this.viewport=e.getViewport({scale:this.scale*gr.PDF_TO_CSS_UNITS,rotation:t}),this.#v(),this.reset()}destroy(){this.reset(),this.pdfPage?.cleanup()}hasEditableAnnotations(){return!!this.annotationLayer?.hasEditableAnnotations()}get _textHighlighter(){return yd(this,"_textHighlighter",new Ey({pageIndex:this.id-1,eventBus:this.eventBus,findController:this.#i.findController}))}#m(e,t){this.eventBus.dispatch(e,{source:this,pageNumber:this.id,error:t})}#y(){return I(this,null,function*(){let e=null;try{yield this.annotationLayer.render(this.viewport,{structTreeLayer:this.structTreeLayer},"display")}catch(t){console.error(`#renderAnnotationLayer: "${t}".`),e=t}finally{this.#m("annotationlayerrendered",e)}})}#w(){return I(this,null,function*(){let e=null;try{yield this.annotationEditorLayer.render(this.viewport,"display")}catch(t){console.error(`#renderAnnotationEditorLayer: "${t}".`),e=t}finally{this.#m("annotationeditorlayerrendered",e)}})}#_(){return I(this,null,function*(){try{yield this.drawLayer.render("display")}catch(e){console.error(`#renderDrawLayer: "${e}".`)}})}#E(){return I(this,null,function*(){let e=null;try{let t=yield this.xfaLayer.render(this.viewport,"display");t?.textDivs&&this._textHighlighter&&this.#I(t.textDivs)}catch(t){console.error(`#renderXfaLayer: "${t}".`),e=t}finally{this.xfaLayer?.div&&(this.l10n.pause(),this.#g(this.xfaLayer.div,"xfaLayer"),this.l10n.resume()),this.#m("xfalayerrendered",e)}})}#C(){return I(this,null,function*(){if(!this.textLayer)return;let e=null;try{yield this.textLayer.render(this.viewport)}catch(t){if(t instanceof tF)return;console.error(`#renderTextLayer: "${t}".`),e=t}this.#m("textlayerrendered",e),this.#M()})}#M(){return I(this,null,function*(){if(!this.textLayer)return;let e=yield this.structTreeLayer?.render();e&&(this.l10n.pause(),this.structTreeLayer?.addElementsToTextLayer(),this.canvas&&e.parentNode!==this.canvas&&this.canvas.append(e),this.l10n.resume()),this.structTreeLayer?.show()})}#I(e){return I(this,null,function*(){let t=yield this.pdfPage.getTextContent(),r=[];for(let i of t.items)r.push(i.str);this._textHighlighter.setTextMapping(e,r),this._textHighlighter.enable()})}_resetZoomLayer(e=!1){if(!this.zoomLayer)return;let t=this.zoomLayer.firstChild;this.#p.delete(t),t.width=0,t.height=0,e&&this.zoomLayer.remove(),this.zoomLayer=null}reset({keepZoomLayer:e=!1,keepAnnotationLayer:t=!1,keepAnnotationEditorLayer:r=!1,keepXfaLayer:i=!1,keepTextLayer:s=!1}={}){this.cancelRendering({keepAnnotationLayer:t,keepAnnotationEditorLayer:r,keepXfaLayer:i,keepTextLayer:s}),this.renderingState=We.INITIAL;let o=this.div,a=o.childNodes,l=e&&this.zoomLayer||null,c=t&&this.annotationLayer?.div||null,u=r&&this.annotationEditorLayer?.div||null,d=i&&this.xfaLayer?.div||null,h=s&&this.textLayer?.div||null;for(let f=a.length-1;f>=0;f--){let p=a[f];switch(p){case l:case c:case u:case d:case h:continue}p.remove();let g=this.#f.indexOf(p);g>=0&&(this.#f[g]=null)}o.removeAttribute("data-loaded"),c&&this.annotationLayer.hide(),u&&this.annotationEditorLayer.hide(),d&&this.xfaLayer.hide(),h&&this.textLayer.hide(),this.structTreeLayer?.hide(),l||(this.canvas&&(this.#p.delete(this.canvas),this.canvas.width=0,this.canvas.height=0,delete this.canvas),this._resetZoomLayer())}toggleEditingMode(e){this.hasEditableAnnotations()&&(this.#r=e,this.reset({keepZoomLayer:!0,keepAnnotationLayer:!0,keepAnnotationEditorLayer:!0,keepXfaLayer:!0,keepTextLayer:!0}))}update({scale:e=0,rotation:t=null,optionalContentConfigPromise:r=null,drawingDelay:i=-1}){this.scale=e||this.scale,typeof t=="number"&&(this.rotation=t),r instanceof Promise&&(this._optionalContentConfigPromise=r,r.then(o=>{r===this._optionalContentConfigPromise&&(this.#h.initialOptionalContent=o.hasInitialVisibility)})),this.#h.directDrawing=!0;let s=(this.rotation+this.pdfPageRotate)%360;if(this.viewport=this.viewport.clone({scale:this.scale*gr.PDF_TO_CSS_UNITS,rotation:s}),this.#v(),this._isStandalone&&this._container?.style.setProperty("--scale-factor",this.viewport.scale),this.canvas){let o=!1;if(this.#n){if(this.maxCanvasPixels===0)o=!0;else if(this.maxCanvasPixels>0){let{width:l,height:c}=this.viewport,{sx:u,sy:d}=this.outputScale;o=(Math.floor(l)*u|0)*(Math.floor(c)*d|0)>this.maxCanvasPixels}}let a=i>=0&&i<1e3;if(a||o){if(a&&!o&&this.renderingState!==We.FINISHED&&(this.cancelRendering({keepZoomLayer:!0,keepAnnotationLayer:!0,keepAnnotationEditorLayer:!0,keepXfaLayer:!0,keepTextLayer:!0,cancelExtraDelay:i}),this.renderingState=We.FINISHED,this.#h.directDrawing=!1),this.cssTransform({target:this.canvas,redrawAnnotationLayer:!0,redrawAnnotationEditorLayer:!0,redrawXfaLayer:!0,redrawTextLayer:!a,hideTextLayer:a}),a)return;this.eventBus.dispatch("pagerendered",{source:this,pageNumber:this.id,cssTransform:!0,timestamp:performance.now(),error:this.#a});return}!this.zoomLayer&&!this.canvas.hidden&&(this.zoomLayer=this.canvas.parentNode,this.zoomLayer.style.position="absolute")}this.zoomLayer&&this.cssTransform({target:this.zoomLayer.firstChild}),this.reset({keepZoomLayer:!0,keepAnnotationLayer:!0,keepAnnotationEditorLayer:!0,keepXfaLayer:!0,keepTextLayer:!0})}cancelRendering({keepAnnotationLayer:e=!1,keepAnnotationEditorLayer:t=!1,keepXfaLayer:r=!1,keepTextLayer:i=!1,cancelExtraDelay:s=0}={}){this.renderTask&&(this.renderTask.cancel(s),this.renderTask=null),this.resume=null,this.textLayer&&(!i||!this.textLayer.div)&&(this.textLayer.cancel(),this.textLayer=null),this.annotationLayer&&(!e||!this.annotationLayer.div)&&(this.annotationLayer.cancel(),this.annotationLayer=null,this._annotationCanvasMap=null),this.structTreeLayer&&!this.textLayer&&(this.structTreeLayer=null),this.annotationEditorLayer&&(!t||!this.annotationEditorLayer.div)&&(this.drawLayer&&(this.drawLayer.cancel(),this.drawLayer=null),this.annotationEditorLayer.cancel(),this.annotationEditorLayer=null),this.xfaLayer&&(!r||!this.xfaLayer.div)&&(this.xfaLayer.cancel(),this.xfaLayer=null,this._textHighlighter?.disable())}cssTransform({target:e,redrawAnnotationLayer:t=!1,redrawAnnotationEditorLayer:r=!1,redrawXfaLayer:i=!1,redrawTextLayer:s=!1,hideTextLayer:o=!1}){if(!e.hasAttribute("zooming")){e.setAttribute("zooming",!0);let{style:l}=e;l.width=l.height=""}let a=this.#p.get(e);if(this.viewport!==a){let l=this.viewport.rotation-a.rotation,c=Math.abs(l),u=1,d=1;if(c===90||c===270){let{width:h,height:f}=this.viewport;u=f/h,d=h/f}e.style.transform=`rotate(${l}deg) scale(${u}, ${d})`}t&&this.annotationLayer&&this.#y(),r&&this.annotationEditorLayer&&(this.drawLayer&&this.#_(),this.#w()),i&&this.xfaLayer&&this.#E(),this.textLayer&&(o?(this.textLayer.hide(),this.structTreeLayer?.hide()):s&&this.#C())}get width(){return this.viewport.width}get height(){return this.viewport.height}getPagePoint(e,t){return this.viewport.convertToPdfPoint(e,t)}#A(e,t=null){return I(this,null,function*(){if(e===this.renderTask&&(this.renderTask=null),t instanceof ry){this.#a=null;return}if(this.#a=t,this.renderingState=We.FINISHED,this._resetZoomLayer(!0),this.#h.regularAnnotations=!e.separateAnnots,this.eventBus.dispatch("pagerendered",{source:this,pageNumber:this.id,cssTransform:!1,timestamp:performance.now(),error:this.#a}),t)throw t})}draw(){return I(this,null,function*(){this.renderingState!==We.INITIAL&&(console.error("Must be in new state before drawing"),this.reset());let{div:e,l10n:t,pageColors:r,pdfPage:i,viewport:s}=this;if(!i)throw this.renderingState=We.FINISHED,new Error("pdfPage is not loaded");this.renderingState=We.RUNNING;let o=document.createElement("div");if(o.classList.add("canvasWrapper"),this.#g(o,"canvasWrapper"),!this.textLayer&&this.#o!==Hn.DISABLE&&!i.isPureXfa&&(this._accessibilityManager||=new wy,this.textLayer=new Ad({pdfPage:i,highlighter:this._textHighlighter,accessibilityManager:this._accessibilityManager,enablePermissions:this.#o===Hn.ENABLE_PERMISSIONS,onAppend:E=>{this.l10n.pause(),this.#g(E,"textLayer"),this.l10n.resume()}})),!this.annotationLayer&&this.#e!==mr.DISABLE){let{annotationStorage:E,annotationEditorUIManager:x,downloadManager:N,enableScripting:pe,fieldObjectsPromise:de,hasJSActionsPromise:ce,linkService:Ee}=this.#i;this._annotationCanvasMap||=new Map,this.annotationLayer=new bd({pdfPage:i,annotationStorage:E,imageResourcesPath:this.imageResourcesPath,renderForms:this.#e===mr.ENABLE_FORMS,linkService:Ee,downloadManager:N,enableScripting:pe,hasJSActionsPromise:ce,fieldObjectsPromise:de,annotationCanvasMap:this._annotationCanvasMap,accessibilityManager:this._accessibilityManager,annotationEditorUIManager:x,onAppend:je=>{this.#g(je,"annotationLayer")}})}let a=E=>{if(h?.(!1),this.renderingQueue&&!this.renderingQueue.isHighestPriority(this)){this.renderingState=We.PAUSED,this.resume=()=>{this.renderingState=We.RUNNING,E()};return}E()},{width:l,height:c}=s,u=document.createElement("canvas");u.setAttribute("role","presentation"),u.hidden=!0;let d=!!(r?.background&&r?.foreground),h=E=>{(!d||E)&&(u.hidden=!1,h=null)};o.append(u),this.canvas=u;let f=u.getContext("2d",{alpha:!1,willReadFrequently:!this.#t}),p=this.outputScale=new uF;if(this.maxCanvasPixels===0){let E=1/this.scale;p.sx*=E,p.sy*=E,this.#n=!0}else if(this.maxCanvasPixels>0){let E=l*c,x=Math.sqrt(this.maxCanvasPixels/E);p.sx>x||p.sy>x?(p.sx=x,p.sy=x,this.#n=!0):this.#n=!1}let g=eS(p.sx),v=eS(p.sy),m=u.width=ud(dd(l*p.sx),g[0]),y=u.height=ud(dd(c*p.sy),v[0]),w=ud(dd(l),g[1]),b=ud(dd(c),v[1]);p.sx=m/w,p.sy=y/b,this.#c!==g[1]&&(e.style.setProperty("--scale-round-x",`${g[1]}px`),this.#c=g[1]),this.#u!==v[1]&&(e.style.setProperty("--scale-round-y",`${v[1]}px`),this.#u=v[1]),this.#p.set(u,s);let C=p.scaled?[p.sx,0,0,p.sy,0,0]:null,S={canvasContext:f,transform:C,viewport:s,annotationMode:this.#e,optionalContentConfigPromise:this._optionalContentConfigPromise,annotationCanvasMap:this._annotationCanvasMap,pageColors:r,isEditing:this.#r},T=this.renderTask=i.render(S);T.onContinue=a;let M=T.promise.then(()=>I(this,null,function*(){h?.(!0),yield this.#A(T),this.structTreeLayer||=new _d(i,s.rawDims),this.#C(),this.annotationLayer&&(yield this.#y());let{annotationEditorUIManager:E}=this.#i;E&&(this.drawLayer||=new by({pageIndex:this.id}),yield this.#_(),this.drawLayer.setParent(o),this.annotationEditorLayer||=new my({uiManager:E,pdfPage:i,l10n:t,structTreeLayer:this.structTreeLayer,accessibilityManager:this._accessibilityManager,annotationLayer:this.annotationLayer?.annotationLayer,textLayer:this.textLayer,drawLayer:this.drawLayer.getDrawLayer(),onAppend:x=>{this.#g(x,"annotationEditorLayer")}}),this.#w())}),E=>(E instanceof ry||h?.(!0),this.#A(T,E)));if(i.isPureXfa){if(!this.xfaLayer){let{annotationStorage:E,linkService:x}=this.#i;this.xfaLayer=new Sd({pdfPage:i,annotationStorage:E,linkService:x})}this.#E()}return e.setAttribute("data-loaded",!0),this.eventBus.dispatch("pagerender",{source:this,pageNumber:this.id}),M})}setPageLabel(e){this.pageLabel=typeof e=="string"?e:null,this.div.setAttribute("data-l10n-args",JSON.stringify({page:this.pageLabel??this.id})),this.pageLabel!==null?this.div.setAttribute("data-page-label",this.pageLabel):this.div.removeAttribute("data-page-label")}get thumbnailCanvas(){let{directDrawing:e,initialOptionalContent:t,regularAnnotations:r}=this.#h;return e&&t&&r?this.canvas:null}};function s2(n){return I(this,null,function*(){let e="",t=e.split("#",1)[0],{info:r,metadata:i,contentDispositionFilename:s,contentLength:o}=yield n.getMetadata();if(!o){let{length:a}=yield n.getDownloadInfo();o=a}return W(_({},r),{baseURL:t,filesize:o,filename:s||aF(e),metadata:i?.getRaw(),authors:i?.get("dc:creator"),numPages:n.numPages,URL:e})})}var Cy=class{constructor(e){this._ready=new Promise((t,r)=>{import(e).then(s=>{t(s.QuickJSSandbox())}).catch(r)})}createSandbox(e){return I(this,null,function*(){(yield this._ready).create(e)})}dispatchEventInSandbox(e){return I(this,null,function*(){let t=yield this._ready;setTimeout(()=>t.dispatchEvent(e),0)})}destroySandbox(){return I(this,null,function*(){(yield this._ready).nukeSandbox()})}},_y=class{#e=null;#t=null;#n=null;#r=null;#i=null;#s=null;#l=null;#c=null;#u=!1;#a=null;#d=null;constructor({eventBus:e,externalServices:t=null,docProperties:r=null}){this.#i=e,this.#s=t,this.#n=r}setViewer(e){this.#c=e}setDocument(e){return I(this,null,function*(){if(this.#l&&(yield this.#g()),this.#l=e,!e)return;let[t,r,i]=yield Promise.all([e.getFieldObjects(),e.getCalculationOrderIds(),e.getJSActions()]);if(!t&&!i){yield this.#g();return}if(e!==this.#l)return;try{this.#a=this.#f()}catch(a){console.error(`setDocument: "${a.message}".`),yield this.#g();return}let s=this.#i;this.#r=new AbortController;let{signal:o}=this.#r;s._on("updatefromsandbox",a=>{a?.source===window&&this.#o(a.detail)},{signal:o}),s._on("dispatcheventinsandbox",a=>{this.#a?.dispatchEventInSandbox(a.detail)},{signal:o}),s._on("pagechanging",({pageNumber:a,previous:l})=>{a!==l&&(this.#p(l),this.#h(a))},{signal:o}),s._on("pagerendered",({pageNumber:a})=>{this._pageOpenPending.has(a)&&a===this.#c.currentPageNumber&&this.#h(a)},{signal:o}),s._on("pagesdestroy",()=>I(this,null,function*(){yield this.#p(this.#c.currentPageNumber),yield this.#a?.dispatchEventInSandbox({id:"doc",name:"WillClose"}),this.#e?.resolve()}),{signal:o});try{let a=yield this.#n(e);if(e!==this.#l)return;yield this.#a.createSandbox({objects:t,calculationOrder:r,appInfo:{platform:navigator.platform,language:navigator.language},docInfo:W(_({},a),{actions:i})}),s.dispatch("sandboxcreated",{source:this})}catch(a){console.error(`setDocument: "${a.message}".`),yield this.#g();return}yield this.#a?.dispatchEventInSandbox({id:"doc",name:"Open"}),yield this.#h(this.#c.currentPageNumber,!0),Promise.resolve().then(()=>{e===this.#l&&(this.#u=!0)})})}dispatchWillSave(){return I(this,null,function*(){return this.#a?.dispatchEventInSandbox({id:"doc",name:"WillSave"})})}dispatchDidSave(){return I(this,null,function*(){return this.#a?.dispatchEventInSandbox({id:"doc",name:"DidSave"})})}dispatchWillPrint(){return I(this,null,function*(){if(this.#a){yield this.#d?.promise,this.#d=Promise.withResolvers();try{yield this.#a.dispatchEventInSandbox({id:"doc",name:"WillPrint"})}catch(e){throw this.#d.resolve(),this.#d=null,e}yield this.#d.promise}})}dispatchDidPrint(){return I(this,null,function*(){return this.#a?.dispatchEventInSandbox({id:"doc",name:"DidPrint"})})}get destroyPromise(){return this.#t?.promise||null}get ready(){return this.#u}get _pageOpenPending(){return yd(this,"_pageOpenPending",new Set)}get _visitedPages(){return yd(this,"_visitedPages",new Map)}#o(e){return I(this,null,function*(){let t=this.#c,r=t.isInPresentationMode||t.isChangingPresentationMode,{id:i,siblings:s,command:o,value:a}=e;if(!i){switch(o){case"clear":console.clear();break;case"error":console.error(a);break;case"layout":if(!r){let c=OL(a);t.spreadMode=c.spreadMode}break;case"page-num":t.currentPageNumber=a+1;break;case"print":yield t.pagesPromise,this.#i.dispatch("print",{source:this});break;case"println":console.log(a);break;case"zoom":r||(t.currentScaleValue=a);break;case"SaveAs":this.#i.dispatch("download",{source:this});break;case"FirstPage":t.currentPageNumber=1;break;case"LastPage":t.currentPageNumber=t.pagesCount;break;case"NextPage":t.nextPage();break;case"PrevPage":t.previousPage();break;case"ZoomViewIn":r||t.increaseScale();break;case"ZoomViewOut":r||t.decreaseScale();break;case"WillPrintFinished":this.#d?.resolve(),this.#d=null;break}return}if(r&&e.focus)return;delete e.id,delete e.siblings;let l=s?[i,...s]:[i];for(let c of l){let u=document.querySelector(`[data-element-id="${c}"]`);u?u.dispatchEvent(new CustomEvent("updatefromsandbox",{detail:e})):this.#l?.annotationStorage.setValue(c,e)}})}#h(e,t=!1){return I(this,null,function*(){let r=this.#l,i=this._visitedPages;if(t&&(this.#e=Promise.withResolvers()),!this.#e)return;let s=this.#c.getPageView(e-1);if(s?.renderingState!==We.FINISHED){this._pageOpenPending.add(e);return}this._pageOpenPending.delete(e);let o=I(this,null,function*(){let a=yield i.has(e)?null:s.pdfPage?.getJSActions();r===this.#l&&(yield this.#a?.dispatchEventInSandbox({id:"page",name:"PageOpen",pageNumber:e,actions:a}))});i.set(e,o)})}#p(e){return I(this,null,function*(){let t=this.#l,r=this._visitedPages;if(!this.#e||this._pageOpenPending.has(e))return;let i=r.get(e);i&&(r.set(e,null),yield i,t===this.#l&&(yield this.#a?.dispatchEventInSandbox({id:"page",name:"PageClose",pageNumber:e})))})}#f(){if(this.#t=Promise.withResolvers(),this.#a)throw new Error("#initScripting: Scripting already exists.");return this.#s.createScripting()}#g(){return I(this,null,function*(){if(!this.#a){this.#l=null,this.#t?.resolve();return}this.#e&&(yield Promise.race([this.#e.promise,new Promise(e=>{setTimeout(e,1e3)})]).catch(()=>{}),this.#e=null),this.#l=null;try{yield this.#a.destroySandbox()}catch{}this.#d?.reject(new Error("Scripting destroyed.")),this.#d=null,this.#r?.abort(),this.#r=null,this._pageOpenPending.clear(),this._visitedPages.clear(),this.#a=null,this.#u=!1,this.#t?.resolve()})}},Ay=class extends _y{constructor(e){e.externalServices||window.addEventListener("updatefromsandbox",t=>{e.eventBus.dispatch("updatefromsandbox",{source:window,detail:t.detail})}),e.externalServices||={createScripting:()=>new Cy(e.sandboxBundleSrc)},e.docProperties||=t=>s2(t),super(e)}},o2=3e4,Sy=class{constructor(){this.pdfViewer=null,this.pdfThumbnailViewer=null,this.onIdle=null,this.highestPriorityPage=null,this.idleTimeout=null,this.printing=!1,this.isThumbnailViewEnabled=!1,Object.defineProperty(this,"hasViewer",{value:()=>!!this.pdfViewer})}setViewer(e){this.pdfViewer=e}setThumbnailViewer(e){this.pdfThumbnailViewer=e}isHighestPriority(e){return this.highestPriorityPage===e.renderingId}renderHighestPriority(e){this.idleTimeout&&(clearTimeout(this.idleTimeout),this.idleTimeout=null),!this.pdfViewer.forceRendering(e)&&(this.isThumbnailViewEnabled&&this.pdfThumbnailViewer?.forceRendering()||this.printing||this.onIdle&&(this.idleTimeout=setTimeout(this.onIdle.bind(this),o2)))}getHighestPriority(e,t,r,i=!1){let s=e.views,o=s.length;if(o===0)return null;for(let d=0;d<o;d++){let h=s[d].view;if(!this.isViewFinished(h))return h}let a=e.first.id,l=e.last.id;if(l-a+1>o){let d=e.ids;for(let h=1,f=l-a;h<f;h++){let p=r?a+h:l-h;if(d.has(p))continue;let g=t[p-1];if(!this.isViewFinished(g))return g}}let c=r?l:a-2,u=t[c];return u&&!this.isViewFinished(u)||i&&(c+=r?1:-1,u=t[c],u&&!this.isViewFinished(u))?u:null}isViewFinished(e){return e.renderingState===We.FINISHED}renderView(e){switch(e.renderingState){case We.FINISHED:return!1;case We.PAUSED:this.highestPriorityPage=e.renderingId,e.resume();break;case We.RUNNING:this.highestPriorityPage=e.renderingId;break;case We.INITIAL:this.highestPriorityPage=e.renderingId,e.draw().finally(()=>{this.renderHighestPriority()}).catch(t=>{t instanceof ry||console.error(`renderView: "${t}"`)});break}return!0}},IS=10,gd={FORCE_SCROLL_MODE_PAGE:1e4,FORCE_LAZY_PAGE_INIT:5e3,PAUSE_EAGER_PAGE_INIT:250};function DS(n){return Object.values(Ht).includes(n)&&n!==Ht.DISABLE}var xy=class{#e=new Set;#t=0;constructor(e){this.#t=e}push(e){let t=this.#e;t.has(e)&&t.delete(e),t.add(e),t.size>this.#t&&this.#n()}resize(e,t=null){this.#t=e;let r=this.#e;if(t){let i=r.size,s=1;for(let o of r)if(t.has(o.id)&&(r.delete(o),r.add(o)),++s>i)break}for(;r.size>this.#t;)this.#n()}has(e){return this.#e.has(e)}[Symbol.iterator](){return this.#e.keys()}#n(){let e=this.#e.keys().next().value;e?.destroy(),this.#e.delete(e)}},Id=class{#e=null;#t=null;#n=null;#r=Ht.NONE;#i=null;#s=mr.ENABLE_FORMS;#l=null;#c=!1;#u=!1;#a=!1;#d=!1;#o=!1;#h=null;#p=null;#f=null;#g=null;#v=!1;#m=null;#y=!1;#w=0;#_=new ResizeObserver(this.#j.bind(this));#E=null;#C=null;#M=Hn.ENABLE;constructor(e){let t="4.8.69";if(cS!==t)throw new Error(`The API version "${cS}" does not match the Viewer version "${t}".`);if(this.container=e.container,this.viewer=e.viewer||e.container.firstElementChild,this.container?.tagName!=="DIV"||this.viewer?.tagName!=="DIV")throw new Error("Invalid `container` and/or `viewer` option.");if(this.container.offsetParent&&getComputedStyle(this.container).position!=="absolute")throw new Error("The `container` must be absolutely positioned.");this.#_.observe(this.container),this.eventBus=e.eventBus,this.linkService=e.linkService||new Ta,this.downloadManager=e.downloadManager||null,this.findController=e.findController||null,this.#t=e.altTextManager||null,this.findController&&(this.findController.onIsPageVisible=i=>this._getVisiblePages().ids.has(i)),this._scriptingManager=e.scriptingManager||null,this.#M=e.textLayerMode??Hn.ENABLE,this.#s=e.annotationMode??mr.ENABLE_FORMS,this.#r=e.annotationEditorMode??Ht.NONE,this.#n=e.annotationEditorHighlightColors||null,this.#u=e.enableHighlightFloatingButton===!0,this.#d=e.enableUpdatedAddImage===!0,this.#o=e.enableNewAltTextWhenAddingImage===!0,this.imageResourcesPath=e.imageResourcesPath||"",this.enablePrintAutoRotate=e.enablePrintAutoRotate||!1,this.removePageBorders=e.removePageBorders||!1,this.maxCanvasPixels=e.maxCanvasPixels,this.l10n=e.l10n,this.l10n||=new Bs,this.#a=e.enablePermissions||!1,this.pageColors=e.pageColors||null,this.#p=e.mlManager||null,this.#c=e.enableHWA||!1,this.defaultRenderingQueue=!e.renderingQueue,this.defaultRenderingQueue?(this.renderingQueue=new Sy,this.renderingQueue.setViewer(this)):this.renderingQueue=e.renderingQueue;let{abortSignal:r}=e;r?.addEventListener("abort",()=>{this.#_.disconnect(),this.#_=null},{once:!0}),this.scroll=SL(this.container,this._scrollUpdate.bind(this),r),this.presentationModeState=Ls.UNKNOWN,this._resetView(),this.removePageBorders&&this.viewer.classList.add("removePageBorders"),this.#L(),this.eventBus._on("thumbnailrendered",({pageNumber:i,pdfPage:s})=>{let o=this._pages[i-1];this.#e.has(o)||s?.cleanup()}),e.l10n||this.l10n.translate(this.container)}get pagesCount(){return this._pages.length}getPageView(e){return this._pages[e]}getCachedPageViews(){return new Set(this.#e)}get pageViewsReady(){return this._pages.every(e=>e?.pdfPage)}get renderForms(){return this.#s===mr.ENABLE_FORMS}get enableScripting(){return!!this._scriptingManager}get currentPageNumber(){return this._currentPageNumber}set currentPageNumber(e){if(!Number.isInteger(e))throw new Error("Invalid page number.");this.pdfDocument&&(this._setCurrentPageNumber(e,!0)||console.error(`currentPageNumber: "${e}" is not a valid page.`))}_setCurrentPageNumber(e,t=!1){if(this._currentPageNumber===e)return t&&this.#O(),!0;if(!(0<e&&e<=this.pagesCount))return!1;let r=this._currentPageNumber;return this._currentPageNumber=e,this.eventBus.dispatch("pagechanging",{source:this,pageNumber:e,pageLabel:this._pageLabels?.[e-1]??null,previous:r}),t&&this.#O(),!0}get currentPageLabel(){return this._pageLabels?.[this._currentPageNumber-1]??null}set currentPageLabel(e){if(!this.pdfDocument)return;let t=e|0;if(this._pageLabels){let r=this._pageLabels.indexOf(e);r>=0&&(t=r+1)}this._setCurrentPageNumber(t,!0)||console.error(`currentPageLabel: "${e}" is not a valid page.`)}get currentScale(){return this._currentScale!==qv?this._currentScale:TS}set currentScale(e){if(isNaN(e))throw new Error("Invalid numeric scale.");this.pdfDocument&&this.#T(e,{noScroll:!1})}get currentScaleValue(){return this._currentScaleValue}set currentScaleValue(e){this.pdfDocument&&this.#T(e,{noScroll:!1})}get pagesRotation(){return this._pagesRotation}set pagesRotation(e){if(!RS(e))throw new Error("Invalid pages rotation angle.");if(!this.pdfDocument||(e%=360,e<0&&(e+=360),this._pagesRotation===e))return;this._pagesRotation=e;let t=this._currentPageNumber;this.refresh(!0,{rotation:e}),this._currentScaleValue&&this.#T(this._currentScaleValue,{noScroll:!0}),this.eventBus.dispatch("rotationchanging",{source:this,pagesRotation:e,pageNumber:t}),this.defaultRenderingQueue&&this.update()}get firstPagePromise(){return this.pdfDocument?this._firstPageCapability.promise:null}get onePageRendered(){return this.pdfDocument?this._onePageRenderedCapability.promise:null}get pagesPromise(){return this.pdfDocument?this._pagesCapability.promise:null}get _layerProperties(){let e=this;return yd(this,"_layerProperties",{get annotationEditorUIManager(){return e.#i},get annotationStorage(){return e.pdfDocument?.annotationStorage},get downloadManager(){return e.downloadManager},get enableScripting(){return!!e._scriptingManager},get fieldObjectsPromise(){return e.pdfDocument?.getFieldObjects()},get findController(){return e.findController},get hasJSActionsPromise(){return e.pdfDocument?.hasJSActions()},get linkService(){return e.linkService}})}#I(e){let t={annotationEditorMode:this.#r,annotationMode:this.#s,textLayerMode:this.#M};return e&&(!e.includes(fd.COPY)&&this.#M===Hn.ENABLE&&(t.textLayerMode=Hn.ENABLE_PERMISSIONS),e.includes(fd.MODIFY_CONTENTS)||(t.annotationEditorMode=Ht.DISABLE),!e.includes(fd.MODIFY_ANNOTATIONS)&&!e.includes(fd.FILL_INTERACTIVE_FORMS)&&this.#s===mr.ENABLE_FORMS&&(t.annotationMode=mr.ENABLE)),t}#A(e){return I(this,null,function*(){if(document.visibilityState==="hidden"||!this.container.offsetParent||this._getVisiblePages().views.length===0)return;let t=Promise.withResolvers(),r=new AbortController;document.addEventListener("visibilitychange",()=>{document.visibilityState==="hidden"&&t.resolve()},{signal:typeof AbortSignal.any=="function"?AbortSignal.any([e,r.signal]):e}),yield Promise.race([this._onePageRenderedCapability.promise,t.promise]),r.abort()})}getAllText(){return I(this,null,function*(){let e=[],t=[];for(let r=1,i=this.pdfDocument.numPages;r<=i;++r){if(this.#y)return null;t.length=0;let s=yield this.pdfDocument.getPage(r),{items:o}=yield s.getTextContent();for(let a of o)a.str&&t.push(a.str),a.hasEOL&&t.push(`
`);e.push(Ia(t.join("")))}return e.join(`
`)})}#D(e,t){let r=document.getSelection(),{focusNode:i,anchorNode:s}=r;if(s&&i&&r.containsNode(this.#m)){if(this.#v||e===Hn.ENABLE_PERMISSIONS){t.preventDefault(),t.stopPropagation();return}this.#v=!0;let{classList:o}=this.viewer;o.add("copyAll");let a=new AbortController;window.addEventListener("keydown",l=>this.#y=l.key==="Escape",{signal:a.signal}),this.getAllText().then(l=>I(this,null,function*(){l!==null&&(yield navigator.clipboard.writeText(l))})).catch(l=>{console.warn(`Something goes wrong when extracting the text: ${l.message}`)}).finally(()=>{this.#v=!1,this.#y=!1,a.abort(),o.remove("copyAll")}),t.preventDefault(),t.stopPropagation()}}setDocument(e){if(this.pdfDocument&&(this.eventBus.dispatch("pagesdestroy",{source:this}),this._cancelRendering(),this._resetView(),this.findController?.setDocument(null),this._scriptingManager?.setDocument(null),this.#i?.destroy(),this.#i=null),this.pdfDocument=e,!e)return;let t=e.numPages,r=e.getPage(1),i=e.getOptionalContentConfig({intent:"display"}),s=this.#a?e.getPermissions():Promise.resolve(),{eventBus:o,pageColors:a,viewer:l}=this;this.#h=new AbortController;let{signal:c}=this.#h;if(t>gd.FORCE_SCROLL_MODE_PAGE){console.warn("Forcing PAGE-scrolling for performance reasons, given the length of the document.");let h=this._scrollMode=fe.PAGE;o.dispatch("scrollmodechanged",{source:this,mode:h})}this._pagesCapability.promise.then(()=>{o.dispatch("pagesloaded",{source:this,pagesCount:t})},()=>{});let u=h=>{let f=this._pages[h.pageNumber-1];f&&this.#e.push(f)};o._on("pagerender",u,{signal:c});let d=h=>{h.cssTransform||(this._onePageRenderedCapability.resolve({timestamp:h.timestamp}),o._off("pagerendered",d))};o._on("pagerendered",d,{signal:c}),Promise.all([r,s]).then(([h,f])=>{if(e!==this.pdfDocument)return;this._firstPageCapability.resolve(h),this._optionalContentConfigPromise=i;let{annotationEditorMode:p,annotationMode:g,textLayerMode:v}=this.#I(f);if(v!==Hn.DISABLE){let b=this.#m=document.createElement("div");b.id="hiddenCopyElement",l.before(b)}if(typeof AbortSignal.any=="function"&&p!==Ht.DISABLE){let b=p;e.isPureXfa?console.warn("Warning: XFA-editing is not implemented."):DS(b)?(this.#i=new rF(this.container,l,this.#t,o,e,a,this.#n,this.#u,this.#d,this.#o,this.#p),o.dispatch("annotationeditoruimanager",{source:this,uiManager:this.#i}),b!==Ht.NONE&&(b===Ht.STAMP&&this.#p?.loadModel("altText"),this.#i.updateMode(b))):console.error(`Invalid AnnotationEditor mode: ${b}`)}let m=this._scrollMode===fe.PAGE?null:l,y=this.currentScale,w=h.getViewport({scale:y*gr.PDF_TO_CSS_UNITS});l.style.setProperty("--scale-factor",w.scale),a?.background&&l.style.setProperty("--page-bg-color",a.background),(a?.foreground==="CanvasText"||a?.background==="Canvas")&&(l.style.setProperty("--hcm-highlight-filter",e.filterFactory.addHighlightHCMFilter("highlight","CanvasText","Canvas","HighlightText","Highlight")),l.style.setProperty("--hcm-highlight-selected-filter",e.filterFactory.addHighlightHCMFilter("highlight_selected","CanvasText","Canvas","HighlightText","ButtonText")));for(let b=1;b<=t;++b){let C=new xd({container:m,eventBus:o,id:b,scale:y,defaultViewport:w.clone(),optionalContentConfigPromise:i,renderingQueue:this.renderingQueue,textLayerMode:v,annotationMode:g,imageResourcesPath:this.imageResourcesPath,maxCanvasPixels:this.maxCanvasPixels,pageColors:a,l10n:this.l10n,layerProperties:this._layerProperties,enableHWA:this.#c});this._pages.push(C)}this._pages[0]?.setPdfPage(h),this._scrollMode===fe.PAGE?this.#x():this._spreadMode!==mt.NONE&&this._updateSpreadMode(),this.#A(c).then(()=>I(this,null,function*(){if(e!==this.pdfDocument)return;if(this.findController?.setDocument(e),this._scriptingManager?.setDocument(e),this.#m&&document.addEventListener("copy",this.#D.bind(this,v),{signal:c}),this.#i&&o.dispatch("annotationeditormodechanged",{source:this,mode:this.#r}),e.loadingParams.disableAutoFetch||t>gd.FORCE_LAZY_PAGE_INIT){this._pagesCapability.resolve();return}let b=t-1;if(b<=0){this._pagesCapability.resolve();return}for(let C=2;C<=t;++C){let S=e.getPage(C).then(T=>{let M=this._pages[C-1];M.pdfPage||M.setPdfPage(T),--b===0&&this._pagesCapability.resolve()},T=>{console.error(`Unable to get page ${C} to initialize viewer`,T),--b===0&&this._pagesCapability.resolve()});C%gd.PAUSE_EAGER_PAGE_INIT===0&&(yield S)}})),o.dispatch("pagesinit",{source:this}),e.getMetadata().then(({info:b})=>{e===this.pdfDocument&&b.Language&&(l.lang=b.Language)}),this.defaultRenderingQueue&&this.update()}).catch(h=>{console.error("Unable to initialize viewer",h),this._pagesCapability.reject(h)})}setPageLabels(e){if(this.pdfDocument){e?Array.isArray(e)&&this.pdfDocument.numPages===e.length?this._pageLabels=e:(this._pageLabels=null,console.error("setPageLabels: Invalid page labels.")):this._pageLabels=null;for(let t=0,r=this._pages.length;t<r;t++)this._pages[t].setPageLabel(this._pageLabels?.[t]??null)}}_resetView(){this._pages=[],this._currentPageNumber=1,this._currentScale=qv,this._currentScaleValue=null,this._pageLabels=null,this.#e=new xy(IS),this._location=null,this._pagesRotation=0,this._optionalContentConfigPromise=null,this._firstPageCapability=Promise.withResolvers(),this._onePageRenderedCapability=Promise.withResolvers(),this._pagesCapability=Promise.withResolvers(),this._scrollMode=fe.VERTICAL,this._previousScrollMode=fe.UNKNOWN,this._spreadMode=mt.NONE,this.#E={previousPageNumber:1,scrollDown:!0,pages:[]},this.#h?.abort(),this.#h=null,this.viewer.textContent="",this._updateScrollMode(),this.viewer.removeAttribute("lang"),this.#m?.remove(),this.#m=null,this.#B()}#x(){if(this._scrollMode!==fe.PAGE)throw new Error("#ensurePageViewVisible: Invalid scrollMode value.");let e=this._currentPageNumber,t=this.#E,r=this.viewer;if(r.textContent="",t.pages.length=0,this._spreadMode===mt.NONE&&!this.isInPresentationMode){let i=this._pages[e-1];r.append(i.div),t.pages.push(i)}else{let i=new Set,s=this._spreadMode-1;s===-1?i.add(e-1):e%2!==s?(i.add(e-1),i.add(e)):(i.add(e-2),i.add(e-1));let o=document.createElement("div");if(o.className="spread",this.isInPresentationMode){let a=document.createElement("div");a.className="dummyPage",o.append(a)}for(let a of i){let l=this._pages[a];l&&(o.append(l.div),t.pages.push(l))}r.append(o)}t.scrollDown=e>=t.previousPageNumber,t.previousPageNumber=e}_scrollUpdate(){this.pagesCount!==0&&this.update()}#R(e,t=null){let{div:r,id:i}=e;if(this._currentPageNumber!==i&&this._setCurrentPageNumber(i),this._scrollMode===fe.PAGE&&(this.#x(),this.update()),!t&&!this.isInPresentationMode){let s=r.offsetLeft+r.clientLeft,o=s+r.clientWidth,{scrollLeft:a,clientWidth:l}=this.container;(this._scrollMode===fe.HORIZONTAL||s<a||o>a+l)&&(t={left:0,top:0})}MS(r,t),!this._currentScaleValue&&this._location&&(this._location=null)}#P(e){return e===this._currentScale||Math.abs(e-this._currentScale)<1e-15}#S(e,t,{noScroll:r=!1,preset:i=!1,drawingDelay:s=-1,origin:o=null}){if(this._currentScaleValue=t.toString(),this.#P(e)){i&&this.eventBus.dispatch("scalechanging",{source:this,scale:e,presetValue:t});return}this.viewer.style.setProperty("--scale-factor",e*gr.PDF_TO_CSS_UNITS);let a=s>=0&&s<1e3;this.refresh(!0,{scale:e,drawingDelay:a?s:-1}),a&&(this.#C=setTimeout(()=>{this.#C=null,this.refresh()},s));let l=this._currentScale;if(this._currentScale=e,!r){let c=this._currentPageNumber,u;if(this._location&&!(this.isInPresentationMode||this.isChangingPresentationMode)&&(c=this._location.pageNumber,u=[null,{name:"XYZ"},this._location.left,this._location.top,null]),this.scrollPageIntoView({pageNumber:c,destArray:u,allowNegativeOffset:!0}),Array.isArray(o)){let d=e/l-1,[h,f]=this.containerTopLeft;this.container.scrollLeft+=(o[0]-f)*d,this.container.scrollTop+=(o[1]-h)*d}}this.eventBus.dispatch("scalechanging",{source:this,scale:e,presetValue:i?t:void 0}),this.defaultRenderingQueue&&this.update()}get#b(){return this._spreadMode!==mt.NONE&&this._scrollMode!==fe.HORIZONTAL?2:1}#T(e,t){let r=parseFloat(e);if(r>0)t.preset=!1,this.#S(r,e,t);else{let i=this._pages[this._currentPageNumber-1];if(!i)return;let s=QA,o=ZA;this.isInPresentationMode?(s=o=4,this._spreadMode!==mt.NONE&&(s*=2)):this.removePageBorders?s=o=0:this._scrollMode===fe.HORIZONTAL&&([s,o]=[o,s]);let a=(this.container.clientWidth-s)/i.width*i.scale/this.#b,l=(this.container.clientHeight-o)/i.height*i.scale;switch(e){case"page-actual":r=1;break;case"page-width":r=a;break;case"page-height":r=l;break;case"page-fit":r=Math.min(a,l);break;case"auto":let c=tS(i)?a:Math.min(l,a);r=Math.min(AL,c);break;default:console.error(`#setScale: "${e}" is an unknown zoom value.`);return}t.preset=!0,this.#S(r,e,t)}}#O(){let e=this._pages[this._currentPageNumber-1];this.isInPresentationMode&&this.#T(this._currentScaleValue,{noScroll:!0}),this.#R(e)}pageLabelToPageNumber(e){if(!this._pageLabels)return null;let t=this._pageLabels.indexOf(e);return t<0?null:t+1}scrollPageIntoView({pageNumber:e,destArray:t=null,allowNegativeOffset:r=!1,ignoreDestinationZoom:i=!1}){if(!this.pdfDocument)return;let s=Number.isInteger(e)&&this._pages[e-1];if(!s){console.error(`scrollPageIntoView: "${e}" is not a valid pageNumber parameter.`);return}if(this.isInPresentationMode||!t){this._setCurrentPageNumber(e,!0);return}let o=0,a=0,l=0,c=0,u,d,h=s.rotation%180!==0,f=(h?s.height:s.width)/s.scale/gr.PDF_TO_CSS_UNITS,p=(h?s.width:s.height)/s.scale/gr.PDF_TO_CSS_UNITS,g=0;switch(t[1].name){case"XYZ":o=t[2],a=t[3],g=t[4],o=o!==null?o:0,a=a!==null?a:p;break;case"Fit":case"FitB":g="page-fit";break;case"FitH":case"FitBH":a=t[2],g="page-width",a===null&&this._location?(o=this._location.left,a=this._location.top):(typeof a!="number"||a<0)&&(a=p);break;case"FitV":case"FitBV":o=t[2],l=f,c=p,g="page-height";break;case"FitR":o=t[2],a=t[3],l=t[4]-o,c=t[5]-a;let w=QA,b=ZA;this.removePageBorders&&(w=b=0),u=(this.container.clientWidth-w)/l/gr.PDF_TO_CSS_UNITS,d=(this.container.clientHeight-b)/c/gr.PDF_TO_CSS_UNITS,g=Math.min(Math.abs(u),Math.abs(d));break;default:console.error(`scrollPageIntoView: "${t[1].name}" is not a valid destination type.`);return}if(i||(g&&g!==this._currentScale?this.currentScaleValue=g:this._currentScale===qv&&(this.currentScaleValue=EL)),g==="page-fit"&&!t[4]){this.#R(s);return}let v=[s.viewport.convertToViewportPoint(o,a),s.viewport.convertToViewportPoint(o+l,a+c)],m=Math.min(v[0][0],v[1][0]),y=Math.min(v[0][1],v[1][1]);r||(m=Math.max(m,0),y=Math.max(y,0)),this.#R(s,{left:m,top:y})}_updateLocation(e){let t=this._currentScale,r=this._currentScaleValue,i=parseFloat(r)===t?Math.round(t*1e4)/100:r,s=e.id,o=this._pages[s-1],a=this.container,l=o.getPagePoint(a.scrollLeft-e.x,a.scrollTop-e.y),c=Math.round(l[0]),u=Math.round(l[1]),d=`#page=${s}`;this.isInPresentationMode||(d+=`&zoom=${i},${c},${u}`),this._location={pageNumber:s,scale:i,top:u,left:c,rotation:this._pagesRotation,pdfOpenParams:d}}update(){let e=this._getVisiblePages(),t=e.views,r=t.length;if(r===0)return;let i=Math.max(IS,2*r+1);this.#e.resize(i,e.ids),this.renderingQueue.renderHighestPriority(e);let s=this._spreadMode===mt.NONE&&(this._scrollMode===fe.PAGE||this._scrollMode===fe.VERTICAL),o=this._currentPageNumber,a=!1;for(let l of t){if(l.percent<100)break;if(l.id===o&&s){a=!0;break}}this._setCurrentPageNumber(a?o:t[0].id),this._updateLocation(e.first),this.eventBus.dispatch("updateviewarea",{source:this,location:this._location})}#F(){let e=this._getVisiblePages(),t=[],{ids:r,views:i}=e;for(let s of i){let{view:o}=s;if(!o.hasEditableAnnotations()){r.delete(o.id);continue}t.push(s)}return t.length===0?null:(this.renderingQueue.renderHighestPriority({first:t[0],last:t.at(-1),views:t,ids:r}),r)}containsElement(e){return this.container.contains(e)}focus(){this.container.focus()}get _isContainerRtl(){return getComputedStyle(this.container).direction==="rtl"}get isInPresentationMode(){return this.presentationModeState===Ls.FULLSCREEN}get isChangingPresentationMode(){return this.presentationModeState===Ls.CHANGING}get isHorizontalScrollbarEnabled(){return this.isInPresentationMode?!1:this.container.scrollWidth>this.container.clientWidth}get isVerticalScrollbarEnabled(){return this.isInPresentationMode?!1:this.container.scrollHeight>this.container.clientHeight}_getVisiblePages(){let e=this._scrollMode===fe.PAGE?this.#E.pages:this._pages,t=this._scrollMode===fe.HORIZONTAL,r=t&&this._isContainerRtl;return IL({scrollEl:this.container,views:e,sortByVisibility:!0,horizontal:t,rtl:r})}cleanup(){for(let e of this._pages)e.renderingState!==We.FINISHED&&e.reset()}_cancelRendering(){for(let e of this._pages)e.cancelRendering()}#H(e){return I(this,null,function*(){if(e.pdfPage)return e.pdfPage;try{let t=yield this.pdfDocument.getPage(e.id);return e.pdfPage||e.setPdfPage(t),t}catch(t){return console.error("Unable to get page for page view",t),null}})}#V(e){if(e.first?.id===1)return!0;if(e.last?.id===this.pagesCount)return!1;switch(this._scrollMode){case fe.PAGE:return this.#E.scrollDown;case fe.HORIZONTAL:return this.scroll.right}return this.scroll.down}forceRendering(e){let t=e||this._getVisiblePages(),r=this.#V(t),i=this._spreadMode!==mt.NONE&&this._scrollMode!==fe.HORIZONTAL,s=this.renderingQueue.getHighestPriority(t,this._pages,r,i);return s?(this.#H(s).then(()=>{this.renderingQueue.renderView(s)}),!0):!1}get hasEqualPageSizes(){let e=this._pages[0];for(let t=1,r=this._pages.length;t<r;++t){let i=this._pages[t];if(i.width!==e.width||i.height!==e.height)return!1}return!0}getPagesOverview(){let e;return this._pages.map(t=>{let r=t.pdfPage.getViewport({scale:1}),i=tS(r);if(e===void 0)e=i;else if(this.enablePrintAutoRotate&&i!==e)return{width:r.height,height:r.width,rotation:(r.rotation-90)%360};return{width:r.width,height:r.height,rotation:r.rotation}})}get optionalContentConfigPromise(){return this.pdfDocument?this._optionalContentConfigPromise?this._optionalContentConfigPromise:(console.error("optionalContentConfigPromise: Not initialized yet."),this.pdfDocument.getOptionalContentConfig({intent:"display"})):Promise.resolve(null)}set optionalContentConfigPromise(e){if(!(e instanceof Promise))throw new Error(`Invalid optionalContentConfigPromise: ${e}`);this.pdfDocument&&this._optionalContentConfigPromise&&(this._optionalContentConfigPromise=e,this.refresh(!1,{optionalContentConfigPromise:e}),this.eventBus.dispatch("optionalcontentconfigchanged",{source:this,promise:e}))}get scrollMode(){return this._scrollMode}set scrollMode(e){if(this._scrollMode!==e){if(!DL(e))throw new Error(`Invalid scroll mode: ${e}`);this.pagesCount>gd.FORCE_SCROLL_MODE_PAGE||(this._previousScrollMode=this._scrollMode,this._scrollMode=e,this.eventBus.dispatch("scrollmodechanged",{source:this,mode:e}),this._updateScrollMode(this._currentPageNumber))}}_updateScrollMode(e=null){let t=this._scrollMode,r=this.viewer;r.classList.toggle("scrollHorizontal",t===fe.HORIZONTAL),r.classList.toggle("scrollWrapped",t===fe.WRAPPED),!(!this.pdfDocument||!e)&&(t===fe.PAGE?this.#x():this._previousScrollMode===fe.PAGE&&this._updateSpreadMode(),this._currentScaleValue&&isNaN(this._currentScaleValue)&&this.#T(this._currentScaleValue,{noScroll:!0}),this._setCurrentPageNumber(e,!0),this.update())}get spreadMode(){return this._spreadMode}set spreadMode(e){if(this._spreadMode!==e){if(!TL(e))throw new Error(`Invalid spread mode: ${e}`);this._spreadMode=e,this.eventBus.dispatch("spreadmodechanged",{source:this,mode:e}),this._updateSpreadMode(this._currentPageNumber)}}_updateSpreadMode(e=null){if(!this.pdfDocument)return;let t=this.viewer,r=this._pages;if(this._scrollMode===fe.PAGE)this.#x();else if(t.textContent="",this._spreadMode===mt.NONE)for(let i of this._pages)t.append(i.div);else{let i=this._spreadMode-1,s=null;for(let o=0,a=r.length;o<a;++o)s===null?(s=document.createElement("div"),s.className="spread",t.append(s)):o%2===i&&(s=s.cloneNode(!1),t.append(s)),s.append(r[o].div)}e&&(this._currentScaleValue&&isNaN(this._currentScaleValue)&&this.#T(this._currentScaleValue,{noScroll:!0}),this._setCurrentPageNumber(e,!0),this.update())}_getPageAdvance(e,t=!1){switch(this._scrollMode){case fe.WRAPPED:{let{views:r}=this._getVisiblePages(),i=new Map;for(let{id:s,y:o,percent:a,widthPercent:l}of r){if(a===0||l<100)continue;let c=i.get(o);c||i.set(o,c||=[]),c.push(s)}for(let s of i.values()){let o=s.indexOf(e);if(o===-1)continue;let a=s.length;if(a===1)break;if(t)for(let l=o-1,c=0;l>=c;l--){let u=s[l],d=s[l+1]-1;if(u<d)return e-d}else for(let l=o+1,c=a;l<c;l++){let u=s[l],d=s[l-1]+1;if(u>d)return d-e}if(t){let l=s[0];if(l<e)return e-l+1}else{let l=s[a-1];if(l>e)return l-e+1}break}break}case fe.HORIZONTAL:break;case fe.PAGE:case fe.VERTICAL:{if(this._spreadMode===mt.NONE)break;let r=this._spreadMode-1;if(t&&e%2!==r)break;if(!t&&e%2===r)break;let{views:i}=this._getVisiblePages(),s=t?e-1:e+1;for(let{id:o,percent:a,widthPercent:l}of i)if(o===s){if(a>0&&l===100)return 2;break}break}}return 1}nextPage(){let e=this._currentPageNumber,t=this.pagesCount;if(e>=t)return!1;let r=this._getPageAdvance(e,!1)||1;return this.currentPageNumber=Math.min(e+r,t),!0}previousPage(){let e=this._currentPageNumber;if(e<=1)return!1;let t=this._getPageAdvance(e,!0)||1;return this.currentPageNumber=Math.max(e-t,1),!0}updateScale({drawingDelay:e,scaleFactor:t=null,steps:r=null,origin:i}){if(r===null&&t===null)throw new Error("Invalid updateScale options: either `steps` or `scaleFactor` must be provided.");if(!this.pdfDocument)return;let s=this._currentScale;if(t>0&&t!==1)s=Math.round(s*t*100)/100;else if(r){let o=r>0?XA:1/XA,a=r>0?Math.ceil:Math.floor;r=Math.abs(r);do s=a((s*o).toFixed(2)*10)/10;while(--r>0)}s=Math.max(CL,Math.min(_L,s)),this.#T(s,{noScroll:!1,drawingDelay:e,origin:i})}increaseScale(e={}){this.updateScale(W(_({},e),{steps:e.steps??1}))}decreaseScale(e={}){this.updateScale(W(_({},e),{steps:-(e.steps??1)}))}#L(e=this.container.clientHeight){e!==this.#w&&(this.#w=e,ML.setProperty("--viewer-container-height",`${e}px`))}#j(e){for(let t of e)if(t.target===this.container){this.#L(Math.floor(t.borderBoxSize[0].blockSize)),this.#l=null;break}}get containerTopLeft(){return this.#l||=[this.container.offsetTop,this.container.offsetLeft]}#B(){this.#f?.abort(),this.#f=null,this.#g!==null&&(clearTimeout(this.#g),this.#g=null)}get annotationEditorMode(){return this.#i?this.#r:Ht.DISABLE}set annotationEditorMode({mode:e,editId:t=null,isFromKeyboard:r=!1}){if(!this.#i)throw new Error("The AnnotationEditor is not enabled.");if(this.#r===e)return;if(!DS(e))throw new Error(`Invalid AnnotationEditor mode: ${e}`);if(!this.pdfDocument)return;e===Ht.STAMP&&this.#p?.loadModel("altText");let{eventBus:i}=this,s=()=>{this.#B(),this.#r=e,this.#i.updateMode(e,t,r),i.dispatch("annotationeditormodechanged",{source:this,mode:e})};if(e===Ht.NONE||this.#r===Ht.NONE){let o=e!==Ht.NONE;o||this.pdfDocument.annotationStorage.resetModifiedIds();for(let l of this._pages)l.toggleEditingMode(o);let a=this.#F();if(o&&a){this.#B(),this.#f=new AbortController;let l=AbortSignal.any([this.#h.signal,this.#f.signal]);i._on("pagerendered",({pageNumber:c})=>{a.delete(c),a.size===0&&(this.#g=setTimeout(s,0))},{signal:l});return}}s()}refresh(e=!1,t=Object.create(null)){if(this.pdfDocument){for(let r of this._pages)r.update(t);this.#C!==null&&(clearTimeout(this.#C),this.#C=null),e||this.update()}}},Iy=class extends Id{_resetView(){super._resetView(),this._scrollMode=fe.PAGE,this._spreadMode=mt.NONE}set scrollMode(e){}_updateScrollMode(){}set spreadMode(e){}_updateSpreadMode(){}};var a2=Fe.AnnotationLayerBuilder,l2=Fe.DownloadManager,c2=Fe.EventBus,u2=Fe.FindState,Dy=Fe.GenericL10n,Ti=Fe.LinkTarget,Ty=Fe.PDFFindController,d2=Fe.PDFHistory,My=Fe.PDFLinkService,h2=Fe.PDFPageView,f2=Fe.PDFScriptingManager,Ry=Fe.PDFSinglePageViewer,Oy=Fe.PDFViewer,p2=Fe.ProgressBar,g2=Fe.RenderingStates,m2=Fe.ScrollMode,v2=Fe.SimpleLinkService,y2=Fe.SpreadMode,b2=Fe.StructTreeLayerBuilder,w2=Fe.TextLayerBuilder,E2=Fe.XfaLayerBuilder,C2=Fe.parseQueryString;var _2=["pdfViewerContainer"];function A2(n,e){let t=new n.EventBus;return S2(t,e),t}function S2(n,e){Ne(n,"documentload").pipe(Se(e)).subscribe(()=>{let t=document.createEvent("CustomEvent");t.initCustomEvent("documentload",!0,!0,{}),window.dispatchEvent(t)}),Ne(n,"pagerendered").pipe(Se(e)).subscribe(({pageNumber:t,cssTransform:r,source:i})=>{let s=document.createEvent("CustomEvent");s.initCustomEvent("pagerendered",!0,!0,{pageNumber:t,cssTransform:r}),i.div.dispatchEvent(s)}),Ne(n,"textlayerrendered").pipe(Se(e)).subscribe(({pageNumber:t,source:r})=>{let i=document.createEvent("CustomEvent");i.initCustomEvent("textlayerrendered",!0,!0,{pageNumber:t}),r.textLayerDiv?.dispatchEvent(i)}),Ne(n,"pagechanging").pipe(Se(e)).subscribe(({pageNumber:t,source:r})=>{let i=document.createEvent("UIEvents");i.initEvent("pagechanging",!0,!0),i.pageNumber=t,r.container.dispatchEvent(i)}),Ne(n,"pagesinit").pipe(Se(e)).subscribe(({source:t})=>{let r=document.createEvent("CustomEvent");r.initCustomEvent("pagesinit",!0,!0,null),t.container.dispatchEvent(r)}),Ne(n,"pagesloaded").pipe(Se(e)).subscribe(({pagesCount:t,source:r})=>{let i=document.createEvent("CustomEvent");i.initCustomEvent("pagesloaded",!0,!0,{pagesCount:t}),r.container.dispatchEvent(i)}),Ne(n,"scalechange").pipe(Se(e)).subscribe(({scale:t,presetValue:r,source:i})=>{let s=document.createEvent("UIEvents");s.initEvent("scalechange",!0,!0),s.scale=t,s.presetValue=r,i.container.dispatchEvent(s)}),Ne(n,"updateviewarea").pipe(Se(e)).subscribe(({location:t,source:r})=>{let i=document.createEvent("UIEvents");i.initEvent("updateviewarea",!0,!0),i.location=t,r.container.dispatchEvent(i)}),Ne(n,"find").pipe(Se(e)).subscribe(({source:t,type:r,query:i,phraseSearch:s,caseSensitive:o,highlightAll:a,findPrevious:l})=>{if(t===window)return;let c=document.createEvent("CustomEvent");c.initCustomEvent("find"+r,!0,!0,{query:i,phraseSearch:s,caseSensitive:o,highlightAll:a,findPrevious:l}),window.dispatchEvent(c)}),Ne(n,"attachmentsloaded").pipe(Se(e)).subscribe(({attachmentsCount:t,source:r})=>{let i=document.createEvent("CustomEvent");i.initCustomEvent("attachmentsloaded",!0,!0,{attachmentsCount:t}),r.container.dispatchEvent(i)}),Ne(n,"sidebarviewchanged").pipe(Se(e)).subscribe(({view:t,source:r})=>{let i=document.createEvent("CustomEvent");i.initCustomEvent("sidebarviewchanged",!0,!0,{view:t}),r.outerContainer.dispatchEvent(i)}),Ne(n,"pagemode").pipe(Se(e)).subscribe(({mode:t,source:r})=>{let i=document.createEvent("CustomEvent");i.initCustomEvent("pagemode",!0,!0,{mode:t}),r.pdfViewer.container.dispatchEvent(i)}),Ne(n,"namedaction").pipe(Se(e)).subscribe(({action:t,source:r})=>{let i=document.createEvent("CustomEvent");i.initCustomEvent("namedaction",!0,!0,{action:t}),r.pdfViewer.container.dispatchEvent(i)}),Ne(n,"presentationmodechanged").pipe(Se(e)).subscribe(({active:t,switchInProgress:r})=>{let i=document.createEvent("CustomEvent");i.initCustomEvent("presentationmodechanged",!0,!0,{active:t,switchInProgress:r}),window.dispatchEvent(i)}),Ne(n,"outlineloaded").pipe(Se(e)).subscribe(({outlineCount:t,source:r})=>{let i=document.createEvent("CustomEvent");i.initCustomEvent("outlineloaded",!0,!0,{outlineCount:t}),r.container.dispatchEvent(i)})}function Ny(n,e,t){n[e]=t}function Ra(){return typeof window>"u"}Ra()||Ny(ks,"verbosity",zv.INFOS);typeof Promise.withResolvers>"u"&&window&&(window.Promise.withResolvers=()=>{let n,e;return{promise:new Promise((r,i)=>{n=r,e=i}),resolve:n,reject:e}});var ky=function(n){return n[n.DISABLED=0]="DISABLED",n[n.ENABLED=1]="ENABLED",n[n.ENHANCED=2]="ENHANCED",n}(ky||{}),kS=(()=>{class n{element;ngZone;static CSS_UNITS=96/72;static BORDER_WIDTH=9;pdfViewerContainer;eventBus;pdfLinkService;pdfFindController;pdfViewer;isVisible=!1;_cMapsUrl=typeof ks<"u"?`https://unpkg.com/pdfjs-dist@${Aa}/cmaps/`:null;_imageResourcesPath=typeof ks<"u"?`https://unpkg.com/pdfjs-dist@${Aa}/web/images/`:void 0;_renderText=!0;_renderTextMode=ky.ENABLED;_stickToPage=!1;_originalSize=!0;_pdf;_page=1;_zoom=1;_zoomScale="page-width";_rotation=0;_showAll=!0;_canAutoResize=!0;_fitToPage=!1;_externalLinkTarget="blank";_showBorders=!1;lastLoaded;_latestScrolledPage;pageScrollTimeout=null;isInitialized=!1;loadingTask;destroy$=new Oe;afterLoadComplete=new He;pageRendered=new He;pageInitialized=new He;textLayerRendered=new He;onError=new He;onProgress=new He;pageChange=new He(!0);src;set cMapsUrl(t){this._cMapsUrl=t}set page(t){t=parseInt(t,10)||1;let r=t;this._pdf&&(t=this.getValidPageNumber(t)),this._page=t,r!==t&&this.pageChange.emit(t)}set renderText(t){this._renderText=t}set renderTextMode(t){this._renderTextMode=t}set originalSize(t){this._originalSize=t}set showAll(t){this._showAll=t}set stickToPage(t){this._stickToPage=t}set zoom(t){t<=0||(this._zoom=t)}get zoom(){return this._zoom}set zoomScale(t){this._zoomScale=t}get zoomScale(){return this._zoomScale}set rotation(t){if(!(typeof t=="number"&&t%90===0)){console.warn("Invalid pages rotation angle.");return}this._rotation=t}set externalLinkTarget(t){this._externalLinkTarget=t}set autoresize(t){this._canAutoResize=!!t}set fitToPage(t){this._fitToPage=!!t}set showBorders(t){this._showBorders=!!t}static getLinkTarget(t){switch(t){case"blank":return Ti.BLANK;case"none":return Ti.NONE;case"self":return Ti.SELF;case"parent":return Ti.PARENT;case"top":return Ti.TOP}return null}constructor(t,r){if(this.element=t,this.ngZone=r,Ra())return;let i,s=Aa,o=window[`pdfWorkerSrc${s}`];o?i=o:window.hasOwnProperty("pdfWorkerSrc")&&typeof window.pdfWorkerSrc=="string"&&window.pdfWorkerSrc?i=window.pdfWorkerSrc:i=`https://cdn.jsdelivr.net/npm/pdfjs-dist@${s}/legacy/build/pdf.worker.min.mjs`,Ny($v,"workerSrc",i)}ngAfterViewChecked(){if(this.isInitialized)return;let t=this.pdfViewerContainer.nativeElement.offsetParent;if(this.isVisible===!0&&t==null){this.isVisible=!1;return}this.isVisible===!1&&t!=null&&(this.isVisible=!0,setTimeout(()=>{this.initialize(),this.ngOnChanges({src:this.src})}))}ngOnInit(){this.initialize(),this.setupResizeListener()}ngOnDestroy(){this.clear(),this.destroy$.next(),this.loadingTask=null}ngOnChanges(t){if(!(Ra()||!this.isVisible)){if("src"in t)this.loadPDF();else if(this._pdf){if(("renderText"in t||"showAll"in t)&&(this.setupViewer(),this.resetPdfDocument()),"page"in t){let{page:r}=t;if(r.currentValue===this._latestScrolledPage)return;this.pdfViewer.scrollPageIntoView({pageNumber:this._page})}this.update()}}}updateSize(){ve(this._pdf.getPage(this.pdfViewer.currentPageNumber)).pipe(Se(this.destroy$)).subscribe({next:t=>{let r=this._rotation+t.rotate,i=t.getViewport({scale:this._zoom,rotation:r}).width*n.CSS_UNITS,s=this._zoom,o=!0;if(!this._originalSize||this._fitToPage&&i>this.pdfViewerContainer.nativeElement.clientWidth){let a=t.getViewport({scale:1,rotation:r});s=this.getScale(a.width,a.height),o=!this._stickToPage}this.pdfViewer.currentScale=s,o&&this.pdfViewer.scrollPageIntoView({pageNumber:t.pageNumber,ignoreDestinationZoom:!0})}})}clear(){this.loadingTask&&!this.loadingTask.destroyed&&this.loadingTask.destroy(),this._pdf&&(this._latestScrolledPage=0,this._pdf.destroy(),this._pdf=void 0),this.pdfViewer&&this.pdfViewer.setDocument(null),this.pdfLinkService&&this.pdfLinkService.setDocument(null,null),this.pdfFindController&&this.pdfFindController.setDocument(null)}getPDFLinkServiceConfig(){let t=n.getLinkTarget(this._externalLinkTarget);return t?{externalLinkTarget:t}:{}}initEventBus(){this.eventBus=A2(Py,this.destroy$),Ne(this.eventBus,"pagerendered").pipe(Se(this.destroy$)).subscribe(t=>{this.pageRendered.emit(t)}),Ne(this.eventBus,"pagesinit").pipe(Se(this.destroy$)).subscribe(t=>{this.pageInitialized.emit(t)}),Ne(this.eventBus,"pagechanging").pipe(Se(this.destroy$)).subscribe(({pageNumber:t})=>{this.pageScrollTimeout&&clearTimeout(this.pageScrollTimeout),this.pageScrollTimeout=window.setTimeout(()=>{this._latestScrolledPage=t,this.pageChange.emit(t)},100)}),Ne(this.eventBus,"textlayerrendered").pipe(Se(this.destroy$)).subscribe(t=>{this.textLayerRendered.emit(t)})}initPDFServices(){this.pdfLinkService=new My(_({eventBus:this.eventBus},this.getPDFLinkServiceConfig())),this.pdfFindController=new Ty({eventBus:this.eventBus,linkService:this.pdfLinkService})}getPDFOptions(){return{eventBus:this.eventBus,container:this.element.nativeElement.querySelector("div"),removePageBorders:!this._showBorders,linkService:this.pdfLinkService,textLayerMode:this._renderText?this._renderTextMode:ky.DISABLED,findController:this.pdfFindController,l10n:new Dy("en"),imageResourcesPath:this._imageResourcesPath,annotationEditorMode:Uv.DISABLE}}setupViewer(){this.pdfViewer&&this.pdfViewer.setDocument(null),Ny(ks,"disableTextLayer",!this._renderText),this.initPDFServices(),this._showAll?this.pdfViewer=new Oy(this.getPDFOptions()):this.pdfViewer=new Ry(this.getPDFOptions()),this.pdfLinkService.setViewer(this.pdfViewer),this.pdfViewer._currentPageNumber=this._page}getValidPageNumber(t){return t<1?1:t>this._pdf.numPages?this._pdf.numPages:t}getDocumentParams(){let t=typeof this.src;if(!this._cMapsUrl)return this.src;let r={cMapUrl:this._cMapsUrl,cMapPacked:!0,enableXfa:!0};return r.isEvalSupported=!1,t==="string"?r.url=this.src:t==="object"&&(this.src.byteLength!==void 0?r.data=this.src:Object.assign(r,this.src)),r}loadPDF(){if(!this.src)return;if(this.lastLoaded===this.src){this.update();return}this.clear(),this.setupViewer(),this.loadingTask=Wv(this.getDocumentParams()),this.loadingTask.onProgress=r=>{this.onProgress.emit(r)};let t=this.src;ve(this.loadingTask.promise).pipe(Se(this.destroy$)).subscribe({next:r=>{this._pdf=r,this.lastLoaded=t,this.afterLoadComplete.emit(r),this.resetPdfDocument(),this.update()},error:r=>{this.lastLoaded=null,this.onError.emit(r)}})}update(){this.page=this._page,this.render()}render(){if(this._page=this.getValidPageNumber(this._page),(this._rotation!==0||this.pdfViewer.pagesRotation!==this._rotation)&&this.pdfViewer.firstPagePromise?.then(()=>this.pdfViewer.pagesRotation=this._rotation),this._stickToPage&&setTimeout(()=>{this.pdfViewer.currentPageNumber=this._page}),this.pdfViewer._pages?.length)this.updateSize();else{let t=this.pageInitialized.subscribe(()=>{this.updateSize(),t.unsubscribe()})}}getScale(t,r){let i=this._showBorders?2*n.BORDER_WIDTH:0,s=this.pdfViewerContainer.nativeElement.clientWidth-i,o=this.pdfViewerContainer.nativeElement.clientHeight-i;if(o===0||r===0||s===0||t===0)return 1;let a=1;switch(this._zoomScale){case"page-fit":a=Math.min(o/r,s/t);break;case"page-height":a=o/r;break;case"page-width":default:a=s/t;break}return this._zoom*a/n.CSS_UNITS}resetPdfDocument(){this.pdfLinkService.setDocument(this._pdf,null),this.pdfFindController.setDocument(this._pdf),this.pdfViewer.setDocument(this._pdf)}initialize(){Ra()||!this.isVisible||(this.isInitialized=!0,this.initEventBus(),this.setupViewer())}setupResizeListener(){Ra()||this.ngZone.runOutsideAngular(()=>{Ne(window,"resize").pipe(Fh(100),Ve(()=>this._canAutoResize&&!!this._pdf),Se(this.destroy$)).subscribe(()=>{this.updateSize()})})}static \u0275fac=function(r){return new(r||n)(Ue(Mn),Ue(ke))};static \u0275cmp=xe({type:n,selectors:[["pdf-viewer"]],viewQuery:function(r,i){if(r&1&&ZE(_2,5),r&2){let s;Bp(s=Vp())&&(i.pdfViewerContainer=s.first)}},inputs:{src:"src",cMapsUrl:[0,"c-maps-url","cMapsUrl"],page:"page",renderText:[0,"render-text","renderText"],renderTextMode:[0,"render-text-mode","renderTextMode"],originalSize:[0,"original-size","originalSize"],showAll:[0,"show-all","showAll"],stickToPage:[0,"stick-to-page","stickToPage"],zoom:"zoom",zoomScale:[0,"zoom-scale","zoomScale"],rotation:"rotation",externalLinkTarget:[0,"external-link-target","externalLinkTarget"],autoresize:"autoresize",fitToPage:[0,"fit-to-page","fitToPage"],showBorders:[0,"show-borders","showBorders"]},outputs:{afterLoadComplete:"after-load-complete",pageRendered:"page-rendered",pageInitialized:"pages-initialized",textLayerRendered:"text-layer-rendered",onError:"error",onProgress:"on-progress",pageChange:"pageChange"},standalone:!1,features:[us],decls:3,vars:0,consts:[["pdfViewerContainer",""],[1,"ng2-pdf-viewer-container"],[1,"pdfViewer"]],template:function(r,i){r&1&&(O(0,"div",1,0),re(2,"div",2),P())},styles:[`.ng2-pdf-viewer-container[_ngcontent-%COMP%]{overflow-x:auto;position:absolute;height:100%;width:100%;-webkit-overflow-scrolling:touch}[_nghost-%COMP%]{display:block;position:relative}[_nghost-%COMP%]    {--pdfViewer-padding-bottom: 0;--page-margin: 1px auto -8px;--page-border: 9px solid transparent;--spreadHorizontalWrapped-margin-LR: -3.5px;--viewer-container-height: 0;--annotation-unfocused-field-background: url("data:image/svg+xml;charset=UTF-8,<svg width='1px' height='1px' xmlns='http://www.w3.org/2000/svg'><rect width='100%' height='100%' style='fill:rgba(0, 54, 255, 0.13);'/></svg>");--xfa-unfocused-field-background: var( --annotation-unfocused-field-background );--page-border-image: url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABMAAAATCAYAAAByUDbMAAAA1ElEQVQ4jbWUWw6EIAxFy2NFs/8NzR4UJhpqLsdi5mOmSSMUOfYWqv3S0gMr4XlYH/64gZa/gN3ANYA7KAXALt4ktoQ5MI9YxqaG8bWmsIysMuT6piSQCa4whZThCu8CM4zP9YJaKci9jicPq3NcBWYoPMGUlhG7ivtkB+gVyFY75wXghOvh8t5mto1Mdim6e+MBqH6XsY+YAwjpq3vGF7weTWQptLEDVCZvPTMl5JZZsdh47FHW6qFMyvLYqjcnmdFfY9Xk/KDOlzCusX2mi/ofM7MPkzBcSp4Q1/wAAAAASUVORK5CYII=) 9 9 repeat;--scale-factor: 1;--focus-outline: solid 2px blue;--hover-outline: dashed 2px blue;--freetext-line-height: 1.35;--freetext-padding: 2px;--editorInk-editing-cursor: pointer}@media screen and (forced-colors: active){[_nghost-%COMP%]    {--pdfViewer-padding-bottom: 9px;--page-margin: 8px auto -1px;--page-border: 1px solid CanvasText;--page-border-image: none;--spreadHorizontalWrapped-margin-LR: 3.5px}}@media (forced-colors: active){[_nghost-%COMP%]    {--focus-outline: solid 3px ButtonText;--hover-outline: dashed 3px ButtonText}}[_nghost-%COMP%]     .textLayer{position:absolute;text-align:initial;inset:0;overflow:hidden;opacity:.2;line-height:1;-webkit-text-size-adjust:none;text-size-adjust:none;forced-color-adjust:none;transform-origin:0 0}[_nghost-%COMP%]     .textLayer span, [_nghost-%COMP%]     .textLayer br{color:transparent;position:absolute;white-space:pre;cursor:text;transform-origin:0% 0%}[_nghost-%COMP%]     .textLayer span.markedContent{top:0;height:0}[_nghost-%COMP%]     .textLayer .highlight{margin:-1px;padding:1px;background-color:#b400aa;border-radius:4px}[_nghost-%COMP%]     .textLayer .highlight.appended{position:initial}[_nghost-%COMP%]     .textLayer .highlight.begin{border-radius:4px 0 0 4px}[_nghost-%COMP%]     .textLayer .highlight.end{border-radius:0 4px 4px 0}[_nghost-%COMP%]     .textLayer .highlight.middle{border-radius:0}[_nghost-%COMP%]     .textLayer .highlight.selected{background-color:#006400}[_nghost-%COMP%]     .textLayer ::selection{background:rgb(0,0,255)}[_nghost-%COMP%]     .textLayer br::selection{background:transparent}[_nghost-%COMP%]     .textLayer .endOfContent{display:block;position:absolute;inset:100% 0 0;z-index:-1;cursor:default;-webkit-user-select:none;user-select:none}[_nghost-%COMP%]     .textLayer .endOfContent.active{top:0}@media (forced-colors: active){[_nghost-%COMP%]     .annotationLayer .textWidgetAnnotation input:required, [_nghost-%COMP%]     .annotationLayer .textWidgetAnnotation textarea:required, [_nghost-%COMP%]     .annotationLayer .choiceWidgetAnnotation select:required, [_nghost-%COMP%]     .annotationLayer .buttonWidgetAnnotation.checkBox input:required, [_nghost-%COMP%]     .annotationLayer .buttonWidgetAnnotation.radioButton input:required{outline:1.5px solid selectedItem}}[_nghost-%COMP%]     .annotationLayer{position:absolute;top:0;left:0;pointer-events:none;transform-origin:0 0}[_nghost-%COMP%]     .annotationLayer section{position:absolute;text-align:initial;pointer-events:auto;box-sizing:border-box;transform-origin:0 0}[_nghost-%COMP%]     .annotationLayer .linkAnnotation>a, [_nghost-%COMP%]     .annotationLayer .buttonWidgetAnnotation.pushButton>a{position:absolute;font-size:1em;top:0;left:0;width:100%;height:100%}[_nghost-%COMP%]     .annotationLayer .buttonWidgetAnnotation.pushButton>canvas{width:100%;height:100%}[_nghost-%COMP%]     .annotationLayer .linkAnnotation>a:hover, [_nghost-%COMP%]     .annotationLayer .buttonWidgetAnnotation.pushButton>a:hover{opacity:.2;background:rgb(255,255,0);box-shadow:0 2px 10px #ff0}[_nghost-%COMP%]     .annotationLayer .textAnnotation img{position:absolute;cursor:pointer;width:100%;height:100%}[_nghost-%COMP%]     .annotationLayer .textWidgetAnnotation input, [_nghost-%COMP%]     .annotationLayer .textWidgetAnnotation textarea, [_nghost-%COMP%]     .annotationLayer .choiceWidgetAnnotation select, [_nghost-%COMP%]     .annotationLayer .buttonWidgetAnnotation.checkBox input, [_nghost-%COMP%]     .annotationLayer .buttonWidgetAnnotation.radioButton input{background-image:var(--annotation-unfocused-field-background);border:1px solid transparent;box-sizing:border-box;font:calc(9px * var(--scale-factor)) sans-serif;height:100%;margin:0;vertical-align:top;width:100%}[_nghost-%COMP%]     .annotationLayer .textWidgetAnnotation input:required, [_nghost-%COMP%]     .annotationLayer .textWidgetAnnotation textarea:required, [_nghost-%COMP%]     .annotationLayer .choiceWidgetAnnotation select:required, [_nghost-%COMP%]     .annotationLayer .buttonWidgetAnnotation.checkBox input:required, [_nghost-%COMP%]     .annotationLayer .buttonWidgetAnnotation.radioButton input:required{outline:1.5px solid red}[_nghost-%COMP%]     .annotationLayer .choiceWidgetAnnotation select option{padding:0}[_nghost-%COMP%]     .annotationLayer .buttonWidgetAnnotation.radioButton input{border-radius:50%}[_nghost-%COMP%]     .annotationLayer .textWidgetAnnotation textarea{resize:none}[_nghost-%COMP%]     .annotationLayer .textWidgetAnnotation input[disabled], [_nghost-%COMP%]     .annotationLayer .textWidgetAnnotation textarea[disabled], [_nghost-%COMP%]     .annotationLayer .choiceWidgetAnnotation select[disabled], [_nghost-%COMP%]     .annotationLayer .buttonWidgetAnnotation.checkBox input[disabled], [_nghost-%COMP%]     .annotationLayer .buttonWidgetAnnotation.radioButton input[disabled]{background:none;border:1px solid transparent;cursor:not-allowed}[_nghost-%COMP%]     .annotationLayer .textWidgetAnnotation input:hover, [_nghost-%COMP%]     .annotationLayer .textWidgetAnnotation textarea:hover, [_nghost-%COMP%]     .annotationLayer .choiceWidgetAnnotation select:hover, [_nghost-%COMP%]     .annotationLayer .buttonWidgetAnnotation.checkBox input:hover, [_nghost-%COMP%]     .annotationLayer .buttonWidgetAnnotation.radioButton input:hover{border:1px solid rgb(0,0,0)}[_nghost-%COMP%]     .annotationLayer .textWidgetAnnotation input:focus, [_nghost-%COMP%]     .annotationLayer .textWidgetAnnotation textarea:focus, [_nghost-%COMP%]     .annotationLayer .choiceWidgetAnnotation select:focus{background:none;border:1px solid transparent}[_nghost-%COMP%]     .annotationLayer .textWidgetAnnotation input :focus, [_nghost-%COMP%]     .annotationLayer .textWidgetAnnotation textarea :focus, [_nghost-%COMP%]     .annotationLayer .choiceWidgetAnnotation select :focus, [_nghost-%COMP%]     .annotationLayer .buttonWidgetAnnotation.checkBox :focus, [_nghost-%COMP%]     .annotationLayer .buttonWidgetAnnotation.radioButton :focus{background-image:none;background-color:transparent;outline:auto}[_nghost-%COMP%]     .annotationLayer .buttonWidgetAnnotation.checkBox input:checked:before, [_nghost-%COMP%]     .annotationLayer .buttonWidgetAnnotation.checkBox input:checked:after, [_nghost-%COMP%]     .annotationLayer .buttonWidgetAnnotation.radioButton input:checked:before{background-color:CanvasText;content:"";display:block;position:absolute}[_nghost-%COMP%]     .annotationLayer .buttonWidgetAnnotation.checkBox input:checked:before, [_nghost-%COMP%]     .annotationLayer .buttonWidgetAnnotation.checkBox input:checked:after{height:80%;left:45%;width:1px}[_nghost-%COMP%]     .annotationLayer .buttonWidgetAnnotation.checkBox input:checked:before{transform:rotate(45deg)}[_nghost-%COMP%]     .annotationLayer .buttonWidgetAnnotation.checkBox input:checked:after{transform:rotate(-45deg)}[_nghost-%COMP%]     .annotationLayer .buttonWidgetAnnotation.radioButton input:checked:before{border-radius:50%;height:50%;left:30%;top:20%;width:50%}[_nghost-%COMP%]     .annotationLayer .textWidgetAnnotation input.comb{font-family:monospace;padding-left:2px;padding-right:0}[_nghost-%COMP%]     .annotationLayer .textWidgetAnnotation input.comb:focus{width:103%}[_nghost-%COMP%]     .annotationLayer .buttonWidgetAnnotation.checkBox input, [_nghost-%COMP%]     .annotationLayer .buttonWidgetAnnotation.radioButton input{-webkit-appearance:none;appearance:none}[_nghost-%COMP%]     .annotationLayer .popupTriggerArea{height:100%;width:100%}[_nghost-%COMP%]     .annotationLayer .popupWrapper{position:absolute;font-size:calc(9px * var(--scale-factor));width:100%;min-width:calc(180px * var(--scale-factor));pointer-events:none}[_nghost-%COMP%]     .annotationLayer .popup{position:absolute;max-width:calc(180px * var(--scale-factor));background-color:#ff9;box-shadow:0 calc(2px * var(--scale-factor)) calc(5px * var(--scale-factor)) #888;border-radius:calc(2px * var(--scale-factor));padding:calc(6px * var(--scale-factor));margin-left:calc(5px * var(--scale-factor));cursor:pointer;font:message-box;white-space:normal;word-wrap:break-word;pointer-events:auto}[_nghost-%COMP%]     .annotationLayer .popup>*{font-size:calc(9px * var(--scale-factor))}[_nghost-%COMP%]     .annotationLayer .popup h1{display:inline-block}[_nghost-%COMP%]     .annotationLayer .popupDate{display:inline-block;margin-left:calc(5px * var(--scale-factor))}[_nghost-%COMP%]     .annotationLayer .popupContent{border-top:1px solid rgb(51,51,51);margin-top:calc(2px * var(--scale-factor));padding-top:calc(2px * var(--scale-factor))}[_nghost-%COMP%]     .annotationLayer .richText>*{white-space:pre-wrap;font-size:calc(9px * var(--scale-factor))}[_nghost-%COMP%]     .annotationLayer .highlightAnnotation, [_nghost-%COMP%]     .annotationLayer .underlineAnnotation, [_nghost-%COMP%]     .annotationLayer .squigglyAnnotation, [_nghost-%COMP%]     .annotationLayer .strikeoutAnnotation, [_nghost-%COMP%]     .annotationLayer .freeTextAnnotation, [_nghost-%COMP%]     .annotationLayer .lineAnnotation svg line, [_nghost-%COMP%]     .annotationLayer .squareAnnotation svg rect, [_nghost-%COMP%]     .annotationLayer .circleAnnotation svg ellipse, [_nghost-%COMP%]     .annotationLayer .polylineAnnotation svg polyline, [_nghost-%COMP%]     .annotationLayer .polygonAnnotation svg polygon, [_nghost-%COMP%]     .annotationLayer .caretAnnotation, [_nghost-%COMP%]     .annotationLayer .inkAnnotation svg polyline, [_nghost-%COMP%]     .annotationLayer .stampAnnotation, [_nghost-%COMP%]     .annotationLayer .fileAttachmentAnnotation{cursor:pointer}[_nghost-%COMP%]     .annotationLayer section svg{position:absolute;width:100%;height:100%}[_nghost-%COMP%]     .annotationLayer .annotationTextContent{position:absolute;width:100%;height:100%;opacity:0;color:transparent;-webkit-user-select:none;user-select:none;pointer-events:none}[_nghost-%COMP%]     .annotationLayer .annotationTextContent span{width:100%;display:inline-block}@media (forced-colors: active){[_nghost-%COMP%]     .xfaLayer *:required{outline:1.5px solid selectedItem}}[_nghost-%COMP%]     .xfaLayer .highlight{margin:-1px;padding:1px;background-color:#efcbed;border-radius:4px}[_nghost-%COMP%]     .xfaLayer .highlight.appended{position:initial}[_nghost-%COMP%]     .xfaLayer .highlight.begin{border-radius:4px 0 0 4px}[_nghost-%COMP%]     .xfaLayer .highlight.end{border-radius:0 4px 4px 0}[_nghost-%COMP%]     .xfaLayer .highlight.middle{border-radius:0}[_nghost-%COMP%]     .xfaLayer .highlight.selected{background-color:#cbdfcb}[_nghost-%COMP%]     .xfaLayer ::selection{background:rgb(0,0,255)}[_nghost-%COMP%]     .xfaPage{overflow:hidden;position:relative}[_nghost-%COMP%]     .xfaContentarea{position:absolute}[_nghost-%COMP%]     .xfaPrintOnly{display:none}[_nghost-%COMP%]     .xfaLayer{position:absolute;text-align:initial;top:0;left:0;transform-origin:0 0;line-height:1.2}[_nghost-%COMP%]     .xfaLayer *{color:inherit;font:inherit;font-style:inherit;font-weight:inherit;font-kerning:inherit;letter-spacing:-.01px;text-align:inherit;text-decoration:inherit;box-sizing:border-box;background-color:transparent;padding:0;margin:0;pointer-events:auto;line-height:inherit}[_nghost-%COMP%]     .xfaLayer *:required{outline:1.5px solid red}[_nghost-%COMP%]     .xfaLayer div{pointer-events:none}[_nghost-%COMP%]     .xfaLayer svg{pointer-events:none}[_nghost-%COMP%]     .xfaLayer svg *{pointer-events:none}[_nghost-%COMP%]     .xfaLayer a{color:#00f}[_nghost-%COMP%]     .xfaRich li{margin-left:3em}[_nghost-%COMP%]     .xfaFont{color:#000;font-weight:400;font-kerning:none;font-size:10px;font-style:normal;letter-spacing:0;text-decoration:none;vertical-align:0}[_nghost-%COMP%]     .xfaCaption{overflow:hidden;flex:0 0 auto}[_nghost-%COMP%]     .xfaCaptionForCheckButton{overflow:hidden;flex:1 1 auto}[_nghost-%COMP%]     .xfaLabel{height:100%;width:100%}[_nghost-%COMP%]     .xfaLeft{display:flex;flex-direction:row;align-items:center}[_nghost-%COMP%]     .xfaRight{display:flex;flex-direction:row-reverse;align-items:center}[_nghost-%COMP%]     .xfaLeft>.xfaCaption, [_nghost-%COMP%]     .xfaLeft>.xfaCaptionForCheckButton, [_nghost-%COMP%]     .xfaRight>.xfaCaption, [_nghost-%COMP%]     .xfaRight>.xfaCaptionForCheckButton{max-height:100%}[_nghost-%COMP%]     .xfaTop{display:flex;flex-direction:column;align-items:flex-start}[_nghost-%COMP%]     .xfaBottom{display:flex;flex-direction:column-reverse;align-items:flex-start}[_nghost-%COMP%]     .xfaTop>.xfaCaption, [_nghost-%COMP%]     .xfaTop>.xfaCaptionForCheckButton, [_nghost-%COMP%]     .xfaBottom>.xfaCaption, [_nghost-%COMP%]     .xfaBottom>.xfaCaptionForCheckButton{width:100%}[_nghost-%COMP%]     .xfaBorder{background-color:transparent;position:absolute;pointer-events:none}[_nghost-%COMP%]     .xfaWrapped{width:100%;height:100%}[_nghost-%COMP%]     .xfaTextfield:focus, [_nghost-%COMP%]     .xfaSelect:focus{background-image:none;background-color:transparent;outline:auto;outline-offset:-1px}[_nghost-%COMP%]     .xfaCheckbox:focus, [_nghost-%COMP%]     .xfaRadio:focus{outline:auto}[_nghost-%COMP%]     .xfaTextfield, [_nghost-%COMP%]     .xfaSelect{height:100%;width:100%;flex:1 1 auto;border:none;resize:none;background-image:var(--xfa-unfocused-field-background)}[_nghost-%COMP%]     .xfaTop>.xfaTextfield, [_nghost-%COMP%]     .xfaTop>.xfaSelect, [_nghost-%COMP%]     .xfaBottom>.xfaTextfield, [_nghost-%COMP%]     .xfaBottom>.xfaSelect{flex:0 1 auto}[_nghost-%COMP%]     .xfaButton{cursor:pointer;width:100%;height:100%;border:none;text-align:center}[_nghost-%COMP%]     .xfaLink{width:100%;height:100%;position:absolute;top:0;left:0}[_nghost-%COMP%]     .xfaCheckbox, [_nghost-%COMP%]     .xfaRadio{width:100%;height:100%;flex:0 0 auto;border:none}[_nghost-%COMP%]     .xfaRich{white-space:pre-wrap;width:100%;height:100%}[_nghost-%COMP%]     .xfaImage{object-position:left top;object-fit:contain;width:100%;height:100%}[_nghost-%COMP%]     .xfaLrTb, [_nghost-%COMP%]     .xfaRlTb, [_nghost-%COMP%]     .xfaTb{display:flex;flex-direction:column;align-items:stretch}[_nghost-%COMP%]     .xfaLr{display:flex;flex-direction:row;align-items:stretch}[_nghost-%COMP%]     .xfaRl{display:flex;flex-direction:row-reverse;align-items:stretch}[_nghost-%COMP%]     .xfaTb>div{justify-content:left}[_nghost-%COMP%]     .xfaPosition{position:relative}[_nghost-%COMP%]     .xfaArea{position:relative}[_nghost-%COMP%]     .xfaValignMiddle{display:flex;align-items:center}[_nghost-%COMP%]     .xfaTable{display:flex;flex-direction:column;align-items:stretch}[_nghost-%COMP%]     .xfaTable .xfaRow{display:flex;flex-direction:row;align-items:stretch}[_nghost-%COMP%]     .xfaTable .xfaRlRow{display:flex;flex-direction:row-reverse;align-items:stretch;flex:1}[_nghost-%COMP%]     .xfaTable .xfaRlRow>div{flex:1}[_nghost-%COMP%]     .xfaNonInteractive input, [_nghost-%COMP%]     .xfaNonInteractive textarea, [_nghost-%COMP%]     .xfaDisabled input, [_nghost-%COMP%]     .xfaDisabled textarea, [_nghost-%COMP%]     .xfaReadOnly input, [_nghost-%COMP%]     .xfaReadOnly textarea{background:initial}@media print{[_nghost-%COMP%]     .xfaTextfield, [_nghost-%COMP%]     .xfaSelect{background:transparent}[_nghost-%COMP%]     .xfaSelect{-webkit-appearance:none;appearance:none;text-indent:1px;text-overflow:""}}[_nghost-%COMP%]     [data-editor-rotation="90"]{transform:rotate(90deg)}[_nghost-%COMP%]     [data-editor-rotation="180"]{transform:rotate(180deg)}[_nghost-%COMP%]     [data-editor-rotation="270"]{transform:rotate(270deg)}[_nghost-%COMP%]     .annotationEditorLayer{background:transparent;position:absolute;top:0;left:0;font-size:calc(100px * var(--scale-factor));transform-origin:0 0}[_nghost-%COMP%]     .annotationEditorLayer .selectedEditor{outline:var(--focus-outline);resize:none}[_nghost-%COMP%]     .annotationEditorLayer .freeTextEditor{position:absolute;background:transparent;border-radius:3px;padding:calc(var(--freetext-padding) * var(--scale-factor));resize:none;width:auto;height:auto;z-index:1;transform-origin:0 0;touch-action:none}[_nghost-%COMP%]     .annotationEditorLayer .freeTextEditor .internal{background:transparent;border:none;top:0;left:0;overflow:visible;white-space:nowrap;resize:none;font:10px sans-serif;line-height:var(--freetext-line-height)}[_nghost-%COMP%]     .annotationEditorLayer .freeTextEditor .overlay{position:absolute;display:none;background:transparent;top:0;left:0;width:100%;height:100%}[_nghost-%COMP%]     .annotationEditorLayer .freeTextEditor .overlay.enabled{display:block}[_nghost-%COMP%]     .annotationEditorLayer .freeTextEditor .internal:empty:before{content:attr(default-content);color:gray}[_nghost-%COMP%]     .annotationEditorLayer .freeTextEditor .internal:focus{outline:none}[_nghost-%COMP%]     .annotationEditorLayer .inkEditor.disabled{resize:none}[_nghost-%COMP%]     .annotationEditorLayer .inkEditor.disabled.selectedEditor{resize:horizontal}[_nghost-%COMP%]     .annotationEditorLayer .freeTextEditor:hover:not(.selectedEditor), [_nghost-%COMP%]     .annotationEditorLayer .inkEditor:hover:not(.selectedEditor){outline:var(--hover-outline)}[_nghost-%COMP%]     .annotationEditorLayer .inkEditor{position:absolute;background:transparent;border-radius:3px;overflow:auto;width:100%;height:100%;z-index:1;transform-origin:0 0;cursor:auto}[_nghost-%COMP%]     .annotationEditorLayer .inkEditor.editing{resize:none;cursor:var(--editorInk-editing-cursor),pointer}[_nghost-%COMP%]     .annotationEditorLayer .inkEditor .inkEditorCanvas{position:absolute;top:0;left:0;width:100%;height:100%;touch-action:none}[_nghost-%COMP%]     [data-main-rotation="90"]{transform:rotate(90deg) translateY(-100%)}[_nghost-%COMP%]     [data-main-rotation="180"]{transform:rotate(180deg) translate(-100%,-100%)}[_nghost-%COMP%]     [data-main-rotation="270"]{transform:rotate(270deg) translate(-100%)}[_nghost-%COMP%]     .pdfViewer{padding-bottom:var(--pdfViewer-padding-bottom)}[_nghost-%COMP%]     .pdfViewer .canvasWrapper{overflow:hidden}[_nghost-%COMP%]     .pdfViewer .canvasWrapper canvas{width:100%}[_nghost-%COMP%]     .pdfViewer .page{direction:ltr;width:816px;height:1056px;margin:var(--page-margin);position:relative;overflow:visible;border:var(--page-border);border-image:var(--page-border-image);background-clip:content-box;background-color:#fff}[_nghost-%COMP%]     .pdfViewer .dummyPage{position:relative;width:0;height:var(--viewer-container-height)}[_nghost-%COMP%]     .pdfViewer.removePageBorders .page{margin:0 auto 10px;border:none}[_nghost-%COMP%]     .pdfViewer.singlePageView{display:inline-block}[_nghost-%COMP%]     .pdfViewer.singlePageView .page{margin:0;border:none}[_nghost-%COMP%]     .pdfViewer.scrollHorizontal, [_nghost-%COMP%]     .pdfViewer.scrollWrapped, [_nghost-%COMP%]     .spread{margin-left:3.5px;margin-right:3.5px;text-align:center}[_nghost-%COMP%]     .pdfViewer.scrollHorizontal, [_nghost-%COMP%]     .spread{white-space:nowrap}[_nghost-%COMP%]     .pdfViewer.removePageBorders, [_nghost-%COMP%]     .pdfViewer.scrollHorizontal .spread, [_nghost-%COMP%]     .pdfViewer.scrollWrapped .spread{margin-left:0;margin-right:0}[_nghost-%COMP%]     .spread .page, [_nghost-%COMP%]     .spread .dummyPage, [_nghost-%COMP%]     .pdfViewer.scrollHorizontal .page, [_nghost-%COMP%]     .pdfViewer.scrollWrapped .page, [_nghost-%COMP%]     .pdfViewer.scrollHorizontal .spread, [_nghost-%COMP%]     .pdfViewer.scrollWrapped .spread{display:inline-block;vertical-align:middle}[_nghost-%COMP%]     .spread .page, [_nghost-%COMP%]     .pdfViewer.scrollHorizontal .page, [_nghost-%COMP%]     .pdfViewer.scrollWrapped .page{margin-left:var(--spreadHorizontalWrapped-margin-LR);margin-right:var(--spreadHorizontalWrapped-margin-LR)}[_nghost-%COMP%]     .pdfViewer.removePageBorders .spread .page, [_nghost-%COMP%]     .pdfViewer.removePageBorders.scrollHorizontal .page, [_nghost-%COMP%]     .pdfViewer.removePageBorders.scrollWrapped .page{margin-left:5px;margin-right:5px}[_nghost-%COMP%]     .pdfViewer .page canvas{margin:0;display:block}[_nghost-%COMP%]     .pdfViewer .page canvas[hidden]{display:none}[_nghost-%COMP%]     .pdfViewer .page .loadingIcon{position:absolute;display:block;inset:0;background:url(data:image/gif;base64,R0lGODlhGAAYAPQQAM7Ozvr6+uDg4LCwsOjo6I6OjsjIyJycnNjY2KioqMDAwPLy8nZ2doaGhri4uGhoaP///wAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAACH/C05FVFNDQVBFMi4wAwEAAAAh/ilPcHRpbWl6ZWQgd2l0aCBodHRwczovL2V6Z2lmLmNvbS9vcHRpbWl6ZQAh+QQJBwAQACwAAAAAGAAYAAAFmiAkjiTkOGVaBgjZNGSgkgKjjM8zLoI8iy+BKCdiCX8iBeMAhEEIPRXLxViYUE9CbCQoFAzFhHY3zkaT3oPvBz1zE4UBsr1eWZH4vAowOBwGAHk8AoQLfH6Agm0Ed3qOAXWOIgQKiWyFJQgDgJEpdG+WEACNEFNFmKVlVzJQk6qdkwqBoi1mebJ3ALNGeIZHtGSwNDS1RZKueCEAIfkECQcAEAAsAAAAABgAGAAABZcgJI4kpChlWgYCWRQkEKgjURgjw4zOg9CjVwuiEyEeO6CxkBC9nA+HiuUqLEyoBZI0Mx4SAFFgQCDZuguBoGv6Dtg0gvpqdhxQQDkBzuUr/4A1JwMKP39pc2mDhYCIc4GQYn6QCwCMeY91l0p6dBAEJ0OfcFRimZ91Mwt0alxxAIZyRmuAsKxDLKKvZbM1tJxmvGKRpn8hACH5BAkHABAALAAAAAAYABgAAAWhICSOJGQYZVoGAnkcJBKoI3EAY1GMCtPSosSBINKJBIwGkHdwBGGQA0OhYpEGQxNqkYzNIITBACEKKBaxxNfBeOCO4vMy0Hg8nDHFeCktkKtfNAtoS4UqAicKBj9zBAKPC4iKi4aRkISGmWWBmjUIAIyHkCUEAKCVo2WmREecVqoCgZhgP4NHrGWCj7e3szSpuxAsoVWxnp6cVV4kyZW+KSEAIfkECQcAEAAsAAAAABgAGAAABZkgJI4kBABlWgYEOQykEKgjMSDjcYxG0dKi108nEhQKQN4rCIMkCgbawjWYnSCLY2yGVSgEooBhWqsGGwxc0RtNBgoMhmJ1QgETjANYFeBKyUmBKQQIdT9JDmgPDQ6EhoKJD4sOgpWWgiwChyqEBH5hmptSoSOZgJ4kLKWkYTF7C2SaqaM/hEWygay4mYG8t6uffFuzl1iANCEAIfkECQcAEAAsAAAAABgAGAAABZ0gJI4khCBlmhKkopBCoI6LIozDMAIHO4uuBVBnOiR+I4FrCDwAZsKdQnaCLIwwmRUA8JmioprWUCjcwlwUMnAoG0qL03k2KCS8cC0UjOzDCQKBfHQFDAwFU4CCfgqFhy9+kZJWgzSKSAcPZn+BfQENDw8OljGWJAFeDoZPYTBnC1GdSXqnsoBolSulX2GyP6hgvnG0KrS3NJNhuSQhACH5BAkHABAALAAAAAAYABgAAAWaICSOJCQIZZoupGGQRKCOC0CMijIiwz2LABtQZxoMfjQhxAXszWQ7gOwECRhh0MCJJRJARTUoIHFAgbfI6uBwAJS01J/i4PClVYHvfV8lbLlIBmwFbQt+aGmChG18jXeGT4dICQxlb4g/AQUMDER9XjR6BAdiDQwINDBmkAsPDVh4cX4imw53iLKuaVqAcUsPqEiidkt6j4AzIQAh+QQJBwAQACwAAAAAGAAYAAAFmSAkjiREEGWaBiSCtCoZCMsIAKOg1LEo0KKbaKFQ9EYLoOkFuQlirNxzCQkUW9GZ0hQd4nyDAWr4G/esYSbyZFYZwu3jqiuvr8u8I2BwOAwASXh1e31/doeHC3klWnElfAlTd46MfQUGk2stCVEGBQWSdCciDg5VDAVYKoEiDQ0iBwxGcj9RDw8+qHIzebc2DJJQJK6qiKVyIQAh+QQJBwAQACwAAAAAGAAYAAAFmSAkjiS0LGWaBiRBtCoZCKgoCCMB1DF0sz6cCQDo5W62l28XAyZFpyECBv3lnCbhUqHMIo0Qg4Jbmn1jRCa4iV27TzfXGjEecOFWMN1OdvvfPGUuXSoKBw6EXokrAwcHRVU0UAeEBANAAAmUI1gNDyhjJgUHLW0iDg8FIqOnBQZrDA9TELE2rEYIDw4jta2LMpCrqld/YQpgIQAh+QQJBwAQACwAAAAAGAAYAAAFmyAkjiS0LGWaBiRBkKw6BgIqCsJcyyMe4yJajhcEml5H26o1PN2QQd3uFiv2AADlAgflIbDdZLgkABOJgep5LfWty4p4zeU+w+XsvJWXliEKDwdEBgMKYQ4PDw1qK3EDCCMAiQ5BCV0LCj+FSDQkgCgGBiYHAy2MIgoMghAHqw4HAGsNDEMFBTekdgwKI7aRB2MwkL2rVHoQoWchACH5BAkHABAALAAAAAAYABgAAAWWICSOJLQsZZoGJEGQrDoGAioKwlzLIx7jIlqOFwSaXkfbqjU83ZBB3e4WK0qrCxyU55peid0qcUwuixyNx6PhILsAcAJazXYj4lvz2MkLiFsHDAlEcABKZwwMBX8pBgoKQxAIigpBA1sLBj+PSDQkB4uSACYDlTMyBgWDEKVnl2QFBUigN61gBQYjtLV5JZ4jtlR6omMhACH5BAkHABAALAAAAAAYABgAAAWaICSOJLQsZZoGJEGQrDoGAioKwlzLIx7jIlqOFwSaXkdbidYanm7I4AjwYDh6saJuJ3JUG1mZi9srPA7EcRimJLrfJYWZUVC8TziXnEG3u/E+cIJaPAFrPQl1aQAIbRAGBZGHJQiMUQKRBkEKbQsAPZaEXQcslSYKmjMyAAdXj34ACkNEiUgDA5t+PAQHn6Ogjkuzry2DNwhuIQAh+QQFBwAQACwAAAAAGAAYAAAFnCAkjiS0LGVaBgBJEGSguo8zCsK4CPIsMg+ECCcKEH0ix6MwhJl4KiOp8UCdmrEbo6EoHpxF8A6aBBZ6vhf5dmAkkGr0CoWs21WGQ2FvsI9xC3l7B311fy93iWGKJQQOhHCAJQB6A3IqcWwJLU90i2FkUiMKlhBELEI6MwgDXRAGhQgAYD6tTqRFAJxpA6mvrqazSKJJhUWMpjlIIQA7) center no-repeat}[_nghost-%COMP%]     .pdfViewer .page .loadingIcon.notVisible{background:none}[_nghost-%COMP%]     .pdfViewer.enablePermissions .textLayer span{-webkit-user-select:none!important;user-select:none!important;cursor:not-allowed}[_nghost-%COMP%]     .pdfPresentationMode .pdfViewer{padding-bottom:0}[_nghost-%COMP%]     .pdfPresentationMode .spread{margin:0}[_nghost-%COMP%]     .pdfPresentationMode .pdfViewer .page{margin:0 auto;border:2px solid transparent}`]})}return n})(),LS=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275mod=Mr({type:n});static \u0275inj=Ir({})}return n})();var I2=(n,e)=>({"text-green font-bold":n,"text-gray-400 hover:text-green":e}),D2=(n,e)=>({" text-green font-bold":n,"text-gray-400 hover:text-green":e});function T2(n,e){if(n&1){let t=QE();O(0,"li")(1,"button",13),_o("click",function(){let i=fw(t).$implicit,s=Rn();return pw(s.filterByIssuer(i))}),B(2),P()()}if(n&2){let t=e.$implicit,r=Rn();F(),De("ngClass",Hp(2,D2,r.activeTab===t,r.activeTab!==t)),F(),at(" ",t," ")}}function M2(n,e){if(n&1&&re(0,"pdf-viewer",16),n&2){let t=Rn().$implicit;De("src",t.imageUrl)("render-text",!1)("original-size",!1)}}function R2(n,e){if(n&1&&re(0,"img",17),n&2){let t=Rn().$implicit;De("src",t.imageUrl,ut)("alt",t.title)}}function O2(n,e){if(n&1&&(O(0,"div",14)(1,"div",15),kt(2,M2,1,3,"pdf-viewer",16)(3,R2,1,2,"img",17),P(),O(4,"div",18)(5,"div",19),B(6),P(),O(7,"h3",20),B(8),P(),O(9,"p",21),B(10),P()()()),n&2){let t=e.$implicit,r=Rn();F(2),Lt(t.imageUrl.includes(".pdf")?2:3),F(4),Xt(r.getYearFromDate(t.date)),F(2),Xt(t.title),F(2),Xt(t.issuer)}}function P2(n,e){n&1&&(O(0,"div",22),re(1,"div",23),P())}var Td=class n{contentService=R(Zt);certificates=[];filteredCertificates=[];issuers=[];activeTab="ALL";loading=!0;ngOnInit(){this.loadCertificates()}loadCertificates(){this.loading=!0,this.contentService.getContent("certificate").subscribe({next:e=>{this.certificates=e,this.filteredCertificates=[...this.certificates],this.extractIssuers(),this.loading=!1},error:e=>{console.error("Error fetching certificates:",e),this.loading=!1}})}extractIssuers(){let e=new Set;this.certificates.forEach(t=>{t.issuer&&e.add(t.issuer)}),this.issuers=Array.from(e)}filterByIssuer(e){this.activeTab=e,e==="ALL"?this.filteredCertificates=[...this.certificates]:this.filteredCertificates=this.certificates.filter(t=>t.issuer===e)}getYearFromDate(e){return new Date(e).getFullYear().toString()}static \u0275fac=function(t){return new(t||n)};static \u0275cmp=xe({type:n,selectors:[["app-certificates-earn"]],decls:19,vars:7,consts:[["data-aos","fade-up","data-aos-duration","800",1,"lg:py-16","text-white","min-h-screen"],[1,"container","mx-auto","max-w-7xl"],[1,"mb-6"],["href","/",1,"group","inline-flex","items-center","font-semibold","leading-tight","text-green"],[1,"mr-1","text-green","transition-transform","group-hover:-translate-x-2"],[1,"text-5xl","font-bold","mb-16","text-white"],[1,"mb-12"],[1,"flex","flex-wrap","gap-4"],[1,"px-4","py-2","focus:outline-none","transition-colors","duration-300","text-sm",3,"click","ngClass"],[4,"ngFor","ngForOf"],[1,"grid","grid-cols-1","lg:grid-cols-2","xl:grid-cols-3","gap-6","mt-8","xl:-mx-32","2xl:-mx-72"],["class","bg-gray-800 rounded-lg overflow-hidden shadow-lg hover:shadow-2xl transition-all duration-300 border border-gray-700","data-aos","fade-up","data-aos-delay","100",4,"ngFor","ngForOf"],["class","flex justify-center items-center py-16",4,"ngIf"],[1,"px-4","py-2","focus:outline-none","transition-colors","duration-300","text-sm","uppercase",3,"click","ngClass"],["data-aos","fade-up","data-aos-delay","100",1,"bg-gray-800","rounded-lg","overflow-hidden","shadow-lg","hover:shadow-2xl","transition-all","duration-300","border","border-gray-700"],[1,"flex","justify-center","pt-2"],[2,"width","500px","height","390px",3,"src","render-text","original-size"],["loading","lazy","decoding","async",1,"w-full","rounded-t-lg",3,"src","alt"],[1,"p-6"],[1,"text-xs","text-gray-400","mb-2"],[1,"text-lg","font-semibold","text-white","mb-3"],[1,"text-sm","text-gray-300","mb-4"],[1,"flex","justify-center","items-center","py-16"],[1,"animate-spin","rounded-full","h-10","w-10","border-t-2","border-b-2","border-teal-400"]],template:function(t,r){t&1&&(O(0,"section",0)(1,"div",1)(2,"div",2)(3,"a",3)(4,"span",4),B(5,"\u2190"),P(),O(6,"span"),B(7,"Fernando Tello"),P()()(),O(8,"h1",5),B(9,"Certificates"),P(),O(10,"div",6)(11,"ul",7)(12,"li")(13,"button",8),_o("click",function(){return r.filterByIssuer("ALL")}),B(14," ALL "),P()(),kt(15,T2,3,5,"li",9),P()(),O(16,"div",10),kt(17,O2,11,4,"div",11),P(),kt(18,P2,2,0,"div",12),P()()),t&2&&(F(13),De("ngClass",Hp(4,I2,r.activeTab==="ALL",r.activeTab!=="ALL")),F(2),De("ngForOf",r.issuers),F(2),De("ngForOf",r.filteredCertificates),F(),De("ngIf",r.loading))},dependencies:[ze,hi,Cc,Qp,LS,kS],encapsulation:2})};var Rd=class n{currentYear=new Date().getFullYear();static \u0275fac=function(t){return new(t||n)};static \u0275cmp=xe({type:n,selectors:[["app-footer"]],decls:7,vars:1,consts:[[1,"py-6","text-center","text-slate-400","font-mono","text-sm","bg-slate-900"],[1,"container","mx-auto","px-6"]],template:function(t,r){t&1&&(O(0,"footer",0)(1,"div",1)(2,"p"),B(3),re(4,"br"),O(5,"span"),B(6," Built with Angular, TypeScript, Tailwind CSS, Sanity, ConfigCat, and deployed on GitHub Pages. "),P()()()()),t&2&&(F(3),at(" Designed & Built with \u2665 by Fernando Tello \xA9 ",r.currentYear," "))},dependencies:[ze],encapsulation:2})};var Vs=class n{activeSectionSubject=new Ge("about");activeSection$=this.activeSectionSubject.asObservable();setActiveSection(e){this.activeSectionSubject.next(e)}static \u0275fac=function(t){return new(t||n)};static \u0275prov=k({token:n,factory:n.\u0275fac,providedIn:"root"})};var N2=n=>({"text-green font-bold":n}),k2=(n,e)=>e.id;function L2(n,e){if(n&1&&(O(0,"li")(1,"a",6),B(2),P()()),n&2){let t=e.$implicit,r=Rn();F(),Ao("href","#",t.id,"",ut),De("ngClass",JE(4,N2,r.activeSection===t.id)),F(),at(" ",t.label," ")}}var Od=class n{constructor(e){this.scrollspy=e;this.scrollspy.activeSection$.subscribe(t=>{this.activeSection=t})}navItems=[{link:"#about",label:"About",id:"about"},{link:"#experience",label:"Experience",id:"experience"},{link:"#projects",label:"Projects",id:"projects"}];activeSection="about";static \u0275fac=function(t){return new(t||n)(Ue(Vs))};static \u0275cmp=xe({type:n,selectors:[["app-header"]],decls:11,vars:0,consts:[[1,"mb-8"],[1,"text-4xl","sm:text-5xl","font-bold","text-slate-200","mb-4"],[1,"text-xl","sm:text-2xl","font-bold","text-green","mb-5"],[1,"mt-6","mb-12","text-lg","text-slate-400","max-w-md"],[1,"nav","hidden","lg:block"],[1,"mt-8","space-y-4"],[1,"text-sm","uppercase","tracking-widest","hover:text-green","transition-colors",3,"href","ngClass"]],template:function(t,r){t&1&&(O(0,"div",0)(1,"h1",1),B(2,"Fernando Tello"),P(),O(3,"h2",2),B(4,"Software Engineer"),P(),O(5,"p",3),B(6," Full-stack web & mobile developer | AI & Cloud enthusiast | Pursuing a Master's in Artificial Intelligence "),P(),O(7,"nav",4)(8,"ul",5),xt(9,L2,3,6,"li",null,k2),P()()()),t&2&&(F(9),It(r.navItems))},dependencies:[ze,hi,jg],encapsulation:2})};var F2=(n,e)=>e.url;function j2(n,e){n&1&&(hn(),O(0,"svg",3),re(1,"path",4),P())}function B2(n,e){n&1&&(hn(),O(0,"svg",3),re(1,"path",5),P())}function V2(n,e){n&1&&(hn(),O(0,"svg",3),re(1,"path",6),P())}function H2(n,e){n&1&&(hn(),O(0,"svg",3),re(1,"path",7),P())}function U2(n,e){n&1&&(hn(),O(0,"svg",3),re(1,"path",8),P())}function $2(n,e){if(n&1&&(O(0,"li")(1,"a",2),kt(2,j2,2,0,":svg:svg",3)(3,B2,2,0,":svg:svg",3)(4,V2,2,0,":svg:svg",3)(5,H2,2,0,":svg:svg",3)(6,U2,2,0,":svg:svg",3),P()()),n&2){let t=e.$implicit;F(),De("href",t.url,ut),rr("aria-label",t.label),F(),Lt(t.icon==="github"?2:-1),F(),Lt(t.icon==="linkedin"?3:-1),F(),Lt(t.icon==="twitter"?4:-1),F(),Lt(t.icon==="instagram"?5:-1),F(),Lt(t.icon==="codepen"?6:-1)}}function z2(n,e){n&1&&re(0,"div",1)}var Pd=class n{orientation="horizontal";socialLinks=[{url:"https://github.com/FTello31",icon:"github",label:"GitHub"},{url:"https://linkedin.com/in/fernandotello",icon:"linkedin",label:"LinkedIn"}];static \u0275fac=function(t){return new(t||n)};static \u0275cmp=xe({type:n,selectors:[["app-social-links"]],inputs:{orientation:"orientation"},decls:4,vars:2,consts:[[1,"flex","space-x-4","mt-auto",3,"ngClass"],[1,"mt-6","h-24","w-px","bg-slate-400","mx-auto"],["target","_blank","rel","noopener noreferrer",1,"text-slate-400","hover:text-emerald-400","transition-colors",3,"href"],["xmlns","http://www.w3.org/2000/svg","viewBox","0 0 24 24","fill","currentColor",1,"h-5","w-5"],["d","M12 0c-6.626 0-12 5.373-12 12 0 5.302 3.438 9.8 8.207 11.387.599.111.793-.261.793-.577v-2.234c-3.338.726-4.033-1.416-4.033-1.416-.546-1.387-1.333-1.756-1.333-1.756-1.089-.745.083-.729.083-.729 1.205.084 1.839 1.237 1.839 1.237 1.07 1.834 2.807 1.304 3.492.997.107-.775.418-1.305.762-1.604-2.665-.305-5.467-1.334-5.467-5.931 0-1.311.469-2.381 1.236-3.221-.124-.303-.535-1.524.117-3.176 0 0 1.008-.322 3.301 1.23.957-.266 1.983-.399 3.003-.404 1.02.005 2.047.138 3.006.404 2.291-1.552 3.297-1.23 3.297-1.23.653 1.653.242 2.874.118 3.176.77.84 1.235 1.911 1.235 3.221 0 4.609-2.807 5.624-5.479 5.921.43.372.823 1.102.823 2.222v3.293c0 .319.192.694.801.576 4.765-1.589 8.199-6.086 8.199-11.386 0-6.627-5.373-12-12-12z"],["d","M19 0h-14c-2.761 0-5 2.239-5 5v14c0 2.761 2.239 5 5 5h14c2.762 0 5-2.239 5-5v-14c0-2.761-2.238-5-5-5zm-11 19h-3v-11h3v11zm-1.5-12.268c-.966 0-1.75-.79-1.75-1.764s.784-1.764 1.75-1.764 1.75.79 1.75 1.764-.783 1.764-1.75 1.764zm13.5 12.268h-3v-5.604c0-3.368-4-3.113-4 0v5.604h-3v-11h3v1.765c1.396-2.586 7-2.777 7 2.476v6.759z"],["d","M24 4.557c-.883.392-1.832.656-2.828.775 1.017-.609 1.798-1.574 2.165-2.724-.951.564-2.005.974-3.127 1.195-.897-.957-2.178-1.555-3.594-1.555-3.179 0-5.515 2.966-4.797 6.045-4.091-.205-7.719-2.165-10.148-5.144-1.29 2.213-.669 5.108 1.523 6.574-.806-.026-1.566-.247-2.229-.616-.054 2.281 1.581 4.415 3.949 4.89-.693.188-1.452.232-2.224.084.626 1.956 2.444 3.379 4.6 3.419-2.07 1.623-4.678 2.348-7.29 2.04 2.179 1.397 4.768 2.212 7.548 2.212 9.142 0 14.307-7.721 13.995-14.646.962-.695 1.797-1.562 2.457-2.549z"],["d","M12 2.163c3.204 0 3.584.012 4.85.07 3.252.148 4.771 1.691 4.919 4.919.058 1.265.069 1.645.069 4.849 0 3.205-.012 3.584-.069 4.849-.149 3.225-1.664 4.771-4.919 4.919-1.266.058-1.644.07-4.85.07-3.204 0-3.584-.012-4.849-.07-3.26-.149-4.771-1.699-4.919-4.92-.058-1.265-.07-1.644-.07-4.849 0-3.204.013-3.583.07-4.849.149-3.227 1.664-4.771 4.919-4.919 1.266-.057 1.645-.069 4.849-.069zm0-2.163c-3.259 0-3.667.014-4.947.072-4.358.2-6.78 2.618-6.98 6.98-.059 1.281-.073 1.689-.073 4.948 0 3.259.014 3.668.072 4.948.2 4.358 2.618 6.78 6.98 6.98 1.281.058 1.689.072 4.948.072 3.259 0 3.668-.014 4.948-.072 4.354-.2 6.782-2.618 6.979-6.98.059-1.28.073-1.689.073-4.948 0-3.259-.014-3.667-.072-4.947-.196-4.354-2.617-6.78-6.979-6.98-1.281-.059-1.69-.073-4.949-.073zm0 5.838c-3.403 0-6.162 2.759-6.162 6.162s2.759 6.163 6.162 6.163 6.162-2.759 6.162-6.163c0-3.403-2.759-6.162-6.162-6.162zm0 10.162c-2.209 0-4-1.79-4-4 0-2.209 1.791-4 4-4s4 1.791 4 4c0 2.21-1.791 4-4 4zm6.406-11.845c-.796 0-1.441.645-1.441 1.44s.645 1.44 1.441 1.44c.795 0 1.439-.645 1.439-1.44s-.644-1.44-1.439-1.44z"],["d","M24 8.182l-.018-.087-.017-.05c-.01-.024-.018-.05-.03-.075-.003-.018-.015-.034-.02-.05l-.035-.067-.03-.05-.044-.06-.046-.045-.06-.045-.046-.03-.06-.044-.044-.04-.015-.02L12.58.19c-.347-.232-.796-.232-1.142 0L.453 7.502l-.015.015-.044.035-.06.05-.038.04-.05.056-.037.045-.05.06c-.02.017-.03.03-.03.046l-.05.06-.02.06c-.02.01-.02.04-.03.07l-.01.05C0 8.12 0 8.15 0 8.18v7.497c0 .044.003.09.01.135l.01.046c.005.03.01.06.02.086l.015.05c.01.027.016.053.027.075l.022.05c0 .01.015.04.03.06l.03.04c.015.01.03.04.045.06l.03.04.04.04c.01.013.01.03.03.03l.06.042.04.03.01.012 10.97 7.33c.164.12.375.163.57.163s.39-.06.57-.18l10.99-7.28.014-.01.046-.037.06-.043.048-.036.052-.058.033-.045.04-.06.03-.05.03-.07.016-.052.03-.077.015-.045.03-.08v-7.5c0-.05 0-.095-.016-.14l-.014-.045.044.003zm-11.99 6.28l-3.65-2.44 3.65-2.442 3.65 2.44-3.65 2.44zm-1.034-6.674l-4.473 2.99L2.89 8.362l8.086-5.39V7.79zm-6.33 4.233l-2.582 1.73V10.3l2.582 1.726zm1.857 1.25l4.473 2.99v4.82L2.89 15.69l3.618-2.417v-.004zm6.537 2.99l4.474-2.98 3.613 2.42-8.087 5.39v-4.82zm6.33-4.23l2.583-1.72v3.456l-2.583-1.73zm-1.855-1.24L13.042 7.8V2.97l8.085 5.39-3.612 2.415v.003z"]],template:function(t,r){t&1&&(O(0,"ul",0),xt(1,$2,7,7,"li",null,F2),P(),kt(3,z2,1,0,"div",1)),t&2&&(De("ngClass",r.orientation==="vertical"?"flex-col space-y-6":"flex-row space-x-6"),F(),It(r.socialLinks),F(2),Lt(r.orientation==="vertical"?3:-1))},dependencies:[ze,hi],encapsulation:2})};var Nd=class n{static \u0275fac=function(t){return new(t||n)};static \u0275cmp=xe({type:n,selectors:[["app-about"]],decls:27,vars:0,consts:[["id","about",1,"mb-16","relative","text-justify"],[1,"lg:hidden","sticky","top-0","lg:w-full","lg:opacity-0","bg-slate-900/75","backdrop-blur","py-3","-mx-6","px-6","z-20"],[1,"text-sm","font-bold","text-slate-200","lg:sr-only","tracking-widest"],[1,"text-green","mb-2"],[1,"mt-4"],[1,"text-green"]],template:function(t,r){t&1&&(O(0,"section",0)(1,"div",1)(2,"h2",2),B(3,"About"),P()(),O(4,"p",3),B(5,"Software developer with 6 years of experience in Angular and Java, and over 3 years specializing in frontend development with Angular."),P(),O(6,"p",4),B(7,"Currently pursuing a Master's degree in "),O(8,"span",5),B(9,"Artificial Intelligence"),P(),B(10," and actively seeking AI-focused roles. I'm passionate about leveraging AI to enhance the software development process\u2014making it faster, more efficient, and less error-prone."),P(),O(11,"p",4),B(12,"My background in "),O(13,"span",5),B(14,"full-stack development"),P(),B(15," gives me a strong foundation to understand practical implementation challenges and build smart, scalable solutions. While my core expertise is in software engineering, I also hold "),O(16,"span",5),B(17,"AWS certifications"),P(),B(18," and maintain an active interest in cloud technologies as part of my broader technical toolkit."),P(),O(19,"p",4),B(20,"Dedicated to continuous learning and growth, I strive to create/look for tools and systems that boost "),O(21,"span",5),B(22,"productivity"),P(),B(23," and "),O(24,"span",5),B(25,"innovation"),P(),B(26,". "),P()())},encapsulation:2})};var W2=(n,e)=>e.id;function q2(n,e){if(n&1&&(O(0,"a",3)(1,"article",4)(2,"div",5),re(3,"img",6),P(),O(4,"div",7)(5,"time",8),B(6),P(),O(7,"h2",9),B(8),P()()()()),n&2){let t=e.$implicit,r=e.$index;De("href",t.link,ut),rr("aria-label",t.title),F(),rr("aria-labelledby","article-title-"+r),F(2),De("src",t.imageUrl,ut)("alt",t.title),F(3),Xt(t.year),F(),Ao("id","article-title-",r,""),F(),at(" ",t.title," ")}}var kd=class n{contentService=R(Zt);articleList$;constructor(){this.articleList$=this.contentService.getContent("article")}static \u0275fac=function(t){return new(t||n)};static \u0275cmp=xe({type:n,selectors:[["app-articles"]],decls:7,vars:2,consts:[[1,"max-w-3xl","mx-auto","py-8"],[1,"lg:hidden","sticky","top-0","lg:w-full","lg:opacity-0","bg-slate-900/75","backdrop-blur","py-3","-mx-6","px-6","z-20"],[1,"text-sm","font-bold","text-slate-200","lg:sr-only","tracking-widest","uppercase"],["target","_blank","rel","noopener noreferrer",1,"text-slate-400","hover:text-emerald-400","transition-colors",3,"href"],["role","article",1,"group","flex","gap-6","mb-6","rounded-lg","cursor-pointer","transition-all","duration-200","hover:-translate-y-0.5","hover:text-emerald-400"],[1,"flex-shrink-0","w-20","h-20","overflow-hidden","rounded-lg"],["loading","lazy",1,"w-full","h-full","object-cover","transition-transform","duration-200","group-hover:scale-105",3,"src","alt"],[1,"flex-grow"],[1,"text-sm","text-neutral-400","mb-2","block"],[1,"text-base","text-white","font-medium","leading-tight","group-hover:text-primary-400","transition-colors","duration-200",3,"id"]],template:function(t,r){t&1&&(O(0,"div",0)(1,"div",1)(2,"h2",2),B(3,"Articles"),P()(),xt(4,q2,9,9,"a",3,W2),On(6,"async"),P()),t&2&&(F(4),It(Pn(6,0,r.articleList$)))},dependencies:[ze,pn],encapsulation:2})};var G2=(n,e)=>e.id;function Y2(n,e){if(n&1&&(O(0,"div",2),re(1,"img",6),P()),n&2){let t=e.$implicit;F(),De("src",t.imageUrl,ut)("alt",t.title)}}var Ld=class n{contentService=R(Zt);badgeList$;constructor(){this.badgeList$=this.contentService.getContent("badge")}static \u0275fac=function(t){return new(t||n)};static \u0275cmp=xe({type:n,selectors:[["app-badges"]],decls:11,vars:2,consts:[[1,"mb-16","relative"],[1,"grid","grid-cols-2","md:grid-cols-3","gap-4"],[1,"bg-slate-800/50","p-4","rounded-lg"],[1,"mt-12"],["href","/certificates",1,"group","inline-flex","items-center","font-semibold","leading-tight","text-slate-200"],[1,"ml-1","text-slate-400","transition-transform","group-hover:translate-x-2"],["width","150","height","270",1,"mx-auto",3,"src","alt"]],template:function(t,r){t&1&&(O(0,"section",0)(1,"div",1),xt(2,Y2,2,2,"div",2,G2),On(4,"async"),P(),O(5,"div",3)(6,"a",4)(7,"span"),B(8,"View Certificates"),P(),O(9,"span",5),B(10,"\u2192"),P()()()()),t&2&&(F(2),It(Pn(4,0,r.badgeList$)))},dependencies:[ze,pn],encapsulation:2})};var K2=(n,e)=>e.id;function X2(n,e){if(n&1&&(O(0,"li",19)(1,"div",20),B(2),P()()),n&2){let t=e.$implicit;F(2),at(" ",t,"")}}function Q2(n,e){if(n&1&&(O(0,"div",3)(1,"div",7),re(2,"div",8),O(3,"header",9),B(4),P(),O(5,"div",10)(6,"h3",11)(7,"div")(8,"a",12),re(9,"span",13),O(10,"span"),B(11),P(),O(12,"span",14),B(13),hn(),O(14,"svg",15),re(15,"path",16),P()()()()(),bo(),O(16,"p",17),B(17),P(),O(18,"ul",18),xt(19,X2,3,1,"li",19,gc),P()()()()),n&2){let t=e.$implicit;F(4),at(" ",t.date," "),F(4),De("href",t.companyUrl,ut),rr("aria-label",t.title+" at "+t.company),F(3),Xt(t.title),F(2),at("\xA0 \xB7 ",t.company," "),F(4),at(" ",t.description," "),F(2),It(t.technologies)}}var Fd=class n{contentService=R(Zt);experienceList$;constructor(){this.experienceList$=this.contentService.getContent("experience")}static \u0275fac=function(t){return new(t||n)};static \u0275cmp=xe({type:n,selectors:[["app-experience"]],decls:13,vars:2,consts:[["id","experience",1,"my-16","relative"],[1,"lg:hidden","sticky","top-0","lg:w-full","lg:opacity-0","bg-slate-900/75","backdrop-blur","py-3","-mx-6","px-6","z-20"],[1,"text-sm","font-bold","text-slate-200","lg:sr-only","tracking-widest","uppercase"],[1,"mb-12"],[1,"mt-12"],["href","resume.pdf",1,"group","inline-flex","items-center","font-semibold","leading-tight","text-slate-200"],[1,"ml-1","text-slate-400","transition-transform","group-hover:translate-x-2"],[1,"group","relative","grid","pb-1","transition-all","sm:grid-cols-8","sm:gap-8","md:gap-4","lg:hover:!opacity-100","lg:group-hover/list:opacity-50"],[1,"absolute","-inset-x-4","-inset-y-4","z-0","hidden","rounded-md","transition","motion-reduce:transition-none","lg:-inset-x-6","lg:block","lg:group-hover:bg-slate-800/50","lg:group-hover:shadow-[inset_0_1px_0_0_rgba(148,163,184,0.2)]","lg:group-hover:drop-shadow-lg"],[1,"z-10","mb-2","mt-1","text-xs","font-semibold","uppercase","tracking-wide","text-slate-500","sm:col-span-2","opacity-50"],[1,"z-10","sm:col-span-6"],[1,"font-medium","leading-snug","text-slate-200"],["target","_blank","rel","noreferrer",1,"inline-flex","items-baseline","font-medium","leading-tight","text-slate-200","hover:text-teal-300","focus-visible:text-teal-300","group/link","text-base",3,"href"],[1,"absolute","-inset-x-4","-inset-y-2.5","hidden","rounded","md:-inset-x-6","md:-inset-y-4","lg:block","hover:bg-green/[.02]","transition-transform"],[1,"inline-block"],["xmlns","http://www.w3.org/2000/svg","viewBox","0 0 20 20","fill","currentColor","aria-hidden","true",1,"inline-block","h-4","w-4","shrink-0","transition-transform","group-hover/link:-translate-y-1","group-hover/link:translate-x-1","group-focus-visible/link:-translate-y-1","group-focus-visible/link:translate-x-1","motion-reduce:transition-none","ml-1","translate-y-px"],["fill-rule","evenodd","d","M5.22 14.78a.75.75 0 001.06 0l7.22-7.22v5.69a.75.75 0 001.5 0v-7.5a.75.75 0 00-.75-.75h-7.5a.75.75 0 000 1.5h5.69l-7.22 7.22a.75.75 0 000 1.06z","clip-rule","evenodd"],[1,"mt-2","text-sm","leading-normal","text-slate-400"],["aria-label","Technologies used",1,"mt-2","flex","flex-wrap"],[1,"mr-1.5","mt-2"],[1,"flex","items-center","rounded-full","bg-teal-400/10","px-3","py-1","text-xs","font-medium","leading-5","text-teal-300"]],template:function(t,r){t&1&&(O(0,"section",0)(1,"div",1)(2,"h2",2),B(3,"Experience"),P()(),xt(4,Q2,21,6,"div",3,K2),On(6,"async"),O(7,"div",4)(8,"a",5)(9,"span"),B(10,"View Full Resume"),P(),O(11,"span",6),B(12,"\u2192"),P()()()()),t&2&&(F(4),It(Pn(6,0,r.experienceList$)))},dependencies:[ze,pn],encapsulation:2})};var Z2=(n,e)=>e.id;function J2(n,e){if(n&1&&(O(0,"div",19),hn(),O(1,"svg",22),re(2,"path",23),P(),bo(),O(3,"span"),B(4),P()()),n&2){let t=Rn().$implicit;F(4),Xt(t.stats)}}function ej(n,e){if(n&1&&(O(0,"li",21)(1,"div",24),B(2),P()()),n&2){let t=e.$implicit;F(2),at(" ",t," ")}}function tj(n,e){if(n&1&&(O(0,"div",4),re(1,"div",6),O(2,"div",7)(3,"a",8)(4,"div",9),re(5,"img",10),P()()(),O(6,"div",11)(7,"header",12)(8,"h3",13)(9,"a",14),re(10,"span",15),B(11),hn(),O(12,"svg",16),re(13,"path",17),P()()(),bo(),O(14,"p",18),B(15),P()(),kt(16,J2,5,1,"div",19),O(17,"ul",20),xt(18,ej,3,1,"li",21,gc),P()()()),n&2){let t=e.$implicit;F(3),De("href",t.link,ut),F(2),De("src",t.image,ut)("alt",t.title),F(4),De("href",t.link,ut),F(2),at(" ",t.title," "),F(4),Xt(t.description),F(),Lt(t.stats?16:-1),F(2),It(t.technologies)}}var jd=class n{contentService=R(Zt);projectList$;constructor(){this.projectList$=this.contentService.getContent("project")}static \u0275fac=function(t){return new(t||n)};static \u0275cmp=xe({type:n,selectors:[["app-projects"]],decls:9,vars:2,consts:[["id","projects",1,"mb-16","relative"],[1,"lg:hidden","sticky","top-0","lg:w-full","lg:opacity-0","bg-slate-900/75","backdrop-blur","py-3","-mx-6","px-6","z-20"],[1,"text-sm","font-bold","text-slate-200","lg:sr-only","tracking-widest","uppercase"],[1,"space-y-24"],[1,"group","relative","grid","pb-1","transition-all","sm:grid-cols-8","sm:gap-8","md:gap-4","lg:hover:!opacity-100","lg:group-hover/list:opacity-50"],[1,"mt-12"],[1,"absolute","-inset-x-4","-inset-y-4","z-0","hidden","rounded-md","transition","motion-reduce:transition-none","lg:-inset-x-6","lg:block","lg:group-hover:bg-slate-800/50","lg:group-hover:shadow-[inset_0_1px_0_0_rgba(148,163,184,0.1)]","lg:group-hover:drop-shadow-lg"],[1,"relative","z-10","col-span-full","sm:col-span-2","mb-4","sm:mb-0"],["target","_blank","rel","noreferrer",1,"block",3,"href"],[1,"group-hover:opacity-75","transition-opacity","duration-300"],["loading","lazy","decoding","async",1,"w-full","aspect-[16/9]","rounded","border","border-slate-700/50","object-cover",3,"src","alt"],[1,"z-10","col-span-full","sm:col-span-6"],[1,"flex","flex-col"],[1,"text-xl","font-medium","leading-snug","text-slate-200"],["target","_blank","rel","noreferrer",1,"inline-flex","items-center","group/link",3,"href"],[1,"absolute","-inset-x-4","-inset-y-2.5","hidden","rounded","md:-inset-x-6","md:-inset-y-4","lg:block","hover:bg-green/[.02]","transition-transform"],["xmlns","http://www.w3.org/2000/svg","viewBox","0 0 20 20","fill","currentColor",1,"inline-block","h-4","w-4","shrink-0","transition-transform","group-hover/link:-translate-y-1","group-hover/link:translate-x-1","group-focus-visible/link:-translate-y-1","group-focus-visible/link:translate-x-1","motion-reduce:transition-none","ml-1","translate-y-px"],["fill-rule","evenodd","d","M5.22 14.78a.75.75 0 001.06 0l7.22-7.22v5.69a.75.75 0 001.5 0v-7.5a.75.75 0 00-.75-.75h-7.5a.75.75 0 000 1.5h5.69l-7.22 7.22a.75.75 0 000 1.06z","clip-rule","evenodd"],[1,"mt-2","text-sm","leading-normal","text-slate-400"],[1,"mt-2","flex","items-center","gap-2","text-slate-500"],["aria-label","Technologies used",1,"mt-2","flex","flex-wrap"],[1,"mr-1.5","mt-2"],["xmlns","http://www.w3.org/2000/svg","viewBox","0 0 20 20","fill","currentColor",1,"h-4","w-4"],["fill-rule","evenodd","d","M10.868 2.884c-.321-.772-1.415-.772-1.736 0l-1.83 4.401-4.753.381c-.833.067-1.171 1.107-.536 1.651l3.62 3.102-1.106 4.637c-.194.813.691 1.456 1.405 1.02L10 15.591l4.069 2.485c.713.436 1.598-.207 1.404-1.02l-1.106-4.637 3.62-3.102c.635-.544.297-1.584-.536-1.65l-4.752-.382-1.831-4.401z","clip-rule","evenodd"],[1,"flex","items-center","rounded-full","bg-teal-400/10","px-3","py-1","text-xs","font-medium","leading-5","text-teal-300"]],template:function(t,r){t&1&&(O(0,"section",0)(1,"div",1)(2,"h2",2),B(3,"Projects"),P()(),O(4,"div",3),xt(5,tj,20,7,"div",4,Z2),On(7,"async"),P(),re(8,"div",5),P()),t&2&&(F(5),It(Pn(7,0,r.projectList$)))},dependencies:[ze,pn],encapsulation:2})};var $r=function(n){return n[n.Fetched=0]="Fetched",n[n.NotModified=1]="NotModified",n[n.Errored=2]="Errored",n}($r||{}),vr=function(){function n(e,t,r,i){this.status=e,this.config=t,this.errorMessage=r,this.errorException=i}return n.success=function(e){return new n($r.Fetched,e)},n.notModified=function(e){return new n($r.NotModified,e)},n.error=function(e,t,r){return new n($r.Errored,e,t??"Unknown error.",r)},n}();var Mi=function(n){bt(e,n);function e(t){for(var r=[],i=1;i<arguments.length;i++)r[i-1]=arguments[i];var s=n.call(this,function(o,a){switch(o){case"abort":return"Request was aborted.";case"timeout":var l=a[0];return"Request timed out. Timeout value: "+l+"ms";case"failure":var c=a[0],u="Request failed due to a network or protocol error.";return c?u+" "+(c instanceof Error?c.message:c+""):u}}(t,r))||this;return s.cause=t,s instanceof e||(Object.setPrototypeOf||function(o,a){return o.__proto__=a})(s,e.prototype),s.args=r,s}return e}(Error);var Oa=function(n){return n[n.No=0]="No",n[n.Should=1]="Should",n[n.Force=2]="Force",n}(Oa||{}),zr=function(n){return n[n.Boolean=0]="Boolean",n[n.String=1]="String",n[n.Int=2]="Int",n[n.Double=3]="Double",n}(zr||{}),A=function(n){return n[n.TextIsOneOf=0]="TextIsOneOf",n[n.TextIsNotOneOf=1]="TextIsNotOneOf",n[n.TextContainsAnyOf=2]="TextContainsAnyOf",n[n.TextNotContainsAnyOf=3]="TextNotContainsAnyOf",n[n.SemVerIsOneOf=4]="SemVerIsOneOf",n[n.SemVerIsNotOneOf=5]="SemVerIsNotOneOf",n[n.SemVerLess=6]="SemVerLess",n[n.SemVerLessOrEquals=7]="SemVerLessOrEquals",n[n.SemVerGreater=8]="SemVerGreater",n[n.SemVerGreaterOrEquals=9]="SemVerGreaterOrEquals",n[n.NumberEquals=10]="NumberEquals",n[n.NumberNotEquals=11]="NumberNotEquals",n[n.NumberLess=12]="NumberLess",n[n.NumberLessOrEquals=13]="NumberLessOrEquals",n[n.NumberGreater=14]="NumberGreater",n[n.NumberGreaterOrEquals=15]="NumberGreaterOrEquals",n[n.SensitiveTextIsOneOf=16]="SensitiveTextIsOneOf",n[n.SensitiveTextIsNotOneOf=17]="SensitiveTextIsNotOneOf",n[n.DateTimeBefore=18]="DateTimeBefore",n[n.DateTimeAfter=19]="DateTimeAfter",n[n.SensitiveTextEquals=20]="SensitiveTextEquals",n[n.SensitiveTextNotEquals=21]="SensitiveTextNotEquals",n[n.SensitiveTextStartsWithAnyOf=22]="SensitiveTextStartsWithAnyOf",n[n.SensitiveTextNotStartsWithAnyOf=23]="SensitiveTextNotStartsWithAnyOf",n[n.SensitiveTextEndsWithAnyOf=24]="SensitiveTextEndsWithAnyOf",n[n.SensitiveTextNotEndsWithAnyOf=25]="SensitiveTextNotEndsWithAnyOf",n[n.SensitiveArrayContainsAnyOf=26]="SensitiveArrayContainsAnyOf",n[n.SensitiveArrayNotContainsAnyOf=27]="SensitiveArrayNotContainsAnyOf",n[n.TextEquals=28]="TextEquals",n[n.TextNotEquals=29]="TextNotEquals",n[n.TextStartsWithAnyOf=30]="TextStartsWithAnyOf",n[n.TextNotStartsWithAnyOf=31]="TextNotStartsWithAnyOf",n[n.TextEndsWithAnyOf=32]="TextEndsWithAnyOf",n[n.TextNotEndsWithAnyOf=33]="TextNotEndsWithAnyOf",n[n.ArrayContainsAnyOf=34]="ArrayContainsAnyOf",n[n.ArrayNotContainsAnyOf=35]="ArrayNotContainsAnyOf",n}(A||{}),Ri=function(n){return n[n.Equals=0]="Equals",n[n.NotEquals=1]="NotEquals",n}(Ri||{}),yr=function(n){return n[n.IsIn=0]="IsIn",n[n.IsNotIn=1]="IsNotIn",n}(yr||{});var Ut=function(){function n(e,t,r,i){this.configJson=e,this.config=t,this.timestamp=r,this.httpETag=i}return n.equals=function(e,t){return e.httpETag&&t.httpETag?e.httpETag===t.httpETag:e.configJson===t.configJson},n.prototype.with=function(e){return new n(this.configJson,this.config,e,this.httpETag)},Object.defineProperty(n.prototype,"isEmpty",{get:function(){return!this.config},enumerable:!1,configurable:!0}),n.prototype.isExpired=function(e){return this===n.empty||this.timestamp+e<n.generateTimestamp()},n.generateTimestamp=function(){return new Date().getTime()},n.serialize=function(e){var t,r;return e.timestamp+`
`+((t=e.httpETag)!==null&&t!==void 0?t:"")+`
`+((r=e.configJson)!==null&&r!==void 0?r:"")},n.deserialize=function(e){for(var t=Array(2),r=0,i=0;i<t.length;i++){if(r=e.indexOf(`
`,r),r<0)throw new Error("Number of values is fewer than expected.");t[i]=r++}var s=t[0],o=e.substring(0,s),a=parseInt(o);if(isNaN(a))throw new Error("Invalid fetch time: "+o);r=s+1,s=t[1],o=e.substring(r,s);var l=o.length>0?o:void 0;r=s+1,o=e.substring(r);var c,u;return o.length>0&&(c=Pa.deserialize(o),u=o),new n(u,c,a,l)},n.serializationFormatVersion="v2",n.empty=new n(void 0,void 0,0,void 0),n}();var Pa=function(){function n(e){var t=this,r,i;this.preferences=e.p!=null?new nj(e.p):void 0,this.segments=(i=(r=e.s)===null||r===void 0?void 0:r.map(function(s){return new rj(s)}))!==null&&i!==void 0?i:[],this.settings=e.f!=null?Object.fromEntries(Object.entries(e.f).map(function(s){var o=s[0],a=s[1];return[o,new Fy(a,t)]})):{}}return n.deserialize=function(e){var t=JSON.parse(e);if(typeof t!="object"||!t)throw new Error("Invalid config JSON content:"+e);return new n(t)},Object.defineProperty(n.prototype,"salt",{get:function(){var e;return(e=this.preferences)===null||e===void 0?void 0:e.salt},enumerable:!1,configurable:!0}),n}();var nj=function(){function n(e){this.baseUrl=e.u,this.redirectMode=e.r,this.salt=e.s}return n}();var rj=function(){function n(e){var t,r;this.name=e.n,this.conditions=(r=(t=e.r)===null||t===void 0?void 0:t.map(function(i){return new BS(i)}))!==null&&r!==void 0?r:[]}return n}();var Ly=function(){function n(e,t){t===void 0&&(t=!1),this.value=t?e.v:VS(e.v),this.variationId=e.i}return n}();var Fy=function(n){bt(e,n);function e(t,r){var i,s,o,a,l,c,u=n.call(this,t,t.t<0)||this;u.type=t.t;var d="Identifier";return u.percentageOptionsAttribute=(i=t.a)!==null&&i!==void 0?i:d,u.targetingRules=(o=(s=t.r)===null||s===void 0?void 0:s.map(function(h){return new ij(h,r)}))!==null&&o!==void 0?o:[],u.percentageOptions=(l=(a=t.p)===null||a===void 0?void 0:a.map(function(h){return new jS(h)}))!==null&&l!==void 0?l:[],u.configJsonSalt=(c=r?.salt)!==null&&c!==void 0?c:"",u}return e.fromValue=function(t){return new e({t:-1,v:t})},e}(Ly);var ij=function(){function n(e,t){var r,i;this.conditions=(i=(r=e.c)===null||r===void 0?void 0:r.map(function(s){return s.u!=null?new BS(s.u):s.p!=null?new sj(s.p):s.s!=null?new oj(s.s,t):void 0}))!==null&&i!==void 0?i:[],this.then=e.p!=null?e.p.map(function(s){return new jS(s)}):new Ly(e.s)}return n}();var jS=function(n){bt(e,n);function e(t){var r=n.call(this,t)||this;return r.percentage=t.p,r}return e}(Ly);var BS=function(){function n(e){var t,r;this.type="UserCondition",this.comparisonAttribute=e.a,this.comparator=e.c,this.comparisonValue=(r=(t=e.s)!==null&&t!==void 0?t:e.d)!==null&&r!==void 0?r:e.l}return n}();var sj=function(){function n(e){this.type="PrerequisiteFlagCondition",this.prerequisiteFlagKey=e.f,this.comparator=e.c,this.comparisonValue=VS(e.v)}return n}();var oj=function(){function n(e,t){this.type="SegmentCondition",this.segment=t.segments[e.s],this.comparator=e.c}return n}();function VS(n){var e,t,r;return(r=(t=(e=n.b)!==null&&e!==void 0?e:n.s)!==null&&t!==void 0?t:n.i)!==null&&r!==void 0?r:n.d}var Na=function(){function n(e,t){this.errorMessage=e,this.errorException=t}return Object.defineProperty(n.prototype,"isSuccess",{get:function(){return this.errorMessage===null},enumerable:!1,configurable:!0}),n.from=function(e){return e.status!==$r.Errored?n.success():n.failure(e.errorMessage,e.errorException)},n.success=function(){return new n(null)},n.failure=function(e,t){return new n(e,t)},n}();var vt=function(n){return n[n.NoFlagData=0]="NoFlagData",n[n.HasLocalOverrideFlagDataOnly=1]="HasLocalOverrideFlagDataOnly",n[n.HasCachedFlagDataOnly=2]="HasCachedFlagDataOnly",n[n.HasUpToDateFlagData=3]="HasUpToDateFlagData",n}(vt||{}),$t=function(n){return n[n.Online=0]="Online",n[n.Offline=1]="Offline",n[n.Disposed=2]="Disposed",n}($t||{}),Hs=function(){function n(e,t){this.configFetcher=e,this.options=t,this.pendingFetch=null,this.cacheKey=t.getCacheKey(),this.configFetcher=e,this.options=t,this.status=t.offline?$t.Offline:$t.Online}return n.prototype.dispose=function(){this.status=$t.Disposed},Object.defineProperty(n.prototype,"disposed",{get:function(){return this.status===$t.Disposed},enumerable:!1,configurable:!0}),n.prototype.refreshConfigAsync=function(){return he(this,void 0,void 0,function(){var e,t,r,i,s;return me(this,function(o){switch(o.label){case 0:return[4,this.options.cache.get(this.cacheKey)];case 1:return e=o.sent(),this.isOffline?[3,3]:[4,this.refreshConfigCoreAsync(e)];case 2:return t=o.sent(),r=t[0],i=t[1],[2,[Na.from(r),i]];case 3:return s=this.options.logger.configServiceCannotInitiateHttpCalls().toString(),[2,[Na.failure(s),e]]}})})},n.prototype.refreshConfigCoreAsync=function(e){return he(this,void 0,void 0,function(){var t,r,i;return me(this,function(s){switch(s.label){case 0:return[4,this.fetchAsync(e)];case 1:return t=s.sent(),r=!1,i=t.status===$r.Fetched,i||t.config.timestamp>e.timestamp&&(!t.config.isEmpty||e.isEmpty)?[4,this.options.cache.set(this.cacheKey,t.config)]:[3,3];case 2:s.sent(),r=i&&!Ut.equals(t.config,e),e=t.config,s.label=3;case 3:return this.onConfigFetched(t.config),r&&this.onConfigChanged(t.config),[2,[t,e]]}})})},n.prototype.onConfigFetched=function(e){},n.prototype.onConfigChanged=function(e){var t;this.options.logger.debug("config changed"),this.options.hooks.emit("configChanged",(t=e.config)!==null&&t!==void 0?t:new Pa({}))},n.prototype.fetchAsync=function(e){var t=this,r;return(r=this.pendingFetch)!==null&&r!==void 0?r:this.pendingFetch=function(){return he(t,void 0,void 0,function(){return me(this,function(i){switch(i.label){case 0:return i.trys.push([0,,2,3]),[4,this.fetchLogicAsync(e)];case 1:return[2,i.sent()];case 2:return this.pendingFetch=null,[7];case 3:return[2]}})})}()},n.prototype.fetchLogicAsync=function(e){var t;return he(this,void 0,void 0,function(){var r,i,s,o,a,l;return me(this,function(c){switch(c.label){case 0:r=this.options,r.logger.debug("ConfigServiceBase.fetchLogicAsync() - called."),c.label=1;case 1:return c.trys.push([1,3,,4]),[4,this.fetchRequestAsync((t=e.httpETag)!==null&&t!==void 0?t:null)];case 2:switch(s=c.sent(),o=s[0],a=s[1],o.statusCode){case 200:return a instanceof Pa?(r.logger.debug("ConfigServiceBase.fetchLogicAsync(): fetch was successful. Returning new config."),[2,vr.success(new Ut(o.body,a,Ut.generateTimestamp(),o.eTag))]):(i=r.logger.fetchReceived200WithInvalidBody(a).toString(),r.logger.debug("ConfigServiceBase.fetchLogicAsync(): "+o.statusCode+" "+o.reasonPhrase+" was received but the HTTP response content was invalid. Returning null."),[2,vr.error(e,i,a)]);case 304:return e?(r.logger.debug("ConfigServiceBase.fetchLogicAsync(): content was not modified. Returning last config with updated timestamp."),[2,vr.notModified(e.with(Ut.generateTimestamp()))]):(i=r.logger.fetchReceived304WhenLocalCacheIsEmpty(o.statusCode,o.reasonPhrase).toString(),r.logger.debug("ConfigServiceBase.fetchLogicAsync(): "+o.statusCode+" "+o.reasonPhrase+" was received when no config is cached locally. Returning null."),[2,vr.error(e,i)]);case 403:case 404:return i=r.logger.fetchFailedDueToInvalidSdkKey().toString(),r.logger.debug("ConfigServiceBase.fetchLogicAsync(): fetch was unsuccessful. Returning last config (if any) with updated timestamp."),[2,vr.error(e.with(Ut.generateTimestamp()),i)];default:return i=r.logger.fetchFailedDueToUnexpectedHttpResponse(o.statusCode,o.reasonPhrase).toString(),r.logger.debug("ConfigServiceBase.fetchLogicAsync(): fetch was unsuccessful. Returning null."),[2,vr.error(e,i)]}return[3,4];case 3:return l=c.sent(),i=(l instanceof Mi&&l.cause==="timeout"?r.logger.fetchFailedDueToRequestTimeout(l.args[0],l):r.logger.fetchFailedDueToUnexpectedError(l)).toString(),r.logger.debug("ConfigServiceBase.fetchLogicAsync(): fetch was unsuccessful. Returning null."),[2,vr.error(e,i,l)];case 4:return[2]}})})},n.prototype.fetchRequestAsync=function(e,t){return t===void 0&&(t=2),he(this,void 0,void 0,function(){var r,i,s,o,a,l,c;return me(this,function(u){switch(u.label){case 0:r=this.options,r.logger.debug("ConfigServiceBase.fetchRequestAsync() - called."),i=0,u.label=1;case 1:return r.logger.debug("ConfigServiceBase.fetchRequestAsync(): calling fetchLogic()"+(i>0?", retry "+i+"/"+t:"")),[4,this.configFetcher.fetchLogic(r,e)];case 2:if(s=u.sent(),s.statusCode!==200)return[2,[s]];if(!s.body)return r.logger.debug("ConfigServiceBase.fetchRequestAsync(): no response body."),[2,[s,new Error("No response body.")]];o=void 0;try{o=Pa.deserialize(s.body)}catch(d){return r.logger.debug("ConfigServiceBase.fetchRequestAsync(): invalid response body."),[2,[s,d]]}if(a=o.preferences,!a)return r.logger.debug("ConfigServiceBase.fetchRequestAsync(): preferences is empty."),[2,[s,o]];if(l=a.baseUrl,!l||l===r.baseUrl)return r.logger.debug("ConfigServiceBase.fetchRequestAsync(): baseUrl OK."),[2,[s,o]];if(c=a.redirectMode,r.baseUrlOverriden&&c!==Oa.Force)return r.logger.debug("ConfigServiceBase.fetchRequestAsync(): options.baseUrlOverriden && redirect !== 2."),[2,[s,o]];if(r.baseUrl=l,c===Oa.No)return[2,[s,o]];if(c===Oa.Should&&r.logger.dataGovernanceIsOutOfSync(),i>=t)return r.logger.fetchFailedDueToRedirectLoop(),[2,[s,o]];u.label=3;case 3:return i++,[3,1];case 4:return[2]}})})},Object.defineProperty(n.prototype,"isOfflineExactly",{get:function(){return this.status===$t.Offline},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"isOffline",{get:function(){return this.status!==$t.Online},enumerable:!1,configurable:!0}),n.prototype.setOnlineCore=function(){},n.prototype.setOnline=function(){this.status===$t.Offline?(this.setOnlineCore(),this.status=$t.Online,this.options.logger.configServiceStatusChanged($t[this.status])):this.disposed&&this.options.logger.configServiceMethodHasNoEffectDueToDisposedClient("setOnline")},n.prototype.setOfflineCore=function(){},n.prototype.setOffline=function(){this.status===$t.Online?(this.setOfflineCore(),this.status=$t.Offline,this.options.logger.configServiceStatusChanged($t[this.status])):this.disposed&&this.options.logger.configServiceMethodHasNoEffectDueToDisposedClient("setOffline")},n.prototype.syncUpWithCache=function(){return this.options.cache.get(this.cacheKey)},n.prototype.getReadyPromise=function(e,t){return he(this,void 0,void 0,function(){var r;return me(this,function(i){switch(i.label){case 0:return[4,t(e)];case 1:return r=i.sent(),this.options.hooks.emit("clientReady",r),[2,r]}})})},n}();var Bd=function(){function n(){this.callbacks=[]}return Object.defineProperty(n.prototype,"aborted",{get:function(){return!this.callbacks},enumerable:!1,configurable:!0}),n.prototype.abort=function(){if(!this.aborted){var e=this.callbacks;this.callbacks=null;for(var t=0,r=e;t<r.length;t++){var i=r[t];i()}}},n.prototype.registerCallback=function(e){var t=this;return this.aborted?(e(),function(){}):(this.callbacks.push(e),function(){var r=t.callbacks,i;r&&(i=r.indexOf(e))>=0&&r.splice(i,1)})},n}();function jy(n,e){var t;return new Promise(function(r){var i=e?.registerCallback(function(){clearTimeout(t),r(!1)});t=setTimeout(function(){i?.(),r(!0)},n)})}function zn(n,e){return e===void 0&&(e=!1),n instanceof Error?e&&n.stack?n.stack:n.toString():n+""}function By(n){throw n}function Oi(n){return Array.isArray(n)}function ka(n){return Oi(n)&&!n.some(function(e){return typeof e!="string"})}function La(n,e,t,r){e===void 0&&(e=0),r===void 0&&(r=", ");var i=n.length;if(!i)return"";var s="";return e>0&&i>e&&(n=n.slice(0,e),t&&(s=t(i-e))),"'"+n.join("'"+r+"'")+"'"+s}function HS(n){var e;return typeof((e=n)===null||e===void 0?void 0:e.then)=="function"}function Pi(n){function e(a,l){var c=a.charCodeAt(l);if(55296<=c&&c<56320){var u=a.charCodeAt(l+1);if(56320<=u&&u<=57343)return(c<<10)+u-56613888}return c}var t="",r=0,i=String.fromCharCode,s;for(s=0;s<n.length;s++){var o=e(n,s);o<=127||(t+=n.slice(r,s),o<=2047?(t+=i(192|o>>6),t+=i(128|o&63)):o<=65535?(t+=i(224|o>>12),t+=i(128|o>>6&63),t+=i(128|o&63)):(t+=i(240|o>>18),t+=i(128|o>>12&63),t+=i(128|o>>6&63),t+=i(128|o&63),++s),r=s+1)}return t+=n.slice(r,s)}function Vy(n){return typeof n=="number"?n:typeof n!="string"||!n.length||/^\s*$|^\s*0[^\d.e]/.test(n)?NaN:+n}var aj=500,US=function(n){bt(e,n);function e(t,r){var i=n.call(this,t,r)||this;i.signalInitialization=function(){},i.stopToken=new Bd,i.pollIntervalMs=r.pollIntervalSeconds*1e3,i.pollExpirationMs=i.pollIntervalMs-aj;var s=i.syncUpWithCache();if(r.maxInitWaitTimeSeconds!==0){i.initialized=!1;var o=new Promise(function(a){return i.signalInitialization=a});i.initializationPromise=i.waitForInitializationAsync(o).then(function(a){return i.initialized=!0,a})}else i.initialized=!0,i.initializationPromise=Promise.resolve(!1);return i.readyPromise=i.getReadyPromise(i.initializationPromise,function(a){return he(i,void 0,void 0,function(){return me(this,function(l){switch(l.label){case 0:return[4,a];case 1:return l.sent(),[2,this.getCacheState(this.options.cache.getInMemory())]}})})}),r.offline||i.startRefreshWorker(s,i.stopToken),i}return e.prototype.waitForInitializationAsync=function(t){return he(this,void 0,void 0,function(){var r,i;return me(this,function(s){switch(s.label){case 0:return this.options.maxInitWaitTimeSeconds<0?[4,t]:[3,2];case 1:return s.sent(),[2,!0];case 2:return r=new Bd,[4,Promise.race([t.then(function(){return!0}),jy(this.options.maxInitWaitTimeSeconds*1e3,r).then(function(){return!1})])];case 3:return i=s.sent(),r.abort(),[2,i]}})})},e.prototype.getConfig=function(){return he(this,void 0,void 0,function(){function t(i){i.debug("AutoPollConfigService.getConfig() - returning value from cache.")}var r;return me(this,function(i){switch(i.label){case 0:return this.options.logger.debug("AutoPollConfigService.getConfig() called."),!this.isOffline&&!this.initialized?[4,this.options.cache.get(this.cacheKey)]:[3,3];case 1:return r=i.sent(),r.isExpired(this.pollIntervalMs)?(this.options.logger.debug("AutoPollConfigService.getConfig() - cache is empty or expired, waiting for initialization."),[4,this.initializationPromise]):(t(this.options.logger),[2,r]);case 2:i.sent(),i.label=3;case 3:return[4,this.options.cache.get(this.cacheKey)];case 4:return r=i.sent(),r.isExpired(this.pollIntervalMs)?this.options.logger.debug("AutoPollConfigService.getConfig() - cache is empty or expired."):t(this.options.logger),[2,r]}})})},e.prototype.refreshConfigAsync=function(){return this.options.logger.debug("AutoPollConfigService.refreshConfigAsync() called."),n.prototype.refreshConfigAsync.call(this)},e.prototype.dispose=function(){this.options.logger.debug("AutoPollConfigService.dispose() called."),n.prototype.dispose.call(this),this.stopToken.aborted||this.stopRefreshWorker()},e.prototype.onConfigFetched=function(t){n.prototype.onConfigFetched.call(this,t),this.signalInitialization()},e.prototype.setOnlineCore=function(){this.startRefreshWorker(null,this.stopToken)},e.prototype.setOfflineCore=function(){this.stopRefreshWorker(),this.stopToken=new Bd},e.prototype.startRefreshWorker=function(t,r){return he(this,void 0,void 0,function(){var i,s,o,a,l;return me(this,function(c){switch(c.label){case 0:this.options.logger.debug("AutoPollConfigService.startRefreshWorker() called."),i=!0,c.label=1;case 1:if(r.aborted)return[3,11];c.label=2;case 2:c.trys.push([2,9,,10]),s=new Date().getTime()+this.pollIntervalMs,c.label=3;case 3:return c.trys.push([3,5,,6]),[4,this.refreshWorkerLogic(i,t)];case 4:return c.sent(),[3,6];case 5:return o=c.sent(),this.options.logger.autoPollConfigServiceErrorDuringPolling(o),[3,6];case 6:return a=s-new Date().getTime(),a>0?[4,jy(a,r)]:[3,8];case 7:c.sent(),c.label=8;case 8:return[3,10];case 9:return l=c.sent(),this.options.logger.autoPollConfigServiceErrorDuringPolling(l),[3,10];case 10:return i=!1,t=null,[3,1];case 11:return[2]}})})},e.prototype.stopRefreshWorker=function(){this.options.logger.debug("AutoPollConfigService.stopRefreshWorker() called."),this.stopToken.abort()},e.prototype.refreshWorkerLogic=function(t,r){return he(this,void 0,void 0,function(){var i;return me(this,function(s){switch(s.label){case 0:return this.options.logger.debug("AutoPollConfigService.refreshWorkerLogic() - called."),[4,r??this.options.cache.get(this.cacheKey)];case 1:return i=s.sent(),i.isExpired(this.pollExpirationMs)?(t?!this.isOfflineExactly:!this.isOffline)?[4,this.refreshConfigCoreAsync(i)]:[3,3]:[3,4];case 2:s.sent(),s.label=3;case 3:return[3,5];case 4:t&&this.signalInitialization(),s.label=5;case 5:return[2]}})})},e.prototype.getCacheState=function(t){return t.isEmpty?vt.NoFlagData:t.isExpired(this.pollIntervalMs)?vt.HasCachedFlagDataOnly:vt.HasUpToDateFlagData},e}(Hs);var Hy=function(){function n(){this.cachedConfig=Ut.empty}return n.prototype.set=function(e,t){this.cachedConfig=t},n.prototype.get=function(e){return this.cachedConfig},n.prototype.getInMemory=function(){return this.cachedConfig},n}();var Fa=function(){function n(e,t){this.cache=e,this.logger=t,this.cachedConfig=Ut.empty}return n.prototype.set=function(e,t){return he(this,void 0,void 0,function(){var r;return me(this,function(i){switch(i.label){case 0:if(i.trys.push([0,2,,3]),!t.isEmpty)this.cachedSerializedConfig=Ut.serialize(t),this.cachedConfig=t;else return this.cachedSerializedConfig=void 0,this.cachedConfig=t,[2];return[4,this.cache.set(e,this.cachedSerializedConfig)];case 1:return i.sent(),[3,3];case 2:return r=i.sent(),this.logger.configServiceCacheWriteError(r),[3,3];case 3:return[2]}})})},n.prototype.updateCachedConfig=function(e){e==null||e===this.cachedSerializedConfig||(this.cachedConfig=Ut.deserialize(e),this.cachedSerializedConfig=e)},n.prototype.get=function(e){var t=this;try{var r=this.cache.get(e);if(HS(r))return function(i){return he(t,void 0,void 0,function(){var s,o;return me(this,function(a){switch(a.label){case 0:return a.trys.push([0,2,,3]),s=this.updateCachedConfig,[4,i];case 1:return s.apply(this,[a.sent()]),[3,3];case 2:return o=a.sent(),this.logger.configServiceCacheReadError(o),[3,3];case 3:return[2,this.cachedConfig]}})})}(r);this.updateCachedConfig(r)}catch(i){this.logger.configServiceCacheReadError(i)}return Promise.resolve(this.cachedConfig)},n.prototype.getInMemory=function(){return this.cachedConfig},n}();var G=function(n){return n[n.Debug=4]="Debug",n[n.Info=3]="Info",n[n.Warn=2]="Warn",n[n.Error=1]="Error",n[n.Off=-1]="Off",n}(G||{}),Je=function(){function n(e,t,r){this.strings=e,this.argNames=t,this.argValues=r}return n.from=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return function(r){for(var i=[],s=1;s<arguments.length;s++)i[s-1]=arguments[s];return new n(r,e,i)}},Object.defineProperty(n.prototype,"defaultFormattedMessage",{get:function(){var e=this.cachedDefaultFormattedMessage;if(e===void 0){e="";for(var t=this,r=t.strings,i=t.argValues,s=0;s<r.length-1;s++)e+=r[s],e+=i[s];e+=r[s],this.cachedDefaultFormattedMessage=e}return e},enumerable:!1,configurable:!0}),n.prototype.toString=function(){return this.defaultFormattedMessage},n}();var cx=function(){function n(e,t){this.logger=e,this.hooks=t}return Object.defineProperty(n.prototype,"level",{get:function(){var e;return(e=this.logger.level)!==null&&e!==void 0?e:G.Warn},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"eol",{get:function(){var e;return(e=this.logger.eol)!==null&&e!==void 0?e:`
`},enumerable:!1,configurable:!0}),n.prototype.isEnabled=function(e){return this.level>=e},n.prototype.log=function(e,t,r,i){var s;return this.isEnabled(e)&&this.logger.log(e,t,r,i),e===G.Error&&((s=this.hooks)===null||s===void 0||s.emit("clientError",r.toString(),i)),r},n.prototype.debug=function(e){this.log(G.Debug,0,e)},n.prototype.configJsonIsNotPresent=function(e){return this.log(G.Error,1e3,Je.from("DEFAULT_RETURN_VALUE")($S||($S=Ye(["Config JSON is not present. Returning ","."],["Config JSON is not present. Returning ","."])),e))},n.prototype.configJsonIsNotPresentSingle=function(e,t,r){return this.log(G.Error,1e3,Je.from("KEY","DEFAULT_PARAM_NAME","DEFAULT_PARAM_VALUE")(zS||(zS=Ye(["Config JSON is not present when evaluating setting '","'. Returning the `","` parameter that you specified in your application: '","'."],["Config JSON is not present when evaluating setting '","'. Returning the \\`","\\` parameter that you specified in your application: '","'."])),e,t,r))},n.prototype.settingEvaluationFailedDueToMissingKey=function(e,t,r,i){return this.log(G.Error,1001,Je.from("KEY","DEFAULT_PARAM_NAME","DEFAULT_PARAM_VALUE","AVAILABLE_KEYS")(WS||(WS=Ye(["Failed to evaluate setting '","' (the key was not found in config JSON). Returning the `","` parameter that you specified in your application: '","'. Available keys: [","]."],["Failed to evaluate setting '","' (the key was not found in config JSON). Returning the \\`","\\` parameter that you specified in your application: '","'. Available keys: [","]."])),e,t,r,i))},n.prototype.settingEvaluationError=function(e,t,r){return this.log(G.Error,1002,Je.from("METHOD_NAME","DEFAULT_RETURN_VALUE")(qS||(qS=Ye(["Error occurred in the `","` method. Returning ","."],["Error occurred in the \\`","\\` method. Returning ","."])),e,t),r)},n.prototype.settingEvaluationErrorSingle=function(e,t,r,i,s){return this.log(G.Error,1002,Je.from("METHOD_NAME","KEY","DEFAULT_PARAM_NAME","DEFAULT_PARAM_VALUE")(GS||(GS=Ye(["Error occurred in the `","` method while evaluating setting '","'. Returning the `","` parameter that you specified in your application: '","'."],["Error occurred in the \\`","\\` method while evaluating setting '","'. Returning the \\`","\\` parameter that you specified in your application: '","'."])),e,t,r,i),s)},n.prototype.forceRefreshError=function(e,t){return this.log(G.Error,1003,Je.from("METHOD_NAME")(YS||(YS=Ye(["Error occurred in the `","` method."],["Error occurred in the \\`","\\` method."])),e),t)},n.prototype.fetchFailedDueToInvalidSdkKey=function(){return this.log(G.Error,1100,"Your SDK Key seems to be wrong. You can find the valid SDK Key at https://app.configcat.com/sdkkey")},n.prototype.fetchFailedDueToUnexpectedHttpResponse=function(e,t){return this.log(G.Error,1101,Je.from("STATUS_CODE","REASON_PHRASE")(KS||(KS=Ye(["Unexpected HTTP response was received while trying to fetch config JSON: "," ",""],["Unexpected HTTP response was received while trying to fetch config JSON: "," ",""])),e,t))},n.prototype.fetchFailedDueToRequestTimeout=function(e,t){return this.log(G.Error,1102,Je.from("TIMEOUT")(XS||(XS=Ye(["Request timed out while trying to fetch config JSON. Timeout value: ","ms"],["Request timed out while trying to fetch config JSON. Timeout value: ","ms"])),e),t)},n.prototype.fetchFailedDueToUnexpectedError=function(e){return this.log(G.Error,1103,"Unexpected error occurred while trying to fetch config JSON. It is most likely due to a local network issue. Please make sure your application can reach the ConfigCat CDN servers (or your proxy server) over HTTP.",e)},n.prototype.fetchFailedDueToRedirectLoop=function(){return this.log(G.Error,1104,"Redirection loop encountered while trying to fetch config JSON. Please contact us at https://configcat.com/support/")},n.prototype.fetchReceived200WithInvalidBody=function(e){return this.log(G.Error,1105,"Fetching config JSON was successful but the HTTP response content was invalid.",e)},n.prototype.fetchReceived304WhenLocalCacheIsEmpty=function(e,t){return this.log(G.Error,1106,Je.from("STATUS_CODE","REASON_PHRASE")(QS||(QS=Ye(["Unexpected HTTP response was received when no config JSON is cached locally: "," ",""],["Unexpected HTTP response was received when no config JSON is cached locally: "," ",""])),e,t))},n.prototype.autoPollConfigServiceErrorDuringPolling=function(e){return this.log(G.Error,1200,"Error occurred during auto polling.",e)},n.prototype.settingForVariationIdIsNotPresent=function(e){return this.log(G.Error,2011,Je.from("VARIATION_ID")(ZS||(ZS=Ye(["Could not find the setting for the specified variation ID: '","'."],["Could not find the setting for the specified variation ID: '","'."])),e))},n.prototype.configServiceCacheReadError=function(e){return this.log(G.Error,2200,"Error occurred while reading the cache.",e)},n.prototype.configServiceCacheWriteError=function(e){return this.log(G.Error,2201,"Error occurred while writing the cache.",e)},n.prototype.clientIsAlreadyCreated=function(e){return this.log(G.Warn,3e3,Je.from("SDK_KEY")(JS||(JS=Ye(["There is an existing client instance for the specified SDK Key. No new client instance will be created and the specified options are ignored. Returning the existing client instance. SDK Key: '","'."],["There is an existing client instance for the specified SDK Key. No new client instance will be created and the specified options are ignored. Returning the existing client instance. SDK Key: '","'."])),e))},n.prototype.userObjectIsMissing=function(e){return this.log(G.Warn,3001,Je.from("KEY")(ex||(ex=Ye(["Cannot evaluate targeting rules and % options for setting '","' (User Object is missing). You should pass a User Object to the evaluation methods like `getValueAsync()` in order to make targeting work properly. Read more: https://configcat.com/docs/advanced/user-object/"],["Cannot evaluate targeting rules and % options for setting '","' (User Object is missing). You should pass a User Object to the evaluation methods like \\`getValueAsync()\\` in order to make targeting work properly. Read more: https://configcat.com/docs/advanced/user-object/"])),e))},n.prototype.dataGovernanceIsOutOfSync=function(){return this.log(G.Warn,3002,"The `dataGovernance` parameter specified at the client initialization is not in sync with the preferences on the ConfigCat Dashboard. Read more: https://configcat.com/docs/advanced/data-governance/")},n.prototype.userObjectAttributeIsMissingPercentage=function(e,t){return this.log(G.Warn,3003,Je.from("KEY","ATTRIBUTE_NAME","ATTRIBUTE_NAME")(tx||(tx=Ye(["Cannot evaluate % options for setting '","' (the User."," attribute is missing). You should set the User."," attribute in order to make targeting work properly. Read more: https://configcat.com/docs/advanced/user-object/"],["Cannot evaluate % options for setting '","' (the User."," attribute is missing). You should set the User."," attribute in order to make targeting work properly. Read more: https://configcat.com/docs/advanced/user-object/"])),e,t,t))},n.prototype.userObjectAttributeIsMissingCondition=function(e,t,r){return this.log(G.Warn,3003,Je.from("CONDITION","KEY","ATTRIBUTE_NAME","ATTRIBUTE_NAME")(nx||(nx=Ye(["Cannot evaluate condition (",") for setting '","' (the User."," attribute is missing). You should set the User."," attribute in order to make targeting work properly. Read more: https://configcat.com/docs/advanced/user-object/"],["Cannot evaluate condition (",") for setting '","' (the User."," attribute is missing). You should set the User."," attribute in order to make targeting work properly. Read more: https://configcat.com/docs/advanced/user-object/"])),e,t,r,r))},n.prototype.userObjectAttributeIsInvalid=function(e,t,r,i){return this.log(G.Warn,3004,Je.from("CONDITION","KEY","REASON","ATTRIBUTE_NAME")(rx||(rx=Ye(["Cannot evaluate condition (",") for setting '","' (","). Please check the User."," attribute and make sure that its value corresponds to the comparison operator."],["Cannot evaluate condition (",") for setting '","' (","). Please check the User."," attribute and make sure that its value corresponds to the comparison operator."])),e,t,r,i))},n.prototype.userObjectAttributeIsAutoConverted=function(e,t,r,i){return this.log(G.Warn,3005,Je.from("CONDITION","KEY","ATTRIBUTE_NAME","ATTRIBUTE_VALUE")(ix||(ix=Ye(["Evaluation of condition (",") for setting '","' may not produce the expected result (the User."," attribute is not a string value, thus it was automatically converted to the string value '","'). Please make sure that using a non-string value was intended."],["Evaluation of condition (",") for setting '","' may not produce the expected result (the User."," attribute is not a string value, thus it was automatically converted to the string value '","'). Please make sure that using a non-string value was intended."])),e,t,r,i))},n.prototype.configServiceCannotInitiateHttpCalls=function(){return this.log(G.Warn,3200,"Client is in offline mode, it cannot initiate HTTP calls.")},n.prototype.configServiceMethodHasNoEffectDueToDisposedClient=function(e){return this.log(G.Warn,3201,Je.from("METHOD_NAME")(sx||(sx=Ye(["The client object is already disposed, thus `","()` has no effect."],["The client object is already disposed, thus \\`","()\\` has no effect."])),e))},n.prototype.configServiceMethodHasNoEffectDueToOverrideBehavior=function(e,t){return this.log(G.Warn,3202,Je.from("OVERRIDE_BEHAVIOR","METHOD_NAME")(ox||(ox=Ye(["Client is configured to use the `","` override behavior, thus `","()` has no effect."],["Client is configured to use the \\`","\\` override behavior, thus \\`","()\\` has no effect."])),e,t))},n.prototype.settingEvaluated=function(e){return this.log(G.Info,5e3,Je.from("EVALUATE_LOG")(ax||(ax=Ye(["",""],["",""])),e))},n.prototype.configServiceStatusChanged=function(e){return this.log(G.Info,5200,Je.from("MODE")(lx||(lx=Ye(["Switched to "," mode."],["Switched to "," mode."])),e.toUpperCase()))},n}();var Vd=function(){function n(e,t){e===void 0&&(e=G.Warn),t===void 0&&(t=`
`),this.level=e,this.eol=t,this.SOURCE="ConfigCat"}return n.prototype.log=function(e,t,r,i){var s=e===G.Debug?[console.info,"DEBUG"]:e===G.Info?[console.info,"INFO"]:e===G.Warn?[console.warn,"WARN"]:e===G.Error?[console.error,"ERROR"]:[console.log,G[e].toUpperCase()],o=s[0],a=s[1],l=i!==void 0?this.eol+zn(i,!0):"";o(this.SOURCE+" - "+a+" - ["+t+"] "+r+l)},n}();var $S,zS,WS,qS,GS,YS,KS,XS,QS,ZS,JS,ex,tx,nx,rx,ix,sx,ox,ax,lx;function ja(n){return!!n.fn}var ux=function(){function n(){this.events={},this.eventCount=0,this.addListener=this.on,this.off=this.removeListener}return n.prototype.addListenerCore=function(e,t,r){if(typeof t!="function")throw new TypeError("Listener must be a function");var i=this.events[e],s={fn:t,once:r};return i?ja(i)?this.events[e]=[i,s]:i.push(s):(this.events[e]=s,this.eventCount++),this},n.prototype.removeListenerCore=function(e,t,r){var i=this.events[e];if(!i)return this;if(ja(i))r(i,t)&&this.removeEvent(e);else for(var s=i.length-1;s>=0;s--)if(r(i[s],t)){i.splice(s,1),i.length?i.length===1&&(this.events[e]=i[0]):this.removeEvent(e);break}return this},n.prototype.removeEvent=function(e){--this.eventCount===0?this.events={}:delete this.events[e]},n.prototype.on=function(e,t){return this.addListenerCore(e,t,!1)},n.prototype.once=function(e,t){return this.addListenerCore(e,t,!0)},n.prototype.removeListener=function(e,t){if(typeof t!="function")throw new TypeError("Listener must be a function");return this.removeListenerCore(e,t,function(r,i){return r.fn===i})},n.prototype.removeAllListeners=function(e){return e?this.events[e]&&this.removeEvent(e):(this.events={},this.eventCount=0),this},n.prototype.listeners=function(e){var t=this.events[e];if(!t)return[];if(ja(t))return[t.fn];for(var r=t.length,i=new Array(r),s=0;s<r;s++)i[s]=t[s].fn;return i},n.prototype.listenerCount=function(e){var t=this.events[e];return t?ja(t)?1:t.length:0},n.prototype.eventNames=function(){var e=[];if(this.eventCount===0)return e;var t=this.events;for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.push(r);return Object.getOwnPropertySymbols?e.concat(Object.getOwnPropertySymbols(t)):e},n.prototype.emit=function(e,t,r,i,s){for(var o,a,l=[],c=5;c<arguments.length;c++)l[c-5]=arguments[c];var u=this.events[e];if(!u)return!1;var d,h;ja(u)?(o=[u,1],d=o[0],h=o[1]):(u=u.slice(),a=[u[0],u.length],d=a[0],h=a[1]);for(var f=arguments.length-1,p=0;;){switch(d.once&&this.removeListenerCore(e,d,function(m,y){return m===y}),f){case 0:d.fn.call(this);break;case 1:d.fn.call(this,t);break;case 2:d.fn.call(this,t,r);break;case 3:d.fn.call(this,t,r,i);break;case 4:d.fn.call(this,t,r,i,s);break;default:for(var g=new Array(f),v=0;v<f;v++)g[v]=arguments[v+1];d.fn.apply(this,g);break}if(++p>=h)break;d=u[p]}return!0},n}();var Hd=function(){function n(){this.addListener=this.on,this.off=this.removeListener}return n.prototype.on=function(){return this},n.prototype.once=function(){return this},n.prototype.removeListener=function(){return this},n.prototype.removeAllListeners=function(){return this},n.prototype.listeners=function(){return[]},n.prototype.listenerCount=function(){return 0},n.prototype.eventNames=function(){return[]},n.prototype.emit=function(){return!1},n}();function Ud(n){function e(w,b){var C=w<<b|w>>>32-b;return C}var t,r,i,s=new Array(80),o=1732584193,a=4023233417,l=2562383102,c=271733878,u=3285377520,d,h,f,p,g,v;n=Pi(n);var m=n.length,y=new Array;for(r=0;r<m-3;r+=4)i=n.charCodeAt(r)<<24|n.charCodeAt(r+1)<<16|n.charCodeAt(r+2)<<8|n.charCodeAt(r+3),y.push(i);switch(m%4){case 0:r=2147483648;break;case 1:r=n.charCodeAt(m-1)<<24|8388608;break;case 2:r=n.charCodeAt(m-2)<<24|n.charCodeAt(m-1)<<16|32768;break;case 3:r=n.charCodeAt(m-3)<<24|n.charCodeAt(m-2)<<16|n.charCodeAt(m-1)<<8|128;break}for(y.push(r);y.length%16!=14;)y.push(0);for(y.push(m>>>29),y.push(m<<3&4294967295),t=0;t<y.length;t+=16){for(r=0;r<16;r++)s[r]=y[t+r];for(r=16;r<=79;r++)s[r]=e(s[r-3]^s[r-8]^s[r-14]^s[r-16],1);for(d=o,h=a,f=l,p=c,g=u,r=0;r<=19;r++)v=e(d,5)+(h&f|~h&p)+g+s[r]+1518500249&4294967295,g=p,p=f,f=e(h,30),h=d,d=v;for(r=20;r<=39;r++)v=e(d,5)+(h^f^p)+g+s[r]+1859775393&4294967295,g=p,p=f,f=e(h,30),h=d,d=v;for(r=40;r<=59;r++)v=e(d,5)+(h&f|h&p|f&p)+g+s[r]+2400959708&4294967295,g=p,p=f,f=e(h,30),h=d,d=v;for(r=60;r<=79;r++)v=e(d,5)+(h^f^p)+g+s[r]+3395469782&4294967295,g=p,p=f,f=e(h,30),h=d,d=v;o=o+d&4294967295,a=a+h&4294967295,l=l+f&4294967295,c=c+p&4294967295,u=u+g&4294967295}return dx([o,a,l,c,u])}function Uy(n){function e(T,M){return T>>>M|T<<32-M}var t="length",r=Math.pow,i=r(2,32),s,o,a=Uy,l=a.h,c=a.k;if(!c){l=[],c=[];for(var u={},d=2,h=0;h<64;d++)if(!u[d]){for(s=0;s<313;s+=d)u[s]=d;l[h]=r(d,.5)*i|0,c[h++]=r(d,1/3)*i|0}a.h=l=l.slice(0,8),a.k=c}var f=n[t]*8;n+="\x80";for(var p=[];n[t]%64-56;)n+="\0";for(s=0;s<n[t];s++)o=n.charCodeAt(s),p[s>>2]|=o<<(3-s)%4*8;for(p[p[t]]=f/i|0,p[p[t]]=f,o=0;o<p[t];){var g=p.slice(o,o+=16),v=l;for(l=l.slice(0,8),s=0;s<64;s++){var m=g[s-15],y=g[s-2],w=l[0],b=l[4],C=l[7]+(e(b,6)^e(b,11)^e(b,25))+(b&l[5]^~b&l[6])+c[s]+(g[s]=s<16?g[s]:g[s-16]+(e(m,7)^e(m,18)^m>>>3)+g[s-7]+(e(y,17)^e(y,19)^y>>>10)|0),S=(e(w,2)^e(w,13)^e(w,22))+(w&l[1]^w&l[2]^l[1]&l[2]);l=[C+S|0].concat(l),l[4]=l[4]+C|0}for(s=0;s<8;s++)l[s]=l[s]+v[s]|0}return dx(l,8)}function dx(n,e){var t="0123456789abcdef",r="";e??(e=n.length);for(var i=0;i<e;i++)for(var s=3;s>=0;s--){var o=n[i]>>(s<<3)&255;r+=t[o>>4],r+=t[o&15]}return r}var hx=new Hd,$y=function(){function n(e){this.addListener=this.on,this.off=this.removeListener,this.eventEmitter=e}return n.prototype.tryDisconnect=function(){var e=this.eventEmitter;return this.eventEmitter=hx,e!==hx},n.prototype.on=function(e,t){return this.eventEmitter.on(e,t),this},n.prototype.once=function(e,t){return this.eventEmitter.once(e,t),this},n.prototype.removeListener=function(e,t){return this.eventEmitter.removeListener(e,t),this},n.prototype.removeAllListeners=function(e){return this.eventEmitter.removeAllListeners(e),this},n.prototype.listeners=function(e){return this.eventEmitter.listeners(e)},n.prototype.listenerCount=function(e){return this.eventEmitter.listenerCount(e)},n.prototype.eventNames=function(){return this.eventEmitter.eventNames()},n.prototype.emit=function(e){for(var t,r=[],i=1;i<arguments.length;i++)r[i-1]=arguments[i];return(t=this.eventEmitter).emit.apply(t,ll([e],r))},n}();function fx(){typeof Object.values>"u"&&(Object.values=lj),typeof Object.entries>"u"&&(Object.entries=cj),typeof Object.fromEntries>"u"&&(Object.fromEntries=uj)}function lj(n){for(var e=[],t=0,r=Object.keys(n);t<r.length;t++){var i=r[t];e.push(n[i])}return e}function cj(n){for(var e=[],t=0,r=Object.keys(n);t<r.length;t++){var i=r[t];e.push([i,n[i]])}return e}function uj(n){var e,t={};if(Array.isArray(n))for(var r=0,i=n;r<i.length;r++){var s=i[r],o=s[0],a=s[1];t[o]=a}else if(typeof Symbol<"u"&&n?.[Symbol.iterator])for(var l=n[Symbol.iterator](),c=void 0,u=void 0;e=l.next(),c=e.value,u=e.done,!u;){var o=c[0],a=c[1];t[o]=a}else throw new TypeError("Object.fromEntries() requires a single iterable argument");return t}function $d(){var n=function(e){this.target=e};return n.prototype.deref=function(){return this.target},n.isFallback=!0,n}var zd=function(){return typeof WeakRef=="function"};var wn=function(n){return n[n.AutoPoll=0]="AutoPoll",n[n.LazyLoad=1]="LazyLoad",n[n.ManualPoll=2]="ManualPoll",n}(wn||{}),zy=function(n){return n[n.Global=0]="Global",n[n.EuOnly=1]="EuOnly",n}(zy||{}),Wy=function(){function n(e,t,r,i,s){var o,a,l;if(this.requestTimeoutMs=3e4,this.baseUrlOverriden=!1,this.proxy="",this.offline=!1,!e)throw new Error("Invalid 'sdkKey' value");switch(this.sdkKey=e,this.clientVersion=t,this.dataGovernance=(o=r?.dataGovernance)!==null&&o!==void 0?o:zy.Global,this.dataGovernance){case zy.EuOnly:this.baseUrl="https://cdn-eu.configcat.com";break;default:this.baseUrl="https://cdn-global.configcat.com";break}var c=(a=s?.())!==null&&a!==void 0?a:new ux,u=new $y(c),d=new(zd()?WeakRef:$d())(u);this.hooks={hooks:u,hooksWeakRef:d,emit:function(p){for(var g,v,m=[],y=1;y<arguments.length;y++)m[y-1]=arguments[y];return(v=(g=this.hooksWeakRef.deref())===null||g===void 0?void 0:g.emit.apply(g,ll([p],m)))!==null&&v!==void 0?v:!1}};var h,f;if(r){if(h=r.logger,f=r.cache,r.requestTimeoutMs){if(r.requestTimeoutMs<0)throw new Error("Invalid 'requestTimeoutMs' value");this.requestTimeoutMs=r.requestTimeoutMs}r.baseUrl&&(this.baseUrl=r.baseUrl,this.baseUrlOverriden=!0),r.proxy&&(this.proxy=r.proxy),r.flagOverrides&&(this.flagOverrides=r.flagOverrides),r.defaultUser&&(this.defaultUser=r.defaultUser),r.offline&&(this.offline=r.offline),(l=r.setupHooks)===null||l===void 0||l.call(r,u)}this.logger=new cx(h??new Vd,this.hooks),this.cache=f?new Fa(f,this.logger):i?i(this):new Hy}return n.prototype.yieldHooks=function(){var e=this.hooks,t=e.hooks;return delete e.hooks,t??new $y(new Hd)},n.prototype.getUrl=function(){return this.baseUrl+"/configuration-files/"+this.sdkKey+"/"+n.configFileName+"?sdk="+this.clientVersion},n.prototype.getCacheKey=function(){return Ud(this.sdkKey+"_"+n.configFileName+"_"+Ut.serializationFormatVersion)},n.configFileName="config_v6.json",n}();var qy=function(n){bt(e,n);function e(t,r,i,s,o,a){var l=n.call(this,t,r+"/a-"+i,s,o,a)||this;l.pollIntervalSeconds=60,l.maxInitWaitTimeSeconds=5,s&&(s.pollIntervalSeconds!=null&&(l.pollIntervalSeconds=s.pollIntervalSeconds),s.maxInitWaitTimeSeconds!=null&&(l.maxInitWaitTimeSeconds=s.maxInitWaitTimeSeconds));var c=2147483;if(!(typeof l.pollIntervalSeconds=="number"&&1<=l.pollIntervalSeconds&&l.pollIntervalSeconds<=c))throw new Error("Invalid 'pollIntervalSeconds' value");if(!(typeof l.maxInitWaitTimeSeconds=="number"&&l.maxInitWaitTimeSeconds<=c))throw new Error("Invalid 'maxInitWaitTimeSeconds' value");return l}return e}(Wy);var Gy=function(n){bt(e,n);function e(t,r,i,s,o,a){return n.call(this,t,r+"/m-"+i,s,o,a)||this}return e}(Wy);var Yy=function(n){bt(e,n);function e(t,r,i,s,o,a){var l=n.call(this,t,r+"/l-"+i,s,o,a)||this;if(l.cacheTimeToLiveSeconds=60,s&&s.cacheTimeToLiveSeconds!=null&&(l.cacheTimeToLiveSeconds=s.cacheTimeToLiveSeconds),!(typeof l.cacheTimeToLiveSeconds=="number"&&1<=l.cacheTimeToLiveSeconds&&l.cacheTimeToLiveSeconds<=2147483647))throw new Error("Invalid 'cacheTimeToLiveSeconds' value");return l}return e}(Wy);var tn=function(n){return n[n.LocalOnly=0]="LocalOnly",n[n.LocalOverRemote=1]="LocalOverRemote",n[n.RemoteOverLocal=2]="RemoteOverLocal",n}(tn||{}),G8=function(){function n(e,t){this.initialSettings=this.constructor.getCurrentSettings(e),t&&(this.map=e)}return n.getCurrentSettings=function(e){return Object.fromEntries(Object.entries(e).map(function(t){var r=t[0],i=t[1];return[r,Fy.fromValue(i)]}))},n.prototype.getOverrides=function(){return Promise.resolve(this.getOverridesSync())},n.prototype.getOverridesSync=function(){return this.map?this.constructor.getCurrentSettings(this.map):this.initialSettings},n}();var px=function(n){bt(e,n);function e(t,r){var i=n.call(this,t,r)||this;i.cacheTimeToLiveMs=r.cacheTimeToLiveSeconds*1e3;var s=i.syncUpWithCache();return i.readyPromise=i.getReadyPromise(s,function(o){return he(i,void 0,void 0,function(){var a;return me(this,function(l){switch(l.label){case 0:return a=this.getCacheState,[4,o];case 1:return[2,a.apply(this,[l.sent()])]}})})}),i}return e.prototype.getConfig=function(){return he(this,void 0,void 0,function(){function t(s,o){o===void 0&&(o=""),s.debug("LazyLoadConfigService.getConfig(): cache is empty or expired"+o+".")}var r,i;return me(this,function(s){switch(s.label){case 0:return this.options.logger.debug("LazyLoadConfigService.getConfig() called."),[4,this.options.cache.get(this.cacheKey)];case 1:return r=s.sent(),r.isExpired(this.cacheTimeToLiveMs)?this.isOffline?[3,3]:(t(this.options.logger,", calling refreshConfigCoreAsync()"),[4,this.refreshConfigCoreAsync(r)]):[3,5];case 2:return i=s.sent(),r=i[1],[3,4];case 3:t(this.options.logger),s.label=4;case 4:return[2,r];case 5:return this.options.logger.debug("LazyLoadConfigService.getConfig(): cache is valid, returning from cache."),[2,r]}})})},e.prototype.refreshConfigAsync=function(){return this.options.logger.debug("LazyLoadConfigService.refreshConfigAsync() called."),n.prototype.refreshConfigAsync.call(this)},e.prototype.getCacheState=function(t){return t.isEmpty?vt.NoFlagData:t.isExpired(this.cacheTimeToLiveMs)?vt.HasCachedFlagDataOnly:vt.HasUpToDateFlagData},e}(Hs);var gx=function(n){bt(e,n);function e(t,r){var i=n.call(this,t,r)||this,s=i.syncUpWithCache();return i.readyPromise=i.getReadyPromise(s,function(o){return he(i,void 0,void 0,function(){var a;return me(this,function(l){switch(l.label){case 0:return a=this.getCacheState,[4,o];case 1:return[2,a.apply(this,[l.sent()])]}})})}),i}return e.prototype.getCacheState=function(t){return t.isEmpty?vt.NoFlagData:vt.HasCachedFlagDataOnly},e.prototype.getConfig=function(){return he(this,void 0,void 0,function(){return me(this,function(t){switch(t.label){case 0:return this.options.logger.debug("ManualPollService.getConfig() called."),[4,this.options.cache.get(this.cacheKey)];case 1:return[2,t.sent()]}})})},e.prototype.refreshConfigAsync=function(){return this.options.logger.debug("ManualPollService.refreshConfigAsync() called."),n.prototype.refreshConfigAsync.call(this)},e}(Hs);var vx="<invalid value>",Ky="<invalid name>",Qy="<invalid operator>",mx="<invalid reference>",dj=10,Zy=function(){function n(e){this.eol=e,this.log="",this.indent=""}return n.prototype.resetIndent=function(){return this.indent="",this},n.prototype.increaseIndent=function(){return this.indent+="  ",this},n.prototype.decreaseIndent=function(){return this.indent=this.indent.slice(0,-2),this},n.prototype.newLine=function(e){return this.log+=this.eol+this.indent+(e??""),this},n.prototype.append=function(e){return this.log+=e,this},n.prototype.toString=function(){return this.log},n.prototype.appendUserConditionCore=function(e,t,r){return this.append("User."+e+" "+Xy(t)+" '"+(r??vx)+"'")},n.prototype.appendUserConditionString=function(e,t,r,i){return typeof r!="string"?this.appendUserConditionCore(e,t):this.appendUserConditionCore(e,t,i?"<hashed value>":r)},n.prototype.appendUserConditionStringList=function(e,t,r,i){if(!ka(r))return this.appendUserConditionCore(e,t);var s="value",o="values",a=Xy(t);if(i)return this.append("User."+e+" "+a+" [<"+r.length+" hashed "+(r.length===1?s:o)+">]");var l=La(r,dj,function(c){return", ... <"+c+" more "+(c===1?s:o)+">"});return this.append("User."+e+" "+a+" ["+l+"]")},n.prototype.appendUserConditionNumber=function(e,t,r,i){if(typeof r!="number")return this.appendUserConditionCore(e,t);var s=Xy(t),o;return i&&!isNaN(o=new Date(r*1e3))?this.append("User."+e+" "+s+" '"+r+"' ("+o.toISOString()+" UTC)"):this.append("User."+e+" "+s+" '"+r+"'")},n.prototype.appendUserCondition=function(e){var t=typeof e.comparisonAttribute=="string"?e.comparisonAttribute:Ky,r=e.comparator;switch(e.comparator){case A.TextIsOneOf:case A.TextIsNotOneOf:case A.TextContainsAnyOf:case A.TextNotContainsAnyOf:case A.SemVerIsOneOf:case A.SemVerIsNotOneOf:case A.TextStartsWithAnyOf:case A.TextNotStartsWithAnyOf:case A.TextEndsWithAnyOf:case A.TextNotEndsWithAnyOf:case A.ArrayContainsAnyOf:case A.ArrayNotContainsAnyOf:return this.appendUserConditionStringList(t,r,e.comparisonValue,!1);case A.SemVerLess:case A.SemVerLessOrEquals:case A.SemVerGreater:case A.SemVerGreaterOrEquals:case A.TextEquals:case A.TextNotEquals:return this.appendUserConditionString(t,r,e.comparisonValue,!1);case A.NumberEquals:case A.NumberNotEquals:case A.NumberLess:case A.NumberLessOrEquals:case A.NumberGreater:case A.NumberGreaterOrEquals:return this.appendUserConditionNumber(t,r,e.comparisonValue);case A.SensitiveTextIsOneOf:case A.SensitiveTextIsNotOneOf:case A.SensitiveTextStartsWithAnyOf:case A.SensitiveTextNotStartsWithAnyOf:case A.SensitiveTextEndsWithAnyOf:case A.SensitiveTextNotEndsWithAnyOf:case A.SensitiveArrayContainsAnyOf:case A.SensitiveArrayNotContainsAnyOf:return this.appendUserConditionStringList(t,r,e.comparisonValue,!0);case A.DateTimeBefore:case A.DateTimeAfter:return this.appendUserConditionNumber(t,r,e.comparisonValue,!0);case A.SensitiveTextEquals:case A.SensitiveTextNotEquals:return this.appendUserConditionString(t,r,e.comparisonValue,!0);default:return this.appendUserConditionCore(t,r,e.comparisonValue)}},n.prototype.appendPrerequisiteFlagCondition=function(e,t){var r=typeof e.prerequisiteFlagKey!="string"?Ky:e.prerequisiteFlagKey in t?e.prerequisiteFlagKey:mx,i=e.comparator,s=e.comparisonValue;return this.append("Flag '"+r+"' "+hj(i)+" '"+Ba(s)+"'")},n.prototype.appendSegmentCondition=function(e){var t=e.segment,r=e.comparator,i=t==null?mx:typeof t.name!="string"||!t.name?Ky:t.name;return this.append("User "+Jy(r)+" '"+i+"'")},n.prototype.appendConditionResult=function(e){return this.append(""+e)},n.prototype.appendConditionConsequence=function(e){return this.append(" => ").appendConditionResult(e),e?this:this.append(", skipping the remaining AND conditions")},n.prototype.appendTargetingRuleThenPart=function(e,t){(t?this.newLine():this.append(" ")).append("THEN");var r=e.then;return this.append(Oi(r)?" % options":" '"+Ba(r.value)+"'")},n.prototype.appendTargetingRuleConsequence=function(e,t,r){return this.increaseIndent(),this.appendTargetingRuleThenPart(e,r).append(" => ").append(t===!0?"MATCH, applying rule":t===!1?"no match":t),this.decreaseIndent()},n}();function Xy(n){switch(n){case A.TextIsOneOf:case A.SensitiveTextIsOneOf:case A.SemVerIsOneOf:return"IS ONE OF";case A.TextIsNotOneOf:case A.SensitiveTextIsNotOneOf:case A.SemVerIsNotOneOf:return"IS NOT ONE OF";case A.TextContainsAnyOf:return"CONTAINS ANY OF";case A.TextNotContainsAnyOf:return"NOT CONTAINS ANY OF";case A.SemVerLess:case A.NumberLess:return"<";case A.SemVerLessOrEquals:case A.NumberLessOrEquals:return"<=";case A.SemVerGreater:case A.NumberGreater:return">";case A.SemVerGreaterOrEquals:case A.NumberGreaterOrEquals:return">=";case A.NumberEquals:return"=";case A.NumberNotEquals:return"!=";case A.DateTimeBefore:return"BEFORE";case A.DateTimeAfter:return"AFTER";case A.TextEquals:case A.SensitiveTextEquals:return"EQUALS";case A.TextNotEquals:case A.SensitiveTextNotEquals:return"NOT EQUALS";case A.TextStartsWithAnyOf:case A.SensitiveTextStartsWithAnyOf:return"STARTS WITH ANY OF";case A.TextNotStartsWithAnyOf:case A.SensitiveTextNotStartsWithAnyOf:return"NOT STARTS WITH ANY OF";case A.TextEndsWithAnyOf:case A.SensitiveTextEndsWithAnyOf:return"ENDS WITH ANY OF";case A.TextNotEndsWithAnyOf:case A.SensitiveTextNotEndsWithAnyOf:return"NOT ENDS WITH ANY OF";case A.ArrayContainsAnyOf:case A.SensitiveArrayContainsAnyOf:return"ARRAY CONTAINS ANY OF";case A.ArrayNotContainsAnyOf:case A.SensitiveArrayNotContainsAnyOf:return"ARRAY NOT CONTAINS ANY OF";default:return Qy}}function Wd(n){return new Zy("").appendUserCondition(n).toString()}function hj(n){switch(n){case Ri.Equals:return"EQUALS";case Ri.NotEquals:return"NOT EQUALS";default:return Qy}}function Jy(n){switch(n){case yr.IsIn:return"IS IN SEGMENT";case yr.IsNotIn:return"IS NOT IN SEGMENT";default:return Qy}}function Ba(n){return Ni(n)?n.toString():vx}var yx=/^[0-9]+$/,Va=function(n,e){var t=yx.test(n),r=yx.test(e);return t&&r&&(n=+n,e=+e),n===e?0:t&&!r?-1:r&&!t?1:n<e?-1:1};var eb=256,qd=Number.MAX_SAFE_INTEGER||9007199254740991;var Ha=[],Me=[],we={},fj=0,Et=function(n,e){var t=fj++;we[n]=t,Me[t]=e,Ha[t]=new RegExp(e)};Et("NUMERICIDENTIFIER","0|[1-9]\\d*");Et("NUMERICIDENTIFIERLOOSE","[0-9]+");Et("NONNUMERICIDENTIFIER","\\d*[a-zA-Z-][a-zA-Z0-9-]*");Et("MAINVERSION","("+Me[we.NUMERICIDENTIFIER]+")\\."+("("+Me[we.NUMERICIDENTIFIER]+")\\.")+("("+Me[we.NUMERICIDENTIFIER]+")"));Et("MAINVERSIONLOOSE","("+Me[we.NUMERICIDENTIFIERLOOSE]+")\\."+("("+Me[we.NUMERICIDENTIFIERLOOSE]+")\\.")+("("+Me[we.NUMERICIDENTIFIERLOOSE]+")"));Et("PRERELEASEIDENTIFIER","(?:"+Me[we.NUMERICIDENTIFIER]+"|"+Me[we.NONNUMERICIDENTIFIER]+")");Et("PRERELEASEIDENTIFIERLOOSE","(?:"+Me[we.NUMERICIDENTIFIERLOOSE]+"|"+Me[we.NONNUMERICIDENTIFIER]+")");Et("PRERELEASE","(?:-("+Me[we.PRERELEASEIDENTIFIER]+"(?:\\."+Me[we.PRERELEASEIDENTIFIER]+")*))");Et("PRERELEASELOOSE","(?:-?("+Me[we.PRERELEASEIDENTIFIERLOOSE]+"(?:\\."+Me[we.PRERELEASEIDENTIFIERLOOSE]+")*))");Et("BUILDIDENTIFIER","[0-9A-Za-z-]+");Et("BUILD","(?:\\+("+Me[we.BUILDIDENTIFIER]+"(?:\\."+Me[we.BUILDIDENTIFIER]+")*))");Et("FULLPLAIN","v?"+Me[we.MAINVERSION]+Me[we.PRERELEASE]+"?"+Me[we.BUILD]+"?");Et("FULL","^"+Me[we.FULLPLAIN]+"$");Et("LOOSEPLAIN","[v=\\s]*"+Me[we.MAINVERSIONLOOSE]+Me[we.PRERELEASELOOSE]+"?"+Me[we.BUILD]+"?");Et("LOOSE","^"+Me[we.LOOSEPLAIN]+"$");var bx=function(){function n(e,t){if((!t||typeof t!="object")&&(t={loose:!!t,includePrerelease:!1}),e instanceof n){if(e.loose===!!t.loose&&e.includePrerelease===!!t.includePrerelease)return e;e=e.version}else if(typeof e!="string")throw new TypeError("Invalid Version: "+e);if(e.length>eb)throw new TypeError("version is longer than "+eb+" characters");this.options=t,this.loose=!!t.loose,this.includePrerelease=!!t.includePrerelease;var r=e.trim().match(t.loose?Ha[we.LOOSE]:Ha[we.FULL]);if(!r)throw new TypeError("Invalid Version: "+e);if(this.raw=e,this.major=+r[1],this.minor=+r[2],this.patch=+r[3],this.major>qd||this.major<0)throw new TypeError("Invalid major version");if(this.minor>qd||this.minor<0)throw new TypeError("Invalid minor version");if(this.patch>qd||this.patch<0)throw new TypeError("Invalid patch version");r[4]?this.prerelease=r[4].split(".").map(function(i){if(/^[0-9]+$/.test(i)){var s=+i;if(s>=0&&s<qd)return s}return i}):this.prerelease=[],this.build=r[5]?r[5].split("."):[],this.format()}return n.prototype.format=function(){return this.version=this.major+"."+this.minor+"."+this.patch,this.prerelease.length&&(this.version+="-"+this.prerelease.join(".")),this.version},n.prototype.toString=function(){return this.version},n.prototype.compare=function(e){if(!(e instanceof n)){if(typeof e=="string"&&e===this.version)return 0;e=new n(e,this.options)}return e.version===this.version?0:this.compareMain(e)||this.comparePre(e)},n.prototype.compareMain=function(e){return e instanceof n||(e=new n(e,this.options)),Va(this.major,e.major)||Va(this.minor,e.minor)||Va(this.patch,e.patch)},n.prototype.comparePre=function(e){if(e instanceof n||(e=new n(e,this.options)),this.prerelease.length&&!e.prerelease.length)return-1;if(!this.prerelease.length&&e.prerelease.length)return 1;if(!this.prerelease.length&&!e.prerelease.length)return 0;var t=0;do{var r=this.prerelease[t],i=e.prerelease[t];if(r===void 0&&i===void 0)return 0;if(i===void 0)return 1;if(r===void 0)return-1;if(r===i)continue;return Va(r,i)}while(++t)},n.prototype.compareBuild=function(e){e instanceof n||(e=new n(e,this.options));var t=0;do{var r=this.build[t],i=e.build[t];if(r===void 0&&i===void 0)return 0;if(i===void 0)return 1;if(r===void 0)return-1;if(r===i)continue;return Va(r,i)}while(++t)},n.prototype.inc=function(e,t){switch(e){case"premajor":this.prerelease.length=0,this.patch=0,this.minor=0,this.major++,this.inc("pre",t);break;case"preminor":this.prerelease.length=0,this.patch=0,this.minor++,this.inc("pre",t);break;case"prepatch":this.prerelease.length=0,this.inc("patch",t),this.inc("pre",t);break;case"prerelease":this.prerelease.length===0&&this.inc("patch",t),this.inc("pre",t);break;case"major":(this.minor!==0||this.patch!==0||this.prerelease.length===0)&&this.major++,this.minor=0,this.patch=0,this.prerelease=[];break;case"minor":(this.patch!==0||this.prerelease.length===0)&&this.minor++,this.patch=0,this.prerelease=[];break;case"patch":this.prerelease.length===0&&this.patch++,this.prerelease=[];break;case"pre":if(this.prerelease.length===0)this.prerelease=[0];else{for(var r=this.prerelease.length;--r>=0;)typeof this.prerelease[r]=="number"&&(this.prerelease[r]++,r=-2);r===-1&&this.prerelease.push(0)}t&&(this.prerelease[0]===t?isNaN(this.prerelease[1])&&(this.prerelease=[t,0]):this.prerelease=[t,0]);break;default:throw new Error("invalid increment argument: "+e)}return this.format(),this.raw=this.version,this},n}(),Gd=function(n,e){if((!e||typeof e!="object")&&(e={loose:!!e,includePrerelease:!1}),n instanceof bx)return n;if(typeof n!="string"||n.length>eb)return null;var t=e.loose?Ha[we.LOOSE]:Ha[we.FULL];if(!t.test(n))return null;try{return new bx(n,e)}catch{return null}};function tb(n,e){var t,r;switch(e){case"Identifier":return(t=n.identifier)!==null&&t!==void 0?t:"";case"Email":return n.email;case"Country":return n.country;default:return(r=n.custom)===null||r===void 0?void 0:r[e]}}function wx(n){var e,t={},r="Identifier",i="Email",s="Country";if(t[r]=(e=n.identifier)!==null&&e!==void 0?e:"",n.email!=null&&(t[i]=n.email),n.country!=null&&(t[s]=n.country),n.custom!=null)for(var o=[r,i,s],a=0,l=Object.entries(n.custom);a<l.length;a++){var c=l[a],u=c[0],d=c[1];d!=null&&o.indexOf(u)<0&&(t[u]=d)}return t}var ib=function(){function n(e,t,r,i){this.key=e,this.setting=t,this.user=r,this.settings=i}return Object.defineProperty(n.prototype,"visitedFlags",{get:function(){var e;return(e=this.$visitedFlags)!==null&&e!==void 0?e:this.$visitedFlags=[]},enumerable:!1,configurable:!0}),n.forPrerequisiteFlag=function(e,t,r){var i=new n(e,t,r.user,r.settings);return i.$visitedFlags=r.visitedFlags,i.logBuilder=r.logBuilder,i},n}();var Ex="The current targeting rule is ignored and the evaluation continues with the next rule.",nb="cannot evaluate, User Object is missing",pj=function(n){return"cannot evaluate, the User."+n+" attribute is missing"},gj=function(n,e){return"cannot evaluate, the User."+n+" attribute is invalid ("+e+")"},Ax=function(){function n(e){this.logger=e}return n.prototype.evaluate=function(e,t){this.logger.debug("RolloutEvaluator.evaluate() called.");var r=t.logBuilder;this.logger.isEnabled(G.Info)&&(t.logBuilder=r=new Zy(this.logger.eol),r.append("Evaluating '"+t.key+"'"),t.user&&r.append(" for User '"+JSON.stringify(wx(t.user))+"'"),r.increaseIndent());var i;try{var s=void 0,o=void 0;if(e!=null){var a=t.setting.type;if(a>=0&&!yj(e,a))throw new TypeError("The type of a setting must match the type of the specified default value. "+("Setting's type was "+zr[a]+" but the default value's type was "+typeof e+". ")+("Please use a default value which corresponds to the setting type "+zr[a]+". ")+"Learn more: https://configcat.com/docs/sdk-reference/js/#setting-type-mapping");s=this.evaluateSetting(t),i=s.selectedValue.value,o=typeof i==typeof e}else s=this.evaluateSetting(t),i=s.selectedValue.value,o=Ni(i);return o||Yd(i),s}catch(l){throw r?.resetIndent().increaseIndent(),i=e,l}finally{r&&(r.newLine("Returning '"+i+"'.").decreaseIndent(),this.logger.settingEvaluated(r.toString()))}},n.prototype.evaluateSetting=function(e){var t,r=e.setting.targetingRules;if(r.length>0&&(t=this.evaluateTargetingRules(r,e)))return t;var i=e.setting.percentageOptions;return i.length>0&&(t=this.evaluatePercentageOptions(i,void 0,e))?t:{selectedValue:e.setting}},n.prototype.evaluateTargetingRules=function(e,t){var r=t.logBuilder;r?.newLine("Evaluating targeting rules and applying the first match if any:");for(var i=0;i<e.length;i++){var s=e[i],o=s.conditions,a=this.evaluateConditions(o,s,t.key,t);if(a!==!0){Ua(a)&&r?.increaseIndent().newLine(Ex).decreaseIndent();continue}if(!Oi(s.then))return{selectedValue:s.then,matchedTargetingRule:s};var l=s.then;r?.increaseIndent();var c=this.evaluatePercentageOptions(l,s,t);if(c)return r?.decreaseIndent(),c;r?.newLine(Ex).decreaseIndent()}},n.prototype.evaluatePercentageOptions=function(e,t,r){var i,s=r.logBuilder;if(!r.user){s?.newLine("Skipping % options because the User Object is missing."),r.isMissingUserObjectLogged||(this.logger.userObjectIsMissing(r.key),r.isMissingUserObjectLogged=!0);return}var o=r.setting.percentageOptionsAttribute,a;if(o==null?(o="Identifier",a=(i=r.user.identifier)!==null&&i!==void 0?i:""):a=tb(r.user,o),a==null){s?.newLine("Skipping % options because the User."+o+" attribute is missing."),r.isMissingUserObjectAttributeLogged||(this.logger.userObjectAttributeIsMissingPercentage(r.key,o),r.isMissingUserObjectAttributeLogged=!0);return}s?.newLine("Evaluating % options based on the User."+o+" attribute:");var l=Ud(r.key+xx(a)),c=parseInt(l.substring(0,7),16)%100;s?.newLine("- Computing hash in the [0..99] range from User."+o+" => "+c+" (this value is sticky and consistent across all SDKs)");for(var u=0,d=0;d<e.length;d++){var h=e[d];if(u+=h.percentage,!(c>=u))return s?.newLine("- Hash value "+c+" selects % option "+(d+1)+" ("+h.percentage+"%), '"+Ba(h.value)+"'."),{selectedValue:h,matchedTargetingRule:t,matchedPercentageOption:h}}throw new Error("Sum of percentage option percentages is less than 100.")},n.prototype.evaluateConditions=function(e,t,r,i){var s=!0,o=i.logBuilder,a=!1;o?.newLine("- ");for(var l=0;l<e.length;l++){var c=e[l];switch(o&&(l?o.increaseIndent().newLine("AND "):o.append("IF ").increaseIndent()),c.type){case"UserCondition":s=this.evaluateUserCondition(c,r,i),a=e.length>1;break;case"PrerequisiteFlagCondition":s=this.evaluatePrerequisiteFlagCondition(c,i),a=!0;break;case"SegmentCondition":s=this.evaluateSegmentCondition(c,i),a=!Ua(s)||s!==nb||e.length>1;break;default:throw new Error}var u=s===!0;if(o&&((!t||e.length>1)&&o.appendConditionConsequence(u),o.decreaseIndent()),!u)break}return t&&o?.appendTargetingRuleConsequence(t,s,a),s},n.prototype.evaluateUserCondition=function(e,t,r){var i=r.logBuilder;if(i?.appendUserCondition(e),!r.user)return r.isMissingUserObjectLogged||(this.logger.userObjectIsMissing(r.key),r.isMissingUserObjectLogged=!0),nb;var s=e.comparisonAttribute,o=tb(r.user,s);if(o==null||o==="")return this.logger.userObjectAttributeIsMissingCondition(Wd(e),r.key,s),pj(s);var a,l,c,u;switch(e.comparator){case A.TextEquals:case A.TextNotEquals:return a=br(s,o,e,r.key,this.logger),this.evaluateTextEquals(a,e.comparisonValue,e.comparator===A.TextNotEquals);case A.SensitiveTextEquals:case A.SensitiveTextNotEquals:return a=br(s,o,e,r.key,this.logger),this.evaluateSensitiveTextEquals(a,e.comparisonValue,r.setting.configJsonSalt,t,e.comparator===A.SensitiveTextNotEquals);case A.TextIsOneOf:case A.TextIsNotOneOf:return a=br(s,o,e,r.key,this.logger),this.evaluateTextIsOneOf(a,e.comparisonValue,e.comparator===A.TextIsNotOneOf);case A.SensitiveTextIsOneOf:case A.SensitiveTextIsNotOneOf:return a=br(s,o,e,r.key,this.logger),this.evaluateSensitiveTextIsOneOf(a,e.comparisonValue,r.setting.configJsonSalt,t,e.comparator===A.SensitiveTextIsNotOneOf);case A.TextStartsWithAnyOf:case A.TextNotStartsWithAnyOf:return a=br(s,o,e,r.key,this.logger),this.evaluateTextSliceEqualsAnyOf(a,e.comparisonValue,!0,e.comparator===A.TextNotStartsWithAnyOf);case A.SensitiveTextStartsWithAnyOf:case A.SensitiveTextNotStartsWithAnyOf:return a=br(s,o,e,r.key,this.logger),this.evaluateSensitiveTextSliceEqualsAnyOf(a,e.comparisonValue,r.setting.configJsonSalt,t,!0,e.comparator===A.SensitiveTextNotStartsWithAnyOf);case A.TextEndsWithAnyOf:case A.TextNotEndsWithAnyOf:return a=br(s,o,e,r.key,this.logger),this.evaluateTextSliceEqualsAnyOf(a,e.comparisonValue,!1,e.comparator===A.TextNotEndsWithAnyOf);case A.SensitiveTextEndsWithAnyOf:case A.SensitiveTextNotEndsWithAnyOf:return a=br(s,o,e,r.key,this.logger),this.evaluateSensitiveTextSliceEqualsAnyOf(a,e.comparisonValue,r.setting.configJsonSalt,t,!1,e.comparator===A.SensitiveTextNotEndsWithAnyOf);case A.TextContainsAnyOf:case A.TextNotContainsAnyOf:return a=br(s,o,e,r.key,this.logger),this.evaluateTextContainsAnyOf(a,e.comparisonValue,e.comparator===A.TextNotContainsAnyOf);case A.SemVerIsOneOf:case A.SemVerIsNotOneOf:return l=Cx(s,o,e,r.key,this.logger),typeof l!="string"?this.evaluateSemVerIsOneOf(l,e.comparisonValue,e.comparator===A.SemVerIsNotOneOf):l;case A.SemVerLess:case A.SemVerLessOrEquals:case A.SemVerGreater:case A.SemVerGreaterOrEquals:return l=Cx(s,o,e,r.key,this.logger),typeof l!="string"?this.evaluateSemVerRelation(l,e.comparator,e.comparisonValue):l;case A.NumberEquals:case A.NumberNotEquals:case A.NumberLess:case A.NumberLessOrEquals:case A.NumberGreater:case A.NumberGreaterOrEquals:return c=mj(s,o,e,r.key,this.logger),typeof c!="string"?this.evaluateNumberRelation(c,e.comparator,e.comparisonValue):c;case A.DateTimeBefore:case A.DateTimeAfter:return c=vj(s,o,e,r.key,this.logger),typeof c!="string"?this.evaluateDateTimeRelation(c,e.comparisonValue,e.comparator===A.DateTimeBefore):c;case A.ArrayContainsAnyOf:case A.ArrayNotContainsAnyOf:return u=_x(s,o,e,r.key,this.logger),typeof u!="string"?this.evaluateArrayContainsAnyOf(u,e.comparisonValue,e.comparator===A.ArrayNotContainsAnyOf):u;case A.SensitiveArrayContainsAnyOf:case A.SensitiveArrayNotContainsAnyOf:return u=_x(s,o,e,r.key,this.logger),typeof u!="string"?this.evaluateSensitiveArrayContainsAnyOf(u,e.comparisonValue,r.setting.configJsonSalt,t,e.comparator===A.SensitiveArrayNotContainsAnyOf):u;default:throw new Error}},n.prototype.evaluateTextEquals=function(e,t,r){return e===t!==r},n.prototype.evaluateSensitiveTextEquals=function(e,t,r,i,s){var o=rb(e,r,i);return o===t!==s},n.prototype.evaluateTextIsOneOf=function(e,t,r){var i=t.indexOf(e)>=0;return i!==r},n.prototype.evaluateSensitiveTextIsOneOf=function(e,t,r,i,s){var o=rb(e,r,i),a=t.indexOf(o)>=0;return a!==s},n.prototype.evaluateTextSliceEqualsAnyOf=function(e,t,r,i){for(var s=0;s<t.length;s++){var o=t[s];if(!(e.length<o.length)){var a=(r?e.lastIndexOf(o,0):e.indexOf(o,e.length-o.length))>=0;if(a)return!i}}return i},n.prototype.evaluateSensitiveTextSliceEqualsAnyOf=function(e,t,r,i,s,o){for(var a=Pi(e),l=0;l<t.length;l++){var c=t[l],u=c.indexOf("_"),d=parseInt(c.slice(0,u));if(!(a.length<d)){var h=s?a.slice(0,d):a.slice(a.length-d),f=Sx(h,r,i),p=f===c.slice(u+1);if(p)return!o}}return o},n.prototype.evaluateTextContainsAnyOf=function(e,t,r){for(var i=0;i<t.length;i++)if(e.indexOf(t[i])>=0)return!r;return r},n.prototype.evaluateSemVerIsOneOf=function(e,t,r){for(var i=!1,s=0;s<t.length;s++){var o=t[s];if(o.length){var a=Gd(o.trim());if(!a)return!1;!i&&e.compare(a)===0&&(i=!0)}}return i!==r},n.prototype.evaluateSemVerRelation=function(e,t,r){var i=Gd(r.trim());if(!i)return!1;var s=e.compare(i);switch(t){case A.SemVerLess:return s<0;case A.SemVerLessOrEquals:return s<=0;case A.SemVerGreater:return s>0;case A.SemVerGreaterOrEquals:return s>=0}},n.prototype.evaluateNumberRelation=function(e,t,r){switch(t){case A.NumberEquals:return e===r;case A.NumberNotEquals:return e!==r;case A.NumberLess:return e<r;case A.NumberLessOrEquals:return e<=r;case A.NumberGreater:return e>r;case A.NumberGreaterOrEquals:return e>=r}},n.prototype.evaluateDateTimeRelation=function(e,t,r){return r?e<t:e>t},n.prototype.evaluateArrayContainsAnyOf=function(e,t,r){for(var i=0;i<e.length;i++){var s=t.indexOf(e[i])>=0;if(s)return!r}return r},n.prototype.evaluateSensitiveArrayContainsAnyOf=function(e,t,r,i,s){for(var o=0;o<e.length;o++){var a=rb(e[o],r,i),l=t.indexOf(a)>=0;if(l)return!s}return s},n.prototype.evaluatePrerequisiteFlagCondition=function(e,t){var r=t.logBuilder;r?.appendPrerequisiteFlagCondition(e,t.settings);var i=e.prerequisiteFlagKey,s=t.settings[i];if(t.visitedFlags.push(t.key),t.visitedFlags.indexOf(i)>=0){t.visitedFlags.push(i);var o=La(t.visitedFlags,void 0,void 0," -> ");throw new Error("Circular dependency detected between the following depending flags: "+o+".")}var a=ib.forPrerequisiteFlag(i,s,t);r?.newLine("(").increaseIndent().newLine("Evaluating prerequisite flag '"+i+"':");var l=this.evaluateSetting(a);t.visitedFlags.pop();var c=l.selectedValue.value;if(typeof c!=typeof e.comparisonValue){if(Ni(c))throw new Error("Type mismatch between comparison value '"+e.comparisonValue+"' and prerequisite flag '"+i+"'.");Yd(c)}var u;switch(e.comparator){case Ri.Equals:u=c===e.comparisonValue;break;case Ri.NotEquals:u=c!==e.comparisonValue;break;default:throw new Error}return r?.newLine("Prerequisite flag evaluation result: '"+Ba(c)+"'.").newLine("Condition (").appendPrerequisiteFlagCondition(e,t.settings).append(") evaluates to ").appendConditionResult(u).append(".").decreaseIndent().newLine(")"),u},n.prototype.evaluateSegmentCondition=function(e,t){var r=t.logBuilder;if(r?.appendSegmentCondition(e),!t.user)return t.isMissingUserObjectLogged||(this.logger.userObjectIsMissing(t.key),t.isMissingUserObjectLogged=!0),nb;var i=e.segment;r?.newLine("(").increaseIndent().newLine("Evaluating segment '"+i.name+"':");var s=this.evaluateConditions(i.conditions,void 0,i.name,t),o=s;if(!Ua(o))switch(e.comparator){case yr.IsIn:break;case yr.IsNotIn:o=!o;break;default:throw new Error}return r&&(r.newLine("Segment evaluation result: "),(Ua(o)?r.append(o):r.append("User "+Jy(s?yr.IsIn:yr.IsNotIn))).append("."),r.newLine("Condition (").appendSegmentCondition(e).append(")"),(Ua(o)?r.append(" failed to evaluate"):r.append(" evaluates to ").appendConditionResult(o)).append("."),r.decreaseIndent().newLine(")")),o},n}();function Ua(n){return typeof n=="string"}function rb(n,e,t){return Sx(Pi(n),e,t)}function Sx(n,e,t){return Uy(n+Pi(e)+Pi(t))}function xx(n){return typeof n=="string"?n:n instanceof Date?n.getTime()/1e3+"":ka(n)?JSON.stringify(n):n+""}function br(n,e,t,r,i){return typeof e=="string"||(e=xx(e),i.userObjectAttributeIsAutoConverted(Wd(t),r,n,e)),e}function Cx(n,e,t,r,i){var s;return typeof e=="string"&&(s=Gd(e.trim()))?s:Kd(i,t,r,n,"'"+e+"' is not a valid semantic version")}function mj(n,e,t,r,i){if(typeof e=="number")return e;var s;return typeof e=="string"&&(!isNaN(s=Vy(e.replace(",",".")))||e.trim()==="NaN")?s:Kd(i,t,r,n,"'"+e+"' is not a valid decimal number")}function vj(n,e,t,r,i){if(e instanceof Date)return e.getTime()/1e3;if(typeof e=="number")return e;var s;return typeof e=="string"&&(!isNaN(s=Vy(e.replace(",",".")))||e.trim()==="NaN")?s:Kd(i,t,r,n,"'"+e+"' is not a valid Unix timestamp (number of seconds elapsed since Unix epoch)")}function _x(n,e,t,r,i){var s=e;if(typeof s=="string")try{s=JSON.parse(s)}catch{}return ka(s)?s:Kd(i,t,r,n,"'"+e+"' is not a valid string array")}function Kd(n,e,t,r,i){return n.userObjectAttributeIsInvalid(Wd(e),t,i,r),gj(r,i)}function Ix(n,e,t,r){return{key:n,value:e.selectedValue.value,variationId:e.selectedValue.variationId,fetchTime:t,user:r,isDefaultValue:!1,matchedTargetingRule:e.matchedTargetingRule,matchedPercentageOption:e.matchedPercentageOption}}function Wr(n,e,t,r,i,s){return{key:n,value:e,fetchTime:t,user:r,isDefaultValue:!0,errorMessage:i,errorException:s}}function $a(n,e,t,r,i,s,o){var a;if(!e)return a=o.configJsonIsNotPresentSingle(t,"defaultValue",r).toString(),Wr(t,r,Wn(s),i,a);var l=e[t];if(!l)return a=o.settingEvaluationFailedDueToMissingKey(t,"defaultValue",r,La(Object.keys(e))).toString(),Wr(t,r,Wn(s),i,a);var c=n.evaluate(r,new ib(t,l,i,e));return Ix(t,c,Wn(s),i)}function sb(n,e,t,r,i,s){var o;if(!Xd(e,i,s))return[[],o];for(var a=[],l=0,c=Object.entries(e);l<c.length;l++){var u=c[l],d=u[0],h=u[1],f=void 0;try{var p=n.evaluate(null,new ib(d,h,t,e));f=Ix(d,p,Wn(r),t)}catch(g){o??(o=[]),o.push(g),f=Wr(d,null,Wn(r),t,zn(g),g)}a.push(f)}return[a,o]}function Xd(n,e,t){return n?!0:(e.configJsonIsNotPresent(t),!1)}function Ni(n){return typeof n=="boolean"||typeof n=="string"||typeof n=="number"}function yj(n,e){switch(e){case zr.Boolean:return typeof n=="boolean";case zr.String:return typeof n=="string";case zr.Int:case zr.Double:return typeof n=="number";default:return!1}}function Yd(n){throw new TypeError(n===null?"Setting value is null.":n===void 0?"Setting value is undefined.":"Setting value '"+n+"' is of an unsupported type ("+typeof n+").")}function Wn(n){return n?new Date(n.timestamp):void 0}var bj=function(){function n(){this.instances={}}return n.prototype.getOrCreate=function(e,t){var r,i=this.instances[e.sdkKey];if(i){var s=i[0];if(r=s.deref(),r)return[r,!0]}var o={};r=new nh(e,t,o);var a=zd()?WeakRef:$d();return this.instances[e.sdkKey]=[new a(r),o],[r,!1]},n.prototype.remove=function(e,t){var r=this.instances[e];if(r){var i=r[0],s=r[1],o=!!i.deref();if(!o||s===t)return delete this.instances[e],o}return!1},n.prototype.clear=function(){for(var e=[],t=0,r=Object.entries(this.instances);t<r.length;t++){var i=r[t],s=i[0],o=i[1][0],a=o.deref();a&&e.push(a),delete this.instances[s]}return e},n}();var za=new bj,nh=function(){function n(e,t,r){var i;if(this.cacheToken=r,this.addListener=this.on,this.off=this.removeListener,!e)throw new Error("Invalid 'options' value");if(this.options=e,this.options.logger.debug("Initializing ConfigCatClient. Options: "+JSON.stringify(this.options)),!t)throw new Error("Invalid 'configCatKernel' value");if(!t.configFetcher)throw new Error("Invalid 'configCatKernel.configFetcher' value");this.hooks=e.yieldHooks(),e.defaultUser&&this.setDefaultUser(e.defaultUser),this.evaluator=new Ax(e.logger),((i=e.flagOverrides)===null||i===void 0?void 0:i.behaviour)!==tn.LocalOnly?this.configService=e instanceof qy?new US(t.configFetcher,e):e instanceof Gy?new gx(t.configFetcher,e):e instanceof Yy?new px(t.configFetcher,e):By(new Error("Invalid 'options' value")):this.hooks.emit("clientReady",vt.HasLocalOverrideFlagDataOnly),this.suppressFinalize=Jd(this,{sdkKey:e.sdkKey,cacheToken:r,configService:this.configService,logger:e.logger})}return Object.defineProperty(n,"instanceCache",{get:function(){return za},enumerable:!1,configurable:!0}),n.get=function(e,t,r,i){var s,o="Invalid 'sdkKey' value";if(!e)throw new Error(o);var a=t===wn.AutoPoll?qy:t===wn.ManualPoll?Gy:t===wn.LazyLoad?Yy:By(new Error("Invalid 'pollingMode' value")),l=new a(e,i.sdkType,i.sdkVersion,r,i.defaultCacheFactory,i.eventEmitterFactory);if(((s=l.flagOverrides)===null||s===void 0?void 0:s.behaviour)!==tn.LocalOnly&&!wj(e,l.baseUrlOverriden))throw new Error(o);var c=za.getOrCreate(l,i),u=c[0],d=c[1];return d&&r&&l.logger.clientIsAlreadyCreated(e),u},n.finalize=function(e){var t;(t=e.logger)===null||t===void 0||t.debug("finalize() called"),e.cacheToken&&za.remove(e.sdkKey,e.cacheToken),n.close(e.configService,e.logger)},n.close=function(e,t,r){t?.debug("close() called"),r?.tryDisconnect(),e?.dispose()},n.prototype.dispose=function(){var e=this.options;e.logger.debug("dispose() called"),this.cacheToken&&za.remove(e.sdkKey,this.cacheToken),n.close(this.configService,e.logger,this.hooks),this.suppressFinalize()},n.disposeAll=function(){for(var e=za.clear(),t,r=0,i=e;r<i.length;r++){var s=i[r];try{n.close(s.configService,s.options.logger,s.hooks),s.suppressFinalize()}catch(o){t??(t=[]),t.push(o)}}if(t)throw typeof AggregateError<"u"?new AggregateError(t):t.pop()},n.prototype.getValueAsync=function(e,t,r){return he(this,void 0,void 0,function(){var i,s,o,a,l,c;return me(this,function(u){switch(u.label){case 0:this.options.logger.debug("getValueAsync() called."),eh(e),th(t),o=null,r??(r=this.defaultUser),u.label=1;case 1:return u.trys.push([1,3,,4]),a=void 0,[4,this.getSettingsAsync()];case 2:return c=u.sent(),a=c[0],o=c[1],s=$a(this.evaluator,a,e,t,r,o,this.options.logger),i=s.value,[3,4];case 3:return l=u.sent(),this.options.logger.settingEvaluationErrorSingle("getValueAsync",e,"defaultValue",t,l),s=Wr(e,t,Wn(o),r,zn(l),l),i=t,[3,4];case 4:return this.hooks.emit("flagEvaluated",s),[2,i]}})})},n.prototype.getValueDetailsAsync=function(e,t,r){return he(this,void 0,void 0,function(){var i,s,o,a,l;return me(this,function(c){switch(c.label){case 0:this.options.logger.debug("getValueDetailsAsync() called."),eh(e),th(t),s=null,r??(r=this.defaultUser),c.label=1;case 1:return c.trys.push([1,3,,4]),o=void 0,[4,this.getSettingsAsync()];case 2:return l=c.sent(),o=l[0],s=l[1],i=$a(this.evaluator,o,e,t,r,s,this.options.logger),[3,4];case 3:return a=c.sent(),this.options.logger.settingEvaluationErrorSingle("getValueDetailsAsync",e,"defaultValue",t,a),i=Wr(e,t,Wn(s),r,zn(a),a),[3,4];case 4:return this.hooks.emit("flagEvaluated",i),[2,i]}})})},n.prototype.getAllKeysAsync=function(){return he(this,void 0,void 0,function(){var e,t,r;return me(this,function(i){switch(i.label){case 0:this.options.logger.debug("getAllKeysAsync() called."),e="empty array",i.label=1;case 1:return i.trys.push([1,3,,4]),[4,this.getSettingsAsync()];case 2:return t=i.sent()[0],Xd(t,this.options.logger,e)?[2,Object.keys(t)]:[2,[]];case 3:return r=i.sent(),this.options.logger.settingEvaluationError("getAllKeysAsync",e,r),[2,[]];case 4:return[2]}})})},n.prototype.getAllValuesAsync=function(e){return he(this,void 0,void 0,function(){var t,r,i,s,o,a,l,c,u,d,h,f;return me(this,function(p){switch(p.label){case 0:this.options.logger.debug("getAllValuesAsync() called."),t="empty array",e??(e=this.defaultUser),p.label=1;case 1:return p.trys.push([1,3,,4]),[4,this.getSettingsAsync()];case 2:return o=p.sent(),a=o[0],l=o[1],f=sb(this.evaluator,a,e,l,this.options.logger,t),i=f[0],s=f[1],r=i.map(function(g){return new Wa(g.key,g.value)}),[3,4];case 3:return c=p.sent(),this.options.logger.settingEvaluationError("getAllValuesAsync",t,c),[2,[]];case 4:for(s?.length&&this.options.logger.settingEvaluationError("getAllValuesAsync","evaluation result",typeof AggregateError<"u"?new AggregateError(s):s.pop()),u=0,d=i;u<d.length;u++)h=d[u],this.hooks.emit("flagEvaluated",h);return[2,r]}})})},n.prototype.getAllValueDetailsAsync=function(e){return he(this,void 0,void 0,function(){var t,r,i,s,o,a,l,c,u,d,h;return me(this,function(f){switch(f.label){case 0:this.options.logger.debug("getAllValueDetailsAsync() called."),t="empty array",e??(e=this.defaultUser),f.label=1;case 1:return f.trys.push([1,3,,4]),[4,this.getSettingsAsync()];case 2:return s=f.sent(),o=s[0],a=s[1],h=sb(this.evaluator,o,e,a,this.options.logger,t),r=h[0],i=h[1],[3,4];case 3:return l=f.sent(),this.options.logger.settingEvaluationError("getAllValueDetailsAsync",t,l),[2,[]];case 4:for(i?.length&&this.options.logger.settingEvaluationError("getAllValueDetailsAsync","evaluation result",typeof AggregateError<"u"?new AggregateError(i):i.pop()),c=0,u=r;c<u.length;c++)d=u[c],this.hooks.emit("flagEvaluated",d);return[2,r]}})})},n.prototype.getKeyAndValueAsync=function(e){return he(this,void 0,void 0,function(){var t,r,i,s,o,a,l,c,f,u,d,p,h,f,p,g;return me(this,function(v){switch(v.label){case 0:this.options.logger.debug("getKeyAndValueAsync() called."),t="null",v.label=1;case 1:return v.trys.push([1,3,,4]),[4,this.getSettingsAsync()];case 2:if(r=v.sent()[0],!Xd(r,this.options.logger,t))return[2,null];for(i=0,s=Object.entries(r);i<s.length;i++){if(o=s[i],a=o[0],l=o[1],e===l.variationId)return[2,new Wa(a,Zd(l.value))];if(c=r[a].targetingRules,c&&c.length>0){for(f=0;f<c.length;f++)if(u=c[f].then,Oi(u)){for(d=0;d<u.length;d++)if(p=u[d],e===p.variationId)return[2,new Wa(a,Zd(p.value))]}else if(e===u.variationId)return[2,new Wa(a,Zd(u.value))]}if(h=r[a].percentageOptions,h&&h.length>0){for(f=0;f<h.length;f++)if(p=h[f],e===p.variationId)return[2,new Wa(a,Zd(p.value))]}}return this.options.logger.settingForVariationIdIsNotPresent(e),[3,4];case 3:return g=v.sent(),this.options.logger.settingEvaluationError("getKeyAndValueAsync",t,g),[3,4];case 4:return[2,null]}})})},n.prototype.forceRefreshAsync=function(){return he(this,void 0,void 0,function(){var e,t;return me(this,function(r){switch(r.label){case 0:if(this.options.logger.debug("forceRefreshAsync() called."),!this.configService)return[3,5];r.label=1;case 1:return r.trys.push([1,3,,4]),[4,this.configService.refreshConfigAsync()];case 2:return e=r.sent()[0],[2,e];case 3:return t=r.sent(),this.options.logger.forceRefreshError("forceRefreshAsync",t),[2,Na.failure(zn(t),t)];case 4:return[3,6];case 5:return[2,Na.failure("Client is configured to use the LocalOnly override behavior, which prevents making HTTP requests.")];case 6:return[2]}})})},n.prototype.setDefaultUser=function(e){this.defaultUser=e},n.prototype.clearDefaultUser=function(){this.defaultUser=void 0},Object.defineProperty(n.prototype,"isOffline",{get:function(){var e,t;return(t=(e=this.configService)===null||e===void 0?void 0:e.isOffline)!==null&&t!==void 0?t:!0},enumerable:!1,configurable:!0}),n.prototype.setOnline=function(){this.configService?this.configService.setOnline():this.options.logger.configServiceMethodHasNoEffectDueToOverrideBehavior(tn[tn.LocalOnly],"setOnline")},n.prototype.setOffline=function(){var e;(e=this.configService)===null||e===void 0||e.setOffline()},n.prototype.waitForReady=function(){var e=this.configService;return e?e.readyPromise:Promise.resolve(vt.HasLocalOverrideFlagDataOnly)},n.prototype.snapshot=function(){var e,t,r,i=this,s,o=function(){var d=i.options.cache.getInMemory(),h=d.isEmpty?null:d.config.settings;return[h,d]},a,l,c=(s=this.options)===null||s===void 0?void 0:s.flagOverrides;if(c){var u=c.dataSource.getOverridesSync();switch(c.behaviour){case tn.LocalOnly:return new Qd(u,null,this);case tn.LocalOverRemote:return e=o(),a=e[0],l=e[1],new Qd(rn(rn({},a??{}),u),l,this);case tn.RemoteOverLocal:return t=o(),a=t[0],l=t[1],new Qd(rn(rn({},u),a??{}),l,this)}}return r=o(),a=r[0],l=r[1],new Qd(a,l,this)},n.prototype.getSettingsAsync=function(){var e;return he(this,void 0,void 0,function(){var t,r,i,s,o,a,l,c,u=this;return me(this,function(d){switch(d.label){case 0:return this.options.logger.debug("getSettingsAsync() called."),t=function(){return he(u,void 0,void 0,function(){var h,f;return me(this,function(p){switch(p.label){case 0:return[4,this.configService.getConfig()];case 1:return h=p.sent(),f=h.isEmpty?null:h.config.settings,[2,[f,h]]}})})},r=(e=this.options)===null||e===void 0?void 0:e.flagOverrides,r?(i=void 0,s=void 0,[4,r.dataSource.getOverrides()]):[3,7];case 1:switch(o=d.sent(),a=r.behaviour,a){case tn.LocalOnly:return[3,2];case tn.LocalOverRemote:return[3,3];case tn.RemoteOverLocal:return[3,5]}return[3,7];case 2:return[2,[o,null]];case 3:return[4,t()];case 4:return l=d.sent(),i=l[0],s=l[1],[2,[rn(rn({},i??{}),o),s]];case 5:return[4,t()];case 6:return c=d.sent(),i=c[0],s=c[1],[2,[rn(rn({},o),i??{}),s]];case 7:return[4,t()];case 8:return[2,d.sent()]}})})},n.prototype.on=function(e,t){return this.hooks.on(e,t),this},n.prototype.once=function(e,t){return this.hooks.once(e,t),this},n.prototype.removeListener=function(e,t){return this.hooks.removeListener(e,t),this},n.prototype.removeAllListeners=function(e){return this.hooks.removeAllListeners(e),this},n.prototype.listeners=function(e){return this.hooks.listeners(e)},n.prototype.listenerCount=function(e){return this.hooks.listenerCount(e)},n.prototype.eventNames=function(){return this.hooks.eventNames()},n}();var Qd=function(){function n(e,t,r){this.mergedSettings=e,this.remoteConfig=t,this.defaultUser=r.defaultUser,this.evaluator=r.evaluator,this.options=r.options,this.cacheState=t?r.configService.getCacheState(t):vt.HasLocalOverrideFlagDataOnly}return Object.defineProperty(n.prototype,"fetchedConfig",{get:function(){var e=this.remoteConfig;return e&&!e.isEmpty?e.config:null},enumerable:!1,configurable:!0}),n.prototype.getAllKeys=function(){return this.mergedSettings?Object.keys(this.mergedSettings):[]},n.prototype.getValue=function(e,t,r){this.options.logger.debug("Snapshot.getValue() called."),eh(e),th(t);var i,s;r??(r=this.defaultUser);try{s=$a(this.evaluator,this.mergedSettings,e,t,r,this.remoteConfig,this.options.logger),i=s.value}catch(o){this.options.logger.settingEvaluationErrorSingle("Snapshot.getValue",e,"defaultValue",t,o),s=Wr(e,t,Wn(this.remoteConfig),r,zn(o),o),i=t}return this.options.hooks.emit("flagEvaluated",s),i},n.prototype.getValueDetails=function(e,t,r){this.options.logger.debug("Snapshot.getValueDetails() called."),eh(e),th(t);var i;r??(r=this.defaultUser);try{i=$a(this.evaluator,this.mergedSettings,e,t,r,this.remoteConfig,this.options.logger)}catch(s){this.options.logger.settingEvaluationErrorSingle("Snapshot.getValueDetails",e,"defaultValue",t,s),i=Wr(e,t,Wn(this.remoteConfig),r,zn(s),s)}return this.options.hooks.emit("flagEvaluated",i),i},n}(),Wa=function(){function n(e,t){this.settingKey=e,this.settingValue=t}return n}();function wj(n,e){var t="configcat-proxy/";if(e&&n.length>t.length&&n.lastIndexOf(t,0)===0)return!0;var r=n.split("/"),i=22;switch(r.length){case 2:return r[0].length===i&&r[1].length===i;case 3:return r[0]==="configcat-sdk-1"&&r[1].length===i&&r[2].length===i;default:return!1}}function eh(n){if(!n)throw new Error("Invalid 'key' value")}function th(n){if(n!=null&&!Ni(n))throw new TypeError("The default value must be boolean, number, string, null or undefined.")}function Zd(n){return Ni(n)?n:Yd(n)}var Jd=function(n,e){if(typeof FinalizationRegistry<"u"){var t=new FinalizationRegistry(function(r){return nh.finalize(r)});Jd=function(r,i){var s={};return t.register(r,i,s),function(){return t.unregister(s)}}}else Jd=function(){return function(){}};return Jd(n,e)};fx();function Dx(n,e,t,r){return nh.get(n,e,t,r)}function ob(n,e){return new Vd(n,e)}var Tx=function(){function n(e){this.storage=e}return n.setup=function(e,t){var r=(t??Ej)();return r&&(e.defaultCacheFactory=function(i){return new Fa(new n(r),i.logger)}),e},n.prototype.set=function(e,t){this.storage.setItem(e,Cj(t))},n.prototype.get=function(e){var t=this.storage.getItem(e);if(t)return _j(t)},n}();function Ej(){var n="__configcat_localStorage_test";try{var e=window.localStorage;e.setItem(n,n);var t=void 0;try{t=e.getItem(n)}finally{e.removeItem(n)}if(t===n)return e}catch{}return null}function Cj(n){return n=encodeURIComponent(n),n=n.replace(/%([0-9A-F]{2})/g,function(e,t){return String.fromCharCode(parseInt(t,16))}),btoa(n)}function _j(n){return n=atob(n),n=n.replace(/[%\x80-\xFF]/g,function(e){return"%"+e.charCodeAt(0).toString(16)}),decodeURIComponent(n)}var Mx=function(){function n(){}return n.prototype.handleStateChange=function(e,t,r){var i;try{if(e.readyState===4){var s=e.status,o=e.statusText;if(s===200){var a=(i=e.getResponseHeader("ETag"))!==null&&i!==void 0?i:void 0;t({statusCode:s,reasonPhrase:o,eTag:a,body:e.responseText})}else s&&t({statusCode:s,reasonPhrase:o})}}catch(l){r(l)}},n.prototype.fetchLogic=function(e,t){var r=this;return new Promise(function(i,s){try{e.logger.debug("HttpConfigFetcher.fetchLogic() called.");var o=new XMLHttpRequest;o.onreadystatechange=function(){return r.handleStateChange(o,i,s)},o.ontimeout=function(){return s(new Mi("timeout",e.requestTimeoutMs))},o.onabort=function(){return s(new Mi("abort"))},o.onerror=function(){return s(new Mi("failure"))};var a=e.getUrl();t&&(a+="&ccetag="+encodeURIComponent(t)),o.open("GET",a,!0),o.timeout=e.requestTimeoutMs,o.send(null)}catch(l){s(l)}})},n}();var Rx="9.5.1";function Ox(n,e,t){return Dx(n,e??wn.AutoPoll,t,Tx.setup({configFetcher:new Mx,sdkType:"ConfigCat-JS",sdkVersion:Rx}))}var Us=class n{client;snapshotSubject=new Ge(null);snapshot$=this.snapshotSubject.asObservable();get currentSnapshot(){return this.snapshotSubject.value}defaultUser;constructor(){let e=ob(sC()?G.Info:G.Warn);this.client=Ox("configcat-sdk-1/ZovdCLNXSkGNZ4GF09p2sA/GCPb2xqAk0GOztIrE21MiQ",wn.LazyLoad,{cacheTimeToLiveSeconds:3600,logger:e,setupHooks:t=>t.on("configChanged",()=>this.snapshotSubject.next(this.client.snapshot()))}),this.loadFlags()}loadFlags(){return I(this,null,function*(){yield this.client.forceRefreshAsync(),this.snapshotSubject.next(this.client.snapshot())})}ngOnDestroy(){this.client.dispose()}setDefaultUser(e){this.client.setDefaultUser(this.defaultUser=e),this.loadFlags()}clearDefaultUser(){this.client.clearDefaultUser(),this.defaultUser=void 0,this.loadFlags()}getValue(e,t,r){return this.snapshotSubject.pipe($(i=>i?i.getValue(e,t,r??this.defaultUser):t),wl())}getAllValues(e){return this.snapshotSubject.pipe($(t=>t?t.getAllKeys().reduce((r,i)=>(r.set(i,t.getValue(i,void 0,e??this.defaultUser)),r),new Map):new Map),wl((t,r)=>{if(t.size!==r.size)return!1;for(let i of t.keys())if(!r.has(i)||r.get(i)!==t.get(i))return!1;return!0}))}reloadFlags(){return this.loadFlags()}static \u0275fac=function(t){return new(t||n)};static \u0275prov=k({token:n,factory:n.\u0275fac,providedIn:"root"})};function Aj(n,e){n&1&&re(0,"app-articles")}var rh=class n{constructor(e,t){this.scrollspy=e;this.featureFlagService=t;this.isArticlesActivated$=this.featureFlagService.getValue("isArticlesActivated",!1)}isArticlesActivated$;ngAfterViewInit(){let e=["about","experience","projects"],t={threshold:.5};this.scrollspy.setActiveSection("about"),setTimeout(()=>{let r=new IntersectionObserver(i=>{i.forEach(s=>{s.isIntersecting&&this.scrollspy.setActiveSection(s.target.id)})},t);e.forEach(i=>{let s=document.getElementById(i);s&&r.observe(s)})},500)}static \u0275fac=function(t){return new(t||n)(Ue(Vs),Ue(Us))};static \u0275cmp=xe({type:n,selectors:[["app-home"]],decls:12,vars:3,consts:[[1,"lg:flex","lg:justify-between","lg:gap-4"],[1,"lg:sticky","lg:top-0","lg:flex","lg:max-h-screen","lg:w-[48%]","lg:flex-col","lg:justify-between","lg:py-24"],[1,"pt-24","lg:w-[52%]","lg:py-24"]],template:function(t,r){t&1&&(O(0,"div",0)(1,"header",1),re(2,"app-header")(3,"app-social-links"),P(),O(4,"main",2),re(5,"app-about")(6,"app-experience")(7,"app-projects")(8,"app-badges"),kt(9,Aj,1,0,"app-articles"),On(10,"async"),re(11,"app-footer"),P()()),t&2&&(F(9),Lt(Pn(10,1,r.isArticlesActivated$)?9:-1))},dependencies:[ze,pn,Nd,Fd,jd,Ld,kd,Pd,Od,Rd],encapsulation:2})};var Nx=[{path:"",component:rh,pathMatch:"full"},{path:"certificates",component:Td},{path:"**",redirectTo:""}];var kx={providers:[rC({eventCoalescing:!0}),Lg(Nx)]};var ih=class n{constructor(e){this.featureFlagService=e;this.isArticlesActivated$=this.featureFlagService.getValue("isArticlesActivated",!1)}title="Fernando Tello";isArticlesActivated$;ngOnInit(){}static \u0275fac=function(t){return new(t||n)(Ue(Us))};static \u0275cmp=xe({type:n,selectors:[["app-root"]],decls:2,vars:0,consts:[[1,"mx-auto","min-h-screen","max-w-screen-xl","bg-navy","text-gray-300","font-sans","px-6","py-12","md:px-12","lg:px-24"]],template:function(t,r){t&1&&(O(0,"div",0),re(1,"router-outlet"),P())},dependencies:[ze,qo],encapsulation:2})};lg(ih,kx).catch(n=>console.error(n));
